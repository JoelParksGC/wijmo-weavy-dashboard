/*! For license information please see 932.2d58dec9a8a7c9cf0b06.js.LICENSE.txt */
"use strict";(self.webpackChunkwijmo_weavy=self.webpackChunkwijmo_weavy||[]).push([[932,913],{483:(t,e,i)=>{i.r(e),i.d(e,{Axis:()=>B,AxisCollection:()=>z,AxisType:()=>A,ChartElement:()=>W,ChartTooltip:()=>R,ChartType:()=>et,DataArray:()=>nt,DataLabel:()=>N,DataLabelBase:()=>j,DataLabelRenderEventArgs:()=>L,DataPoint:()=>x,FlexChart:()=>yt,FlexChartBase:()=>M,FlexChartCore:()=>_t,FlexPie:()=>at,HitTestInfo:()=>tt,ImageFormat:()=>f,LabelPosition:()=>P,Legend:()=>C,LineMarker:()=>Pt,LineMarkerAlignment:()=>ft,LineMarkerInteraction:()=>pt,LineMarkerLines:()=>dt,Marker:()=>Q,Orientation:()=>m,OverlappingLabels:()=>k,Palettes:()=>u,PieDataLabel:()=>H,PieLabelPosition:()=>T,PlotArea:()=>d,PlotAreaCollection:()=>p,Position:()=>g,RenderEventArgs:()=>S,SelectionMode:()=>_,Series:()=>st,SeriesBase:()=>ot,SeriesEventArgs:()=>rt,SeriesRenderingEventArgs:()=>E,SeriesVisibility:()=>$,Stacking:()=>it,SvgRenderEngine:()=>w,TickMark:()=>O,_AreaPlotter:()=>bt,_BarPlotter:()=>vt,_BasePlotter:()=>ut,_BubblePlotter:()=>Mt,_CircleArea:()=>X,_DataInfo:()=>mt,_DataPoint:()=>K,_DonutSegment:()=>ct,_FinancePlotter:()=>xt,_FunnelPlotter:()=>wt,_FunnelSegment:()=>Ct,_HitResult:()=>J,_HitTester:()=>Z,_KeyWords:()=>I,_LinePlotter:()=>Tt,_LinesArea:()=>q,_MeasureOption:()=>V,_PieSegment:()=>ht,_RectArea:()=>U,_Spline:()=>c,_SvgRenderEngine:()=>b,_VolumeHelper:()=>h});var n,r,o,s=i(664),a=i(483),l=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),h=function(){function t(t,e,i,n,r){this._volumes=(0,s.asArray)(t),this._xVals=(0,s.asArray)(e),this._xDataMin=(0,s.asNumber)(i,!0,!1),this._xDataMax=(0,s.asNumber)(n,!0,!1),this._xDataType=(0,s.asEnum)(r,s.DataType,!0),this._calcData=[],this._init()}return t.prototype.convert=function(e,i,n){var r=void 0,o=this._calcData.length,a=-1;if(this._hasXs&&this._xDataType===s.DataType.Date){if(-1===(a=this._xVals.indexOf(e)))for(var l=0;l<this._xVals.length;l++){if(l<this._xVals.length-1&&this._xVals[l]<=e&&e<=this._xVals[l+1]){a=l;break}if(0===l&&e<=this._xVals[l]){a=l;break}if(l===this._xVals.length-1&&this._xVals[l]<=e){a=l;break}}-1===a&&(a=this._xVals.indexOf(Math.floor(e)),a=(0,s.clamp)(a,0,o-1))}else this._hasXs?-1===(a=this._xVals.indexOf(e))&&(a=this._xVals.indexOf(Math.floor(e)),a=(0,s.clamp)(a,0,o-1)):a=(0,s.clamp)(Math.round(e),0,o-1);return 0<=a&&a<o&&(this._hasXs&&(e=t.convertToRange(e,0,o-1,this._xDataMin,this._xDataMax)),r=((r=this._calcData[a].value+(e-a)*this._calcData[a].width-.5*this._calcData[a].width)-(i=this._getXVolume(i)))/((n=this._getXVolume(n))-i)),r},t.prototype.convertBack=function(e,i,n){var r,o=void 0,s=this._calcData.length,a=-1;for(r=0;r<s;r++)if(this._calcData[r].x1<=e&&e<=this._calcData[r].x2||0===r&&e<=this._calcData[r].x2||r===s-1&&this._calcData[r].x1<=e){a=r;break}return 0<=a&&a<s&&(o=e/this._calcData[a].width-this._calcData[a].value/this._calcData[a].width+.5+r,this._hasXs&&(o=t.convertToRange(o,this._xDataMin,this._xDataMax,0,s-1))),o},t.prototype._init=function(){this._hasXs=null!==this._xVals&&this._xVals.length>0,this._hasXs&&!(0,s.isNumber)(this._xDataMin)&&(this._xDataMin=Math.min.apply(null,this._xVals)),this._hasXs&&!(0,s.isNumber)(this._xDataMax)&&(this._xDataMax=Math.max.apply(null,this._xVals)),this._hasXs&&(this._hasXs=(0,s.isNumber)(this._xDataMin)&&(0,s.isNumber)(this._xDataMax)),this._hasXs&&this._xDataType===s.DataType.Date&&this._fillGaps();var t=0,e=0,i=null!==this._volumes&&this._volumes.length>0?this._volumes.length:0;for(e=0;e<i;e++)t+=this._volumes[e]||0;var n,r,o=0;for(e=0;e<i;e++)n=o+(r=(this._volumes[e]||0)/t),this._calcData.push({value:n,width:r,x1:o,x2:n}),o=this._calcData[e].value},t.prototype._getXVolume=function(e){var i=this._calcData.length,n=-1;if(this._hasXs){n=this._xVals.indexOf(e);for(var r=0;r<this._xVals.length;r++){if(r<this._xVals.length-1&&this._xVals[r]<=e&&e<=this._xVals[r+1]){n=r;break}if(0===r&&e<=this._xVals[r]){n=r;break}if(r===this._xVals.length-1&&this._xVals[r]<=e){n=r;break}}}return this._hasXs&&(e=t.convertToRange(e,0,i-1,this._xDataMin,this._xDataMax)),-1===n&&(n=(0,s.clamp)(Math.round(e),0,i-1)),this._calcData[n].value+(e-n)*this._calcData[n].width-.5*this._calcData[n].width},t.convertToRange=function(t,e,i,n,r){return e===i||n===r?0:(t-n)*(i-e)/(r-n)+e},t.prototype._fillGaps=function(){if(!(this._xDataType!==s.DataType.Date||null===this._xVals||this._xVals.length<=0)){var t,e=this._xDataMin,i=this._xDataMax;for(t=1;e<i;t++)(e=new Date(e)).setDate(e.getDate()+1),(e=e.valueOf())!==this._xVals[t]&&(this._xVals.splice(t,0,e),this._volumes.splice(t,0,0))}},t}(),c=function(){function t(t,e,i){this.k=.002,this._a=[],this._b=[],this._c=[],this._d=[],this.m=[[-.5,1.5,-1.5,.5],[1,-2.5,2,-.5],[-.5,0,.5,0],[0,1,0,0]],this._x=t,this._y=e;var n=this._len=i||Math.min(t.length,e.length);if(n>3)for(var r=0;r<n-1;r++){var o=0==r?new s.Point(t[r],e[r]):new s.Point(t[r-1],e[r-1]),a=new s.Point(t[r],e[r]),l=new s.Point(t[r+1],e[r+1]),h=r==n-2?new s.Point(t[r+1],e[r+1]):new s.Point(t[r+2],e[r+2]),c=new s.Point,u=new s.Point,d=new s.Point,p=new s.Point;c.x=o.x*this.m[0][0]+a.x*this.m[0][1]+l.x*this.m[0][2]+h.x*this.m[0][3],u.x=o.x*this.m[1][0]+a.x*this.m[1][1]+l.x*this.m[1][2]+h.x*this.m[1][3],d.x=o.x*this.m[2][0]+a.x*this.m[2][1]+l.x*this.m[2][2]+h.x*this.m[2][3],p.x=o.x*this.m[3][0]+a.x*this.m[3][1]+l.x*this.m[3][2]+h.x*this.m[3][3],c.y=o.y*this.m[0][0]+a.y*this.m[0][1]+l.y*this.m[0][2]+h.y*this.m[0][3],u.y=o.y*this.m[1][0]+a.y*this.m[1][1]+l.y*this.m[1][2]+h.y*this.m[1][3],d.y=o.y*this.m[2][0]+a.y*this.m[2][1]+l.y*this.m[2][2]+h.y*this.m[2][3],p.y=o.y*this.m[3][0]+a.y*this.m[3][1]+l.y*this.m[3][2]+h.y*this.m[3][3],this._a.push(c),this._b.push(u),this._c.push(d),this._d.push(p)}}return t.prototype.calculatePoint=function(t){var e=Math.floor(t);e<0&&(e=0),e>this._len-2&&(e=this._len-2);var i=t-e;return{x:((this._a[e].x*i+this._b[e].x)*i+this._c[e].x)*i+this._d[e].x,y:((this._a[e].y*i+this._b[e].y)*i+this._c[e].y)*i+this._d[e].y}},t.prototype.calculate=function(){if(this._len<=3)return{xs:this._x,ys:this._y};var t=[],e=[],i=this.calculatePoint(0);t.push(i.x),e.push(i.y);for(var n=this._len*this.k,r=n;r<=this._len-1;r+=n){var o=this.calculatePoint(r);(Math.abs(i.x-o.x)>=3||Math.abs(i.y-o.y)>=3)&&(t.push(o.x),e.push(o.y),i=o)}return{xs:t,ys:e}},t}(),u=function(){function t(){}return t._isExtended=function(e){return-1!==this._values(t.Diverging).indexOf(e)||-1!==this._values(t.Qualitative).indexOf(e)||-1!==this._values(t.SequentialSingle).indexOf(e)||-1!==this._values(t.SequentialMulti).indexOf(e)},t._values=function(t){return Object.keys(t).map((function(e){return t[e]}))},t.standard=["#88bde6","#fbb258","#90cd97","#f6aac9","#bfa554","#bc99c7","#eddd46","#f07e6e","#8c8c8c"],t.cocoa=["#466bb0","#c8b422","#14886e","#b54836","#6e5944","#8b3872","#73b22b","#b87320","#141414"],t.coral=["#84d0e0","#f48256","#95c78c","#efa5d6","#ba8452","#ab95c2","#ede9d0","#e96b7d","#888888"],t.dark=["#005fad","#f06400","#009330","#e400b1","#b65800","#6a279c","#d5a211","#dc0127","#000000"],t.highcontrast=["#ff82b0","#0dda2c","#0021ab","#bcf28c","#19c23b","#890d3a","#607efd","#1b7700","#000000"],t.light=["#ddca9a","#778deb","#cb9fbb","#b5eae2","#7270be","#a6c7a7","#9e95c7","#95b0c7","#9b9b9b"],t.midnight=["#83aaca","#e37849","#14a46a","#e097da","#a26d54","#a584b7","#d89c54","#e86996","#2c343b"],t.modern=["#2d9fc7","#ec993c","#89c235","#e377a4","#a68931","#a672a6","#d0c041","#e35855","#68706a"],t.organic=["#9c88d9","#a3d767","#8ec3c0","#e9c3a9","#91ab36","#d4ccc0","#61bbd8","#e2d76f","#80715a"],t.slate=["#7493cd","#f99820","#71b486","#e4a491","#cb883b","#ae83a4","#bacc5c","#e5746a","#505d65"],t.zen=["#7bb5ae","#e2d287","#92b8da","#eac4cb","#7b8bbd","#c7d189","#b9a0c8","#dfb397","#a9a9a9"],t.cyborg=["#2a9fd6","#77b300","#9933cc","#ff8800","#cc0000","#00cca3","#3d6dcc","#525252","#000000"],t.superhero=["#5cb85c","#f0ad4e","#5bc0de","#d9534f","#9f5bde","#46db8c","#b6b86e","#4e5d6c","#2b3e4b"],t.flatly=["#18bc9c","#3498db","#f39c12","#6cc1be","#99a549","#8f54b5","#e74c3c","#8a9899","#2c3e50"],t.darkly=["#375a7f","#00bc8c","#3498db","#f39c12","#e74c3c","#8f61b3","#b08725","#4a4949","#000000"],t.cerulan=["#033e76","#87c048","#59822c","#53b3eb","#fc6506","#d42323","#e3bb00","#cccccc","#222222"],t.Qualitative={Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5"]},t.Diverging={BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"]},t.SequentialSingle={Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"]},t.SequentialMulti={BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"]},t}(),d=function(){function t(t){this._row=0,this._col=0,this._rect=new s.Rect(0,0,0,0),(0,s.copy)(this,t)}return Object.defineProperty(t.prototype,"row",{get:function(){return this._row},set:function(t){t!=this._row&&(this._row=(0,s.asInt)(t,!0,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"column",{get:function(){return this._col},set:function(t){t!=this._col&&(this._col=(0,s.asInt)(t,!0,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this._name},set:function(t){t!=this._name&&(this._name=(0,s.asString)(t,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._width},set:function(t){t!=this._width&&(this._width=t,this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(t){t!=this._height&&(this._height=t,this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"style",{get:function(){return this._style},set:function(t){t!=this._style&&(this._style=t,this._invalidate())},enumerable:!0,configurable:!0}),t.prototype._invalidate=function(){this._chart&&this._chart.invalidate()},t.prototype._render=function(t){t.drawRect(this._rect.left,this._rect.top,this._rect.width,this._rect.height,null,this.style)},t.prototype._setPlotX=function(t,e){this._rect.left=t,this._rect.width=e},t.prototype._setPlotY=function(t,e){this._rect.top=t,this._rect.height=e},t}(),p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e.prototype.getPlotArea=function(t){var e=this.indexOf(t);return e>-1?this[e]:null},e.prototype.indexOf=function(t){for(var e=0;e<this.length;e++)if(this[e].name==t)return e;return-1},e.prototype._getWidth=function(t){for(var e=0;e<this.length;e++){var i=this[e];if(i.column==t&&0==i.row)return i.width}},e.prototype._getHeight=function(t){for(var e=0;e<this.length;e++){var i=this[e];if(i.row==t&&0==i.column)return i.height}},e.prototype._calculateWidths=function(t,e){if(e<=0)throw"ncols";for(var i=[],n=0;n<e;n++){var r=this._getWidth(n);i[n]=new y(r)}return this._calculateLengths(t,e,i)},e.prototype._calculateHeights=function(t,e){if(e<=0)throw"nrows";for(var i=[],n=0;n<e;n++){var r=this._getHeight(n);i[n]=new y(r)}return this._calculateLengths(t,e,i)},e.prototype._calculateLengths=function(t,e,i){for(var n=[e],r=0,o=0,s=0;s<e;s++)i[s].isAbsolute?(n[s]=i[s].value,r+=n[s]):i[s].isStar?o+=i[s].value:i[s].isAuto&&o++;var a=(t-r)/o;for(s=0;s<e;s++)i[s].isStar?n[s]=a*i[s].value:i[s].isAuto&&(n[s]=a),n[s]<0&&(n[s]=0);return n},e}(s.ObservableArray);(o=r||(r={}))[o.Auto=0]="Auto",o[o.Pixel=1]="Pixel",o[o.Star=2]="Star";var f,_,g,m,y=function(){function t(t){void 0===t&&(t=null),this._unitType=r.Auto,t&&((t=t.toString()).indexOf("*")>=0?(this._unitType=r.Star,t=t.replace("*",""),this._value=parseFloat(t),isNaN(this._value)&&(this._value=1)):(this._unitType=r.Pixel,this._value=parseFloat(t),isNaN(this._value)&&(this._unitType=r.Auto,this._value=1)))}return Object.defineProperty(t.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isStar",{get:function(){return this._unitType==r.Star},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isAbsolute",{get:function(){return this._unitType==r.Pixel},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isAuto",{get:function(){return this._unitType==r.Auto},enumerable:!0,configurable:!0}),t}(),b=function(){function t(e){this._strokeWidth=1,this._fontSize=null,this._fontFamily=null,this._savedGradient={},this._bbCache={},this._baseUrl="",this._cssPriority=!0,this._readOnly=!1,this._isRtl=!1,this._precision=1,this._element=e,this._create(),this._element&&this._element.appendChild(this._svg);var i=navigator.userAgent.toLowerCase();void 0===t._isff&&(t._isff=i.indexOf("firefox")>=0),void 0===t._isSafari&&(t._isSafari=i.indexOf("safari")>-1&&-1==i.indexOf("chrome")),this._baseUrl=window.location.pathname.replace(window.location.hash,""),"file:"==window.location.protocol&&((0,s.isIE)()||(0,s.isEdge)())&&(this._baseUrl="file:"+this._baseUrl)}return t.prototype.attach=function(t){this._element=t,t&&(t.insertBefore(this._svg,t.childNodes[0]),t.appendChild(this._svg))},t.prototype.detach=function(){for(this._element&&this._element.removeChild(this._svg);this._svg.firstChild;)(0,s.removeChild)(this._svg.firstChild)},t.prototype.beginRender=function(){for(;this._svg.firstChild;)(0,s.removeChild)(this._svg.firstChild);this._savedGradient={},this._bbCache={},this._svg.appendChild(this._defs),this._svg.appendChild(this._textGroup),this._isRtl=this._checkRtl()},t.prototype.endRender=function(){(0,s.removeChild)(this._textGroup)},t.prototype.setViewportSize=function(t,e){this._svg.setAttribute("width",t.toString()),this._svg.setAttribute("height",e.toString())},Object.defineProperty(t.prototype,"element",{get:function(){return this._svg},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fill",{get:function(){return this._fill},set:function(t){this._fill=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontSize",{get:function(){return this._fontSize},set:function(t){this._fontSize=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(t){this._fontFamily=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"stroke",{get:function(){return this._stroke},set:function(t){this._stroke=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"strokeWidth",{get:function(){return this._strokeWidth},set:function(t){this._strokeWidth=void 0===t?null:t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"textFill",{get:function(){return this._textFill},set:function(t){this._textFill=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cssPriority",{get:function(){return this._cssPriority},set:function(t){this._cssPriority=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"readOnly",{get:function(){return this._readOnly},set:function(t){this._readOnly=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"precision",{get:function(){return this._precision},set:function(t){this._precision=(0,s.asNumber)(t)},enumerable:!0,configurable:!0}),t.prototype.addClipRect=function(e,i){if(e&&i){var n=this.precision,r=document.createElementNS(t.svgNS,"clipPath"),o=document.createElementNS(t.svgNS,"rect");o.setAttribute("x",(e.left-1).toFixed(n)),o.setAttribute("y",(e.top-1).toFixed(n)),o.setAttribute("width",(e.width+2).toFixed(n)),o.setAttribute("height",(e.height+2).toFixed(n)),r.appendChild(o),r.setAttribute("id",i),this._svg.appendChild(r)}},t.prototype.drawEllipse=function(e,i,n,r,o,s){var a=document.createElementNS(t.svgNS,"ellipse"),l=this.precision;return this._applyColor(a,"stroke",this._stroke),null!==this._strokeWidth&&this._setAttribute(a,"stroke-width",this._strokeWidth.toString()),this._applyColor(a,"fill",this._fill),a.setAttribute("cx",e.toFixed(l)),a.setAttribute("cy",i.toFixed(l)),a.setAttribute("rx",n.toFixed(l)),a.setAttribute("ry",r.toFixed(l)),o&&a.setAttribute("class",o),this._applyStyle(a,s),this._appendChild(a),a},t.prototype.drawRect=function(e,i,n,r,o,s,a){var l=document.createElementNS(t.svgNS,"rect"),h=this.precision;return this._applyColor(l,"fill",this._fill),this._applyColor(l,"stroke",this._stroke),null!==this._strokeWidth&&this._setAttribute(l,"stroke-width",this._strokeWidth.toString()),l.setAttribute("x",e.toFixed(h)),l.setAttribute("y",i.toFixed(h)),n>0&&n<.05?l.setAttribute("width","0.1"):l.setAttribute("width",n.toFixed(h)),r>0&&r<.05?l.setAttribute("height","0.1"):l.setAttribute("height",r.toFixed(h)),a&&this._setClipPath(l,a),o&&l.setAttribute("class",o),this._applyStyle(l,s),this._appendChild(l),l},t.prototype.drawLine=function(e,i,n,r,o,s){var a=document.createElementNS(t.svgNS,"line"),l=this.precision;return this._applyColor(a,"stroke",this._stroke),null!==this._strokeWidth&&this._setAttribute(a,"stroke-width",this._strokeWidth.toString()),a.setAttribute("x1",e.toFixed(l)),a.setAttribute("x2",n.toFixed(l)),a.setAttribute("y1",i.toFixed(l)),a.setAttribute("y2",r.toFixed(l)),o&&a.setAttribute("class",o),this._applyStyle(a,s),this._appendChild(a),a},t.prototype.drawLines=function(e,i,n,r,o,s){if(e&&i){var a=s||Math.min(e.length,i.length);if(a>0){var l=document.createElementNS(t.svgNS,"polyline"),h=this.precision;this._applyColor(l,"stroke",this._stroke),null!==this._strokeWidth&&this._setAttribute(l,"stroke-width",this._strokeWidth.toString()),l.setAttribute("fill","none");for(var c="",u=0;u<a;u++)c+=e[u].toFixed(h)+","+i[u].toFixed(h)+" ";return l.setAttribute("points",c),n&&l.setAttribute("class",n),o&&this._setClipPath(l,o),this._applyStyle(l,r),this._appendChild(l),l}}return null},t.prototype.drawSplines=function(e,i,n,r,o,s){if(e&&i){var a=new c(e,i,s).calculate(),l=a.xs,h=a.ys,u=Math.min(l.length,h.length);if(u>0){var d=document.createElementNS(t.svgNS,"polyline"),p=this.precision;this._applyColor(d,"stroke",this._stroke),null!==this._strokeWidth&&this._setAttribute(d,"stroke-width",this._strokeWidth.toString()),d.setAttribute("fill","none");for(var f="",_=0;_<u;_++)f+=l[_].toFixed(p)+","+h[_].toFixed(p)+" ";return d.setAttribute("points",f),n&&d.setAttribute("class",n),o&&this._setClipPath(d,o),this._applyStyle(d,r),this._appendChild(d),d}}return null},t.prototype.drawPolygon=function(e,i,n,r,o){if(e&&i){var s=Math.min(e.length,i.length);if(s>0){var a=document.createElementNS(t.svgNS,"polygon"),l=this.precision;this._applyColor(a,"stroke",this._stroke),null!==this._strokeWidth&&this._setAttribute(a,"stroke-width",this._strokeWidth.toString()),this._applyColor(a,"fill",this._fill);for(var h="",c=0;c<s;c++)h+=e[c].toFixed(l)+","+i[c].toFixed(l)+" ";return a.setAttribute("points",h),n&&a.setAttribute("class",n),o&&this._setClipPath(a,o),this._applyStyle(a,r),this._appendChild(a),a}}return null},t.prototype.drawPieSegment=function(e,i,n,r,o,a,l,h){if(o>=2*Math.PI)return this.drawEllipse(e,i,n,n,a,l);var c=document.createElementNS(t.svgNS,"path"),u=this.precision;this._applyColor(c,"fill",this._fill),this._applyColor(c,"stroke",this._stroke),null!==this._strokeWidth&&this._setAttribute(c,"stroke-width",this._strokeWidth.toString());var d=new s.Point(e,i);d.x+=n*Math.cos(r),d.y+=n*Math.sin(r);var p=r+o,f=new s.Point(e,i);f.x+=n*Math.cos(p),f.y+=n*Math.sin(p);var _=" 0 0,1 ";Math.abs(o)>Math.PI&&(_=" 0 1,1 ");var g="M "+d.x.toFixed(u)+","+d.y.toFixed(u);return g+=" A "+n.toFixed(u)+","+n.toFixed(u)+_,g+=f.x.toFixed(u)+","+f.y.toFixed(u),g+=" L "+e.toFixed(u)+","+i.toFixed(u)+" z",c.setAttribute("d",g),h&&this._setClipPath(c,h),a&&c.setAttribute("class",a),this._applyStyle(c,l),this._appendChild(c),c},t.prototype.drawDonutSegment=function(e,i,n,r,o,a,l,h,c){var u=!1;a>=2*Math.PI&&(u=!0,a-=.001);var d=document.createElementNS(t.svgNS,"path"),p=this.precision+2;this._applyColor(d,"fill",this._fill),this._applyColor(d,"stroke",this._stroke),null!==this._strokeWidth&&this._setAttribute(d,"stroke-width",this._strokeWidth.toString());var f=new s.Point(e,i);f.x+=n*Math.cos(o),f.y+=n*Math.sin(o);var _=o+a,g=new s.Point(e,i);g.x+=n*Math.cos(_),g.y+=n*Math.sin(_);var m=new s.Point(e,i);m.x+=r*Math.cos(_),m.y+=r*Math.sin(_);var y=new s.Point(e,i);y.x+=r*Math.cos(o),y.y+=r*Math.sin(o);var b=" 0 0,1 ",v=" 0 0,0 ";Math.abs(a)>Math.PI&&(b=" 0 1,1 ",v=" 0 1,0 ");var w="M "+f.x.toFixed(p)+","+f.y.toFixed(p);return w+=" A "+n.toFixed(p)+","+n.toFixed(p)+b,w+=g.x.toFixed(p)+","+g.y.toFixed(p),w+=u?" M "+m.x.toFixed(p)+","+m.y.toFixed(p):" L "+m.x.toFixed(p)+","+m.y.toFixed(p),w+=" A "+r.toFixed(p)+","+r.toFixed(p)+v,w+=y.x.toFixed(p)+","+y.y.toFixed(p),u||(w+=" z"),d.setAttribute("d",w),c&&this._setClipPath(d,c),l&&d.setAttribute("class",l),this._applyStyle(d,h),this._appendChild(d),d},t.prototype.drawString=function(t,e,i,n){var r=this._createText(e,t),o=this.precision;i&&r.setAttribute("class",i),this._applyStyle(r,n),this._appendChild(r);var a,l=this._getKey(t,i,this._groupCls);return this._bbCache[l]?(a=this._bbCache[l],r.setAttribute("y",(e.y-(a.y+a.height)).toFixed(o))):(a=this._getBBox(r),r.setAttribute("y",(e.y-(a.y+a.height-e.y)).toFixed(o))),this._isRtl&&!(0,s.isIE)()&&r.setAttribute("x",(e.x+a.width).toFixed(o)),r},t.prototype.drawStringRotated=function(e,i,n,r,o,a){var l=this._createText(i,e),h=this.precision;o&&l.setAttribute("class",o),this._applyStyle(l,a);var c=document.createElementNS(t.svgNS,"g");c.setAttribute("transform","rotate("+r.toFixed(h)+","+n.x.toFixed(h)+","+n.y.toFixed(h)+")"),c.appendChild(l),this._appendChild(c);var u=this._getBBox(l);return l.setAttribute("y",(i.y-(u.y+u.height-i.y)).toFixed(h)),this._isRtl&&!(0,s.isIE)()&&l.setAttribute("x",(i.x+u.width).toFixed(h)),l},t.prototype.measureString=function(t,e,i,n){var r=new s.Size(0,0);if(!this._fontFamily&&!this._fontSize){var o=this._getKey(t,e,i);if(this._bbCache[o])return this._bbCache[o]}if(this.cssPriority)this._fontSize&&this._text.setAttribute("font-size",this._fontSize),this._fontFamily&&this._text.setAttribute("font-family",this._fontFamily);else{var a="";this._fontSize&&(a+="font-size:"+this._fontSize+";"),this._fontFamily&&(a+="font-family:"+this._fontFamily+";"),a.length>0&&this._text.setAttribute("style",a)}e&&this._text.setAttribute("class",e),i&&this._textGroup.setAttribute("class",i),this._applyStyle(this._text,n),this._setText(this._text,t);var l=this._getBBox(this._text);if(r.width=l.width,r.height=l.height,this._text.removeAttribute("font-size"),this._text.removeAttribute("font-family"),this._text.removeAttribute("class"),this._text.removeAttribute("style"),n)for(var h in n)this._text.removeAttribute(this._deCase(h));if(this._textGroup.removeAttribute("class"),this._text.textContent=null,!this._fontFamily&&!this._fontSize){var c=this._getKey(t,e,i);this._bbCache[c]={x:l.x,y:l.y+1e3,width:l.width,height:l.height}}return r},t.prototype.startGroup=function(e,i,n){void 0===n&&(n=!1);var r=document.createElementNS(t.svgNS,"g");return e&&(r.setAttribute("class",e),this._groupCls=e),i&&this._setClipPath(r,i),this._appendChild(r),n&&r.transform.baseVal.appendItem(this._svg.createSVGTransform()),this._group=r,r},t.prototype.endGroup=function(){if(this._group){var t=this._group.parentNode;t==this._svg?(this._group=null,this._groupCls=null):(this._group=t,this._groupCls=this._getClass(this._group))}},t.prototype.drawImage=function(e,i,n,r,o){var s=document.createElementNS(t.svgNS,"image"),a=this.precision;return s.setAttributeNS(t.xlinkNS,"href",e),s.setAttribute("x",i.toFixed(a)),s.setAttribute("y",n.toFixed(a)),s.setAttribute("width",r.toFixed(a)),s.setAttribute("height",o.toFixed(a)),this._appendChild(s),s},t.prototype._setClipPath=function(e,i){e.setAttribute("clip-path","url(#"+i+")"),t._isSafari&&(0,s.setCss)(e,{"-webkit-clip-path":"url(#"+i+")"})},t.prototype._appendChild=function(t){if(!this.readOnly){var e=this._group;e||(e=this._svg),e.appendChild(t)}},t.prototype._create=function(){this._svg=document.createElementNS(t.svgNS,"svg"),this._defs=document.createElementNS(t.svgNS,"defs"),this._svg.appendChild(this._defs),this._text=this._createText(new s.Point(-1e3,-1e3),""),this._textGroup=document.createElementNS(t.svgNS,"g"),this._textGroup.appendChild(this._text),this._svg.appendChild(this._textGroup)},t.prototype._setText=function(t,e){var i=e?e.toString():null;if(i&&i.indexOf("tspan")>=0)try{t.textContent=null;for(var n=new DOMParser,r='<svg xmlns="http://www.w3.org/2000/svg">'+i+"</svg>",o=n.parseFromString(r,"text/xml").documentElement.firstChild;o;)t.appendChild(t.ownerDocument.importNode(o,!0)),o=o.nextSibling}catch(t){throw new Error("Error parsing XML string.")}else t.textContent=i},t.prototype._getKey=function(t,e,i){return t+(e||"")+(i||"")},t.prototype._createText=function(e,i){var n=document.createElementNS(t.svgNS,"text"),r=this.precision;if(this._setText(n,i),n.setAttribute("x",e.x.toFixed(r)),n.setAttribute("y",e.y.toFixed(r)),this.cssPriority)null!=this._textFill&&n.setAttribute("fill",this._textFill),this._fontSize&&n.setAttribute("font-size",this._fontSize),this._fontFamily&&n.setAttribute("font-family",this._fontFamily);else{var o="";null!=this._textFill&&(o+="fill:"+this._textFill+";"),this._fontSize&&(o+="font-size:"+this._fontSize+";"),this._fontFamily&&(o+="font-family:"+this._fontFamily+";"),o.length>0&&n.setAttribute("style",o)}return n},t.prototype._applyStyle=function(t,e){if(e)for(var i in e)"fill"===i||"stroke"===i?this._applyColor(t,i,e[i]):t.setAttribute(this._deCase(i),e[i])},t.prototype._deCase=function(t){return t.replace(/[A-Z]/g,(function(t){return"-"+t.toLowerCase()}))},t.prototype._getClass=function(t){var e;if(t)for(var i=t;i&&!(e=i.getAttribute("class"));i=i.parentNode);return e},t.prototype._getBBox=function(e){if(!t._isff)return e.getBBox();try{return e.getBBox()}catch(e){return{x:0,y:0,width:0,height:0}}},t.prototype._applyColor=function(e,i,n){var r=v.tryParse(n);if(null!=r){if(!(0,s.isString)(r)){if(null==this._savedGradient[n]){var o,a="gc"+(1e6*Math.random()).toFixed();null!=r.x1?(o=document.createElementNS(t.svgNS,"linearGradient"),["x1","y1","x2","y2","gradientUnits"].forEach((function(t){null!=r[t]&&o.setAttribute(t,r[t])}))):null!=r.r&&(o=document.createElementNS(t.svgNS,"radialGradient"),["cx","cy","r","fx","fy","fr","gradientUnits"].forEach((function(t){null!=r[t]&&o.setAttribute(t,r[t])}))),r.colors&&r.colors&&r.colors.length>0&&r.colors.forEach((function(e){var i=document.createElementNS(t.svgNS,"stop");null!=e.color&&i.setAttribute("stop-color",e.color),null!=e.offset&&i.setAttribute("offset",e.offset),null!=e.opacity&&i.setAttribute("stop-opacity",e.opacity),o.appendChild(i)})),o.setAttribute("id",a),this._defs.appendChild(o),this._savedGradient[n]=a}r="url("+this._baseUrl+"#"+this._savedGradient[n]+")"}this.cssPriority?e.setAttribute(i,r):this._addInlineStyle(e,i,r)}},t.prototype._addInlineStyle=function(t,e,i){var n=t.getAttribute("style");n?t.setAttribute("style",n+e+":"+i+";"):t.setAttribute("style",e+":"+i+";")},t.prototype._setAttribute=function(t,e,i){this.cssPriority?t.setAttribute(e,i):this._addInlineStyle(t,e,i)},t.prototype._checkRtl=function(){return this._element&&(0,s.hasClass)(this._element,"wj-rtl")},t.svgNS="http://www.w3.org/2000/svg",t.xlinkNS="http://www.w3.org/1999/xlink",t}(),v=function(){function t(){}return t.tryParse=function(e){if(t.parsedColor[e])return t.parsedColor[e];if(null==e||-1===e.indexOf("-")||-1!==e.indexOf("var("))return e;var i,n=e.replace(/\s+/g,"").split(/\-/g),r=n[0][0],o=!1,s=n[0].match(/\(\S+\)/);if(!s||0==s.length)return e;var a=s[0].replace(/[\(\\)]/g,"").split(/\,/g);"l"===r||"L"===r?(i={x1:"0",y1:"0",x2:"0",y2:"0",colors:[]},"l"===r&&(o=!0),["x1","y1","x2","y2"].forEach((function(t,e){null!=a[e]&&(i[t]=o?100*+a[e]+"%":a[e]+"")}))):"r"!==r&&"R"!==r||(i={cx:"0",cy:"0",r:"0",colors:[]},"r"===r&&(o=!0),["cx","cy","r","fx","fy","fr"].forEach((function(t,e){null!=a[e]&&""!==a[e]&&(i[t]=o?100*+a[e]+"%":a[e]+"")}))),o||(i.gradientUnits="userSpaceOnUse"),t.parsedColor[e]=i;var l=n.length-1;return n.forEach((function(t,e){t.indexOf(")")>-1&&(t=t.match(/\)\S+/)[0].replace(")",""));var n=t.split(":"),r={color:"black"};null!=n[0]&&(r.color=n[0]),null!=n[1]?r.offset=o?100*+n[1]+"%":n[1]+"":r.offset=e/l*100+"%",null!=n[2]&&(r.opacity=n[2]),i.colors.push(r)})),i},t.parsedColor={},t}(),w=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e}(b),C=function(){function t(t){this._position=g.Right,this._title="",this._titleAlign="left",this._titlePadding=5,this._areas=new Array,this._sz=new s.Size,this._colRowLens=[],this._orient=m.Auto,this._chart=t}return Object.defineProperty(t.prototype,"position",{get:function(){return this._position},set:function(t){(t=(0,s.asEnum)(t,g))!=this._position&&(this._position=t,this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"title",{get:function(){return this._title},set:function(t){t!=this._title&&(this._title=(0,s.asString)(t,!1),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"titleAlign",{get:function(){return this._titleAlign},set:function(t){if(t!=this._titleAlign){var e=(0,s.asString)(t,!1);this._titleAlign="right"===e?"right":"center"===e?"center":"left",this._invalidate()}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"orientation",{get:function(){return this._orient},set:function(t){(t=(0,s.asEnum)(t,m))!=this._orient&&(this._orient=t,this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxSize",{get:function(){return this._maxSz},set:function(t){if(t!=this._maxSz){if((0,s.isNumber)(t))this._maxSz=t;else if((0,s.isString)(t)){var e=(0,s.asString)(t);(0,s.assert)(M._endsWith(e,"px")||M._endsWith(e,"%"),"number with unit (px or %) expected."),this._maxSz=e}else t&&(0,s.assert)(!1,"number or string expected.");this._invalidate()}},enumerable:!0,configurable:!0}),t.prototype._getDesiredSize=function(t,e,i,n){if(e==g.None)return null;var r=this.orientation==m.Auto?e==g.Right||e==g.Left:this.orientation==m.Vertical,o=this._chart._getDesiredLegendSize(t,r,i,n);if(null!=o){if(this.title.length>0){var s=t.measureString(this.title,"wj-title","wj-legend");o.height+=s.height+this._titlePadding,s.width>o.width&&(o.width=s.width)}this._sz=o}return o},t.prototype._getPosition=function(t,e){return this.position==g.Auto?t>=e?g.Right:g.Bottom:this.position},t.prototype._render=function(t,e,i,n,r){this._areas=[];var o=this.orientation==m.Auto?i==g.Right||i==g.Left:this.orientation==m.Vertical;if(t.fill="transparent",t.stroke=null,t.drawRect(e.x,e.y,this._sz.width,this._sz.height),this.title.length){var s=e.clone(),a=t.measureString(this.title,"wj-title`");s.y+=a.height,"right"===this.titleAlign?s.x=e.x+n-a.width:"center"===this.titleAlign&&(s.x=e.x+.5*(n-a.width)),t.drawString(this.title,s,"wj-title");var l=a.height+this._titlePadding;e.y+=l,r-=l}this._chart._renderLegend(t,e,this._areas,o,n,r)},t.prototype._hitTest=function(t){for(var e=this._areas,i=0;i<e.length;i++)if(e[i]&&M._contains(e[i],t))return i;return null},t.prototype._invalidate=function(){this._chart&&this._chart.invalidate()},t.prototype._getMaxSize=function(t){var e=this.maxSize;if((0,s.isNumber)(e)){if((n=(0,s.asNumber)(e,!0))>0)return Math.min(n,t)}else{var i=(0,s.asString)(e,!0);if(i)if(M._endsWith(i,"px")){if((n=parseFloat(i.replace("px","")))>0)return Math.min(n,t)}else if(M._endsWith(i,"%")){var n;if((n=parseFloat(i.replace("%","")))>0)return t*Math.min(n,100)/100}}return.5*t},t}(),x=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e},S=function(t){function e(e){var i=t.call(this)||this;return i._engine=e,i}return l(e,t),Object.defineProperty(e.prototype,"engine",{get:function(){return this._engine},enumerable:!0,configurable:!0}),e}(s.CancelEventArgs),E=function(t){function e(e,i,n){var r=t.call(this,e)||this;return r._index=i,r._count=n,r}return l(e,t),Object.defineProperty(e.prototype,"index",{get:function(){return this._index},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"count",{get:function(){return this._count},enumerable:!0,configurable:!0}),e}(S);!function(t){t[t.Png=0]="Png",t[t.Jpeg=1]="Jpeg",t[t.Svg=2]="Svg"}(f||(f={})),function(t){t[t.None=0]="None",t[t.Series=1]="Series",t[t.Point=2]="Point"}(_||(_={})),function(t){t[t.None=0]="None",t[t.Left=1]="Left",t[t.Top=2]="Top",t[t.Right=3]="Right",t[t.Bottom=4]="Bottom",t[t.Auto=5]="Auto"}(g||(g={})),function(t){t[t.Auto=0]="Auto",t[t.Vertical=1]="Vertical",t[t.Horizontal=2]="Horizontal"}(m||(m={}));var P,T,M=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._palette=null,e._selectionMode=_.None,e._defPalette=u.standard,e._notifyCurrentChanged=!0,e._legendHost=null,e._needBind=!1,e._skipLightClr=!1,e.rendering=new s.Event,e.rendered=new s.Event,e.itemsSourceChanging=new s.Event,e.itemsSourceChanged=new s.Event,e.selectionChanged=new s.Event,e}return l(e,t),Object.defineProperty(e.prototype,"itemsSource",{get:function(){return this._items},set:function(t){if(this._items!=t){var e=new s.CancelEventArgs;if(!this.onItemsSourceChanging(e))return;this._cv&&(this._cv.currentChanged.removeHandler(this._cvCurrentChanged,this),this._cv.collectionChanged.removeHandler(this._cvCollectionChanged,this),this._cv=null),this._items=t,this._cv=(0,s.asCollectionView)(t),null!=this._cv&&(this._cv.currentChanged.addHandler(this._cvCurrentChanged,this),this._cv.collectionChanged.addHandler(this._cvCollectionChanged,this)),this._clearCachedValues(),this.onItemsSourceChanged(e),this._bindChart()}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"collectionView",{get:function(){return this._cv},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"palette",{get:function(){return this._palette},set:function(t){t!=this._palette&&(this._palette=(0,s.asArray)(t),this._skipLightClr=u._isExtended(this._palette),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"plotMargin",{get:function(){return this._plotMargin},set:function(t){t!=this._plotMargin&&(this._plotMargin=t,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"legend",{get:function(){return this._legend},set:function(t){t!=this._legend&&(this._legend=(0,s.asType)(t,C),null!=this._legend&&(this._legend._chart=this))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"header",{get:function(){return this._header},set:function(t){t!=this._header&&(this._header=(0,s.asString)(t,!0),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"footer",{get:function(){return this._footer},set:function(t){t!=this._footer&&(this._footer=(0,s.asString)(t,!0),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"headerStyle",{get:function(){return this._headerStyle},set:function(t){t!=this._headerStyle&&(this._headerStyle=t,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"footerStyle",{get:function(){return this._footerStyle},set:function(t){t!=this._footerStyle&&(this._footerStyle=t,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectionMode",{get:function(){return this._selectionMode},set:function(t){(t=(0,s.asEnum)(t,_))!=this._selectionMode&&(this._selectionMode=t,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemFormatter",{get:function(){return this._itemFormatter},set:function(t){t!=this._itemFormatter&&(this._itemFormatter=(0,s.asFunction)(t),this.invalidate())},enumerable:!0,configurable:!0}),e.prototype.onRendering=function(t){this.rendering.raise(this,t)},e.prototype.onRendered=function(t){this.rendered.raise(this,t)},e.prototype.onItemsSourceChanging=function(t){return this.itemsSourceChanging.raise(this,t),!t.cancel},e.prototype.onItemsSourceChanged=function(t){this.itemsSourceChanged.raise(this,t)},e.prototype.saveImageToFile=function(t){var e,i,n,r;t&&0!==t.length&&-1!==t.indexOf(".")||(t="image.png"),r=t.split("."),e=r[0],i=r[1].toLowerCase(),n=f[i[0].toUpperCase()+i.substring(1)],this.saveImageToDataUrl(n,(function(t){D.downloadImage(t,e,i)}))},e.prototype.saveImageToDataUrl=function(t,e){var i=(0,s.asEnum)(t,f,!1),n=f[i].toLowerCase();n&&n.length&&this._exportToImage(n,(function(t){e.call(e,t)}))},e.prototype._exportToImage=function(t,e){var i,n=this,r=new Image,o=this._currentRenderEngine.element;i=D.getDataUri(o,this),"svg"===t?e.call(null,i):(r.onload=function(){var i,a=document.createElement("canvas"),l=o.parentNode||o,h=(0,s.getElementRect)(l);a.width=h.width,a.height=h.height;var c=a.getContext("2d"),u=n._bgColor(n.hostElement);n._isTransparent(u)&&(u="#ffffff"),c.fillStyle=u,c.fillRect(0,0,h.width,h.height);var d=window.getComputedStyle(l,null).getPropertyValue("padding-left").replace("px",""),p=window.getComputedStyle(l,null).getPropertyValue("padding-top").replace("px","");c.drawImage(r,+d||0,+p||0),i=a.toDataURL("image/"+t),e.call(null,i),a=null},r.src=i)},e.prototype.refresh=function(e){void 0===e&&(e=!0),t.prototype.refresh.call(this,e),this.isUpdating||this._refreshChart()},e.prototype.onSelectionChanged=function(t){this.selectionChanged.raise(this,t)},e.prototype.onLostFocus=function(e){this._tooltip&&this._tooltip.isVisible&&this._tooltip.hide(),t.prototype.onLostFocus.call(this,e)},e.prototype._cvCollectionChanged=function(t,e){this._clearCachedValues(),this._bindChart()},e.prototype._cvCurrentChanged=function(t,e){this._notifyCurrentChanged&&this._bindChart()},e.prototype._bgColor=function(t){if(!t)return"transparent";var e=getComputedStyle(t).backgroundColor;return this._isTransparent(e)?this._bgColor(t.parentElement):e},e.prototype._isTransparent=function(t){var e=new s.Color(t);return 0==e.a&&0==e.b&&0==e.g&&0==e.r},e.prototype._getColor=function(t){var e=this._defPalette;return null!=this._palette&&this._palette.length>0&&(e=this._palette),e[t%e.length]},e.prototype._getColorLight=function(t){var e=this._getColor(t);return this._skipLightClr||(e=this._getLightColor(e)),e},e.prototype._getLightColor=function(t){var e=new s.Color(t);return null!=e&&-1===t.indexOf("-")&&(1==e.a&&-1==t.indexOf("rgba")&&-1==t.indexOf("hsla")&&(e.a*=.7),t=e.toString()),t},e.prototype._bindChart=function(){this._needBind=!0,this.invalidate()},e.prototype._clearCachedValues=function(){},e.prototype._renderEls=function(t,i,n,r,o){void 0===n&&(n=!0),void 0===r&&(r=null),void 0===o&&(o=!1);var a=i.width,l=i.height;if(0!=a){(isNaN(a)||a<0)&&(a=e._WIDTH),(l<=0||isNaN(l))&&(l=e._HEIGHT);var h=a>0&&l>0;if(h&&t.setViewportSize(a,l),t.beginRender(),t.cssPriority=!0,h){if(this._rectChart=new s.Rect(0,0,a,l),this._prepareRender(),r){var c=t.stroke,u=t.fill;t.fill=r,t.stroke=null,t.drawRect(0,0,a,l),t.fill=u,t.stroke=c}var d=new s.Rect(0,0,a,l);this._chartRectId="chartRect"+(1e6*Math.random()).toFixed(),t.addClipRect(d,this._chartRectId),this._renderHeader(t,d),this._renderFooter(t,d),this._renderLegends(t,d),this._renderChart(t,d,n)}t.endRender()}},e.prototype._render=function(t,e,i){void 0===e&&(e=!0),void 0===i&&(i=null);var n=this._getHostSize();if(this._h){var r=n.height-this._h;r>=4&&r<=6&&!1!==this._isPCUnit("height")&&(n.height=this._h)}this._h=n.height,this._renderEls(t,n,e,i)},e.prototype._isPCUnit=function(t){var e=null,i=this.hostElement;if(i&&i.computedStyleMap){var n=i.computedStyleMap();if(n){var r=n.get(t);r&&(e="percent"==r.unit)}}return e},e.prototype._renderHidden=function(t,i){void 0===t&&(t=null),void 0===i&&(i=null);var n=document.createElement("div");(0,s.addClass)(n,this.hostElement.getAttribute("class")||""),n.style.visibility="hidden";var r=new b(n);if(document.body.appendChild(n),!t){var o=this._getHostComputedStyle(),a=0,l=0;o&&(a=this._parsePx(o.width),l=this._parsePx(o.height),0==a&&(a=e._WIDTH),0==l&&(l=e._HEIGHT),a-=this._parsePx(o.paddingLeft),a-=this._parsePx(o.paddingRight),l-=this._parsePx(o.paddingTop),l-=this._parsePx(o.paddingBottom),a-=this._parsePx(o.borderLeftWidth),a-=this._parsePx(o.borderRightWidth),l-=this._parsePx(o.borderTopWidth),l-=this._parsePx(o.borderBottomWidth)),0==a&&(a=e._WIDTH),0==l&&(l=e._HEIGHT),t=new s.Size(a,l)}return this._renderEls(r,t,!0,i,!0),(0,s.removeChild)(n),r.element},e.prototype._renderHeader=function(t,i){t.startGroup(e._CSS_HEADER,this._chartRectId),i=this._drawTitle(t,i,this.header,this.headerStyle,!1),t.endGroup()},e.prototype._renderFooter=function(t,i){t.startGroup(e._CSS_FOOTER,this._chartRectId),i=this._drawTitle(t,i,this.footer,this.footerStyle,!0),t.endGroup()},e.prototype._renderLegends=function(t,i){var n,r,o=this.legend,a=i.width,l=i.height,h=o._getPosition(a,l);switch(n=o._getDesiredSize(t,h,a,l),h){case g.Right:a-=n.width,r=new s.Point(a,i.top+.5*(l-n.height));break;case g.Left:i.left+=n.width,a-=n.width,r=new s.Point(0,i.top+.5*(l-n.height));break;case g.Top:l-=n.height,r=new s.Point(.5*(a-n.width),i.top),i.top+=n.height;break;case g.Bottom:l-=n.height,r=new s.Point(.5*(a-n.width),i.top+l)}if(i.width=a,i.height=l,n){this._rectLegend=new s.Rect(r.x,r.y,n.width,n.height);var c="legRect"+(1e6*Math.random()).toFixed();t.addClipRect(this._rectLegend,c),this._legendHost=t.startGroup(e._CSS_LEGEND,c),this.legend._render(t,r,h,n.width,n.height),t.endGroup()}else this._legendHost=null,this._rectLegend=null},e.prototype._prepareRender=function(){},e.prototype._renderChart=function(t,e,i){},e.prototype._performBind=function(){},e.prototype._getDesiredLegendSize=function(t,e,i,n){return null},e.prototype._renderLegend=function(t,e,i,n,r,o){},e.prototype._getHitTestItem=function(t){return null},e.prototype._getHitTestValue=function(t,e){return null},e.prototype._getHitTestLabel=function(t){return null},e.prototype._refreshChart=function(){this._needBind&&(this._needBind=!1,this._performBind()),this.hostElement&&this._render(this._currentRenderEngine)},e.prototype._drawTitle=function(t,i,n,r,o){var a=e._CSS_TITLE,l=o?e._CSS_FOOTER:e._CSS_HEADER,h=null;if(o?this._rectFooter=null:this._rectHeader=null,null!=n){var c=null,u=null,d=null,p=null;r&&(r.fontSize&&(c=r.fontSize),r.foreground&&(u=r.foreground),r.fill&&(u=r.fill),r.fontFamily&&(d=r.fontFamily),r.halign&&(p=r.halign)),t.fontSize=c,t.fontFamily=d,h=t.measureString(n,a,l,r),i.height-=h.height,u||(u=e._FG),t.textFill=u,o?("left"==p?e._renderText(t,n,new s.Point(i.left,i.bottom),0,0,a,l,r):"right"==p?e._renderText(t,n,new s.Point(i.left+i.width,i.bottom),2,0,a,l,r):e._renderText(t,n,new s.Point(i.left+.5*i.width,i.bottom),1,0,a,l,r),this._rectFooter=new s.Rect(i.left,i.bottom,i.width,h.height)):(this._rectHeader=new s.Rect(i.left,i.top,i.width,h.height),i.top+=h.height,"left"==p?e._renderText(t,n,new s.Point(i.left,0),0,0,a,l,r):"right"==p?e._renderText(t,n,new s.Point(i.left+i.width,0),2,0,a,l,r):e._renderText(t,n,new s.Point(i.left+.5*i.width,0),1,0,a,l,r)),t.textFill=null,t.fontSize=null,t.fontFamily=null}return i},e.prototype.pageToControl=function(t,e){return this._toControl(t,e)},e.prototype._toControl=function(t,e){(0,s.isNumber)(t)&&(0,s.isNumber)(e)?t=new s.Point(t,e):t instanceof MouseEvent&&(t=(0,s.mouseToPage)(t)),(0,s.asType)(t,s.Point);var i=t.clone(),n=this._getHostOffset();i.x-=n.x,i.y-=n.y;var r=this._currentRenderEngine?this._currentRenderEngine.element:null;if(null!=r){var o=r.getBoundingClientRect(),a=parseFloat(r.getAttribute("width")),l=parseFloat(r.getAttribute("height"));o.width!=a&&(i.x*=a/o.width),o.height!=l&&(i.y*=l/o.height)}var h=this._getHostComputedStyle();if(h){var c=parseInt(h.paddingLeft.replace("px",""));c&&!isNaN(c)&&(i.x-=c);var u=parseInt(h.paddingTop.replace("px",""));u&&!isNaN(u)&&(i.y-=u)}return i},e.prototype._highlightItems=function(t,e,i){if(i)for(var n=0;n<t.length;n++)(0,s.addClass)(t[n],e);else for(n=0;n<t.length;n++)(0,s.removeClass)(t[n],e)},e.prototype._parseMargin=function(t){var e={};if((0,s.isNumber)(t)&&!isNaN(t))e.top=e.bottom=e.left=e.right=(0,s.asNumber)(t);else if((0,s.isString)(t)){var i=(0,s.asString)(t).split(" ",4),n=NaN,r=NaN,o=NaN,a=NaN;i&&(4==i.length?(n=parseFloat(i[0]),a=parseFloat(i[1]),r=parseFloat(i[2]),o=parseFloat(i[3])):2==i.length?(n=r=parseFloat(i[0]),o=a=parseFloat(i[1])):1==i.length&&(n=r=o=a=parseFloat(i[1])),isNaN(n)||(e.top=n),isNaN(r)||(e.bottom=r),isNaN(o)||(e.left=o),isNaN(a)||(e.right=a))}return e},e.prototype._showToolTip=function(t,e){var i=this,n=this._tooltip.showDelay;i._clearTimeouts(),i.isDisabled||(t||i._tooltip.hide(),n>0?i._toShow=setTimeout((function(){i._tooltip.show(i.hostElement,t,e),i._tooltip.hideDelay>0&&(i._toHide=setTimeout((function(){i._tooltip.hide()}),i._tooltip.hideDelay))}),n):(i._tooltip.show(i.hostElement,t,e),i._tooltip.hideDelay>0&&(i._toHide=setTimeout((function(){i._tooltip.hide()}),i._tooltip.hideDelay))))},e.prototype._hideToolTip=function(){this._clearTimeouts(),this._tooltip.hide()},e.prototype._clearTimeouts=function(){this._toShow&&(clearTimeout(this._toShow),this._toShow=null),this._toHide&&(clearTimeout(this._toHide),this._toHide=null)},e.prototype._getHostOffset=function(){var t=(0,s.getElementRect)(this.hostElement);return new s.Point(t.left,t.top)},e.prototype._getHostSize=function(){var t=new s.Size,e=this.hostElement,i=this._getHostComputedStyle(),n=e.offsetWidth,r=e.offsetHeight;return i&&(n-=this._parsePx(i.paddingLeft),n-=this._parsePx(i.paddingRight),r-=this._parsePx(i.paddingTop),r-=this._parsePx(i.paddingBottom),n-=this._parsePx(i.borderLeftWidth),n-=this._parsePx(i.borderRightWidth),r-=this._parsePx(i.borderTopWidth),r-=this._parsePx(i.borderBottomWidth),t.width=n,t.height=r),t},e.prototype._parsePx=function(t){var e=parseFloat(t.replace("px",""));return isNaN(e)?0:e},e.prototype._getHostComputedStyle=function(){var t=this.hostElement;return t&&t.ownerDocument&&t.ownerDocument.defaultView?t.ownerDocument.defaultView.getComputedStyle(this.hostElement):null},e.prototype._find=function(t,e){for(var i=[],n=0;n<t.childElementCount;n++){var r=t.childNodes.item(n);if(e.indexOf(r.nodeName)>=0)i.push(r);else{var o=this._find(r,e);if(o.length>0)for(var s=0;s<o.length;s++)i.push(o[s])}}return i},e.prototype._getLegendSize=function(t,e){return Math.min(e,this.legend._getMaxSize(t))},e._contains=function(t,e){return!(!t||!e)&&e.x>=t.left&&e.x<=t.right&&e.y>=t.top&&e.y<=t.bottom},e._intersects=function(t,e){return!(t.left>e.right||t.right<e.left||t.top>e.bottom||t.bottom<e.top)},e._toOADate=function(t){return t.valueOf()},e._fromOADate=function(t){return new Date(t)},e._renderText=function(t,e,i,n,r,o,a,l,h){var c=t.measureString(e,o,a,l),u=i.x,d=i.y;switch(n){case 1:u-=.5*c.width;break;case 2:u-=c.width}switch(r){case 1:d+=.5*c.height;break;case 0:d+=c.height}var p=new s.Rect(u,d-c.height,c.width,c.height);return h?h(p)?(t.drawString(e,new s.Point(u,d),o,l),p):null:(t.drawString(e,new s.Point(u,d),o,l),p)},e._renderRotatedText=function(t,e,i,n,r,o,a,l,h,c){var u=t.measureString(e,l,h,c),d=i.x,p=i.y;switch(n){case 1:d-=.5*u.width;break;case 2:d-=u.width}switch(r){case 1:p+=.5*u.height;break;case 0:p+=u.height}return t.drawStringRotated(e,new s.Point(d,p),o,a,l,c)},e._endsWith=function(t,e){if(t&&e){var i=t.length-e.length;return i>=0&&t.indexOf(e,i)===i}return!1},e._WIDTH=300,e._HEIGHT=200,e._SELECTION_THRESHOLD=15,e._CSS_LEGEND="wj-legend",e._CSS_HEADER="wj-header",e._CSS_FOOTER="wj-footer",e._CSS_TITLE="wj-title",e._CSS_LABEL="wj-label",e._CSS_SELECTION="wj-state-selected",e._CSS_PLOT_AREA="wj-plot-area",e._FG="#666",e._epoch=new Date(1899,11,30).getTime(),e._msPerDay=864e5,e}(s.Control),I=function(){function t(){this._keys={},this._keys.seriesName=null,this._keys.pointIndex=null,this._keys.x=null,this._keys.y=null,this._keys.value=null,this._keys.name=null}return t.prototype.replace=function(t,e){var i=this;return(0,s.format)(t,{},(function(t,n,r,o){return i.getValue(n,e,r)}))},t.prototype.getValue=function(t,e,i){switch(t){case"seriesName":return e.series?e.series.name:"";case"pointIndex":return null!=e.pointIndex?e.pointIndex.toFixed():"";case"x":return i?s.Globalize.format(e.x,i):e._xfmt;case"y":return i?s.Globalize.format(e.y,i):e._yfmt;case"value":return i?s.Globalize.format(e.value,i):e._getValueFmt();case"name":return e.name}if(e.item){0==t.indexOf("item.")&&(t=t.substr(5));var n=e.item[t];if(!(0,s.isUndefined)(n))return i?s.Globalize.format(n,i):n}return""},t}(),D=function(){function t(){}return t.downloadImage=function(t,e,i){var n=document.createElement("a"),r="image/"+i;if(navigator.msSaveOrOpenBlob){t=t.substring(t.indexOf(",")+1);var o,a,l,h=atob(t),c=[];for(o=0;o<h.length;o+=512){a=h.slice(o,o+512);for(var u=new Array(a.length),d=0;d<a.length;d++)u[d]=a.charCodeAt(d);var p=new Uint8Array(u);c.push(p)}l=new Blob(c,{type:r}),navigator.msSaveOrOpenBlob(l,e+"."+i)}else n.download=e+"."+i,n.href=t,document.body.appendChild(n),n.addEventListener("click",(function(t){(0,s.removeChild)(n)})),n.click()},t.getDataUri=function(e,i){var n,r,o,a,l,h,c,u,d,p,f=document.createElement("div"),_=e.cloneNode(!0),g=!1;if("svg"==e.tagName?(r=(n=(0,s.getElementRect)(e.parentNode||e)).width||0,o=n.height||0,0==r&&(g=!0),a=e.viewBox.baseVal&&0!==e.viewBox.baseVal.width?e.viewBox.baseVal.width:r,l=e.viewBox.baseVal&&0!==e.viewBox.baseVal.height?e.viewBox.baseVal.height:o):(r=(h=e.getBBox()).x+h.width,o=h.y+h.height,_.setAttribute("transform",_.getAttribute("transform").replace(/translate\(.*?\)/,"")),a=r,l=o,(u=document.createElementNS("http://www.w3.org/2000/svg","svg")).appendChild(_),_=u),g){var m=i._renderHidden(),y=i._getHostComputedStyle(),b=0,v=0;y&&(b=i._parsePx(y.width),v=i._parsePx(y.height)),0==b&&(b=M._WIDTH),0==v&&(v=M._HEIGHT),a=r=b,l=o=v,_=m.cloneNode(!0)}_.setAttribute("version","1.1"),_.setAttributeNS(t.xmlns,"xmlns","http://www.w3.org/2000/svg"),_.setAttributeNS(t.xmlns,"xmlns:xlink","http://www.w3.org/1999/xlink"),_.setAttribute("width",r),_.setAttribute("height",o),_.setAttribute("viewBox","0 0 "+a+" "+l),(0,s.addClass)(_,e.parentNode&&e.parentNode.getAttribute("class")||""),f.appendChild(_),c=t.getStyles(e),c+=".wj-flexchart{margin:0px;padding:0px;border:none;width:"+r+"px;height:"+o+"px;}\n",(d=document.createElement("style")).setAttribute("type","text/css"),d.innerHTML="<![CDATA[\n"+c+"\n]]>",(p=document.createElement("defs")).appendChild(d),_.insertBefore(p,_.firstChild),(0,s.isIE)()||_.querySelectorAll("foreignObject").forEach((function(t){_.removeChild(t)}));var w=i._currentRenderEngine.canvas;if(w){var C=document.createElementNS("http://www.w3.org/2000/svg","image");C.setAttribute("width",w.width),C.setAttribute("height",w.height),C.setAttribute("href",w.toDataURL()),_.insertBefore(C,_.firstChild),i.invalidate()}return"data:image/svg+xml;base64,"+window.btoa(window.unescape(encodeURIComponent(t.doctype+f.innerHTML)))},t.getStyles=function(t){var e="",i=document.styleSheets;return null==i||0===i.length?null:([].forEach.call(i,(function(i){var n;try{if(null==i.cssRules||0===i.cssRules.length)return!0}catch(t){if("SecurityError"==t.name)return console.log("SecurityError. Can't read: "+i.href),!0}n=i.cssRules,[].forEach.call(n,(function(i){var n,r=i.style;if(null==r)return!0;try{n=".wj-flexchart"==i.selectorText||t.querySelector(i.selectorText)}catch(t){console.warn('Invalid CSS selector "'+i.selectorText+'"',t)}n?e+=i.selectorText+" { "+r.cssText+" }\n":i.cssText.match(/^@font-face/)&&(e+=i.cssText+"\n")}))})),e)},t.doctype='<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">',t.xmlns="http://www.w3.org/2000/xmlns/",t}(),R=function(t){function e(){var e=t.call(this)||this;return e._content="<b>{seriesName}</b><br/>{x} {y}",e._threshold=15,e}return l(e,t),Object.defineProperty(e.prototype,"content",{get:function(){return this._content},set:function(t){t!=this._content&&(this._content=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"threshold",{get:function(){return this._threshold},set:function(t){t!=this._threshold&&(this._threshold=(0,s.asNumber)(t))},enumerable:!0,configurable:!0}),e.prototype.show=function(i,n,r){t.prototype.show.call(this,i,n,r);var o=e._eTip;o&&o.style&&(o.style.pointerEvents="none")},e}(s.Tooltip);!function(t){t[t.None=0]="None",t[t.Left=1]="Left",t[t.Top=2]="Top",t[t.Right=3]="Right",t[t.Bottom=4]="Bottom",t[t.Center=5]="Center"}(P||(P={})),function(t){t[t.None=0]="None",t[t.Inside=1]="Inside",t[t.Center=2]="Center",t[t.Outside=3]="Outside",t[t.Radial=4]="Radial",t[t.Circular=5]="Circular"}(T||(T={}));var A,k,O,L=function(t){function e(e,i,n,r){var o=t.call(this,e)||this;return o.cancel=!1,o._ht=i,o._pt=n,o._text=r,o}return l(e,t),Object.defineProperty(e.prototype,"point",{get:function(){return this._pt},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){this._text=(0,s.asString)(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hitTestInfo",{get:function(){return this._ht},enumerable:!0,configurable:!0}),e}(S),j=function(){function t(){this.rendering=new s.Event}return Object.defineProperty(t.prototype,"content",{get:function(){return this._content},set:function(t){t!=this._content&&(this._content=t,this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"border",{get:function(){return this._bdr},set:function(t){t!=this._bdr&&(this._bdr=(0,s.asBoolean)(t,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"offset",{get:function(){return this._off},set:function(t){t!=this._off&&(this._off=(0,s.asNumber)(t,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"connectingLine",{get:function(){return this._line},set:function(t){t!=this._line&&(this._line=(0,s.asBoolean)(t,!0),this._invalidate())},enumerable:!0,configurable:!0}),t.prototype.onRendering=function(t){return this.rendering.raise(this,t),!t.cancel},t.prototype._invalidate=function(){this._chart&&this._chart.invalidate()},t}(),N=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._pos=P.Top,e}return l(e,t),Object.defineProperty(e.prototype,"position",{get:function(){return this._pos},set:function(t){(t=(0,s.asEnum)(t,P))!=this._pos&&(this._pos=t,this._invalidate())},enumerable:!0,configurable:!0}),e}(j),H=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._pos=T.Center,e}return l(e,t),Object.defineProperty(e.prototype,"position",{get:function(){return this._pos},set:function(t){(t=(0,s.asEnum)(t,T))!=this._pos&&(this._pos=t,this._invalidate())},enumerable:!0,configurable:!0}),e}(j);!function(t){t[t.X=0]="X",t[t.Y=1]="Y"}(A||(A={})),function(t){t[t.Auto=0]="Auto",t[t.Show=1]="Show"}(k||(k={})),function(t){t[t.None=0]="None",t[t.Outside=1]="Outside",t[t.Inside=2]="Inside",t[t.Cross=3]="Cross"}(O||(O={}));var F,B=function(){function t(e){this._GRIDLINE_WIDTH=1,this._LINE_WIDTH=1,this._TICK_WIDTH=1,this._TICK_HEIGHT=4,this._TICK_OVERLAP=1,this._TICK_LABEL_DISTANCE=4,this._minorGrid=!1,this._labels=!0,this._isTimeAxis=!1,this._labelPadding=5,this._actualLabels=[],this.rangeChanged=new s.Event,this._customConvert=null,this._customConvertBack=null,this.__uniqueId=t._id++,this._position=e,e==g.Bottom||e==g.Top?this._axisType=A.X:this._axisType=A.Y,this._minorTickMarks=O.None,this._overlap=k.Auto}return Object.defineProperty(t.prototype,"hostElement",{get:function(){return this._hostElement},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"actualMin",{get:function(){return this._isTimeAxis?new Date(this._actualMin):this._actualMin},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"actualMax",{get:function(){return this._isTimeAxis?new Date(this._actualMax):this._actualMax},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"min",{get:function(){return this._min},set:function(t){t!=this._min&&((0,s.isDate)(t)?this._min=(0,s.asDate)(t,!0):this._min=(0,s.asNumber)(t,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"max",{get:function(){return this._max},set:function(t){t!=this._max&&((0,s.isDate)(t)?this._max=(0,s.asDate)(t,!0):this._max=(0,s.asNumber)(t,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"reversed",{get:function(){return this._reversed},set:function(t){this._reversed!=t&&(this._reversed=(0,s.asBoolean)(t),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){return this._position},set:function(t){(t=(0,s.asEnum)(t,g,!1))!=this._position&&(this._position=t,this._position==g.Bottom||this._position==g.Top?this._axisType=A.X:this._position!=g.Left&&this._position!=g.Right||(this._axisType=A.Y),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"majorUnit",{get:function(){return this._majorUnit},set:function(t){t!=this._majorUnit&&(this._majorUnit=(0,s.asNumber)(t,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minorUnit",{get:function(){return this._minorUnit},set:function(t){t!=this._minorUnit&&(this._minorUnit=(0,s.asNumber)(t,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this._name},set:function(t){t!=this._name&&(this._name=(0,s.asString)(t,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"title",{get:function(){return this._title},set:function(t){t!=this._title&&(this._title=(0,s.asString)(t,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"format",{get:function(){return this._format},set:function(t){t!=this._format&&(this._format=(0,s.asString)(t,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"majorGrid",{get:function(){return this._majorGrid},set:function(t){t!=this._majorGrid&&(this._majorGrid=(0,s.asBoolean)(t,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"majorTickMarks",{get:function(){return this._majorTickMarks},set:function(t){(t=(0,s.asEnum)(t,O,!0))!=this._majorTickMarks&&(this._majorTickMarks=t,this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minorGrid",{get:function(){return this._minorGrid},set:function(t){t!=this._minorGrid&&(this._minorGrid=(0,s.asBoolean)(t,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minorTickMarks",{get:function(){return this._minorTickMarks},set:function(t){(t=(0,s.asEnum)(t,O,!0))!=this._minorTickMarks&&(this._minorTickMarks=t,this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"axisLine",{get:function(){return void 0===this._axisLine?this.axisType==A.X:this._axisLine},set:function(t){t!=this._axisLine&&(this._axisLine=(0,s.asBoolean)(t,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"labels",{get:function(){return this._labels},set:function(t){t!=this._labels&&(this._labels=(0,s.asBoolean)(t,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"labelAlign",{get:function(){return this._labelAlign},set:function(t){t!=this._labelAlign&&(this._labelAlign=(0,s.asString)(t,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"labelAngle",{get:function(){return this._labelAngle},set:function(t){t!=this._labelAngle&&(this._labelAngle=(0,s.asNumber)(t,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"origin",{get:function(){return this._origin},set:function(t){t!=this._origin&&(this._origin=(0,s.asNumber)(t,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"overlappingLabels",{get:function(){return this._overlap},set:function(t){(t=(0,s.asEnum)(t,k,!0))!=this._overlap&&(this._overlap=t,this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"itemsSource",{get:function(){return this._items},set:function(t){this._items!=t&&(this._cv&&(this._cv.collectionChanged.removeHandler(this._cvCollectionChanged,this),this._cv=null),this._items=t,this._cv=(0,s.asCollectionView)(t),null!=this._cv&&this._cv.collectionChanged.addHandler(this._cvCollectionChanged,this))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"binding",{get:function(){return this._binding},set:function(t){t!=this._binding&&(this._binding=(0,s.asString)(t,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"itemFormatter",{get:function(){return this._ifmt},set:function(t){this._ifmt!=t&&(this._ifmt=(0,s.asFunction)(t,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"logBase",{get:function(){return this._logBase},set:function(t){t!=this._logBase&&(this._logBase=(0,s.asNumber)(t,!0,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"axisLabels",{get:function(){return this._actualLabels},enumerable:!0,configurable:!0}),t.prototype._getLogBase=function(){return this._chart&&this._chart._stacking===it.Stacked100pc?0:this.logBase},t.prototype._isLogAxis=function(){var t=this._getLogBase();return null!=t&&t>0},Object.defineProperty(t.prototype,"plotArea",{get:function(){return this._parea},set:function(t){t!=this._parea&&(this._parea=(0,s.asType)(t,d,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"labelPadding",{get:function(){return this._labelPadding},set:function(t){t!=this._labelPadding&&(this._labelPadding=(0,s.asNumber)(t,!0,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_groupClass",{get:function(){return this.axisType===A.X?_t._CSS_AXIS_X:_t._CSS_AXIS_Y},enumerable:!0,configurable:!0}),t.prototype.onRangeChanged=function(t){this.rangeChanged.raise(this,t)},t.prototype._getPosition=function(){if(this.axisType==A.X){if(this.position==g.Auto)return g.Bottom}else if(this.axisType==A.Y&&this.position==g.Auto)return g.Left;return this.position},t.prototype._isOverlapped=function(t,e,i,n){var r=this._lbls;if(null!=r&&r.length>1)for(var o=r.length,s=this._values&&this._values.length==o?this._values:null,a=0,l=0,h=0;h<o;h++){var c=s?s[h]:h;if(c>=this._actualMin&&c<=this._actualMax){var u=e*(c-this._actualMin)/(this._actualMax-this._actualMin),d=t.measureString(r[h],i,this._groupClass);if(this.axisType==A.X){if(h>0&&Math.abs(u-a)<.5*(d.width+l))return!0;a=u,l=d.width}else this.axisType,A.Y}}return!1},t.prototype._getHeight=function(t,e){this._actualAngle=null;var i=_t._CSS_LABEL,n=_t._CSS_TITLE,r=.1*(this._actualMax-this._actualMin),o=this._lbls,a=this.labelAngle;if(this.labels&&this._chart._getChartType()!==et.Funnel){if(r=this._updateAutoFormat(r),null!=o&&o.length>0){var l=o.length,h=this._values&&this._values.length==l?this._values:null;this._annoSize=new s.Size;for(var c=0;c<l;c++)if((_=h?h[c]:c)>=this._actualMin&&_<=this._actualMax){var u=o[c],d=i;this.itemFormatter&&(u=(f=this._getFormattedItem(t,_,u,new s.Point,i,!0)).text,d=f.cls);var p=t.measureString(u,d,this._groupClass);this.axisType,A.X,p.width>this._annoSize.width&&(this._annoSize.width=p.width),p.height>this._annoSize.height&&(this._annoSize.height=p.height)}null==a&&this.axisType==A.X&&(this._isOverlapped(t,Math.max(10,e-this._annoSize.width),i,this.axisType)?a=this._actualAngle=-45:this._actualAngle=0)}else{var f,_=this._actualMin-r;u=this._formatValue(_),d=i,this.itemFormatter&&(u=(f=this._getFormattedItem(t,_,u,new s.Point,i,!0)).text,d=i),p=t.measureString(u,d,this._groupClass),this._annoSize=p,_=this._actualMax+r,u=this._formatValue(_),d=i,this.itemFormatter&&(u=(f=this._getFormattedItem(t,_,u,new s.Point,i,!0)).text,d=i),(p=t.measureString(u,d,this._groupClass)).width>this._annoSize.width&&(this._annoSize.width=p.width),p.height>this._annoSize.height&&(this._annoSize.height=p.height)}if(a){a>90?a=90:a<-90&&(a=-90);var g=a*Math.PI/180,m=this._annoSize.width,y=this._annoSize.height;this._annoSize.width=m*Math.abs(Math.cos(g))+y*Math.abs(Math.sin(g)),this._annoSize.height=m*Math.abs(Math.sin(g))+y*Math.abs(Math.cos(g))}}else this._annoSize=new s.Size(8,8);var b=2*(this._labelPadding||5);this._axisType==A.X?b+=this._annoSize.height:b+=this._annoSize.width+this._TICK_LABEL_DISTANCE+2;var v=this._TICK_HEIGHT,w=this._TICK_OVERLAP,C=this.majorTickMarks;return C==O.Outside?w=1:C==O.Inside?w=-1:C==O.Cross&&(w=0),null==C&&(C=O.Outside),C!=O.None&&(b+=.5*(1+w)*v),this._title&&(u=this._title,this._szTitle=t.measureString(u,n,this._groupClass),b+=this._szTitle.height),t.fontSize=null,b},t.prototype._updateAutoFormat=function(t){if(this._isTimeAxis){var e=this.format,i=.001*this._getActualRange()/10,n=new G(i*G.TicksPerSecond),r=(0,s.isNumber)(this._majorUnit)?G.fromDays(this._majorUnit):Y.NiceTimeSpan(n,e);e||(this._tfmt=Y.GetTimeDefaultFormat(1e3*r.TotalSeconds,0)),t=r.TotalSeconds}return t},t.prototype._getActualRange=function(){return this._actualMax-this._actualMin},t.prototype._updateActualLimitsByChartType=function(t,e,i){if(t&&t.length>0&&!this._isTimeAxis){var n=this._chart._getChartType();n!=et.Column&&n!=et.Bar&&(e-=.5,i+=.5)}return{min:e,max:i}},t.prototype._updateActualLimits=function(t,e,i,n,r){void 0===n&&(n=null),void 0===r&&(r=null);var o=this._actualMin,a=this._actualMax;this._isTimeAxis=t==s.DataType.Date;var l=this._updateActualLimitsByChartType(n,e,i);e=l.min,i=l.max;var h=this._min,c=this._max;(0,s.isDate)(h)&&(h=h.valueOf()),(0,s.isDate)(c)&&(c=c.valueOf());var u=this._chart&&this._chart._stacking!==it.Stacked100pc;u||(u=this._chart._isRotated()?this.axisType==A.Y:this.axisType==A.X);var d=this._actualMin=null!=h&&u?h:e;if(d==(this._actualMax=null!=c&&u?c:i))if(void 0!==h&&void 0===c)this._actualMax+=1;else if(void 0===h&&void 0!==c)this._actualMin-=1;else if(0===d)this._actualMax=1;else{var p=Math.abs(d);p<1?(this._actualMin-=p,this._actualMax+=p):(this._actualMin-=1,this._actualMax+=1)}if(this._getLogBase()>0){var f=this.logBase,_=Math.log(f);if(!this._max){var g=Math.ceil(Math.log(this._actualMax)/_);this._actualMax=Math.pow(f,g)}if(!this._min){var m=Math.floor(Math.log(this._actualMin)/_);this._actualMin=Math.pow(f,m)}(this._actualMin<=0||!(0,s.isNumber)(this._actualMin))&&(this._actualMin=1),this._actualMax<this._actualMin?this._actualMax=this._actualMin+1:this._actualMax===this._actualMin&&(this._actualMin=.1*this._actualMax)}if((o!=this._actualMin&&((0,s.isNumber)(o)||(0,s.isNumber)(this._actualMin))||a!=this._actualMax&&((0,s.isNumber)(a)||(0,s.isNumber)(this._actualMax)))&&this.onRangeChanged(),this._items){this._values=[],this._lbls=[];var y=this._items.length,b="value",v="text";if(this.binding){var w=this.binding.split(",");2==w.length&&(b=w[0],v=w[1])}for(var C=0;C<y;C++){var x=this._items[C],S=x[b];(0,s.isNumber)(S)?(this._values.push(S),this._lbls.push(x[v])):(0,s.isDate)(S)&&(this._values.push(S.getTime()),this._lbls.push(x[v]))}}else this._lbls=n,this._values=r},t.prototype._layout=function(t,e){var i=this.axisType==A.Y;this._plotrect=e,this._axrect=i?new s.Rect(t.left,t.top,t.height,t.width):t},t.prototype._hasVisibileSeries=function(){for(var t,e=this._chart.series,i=0,n=e.length;i<n;i++)if((t=e[i].visibility)==$.Plot||t==$.Visible)return!0;return!1},t.prototype._render=function(e){if(this.position!=g.None&&this._hasVisibileSeries()){this.axisLabels.length=0,this._vals={};var i=0;this.labelAngle&&((i=this.labelAngle)>90?i=90:i<-90&&(i=-90)),null==this.labelAngle&&null!=this._actualAngle&&(i=this._actualAngle);var n=_t._FG,r=this._actualMax-this._actualMin;if((0,s.isNumber)(r)){var o=this._calcMajorUnit();0==o&&(o=.1*this._niceTickNumber(r));var a=Math.min(t.MAX_MAJOR,Math.floor(r/o)+1),l=[],h=[];this._rects=[],this._vals.major=l,this._vals.hasLbls=[];var c=Math.floor(this._actualMin/o)*o;c<this._actualMin&&(c+=o);var u=!1;if(this._lbls&&this._lbls.length>0)if(h=this._lbls,0==this._values.length){u=!0;for(var d=0;d<h.length;d++)l.push(d)}else l=this._values;else this._isTimeAxis?this._createTimeLabels(c,a,l,h):this._getLogBase()?this._createLogarithmicLabels(this._actualMin,this._actualMax,this.majorUnit,l,h,!0):this._createLabels(c,a,o,l,h);a=Math.min(l.length,h.length),e.textFill=n;var p=this._TICK_HEIGHT,f=this._TICK_OVERLAP,_=this.majorTickMarks;null==_&&(_=O.Outside),_==O.Outside?f=1:_==O.Inside?f=-1:_==O.Cross&&(f=0);var m=.5*(f-1)*p,y=.5*(1+f)*p;for(d=0;d<a;d++){var b=!0,v=l[d],w=h[d],C=this.labels;if(C&&(u||this.itemsSource)&&this.majorUnit&&d%this.majorUnit!=0&&(C=!1),v>=this._actualMin&&v<=this._actualMax){var x=e.textFill;b=this._renderLabelsAndTicks(e,d,v,w,i,_,C,m,y),e.textFill=x}this._vals.hasLbls.push(b),b&&this.axisLabels.push(w)}}(this.minorGrid||this.minorTickMarks!=O.None)&&this._renderMinor(e,l,u),e.stroke=n,e.fontSize=null,this._renderLineAndTitle(e),e.stroke=null,e.fontSize=null,e.textFill=null,e.strokeWidth=null}},t.prototype._renderLineAndTitle=function(t){var e=this._getPosition(),i=this.axisType==A.Y,n=e!=g.Top&&e!=g.Right,r=_t._CSS_TITLE,o=_t._CSS_LINE;if(i)if(n){if(this._title){var a=new s.Point(this._axrect.left+.5*this._szTitle.height,this._axrect.top+.5*this._axrect.height);_t._renderRotatedText(t,this._title,a,1,1,a,-90,r,this._groupClass)}this.axisLine&&t.drawLine(this._axrect.right,this._axrect.top,this._axrect.right,this._axrect.bottom,o)}else this._title&&(a=new s.Point(this._axrect.right-.5*this._szTitle.height,this._axrect.top+.5*this._axrect.height),_t._renderRotatedText(t,this._title,a,1,1,a,90,r,this._groupClass)),this.axisLine&&t.drawLine(this._axrect.left,this._axrect.top,this._axrect.left,this._axrect.bottom,o);else n?(this.axisLine&&t.drawLine(this._axrect.left,this._axrect.top,this._axrect.right,this._axrect.top,o),this._title&&_t._renderText(t,this._title,new s.Point(this._axrect.left+.5*this._axrect.width,this._axrect.bottom),1,2,r)):(this.axisLine&&t.drawLine(this._axrect.left,this._axrect.bottom,this._axrect.right,this._axrect.bottom,o),this._title&&_t._renderText(t,this._title,new s.Point(this._axrect.left+.5*this._axrect.width,this._axrect.top),1,0,r))},t.prototype._renderMinor=function(t,e,i){var n=this._getPosition(),r=this.axisType==A.Y,o=n!=g.Top&&n!=g.Right;if(this._getLogBase()){if(this.minorUnit>0){var s=[];this._createLogarithmicLabels(this._actualMin,this._actualMax,this.minorUnit,s,null,!1);for(var a=[],l=0;l<s.length;l++){var h=s[l];-1==e.indexOf(h)&&h>this._actualMin&&a.push(h)}this._renderMinors(t,a,r,o)}}else this._createMinors(t,e,r,o,i)},t.prototype._renderRotatedText=function(t,e,i,n,r,o,s,a,l,h,c){if(this.itemFormatter){var u=this._getFormattedItem(t,e,i,n,l);u?(i=u.text,l=u.cls):i=null}_t._renderRotatedText(t,i,n,r,o,s,a,l,h,c)},t.prototype._getFormattedItem=function(t,e,i,n,r,o){if(void 0===o&&(o=!1),this.itemFormatter){var s=n.clone();this._plotrect&&(this.axisType==A.X?this.position==g.Top?s.y=this._plotrect.top:s.y=this._plotrect.bottom:this.position==g.Right?s.x=this._plotrect.right:s.x=this._plotrect.left);var a={val:e,text:i,pos:s,cls:r};return o&&(t.readOnly=!0),a=this.itemFormatter(t,a),o&&(t.readOnly=!1),a}},t.prototype._renderLabelsAndTicks=function(t,e,i,n,r,o,a,l,h){var c=this._getPosition(),u=!1,d=this.axisType==A.Y,p=c!=g.Top&&c!=g.Right,f=this.labelPadding||5,_=this._TICK_WIDTH,m=this._getLabelAlign(d),y=_t._CSS_LABEL,b=_t._CSS_GRIDLINE,v=_t._CSS_TICK,w=_t._FG,C=_t._FG,x=this._GRIDLINE_WIDTH,S=i!=this._actualMin&&this.majorGrid;if(d){var E=this.convert(i);if(S&&(t.stroke=w,t.strokeWidth=x,t.drawLine(this._plotrect.left,E,this._plotrect.right,E,b)),t.stroke=C,t.strokeWidth=_,p){if(a){u=!0;var P=new s.Point(this._axrect.right-h-this._TICK_LABEL_DISTANCE-f,E);r>0?90==r?this._renderRotatedText(t,i,n,P,1,0,P,r,y,this._groupClass):this._renderRotatedText(t,i,n,P,2,1,P,r,y,this._groupClass):r<0?-90==r?this._renderRotatedText(t,i,n,P,1,2,P,r,y,this._groupClass):this._renderRotatedText(t,i,n,P,2,1,P,r,y,this._groupClass):u=this._renderLabel(t,i,n,P,2,m,y)}o!=O.None&&u&&t.drawLine(this._axrect.right-l,E,this._axrect.right-h,E,v)}else a&&(u=!0,P=new s.Point(this._axrect.left+h+this._TICK_LABEL_DISTANCE+f,E),r>0?90==r?this._renderRotatedText(t,i,n,P,1,2,P,r,y,this._groupClass):this._renderRotatedText(t,i,n,P,0,1,P,r,y,this._groupClass):r<0?-90==r?this._renderRotatedText(t,i,n,P,1,0,P,r,y,this._groupClass):this._renderRotatedText(t,i,n,P,0,1,P,r,y,this._groupClass):u=this._renderLabel(t,i,n,P,0,m,y)),o!=O.None&&u&&t.drawLine(this._axrect.left+l,E,this._axrect.left+h,E,v)}else{var T=this.convert(i);this.overlappingLabels==k.Auto&&this._xCross(T)&&(a=!1),S&&a&&(t.stroke=w,t.strokeWidth=x,t.drawLine(T,this._plotrect.top,T,this._plotrect.bottom,b)),t.stroke=C,t.strokeWidth=_,p?(a&&(P=new s.Point(T,this._axrect.top+h+f),u=0!=r?this._renderRotatedLabel(t,i,n,P,m,r,y,p):this._renderLabel(t,i,n,P,m,0,y)),o!=O.None&&u&&(T=this.convert(i),t.drawLine(T,this._axrect.top+l,T,this._axrect.top+h,v))):(a&&(P=new s.Point(T,this._axrect.bottom-h-f),u=0!=r?this._renderRotatedLabel(t,i,n,P,m,r,y,p):this._renderLabel(t,i,n,P,m,2,y)),o!=O.None&&u&&(T=this.convert(i),t.drawLine(T,this._axrect.bottom-l,T,this._axrect.bottom-h,v)))}return u},t.prototype._xCross=function(t){for(var e=this._rects.length,i=0;i<e;i++){var n=this._rects[i];if(t>=n.left&&t<=n.right)return!0}return!1},t.prototype._createMinors=function(e,i,n,r,o){if(i&&i.length>1){for(var a=this.majorUnit?this._isTimeAxis?24*this.majorUnit*3600*1e3:this.majorUnit:i[1]-i[0],l=(0,s.isNumber)(this.minorUnit)?this._isTimeAxis?24*this.minorUnit*3600*1e3:this.minorUnit:.5*a,h=[],c=i[0];c>this._actualMin&&h.length<t.MAX_MINOR;c-=l)-1==i.indexOf(c)&&h.push(c);for(c=i[0]+l;c<this._actualMax&&h.length<t.MAX_MINOR;c+=l)(-1==i.indexOf(c)||o&&this.majorUnit&&c%this.majorUnit!=0)&&h.push(c);this._renderMinors(e,h,n,r)}},t.prototype._renderMinors=function(t,e,i,n){var r=this._TICK_HEIGHT,o=this._TICK_WIDTH,s=this._TICK_OVERLAP,a=_t._FG,l=this.minorTickMarks,h=!0;this._vals.minor=e,l==O.Outside?s=1:l==O.Inside?s=-1:l==O.Cross?s=0:h=!1;for(var c=.5*(s-1)*r,u=.5*(1+s)*r,d=e?e.length:0,p=this.minorGrid,f=this._plotrect,_=this._GRIDLINE_WIDTH,g=_t._FG,m=_t._CSS_GRIDLINE_MINOR,y=_t._CSS_TICK_MINOR,b=0;b<d;b++)if(e[b]>=this.actualMin&&e[b]<=this.actualMax)if(i){var v=this.convert(e[b]);h&&(t.stroke=a,t.strokeWidth=o,n?t.drawLine(this._axrect.right-c,v,this._axrect.right-u,v,y):t.drawLine(this._axrect.left+c,v,this._axrect.left+u,v,y)),p&&(t.stroke=g,t.strokeWidth=_,t.drawLine(f.left,v,f.right,v,m))}else{var w=this.convert(e[b]);h&&(t.stroke=a,t.strokeWidth=o,n?t.drawLine(w,this._axrect.top+c,w,this._axrect.top+u,y):t.drawLine(w,this._axrect.bottom-c,w,this._axrect.bottom-u,y)),p&&(t.stroke=g,t.strokeWidth=_,t.drawLine(w,f.top,w,f.bottom,m))}},t.prototype._renderLabel=function(t,e,i,n,r,o,a){var l=!1;if(this.itemFormatter){var h=this._getFormattedItem(t,e,i,n,a);h?(i=h.text,a=h.cls):i=null}if(i){var c=this._rects,u=this.overlappingLabels==k.Auto&&!(0,s.isNumber)(this._actualAngle),d=_t._renderText(t,i,n,r,o,a,this._groupClass,null,(function(t){if(u)for(var e=c.length,i=0;i<e;i++)if(_t._intersects(c[i],t))return!1;return!0}));d&&(d.left+=4,d.width+=8,c.push(d),l=!0)}return l},t.prototype._renderRotatedLabel=function(t,e,i,n,r,o,a,l){if(this.itemFormatter){var h=this._getFormattedItem(t,e,i,n,a);h?(i=h.text,a=h.cls):i=null}if(i){var c=t.measureString(i,a,this._groupClass),u=.5*c.height,d=.5*c.width*Math.abs(Math.sin(o*Math.PI/180)),p=.5*c.width,f=.5*(c.width*Math.abs(Math.cos(o*Math.PI/180))+c.height*Math.abs(Math.sin(o*Math.PI/180))),_=new s.Point(n.x,n.y),g=new s.Point(n.x,n.y);this.labelAlign||(r=90==o||-90==o?1:l?o>0?0:2:o>0?2:0),l?(n.y+=u+d,_.y+=u+d-.5*c.height):(n.y-=u+d-c.height,_.y-=u+d-.5*c.height);var m=0;2===r?(_.x-=f,n.x-=p+f,m=_.x+f-c.height-2):0===r?(_.x+=f,n.x-=p-f,m=_.x-f):(n.x-=p,m=_.x-c.height/2);var y=new s.Rect(m,g.y,c.height+2,c.width),b=this._rects;if(this.overlappingLabels==k.Auto)for(var v=b.length,w=0;w<v;w++)if(_t._intersects(b[w],y))return!1;return _t._renderRotatedText(t,i,n,0,2,_,o,a,this._groupClass),this._rects.push(y),!0}return!1},t.prototype._getLabelAlign=function(t){var e=1;if(this.labelAlign){var i=this.labelAlign.toLowerCase();t?"top"==i?e=0:"bottom"==i&&(e=2):"left"==i?e=0:"right"==i&&(e=2)}return e},t.prototype.convert=function(t,e,i){var n=null==e?this._actualMax:e,r=null==i?this._actualMin:i;if(n==r||!this._axrect)return 0;var o=this._axrect.left,s=this._axrect.width,a=this._axrect.top,l=this._axrect.height;if(null!=this._customConvert){var h=this._customConvert(t,r,n);return this.axisType==A.Y?a+h*l:o+h*s}if(this._getLogBase()){if(t<=0)return NaN;var c=Math.log(n/r);return this._reversed?this.axisType==A.Y?a+Math.log(t/r)/c*l:o+s-Math.log(t/r)/c*s:this.axisType==A.Y?a+l-Math.log(t/r)/c*l:o+Math.log(t/r)/c*s}return this._reversed?this.axisType==A.Y?a+(t-r)/(n-r)*l:o+s-(t-r)/(n-r)*s:this.axisType==A.Y?a+l-(t-r)/(n-r)*l:o+(t-r)/(n-r)*s},t.prototype.convertBack=function(t){if(this._actualMax==this._actualMin)return 0;var e,i=this._plotrect.left,n=this._plotrect.width,r=this._plotrect.top,o=this._plotrect.height,s=this._actualMax-this._actualMin,a=this._getLogBase();return null!=this._customConvertBack?this.axisType==A.Y?this._customConvertBack((t-r)/o,this._actualMin,this._actualMax):this._customConvertBack((t-i)/n,this._actualMin,this._actualMax):a?(e=this._reversed?this.axisType==A.Y?(t-r)/o:1-(t-i)/n:this.axisType==A.Y?1-(t-r)/o:(t-i)/n,Math.pow(a,(Math.log(this._actualMin)+(Math.log(this._actualMax)-Math.log(this._actualMin))*e)/Math.log(a))):this._reversed?this.axisType==A.Y?this._actualMin+(t-r)*s/o:this._actualMin+(i+n-t)*s/n:this.axisType==A.Y?this._actualMax-(t-r)*s/o:this._actualMin+(t-i)*s/n},Object.defineProperty(t.prototype,"axisType",{get:function(){var t=this._chart;if(t){if(t.axisX==this)return A.X;if(t.axisY==this)return A.Y}return this._axisType},enumerable:!0,configurable:!0}),t.prototype._getMinNum=function(){return this._actualMin},t.prototype._getMaxNum=function(){return this._actualMax},t.prototype._invalidate=function(){this._chart&&this._chart.invalidate()},t.prototype._cvCollectionChanged=function(t,e){this._invalidate()},t.prototype._createLabels=function(t,e,i,n,r){for(var o=0;o<e;o++){var a=(t+i*o).toFixed(14),l=parseFloat(a),h=this._formatAxisValue(l),c=r.indexOf(h);if(c>=0&&!(0,s.isNumber)(this.majorUnit)&&!this._format){var u=parseFloat(h);Math.abs(u-l)<Math.abs(u-n[c])&&(n[c]=l)}else n.push(l),r.push(h)}},t.prototype._createLogarithmicLabels=function(t,e,i,n,r,o){var s=this._getLogBase(),a=Math.log(s),l=Math.floor(Math.log(t)/a),h=Math.ceil(Math.log(e)/a),c=s,u=!0;i>0&&(u=!1,c=i),c<s&&(c=s);var d=(h-l+1)*s/c,p=1;if(o){var f=this._getPosition(),_=this._getAnnoNumber(f==g.Left||f==g.Right);d>_?p=Math.floor(d/_+1):u&&(d<=.2*_?c=.2*s:d<=.1*_&&(c=.1*s))}for(var m=l;m<=h;m+=p)if(u)for(var y=Math.pow(s,m),b=0;b*c<s-1;b++)(v=y*(1+b*c))>=t&&v<=e&&(0==b?(n.unshift(v),r&&r.unshift(this._formatValue(v))):(n.push(v),r&&r.push(this._formatValue(v))));else{var v;(v=Math.pow(c,m))>=t&&v<=e&&(n.push(v),r&&r.push(this._formatValue(v)))}},t.prototype._createTimeLabels=function(t,e,i,n){var r=this._actualMin,o=this._actualMax,a=new Date(r),l=new Date(o),h=this._format,c=this._getAnnoNumber(this._axisType==A.Y);c>10&&(c=10);var u=.001*(this._actualMax-this._actualMin)/c,d=new G(u*G.TicksPerSecond),p=(0,s.isNumber)(this._majorUnit)?G.fromDays(this._majorUnit):Y.NiceTimeSpan(d,h);h||(this._tfmt=h=Y.GetTimeDefaultFormat(1e3*p.TotalSeconds,0));var f=p.Ticks,_=Y.RoundTime(r,p.TotalDays,!1);isFinite(_)&&(r=_);var g=Y.RoundTime(o,p.TotalDays,!0);isFinite(g)&&(o=g);var m=new Date(r);if(new Date(o),p.TotalDays>=365&&!(0,s.isNumber)(this._majorUnit)){(m=new Date(a.getFullYear(),0,1))<a&&m.setFullYear(m.getFullYear()+1);var y=p.TotalDays/365;y-=y%1;for(var b=m;b<=l&&y;b.setFullYear(b.getFullYear()+y)){var v=b.valueOf();i.push(v),n.push(this._formatValue(v))}}else if(p.TotalDays>=30&&!(0,s.isNumber)(this._majorUnit)){(m=new Date(a.getFullYear(),a.getMonth(),1))<a&&m.setMonth(m.getMonth()+1);var w=p.TotalDays/30;for(w-=w%1,b=m;b<=l;b.setMonth(b.getMonth()+w))v=b.valueOf(),i.push(v),n.push(this._formatValue(v))}else{var C=1e3*f/G.TicksPerSecond,x=(b=m,a.getTime()-b.getTime());for(x>C&&(b=new Date(b.getTime()+Math.floor(x/C)*C));b<=l&&C;b=new Date(b.getTime()+C))(v=b.valueOf()+x)>=a.valueOf()&&(i.push(v),n.push(this._formatValue(v)))}},t.prototype._formatValue=function(t){if(this._isTimeAxis)return this._format?s.Globalize.format(new Date(t),this._format):s.Globalize.format(new Date(t),this._tfmt);if(this._format)return s.Globalize.format(t,this._format);var e=t==Math.round(t)?"n0":"n";return s.Globalize.format(t,e)},t.prototype._formatAxisValue=function(t,e){if(void 0===e&&(e=void 0),this._isTimeAxis)return this._format?s.Globalize.format(new Date(t),this._format):s.Globalize.format(new Date(t),this._tfmt);if(this._format)return s.Globalize.format(t,this._format);if((0,s.isNumber)(t)){var i=this._findFormat(t,e);return s.Globalize.format(t,i)}return t},t.prototype._findFormat=function(t,e){void 0===e&&(e=void 0);var i=t==Math.round(t)?"n0":"n";if(void 0!==e&&(i+=e.toString()),"n"==i){var n=t.toFixed(14),r=n.search(".");if(r>=0){e=1;for(var o=n.length-1;o>=r;o--)if("0"!=n[o]){e=o-r-1;break}i+=e.toString()}}return i},t.prototype._calcMajorUnit=function(){var t=this._majorUnit;if(!(0,s.isNumber)(t)){var e=this._actualMax-this._actualMin,i=this._nicePrecision(e),n=e/this._getAnnoNumber(this.axisType==A.Y);(t=this._niceNumber(2*n,-i,!0))<n&&(t=this._niceNumber(n,1-i,!1)),t<n&&(t=this._niceTickNumber(n))}return t},t.prototype._getAnnoNumber=function(t){var e=t?this._annoSize.height:this._annoSize.width,i=t?this._axrect.height:this._axrect.width;if(e>0&&i>0){var n=Math.floor(i/(e+6));return n<=0&&(n=1),n}return 10},t.prototype._nicePrecision=function(t){if(!(0,s.isNumber)(t)||t<=0)return 0;var e,i=Math.log(t)/Math.LN10;e=i>=0?Math.floor(i):Math.ceil(i);var n=t/Math.pow(10,e);return n<3&&(e=1-e,(n=t/Math.pow(10,e))<3&&(e+=1)),e},t.prototype._niceTickNumber=function(t){if(0==t)return t;t<0&&(t=-t);var e=Math.log(t)/Math.LN10,i=Math.floor(e),n=t/Math.pow(10,i),r=10;return n<=1?r=1:n<=2?r=2:n<=5&&(r=5),r*Math.pow(10,i)},t.prototype._niceNumber=function(t,e,i){if(0==t)return t;t<0&&(t=-t);var n=t/Math.pow(10,e),r=10;return i?n<1.5?r=1:n<3?r=2:n<4.5?r=4:n<7&&(r=5):n<=1?r=1:n<=2?r=2:n<=5&&(r=5),r*Math.pow(10,e)},Object.defineProperty(t.prototype,"_uniqueId",{get:function(){return this.__uniqueId},enumerable:!0,configurable:!0}),t.MAX_MAJOR=1e3,t.MAX_MINOR=2e3,t._id=0,t}(),z=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e.prototype.getAxis=function(t){var e=this.indexOf(t);return e>-1?this[e]:null},e.prototype.indexOf=function(t){for(var e=0;e<this.length;e++)if(this[e].name==t)return e;return-1},e}(s.ObservableArray);!function(t){t[t.tickf7=-7]="tickf7",t[t.tickf6=-6]="tickf6",t[t.tickf5=-5]="tickf5",t[t.tickf4=-4]="tickf4",t[t.tickf3=-3]="tickf3",t[t.tickf2=-2]="tickf2",t[t.tickf1=-1]="tickf1",t[t.second=1]="second",t[t.minute=60]="minute",t[t.hour=3600]="hour",t[t.day=86400]="day",t[t.week=604800]="week",t[t.month=2678400]="month",t[t.year=31536e3]="year",t[t.maxtime=Number.MAX_VALUE]="maxtime"}(F||(F={}));var V,G=function(){function t(t){this.ticks=t}return Object.defineProperty(t.prototype,"Ticks",{get:function(){return this.ticks},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"TotalSeconds",{get:function(){return this.ticks/1e7},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"TotalDays",{get:function(){return this.ticks/1e7/86400},enumerable:!0,configurable:!0}),t.fromSeconds=function(e){return new t(1e7*e)},t.fromDays=function(e){return new t(1e7*e*24*60*60)},t.TicksPerSecond=1e7,t}(),Y=function(){function t(t){(0,s.isDate)(t)?this.init(t):(0,s.isNumber)(t)&&this.init(_t._fromOADate(t))}return t.prototype.init=function(t){this.year=t.getFullYear(),this.month=t.getMonth(),this.day=t.getDate(),this.hour=t.getHours(),this.minute=t.getMinutes(),this.second=t.getSeconds()},t.prototype.getTimeAsDateTime=function(){return this.hour>=24&&(this.hour-=24,this.day+=1),this.month<0?(this.day,this.month=1):this.month>11&&(this.month,this.month=12),this.day<1?(this.day,this.day=1):this.day>28&&2==this.month?(this.day,this.day=28):this.day>30&&(4==this.month||4==this.month||6==this.month||9==this.month||11==this.month)?(this.day,this.day=30):this.day>31&&(this.day,this.day=31),this.second>59&&(this.second,this.second=59),this.minute>59&&(this.minute,this.minute=59),new Date(this.year,this.month,this.day,this.hour,this.minute,this.second)},t.prototype.getTimeAsDouble=function(){return this.getTimeAsDateTime().valueOf()},t.tround=function(t,e,i){var n=t/e*e;return n-=n%1,i&&n!=t&&(n+=e-=e%1),n},t.RoundTime=function(e,i,n){var r=24*i*60*60;if(r>0){var o=new t(e);return r<F.minute?(o.second=this.tround(o.second,r,n),o.getTimeAsDouble()):(o.second=0,r<F.hour?(r/=F.minute,o.minute=this.tround(o.minute,r,n),o.getTimeAsDouble()):(o.minute=0,r<F.day?(r/=F.hour,o.hour=this.tround(o.hour,r,n),o.getTimeAsDouble()):(o.hour=0,r<F.month?(r/=F.day,o.day=this.tround(o.day,r,n),o.getTimeAsDouble()):(o.day=1,r<F.year?(r/=F.month,1!=o.month&&(o.month=this.tround(o.month,r,n)),o.getTimeAsDouble()):(o.month=1,r/=F.year,o.year=this.tround(o.year,r,n),o.getTimeAsDouble())))))}var s=e-r,a=s/i*i;return n&&a!=s&&(a+=i),r+a},t.TimeSpanFromTmInc=function(t){var e=G.fromSeconds(1);if(t!=F.maxtime)if(t>F.tickf1)e=G.fromSeconds(t);else{var i=t,n=1;for(i+=7;i>0;)n*=10,i--;e=new G(n)}return e},t.manualTimeInc=function(t){var e=F.second;if(null==t||0==t.length)return e;var i=t.indexOf("f");if(i>=0){var n=-1;if(i>0&&"%"==t.substr(i-1,1))n=-1;else for(var r=1;r<6&&!(i+r>=t.length)&&"f"==t.substr(i+r,1);r++)n--;e=n}else t.indexOf("s")>=0?e=F.second:t.indexOf("m")>=0?e=F.minute:t.indexOf("h")>=0||t.indexOf("H")?e=F.hour:t.indexOf("d")>=0?e=F.day:t.indexOf("M")>=0?e=F.month:t.indexOf("y")>=0&&(e=F.year);return e},t.getNiceInc=function(t,e,i){for(var n=0;n<t.length;n++){var r=t[n]*i;if(e<=r)return r}return 0},t.NiceTimeSpan=function(e,i){var n=F.second;null!=i&&i.length>0&&(n=t.manualTimeInc(i));var r=0,o=0;if(n<F.second&&e.TotalSeconds<10){for(r=e.Ticks,o=t.TimeSpanFromTmInc(n).Ticks;r>10*o;)o*=10;var s=o;return r>s&&(s*=2),r>s&&(s=5*o),r>s&&(s=10*o),new G(s)}if(0==(r=Math.ceil(e.TotalSeconds)))return t.TimeSpanFromTmInc(n);if(o=1,n<F.minute){if(r<F.minute&&0!=(o=t.getNiceInc([1,2,5,10,15,30],r,n)))return G.fromSeconds(o);n=F.minute}if(n<F.hour){if(r<F.hour&&0!=(o=t.getNiceInc([1,2,5,10,15,30],r,n)))return G.fromSeconds(o);n=F.hour}if(n<F.day){if(r<F.day&&0!=(o=t.getNiceInc([1,3,6,12],r,n)))return G.fromSeconds(o);n=F.day}if(n<F.month){if(r<F.month&&0!=(o=t.getNiceInc([1,2,7,14],r,n)))return G.fromSeconds(o);n=F.month}if(n<F.year){if(r<F.year&&0!=(o=t.getNiceInc([1,2,3,4,6],r,n)))return G.fromSeconds(o);n=F.year}return r<(o=100*F.year)&&0==(o=t.getNiceInc([1,2,5,10,20,50],r,n))&&(o=100*F.year),G.fromSeconds(o)},t.NiceTimeUnit=function(e,i){var n=G.fromDays(e);return(n=t.NiceTimeSpan(n,i)).TotalDays},t.GetTimeDefaultFormat=function(t,e){if(!(0,s.isNumber)(t)||!(0,s.isNumber)(e))return"";var i="s",n=G.fromSeconds(.001*(t-e)),r=n.TotalSeconds;if(r>=F.year)i="yyyy";else if(r>=F.month)i="MMM yyyy";else if(r>=F.day)i="MMM d";else if(r>=F.hour)i="ddd H:mm";else if(r>=.5*F.hour)i="H:mm";else if(r>=1)i="H:mm:ss";else if(r>0){var o=n.Ticks;for(i="s.";o<G.TicksPerSecond;)o*=10,i+="f"}return i},t.secInYear=86400,t}(),K=function(){function t(t,e,i,n){this._seriesIndex=t,this._pointIndex=e,this._dataX=i,this._dataY=n}return Object.defineProperty(t.prototype,"seriesIndex",{get:function(){return this._seriesIndex},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pointIndex",{get:function(){return this._pointIndex},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dataX",{get:function(){return this._dataX},set:function(t){t!==this._dataX&&(this._dataX=t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dataY",{get:function(){return this._dataY},set:function(t){t!==this._dataY&&(this._dataY=t)},enumerable:!0,configurable:!0}),t}();!function(t){t[t.X=0]="X",t[t.Y=1]="Y",t[t.XY=2]="XY"}(V||(V={}));var W,U=function(){function t(t){this._rect=t}return Object.defineProperty(t.prototype,"rect",{get:function(){return this._rect},enumerable:!0,configurable:!0}),t.prototype.contains=function(t){var e=this._rect;return t.x>=e.left&&t.x<=e.right&&t.y>=e.top&&t.y<=e.bottom},t.prototype.pointDistance=function(t,e,i){var n=e.x-t.x,r=e.y-t.y;return i==V.X?Math.abs(n):i==V.Y?Math.abs(r):Math.sqrt(n*n+r*r)},t.prototype.distance=function(t){var e=V.XY;isNaN(t.x)||null===t.x?e=V.Y:(isNaN(t.y)||null===t.y)&&(e=V.X);var i=this._rect;return t.x<i.left?t.y<i.top?this.pointDistance(t,new s.Point(i.left,i.top),e):t.y>i.bottom?this.pointDistance(t,new s.Point(i.left,i.bottom),e):e==V.Y?0:i.left-t.x:t.x>i.right?t.y<i.top?this.pointDistance(t,new s.Point(i.right,i.top),e):t.y>i.bottom?this.pointDistance(t,new s.Point(i.right,i.bottom),e):e==V.Y?0:t.x-i.right:e==V.X?0:t.y<i.top?i.top-t.y:t.y>i.bottom?t.y-i.bottom:0},t}(),X=function(){function t(t,e){this._center=t,this.setRadius(e)}return t.prototype.setRadius=function(t){this._rad=t,this._rad2=t*t},Object.defineProperty(t.prototype,"center",{get:function(){return this._center},enumerable:!0,configurable:!0}),t.prototype.contains=function(t){var e=this._center.x-t.x,i=this._center.y-t.y;return e*e+i*i<=this._rad2},t.prototype.distance=function(t){var e=isNaN(t.x)?0:this._center.x-t.x,i=isNaN(t.y)?0:this._center.y-t.y,n=e*e+i*i;return n<=this._rad2?0:Math.sqrt(n)-this._rad},t}(),q=function(){function t(t,e){this._x=[],this._y=[],this._x=t,this._y=e}return t.prototype.contains=function(t){return!1},t.prototype.distance=function(t){for(var e=NaN,i=0;i<this._x.length-1;i++){var n=_t._dist(t,new s.Point(this._x[i],this._y[i]),new s.Point(this._x[i+1],this._y[i+1]));(isNaN(e)||n<e)&&(e=n)}return e},t}(),J=function(){},Z=function(){function t(t){this._map={},this._chart=t}return t.prototype.add=function(t,e){this._map[e]&&(t.tag||(t.tag=new K(e,NaN,NaN,NaN)),this._map[e].push(t))},t.prototype.clear=function(){this._map={};for(var t=this._chart.series,e=0;e<t.length;e++)t[e].hitTest===st.prototype.hitTest&&(this._map[e]=new Array)},t.prototype.hitTest=function(t,e){void 0===e&&(e=!1);for(var i=null,n=Number.MAX_VALUE,r=this._chart.series.length-1;r>=0;r--){var o=this._map[r];if(o){for(var a=o.length-1;a>=0;a--){var l=o[a];if(!(0,s.tryCast)(l,q)||e){var h=l.distance(t);if(h<n&&(i=l,0==(n=h)))break}}if(0==n)break}}if(i){var c=new J;return c.area=i,c.distance=n,c}return null},t.prototype.hitTestSeries=function(t,e){var i=null,n=Number.MAX_VALUE,r=this._map[e];if(r)for(var o=r.length-1;o>=0;o--){var s=r[o],a=s.distance(t);if(a<n&&(i=s,0==(n=a)))break}if(i){var l=new J;return l.area=i,l.distance=n,l}return null},t}();!function(t){t[t.PlotArea=0]="PlotArea",t[t.AxisX=1]="AxisX",t[t.AxisY=2]="AxisY",t[t.ChartArea=3]="ChartArea",t[t.Legend=4]="Legend",t[t.Header=5]="Header",t[t.Footer=6]="Footer",t[t.Series=7]="Series",t[t.SeriesSymbol=8]="SeriesSymbol",t[t.DataLabel=9]="DataLabel",t[t.None=10]="None"}(W||(W={}));var $,Q,tt=function(){function t(t,e,i){this._pointIndex=null,this._chartElement=W.None,this._chart=t,this._pt=e,this._chartElement=i}return Object.defineProperty(t.prototype,"chart",{get:function(){return this._chart},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"point",{get:function(){return this._pt},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"series",{get:function(){return this._series},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pointIndex",{get:function(){return this._pointIndex},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"chartElement",{get:function(){return this._chartElement},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"distance",{get:function(){return this._dist},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"item",{get:function(){if(null==this._item&&null!==this.pointIndex)if(null!=this.series)this._item=this.series._getItem(this.pointIndex);else{var t=this._chart._getHitTestItem(this.pointIndex);t&&(this._item=t)}return this._item},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"x",{get:function(){return void 0===this._x&&(this._x=this._getValue(1,!1)),this._x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return void 0===this._y&&(this._y=this._getValue(0,!1)),this._y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){var t=this._chart._getHitTestValue(this.pointIndex,this._groupIndex);return null!=t?t:this.series&&null!=this.series._getValue?this.series._getValue(this.pointIndex):this.y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){if(void 0===this._name){var t=this._chart._getHitTestLabel(this.pointIndex);return null==t?this.series.name:t.toString()}return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"groupIndex",{get:function(){return this._groupIndex},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_xfmt",{get:function(){return void 0===this.__xfmt&&(this.__xfmt=this._getValue(1,!0)),this.__xfmt},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_yfmt",{get:function(){return void 0===this.__yfmt&&(this.__yfmt=this._getValue(0,!0)),this.__yfmt},enumerable:!0,configurable:!0}),t.prototype._setData=function(t,e){this._series=t,this._pointIndex=e},t.prototype._setDataGroup=function(t,e){this._groupIndex=t,this._pointIndex=e},t.prototype._setDataPoint=function(t){if(t=(0,s.asType)(t,K,!0)){this._pointIndex=t.pointIndex;var e=(0,s.asType)(this._chart,_t,!0),i=t.seriesIndex;null!==i&&i>=0&&i<e.series.length&&(this._series=e.series[i]),null!=t.item&&(this._item=t.item),null!=t.x&&(this._x=t.x),null!=t.y&&(this._y=t.y),null!=t.xfmt&&(this.__xfmt=t.xfmt),null!=t.yfmt&&(this.__yfmt=t.yfmt),null!=t.name&&(this._name=t.name)}},t.prototype._getValueFmt=function(){var t=this.value;if(null!=t){if(null==this.series){var e=t==Math.round(t)?"{val:n0}":"{val:n}";return(0,s.format)(e,{val:t})}t=this._chart._isRotated()?this.ax._formatValue(t):this.ay._formatValue(t)}return t},t.prototype._getValue=function(t,e){var i=this._chart._getHitTestValue(this.pointIndex,this.groupIndex);if(null!==i)return i;var n=null,r=this._chart,o=this.pointIndex,a=r._isRotated();if(null!==this.series&&null!==o){var l=this.series.getValues(t),h=this.series.getDataType(t);l&&this.pointIndex<l.length?(n=l[this.pointIndex],h!=s.DataType.Date||e||(n=new Date(n))):1==t&&(r._xlabels&&r._xlabels.length>0&&o<r._xlabels.length?n=r._xlabels[o]:r._xvals&&o<r._xvals.length&&(n=r._xvals[o],r._xDataType!=s.DataType.Date||e||(n=new Date(n))))}return null!==n&&e&&(a?0==t?n=this.ax._formatValue(n):1==t&&(n=this.ay._formatValue(n)):0==t?n=this.ay._formatValue(n):1==t&&(n=this.ax._formatValue(n))),n},Object.defineProperty(t.prototype,"ax",{get:function(){return this.series.axisX?this.series.axisX:this._chart.axisX},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ay",{get:function(){return this.series.axisY?this.series.axisY:this._chart.axisY},enumerable:!0,configurable:!0}),t}();!function(t){t[t.Visible=0]="Visible",t[t.Plot=1]="Plot",t[t.Legend=2]="Legend",t[t.Hidden=3]="Hidden"}($||($={})),function(t){t[t.Dot=0]="Dot",t[t.Box=1]="Box"}(Q||(Q={}));var et,it,nt=function(){},rt=function(t){function e(e){var i=t.call(this)||this;return i._series=(0,s.asType)(e,ot),i}return l(e,t),Object.defineProperty(e.prototype,"series",{get:function(){return this._series},enumerable:!0,configurable:!0}),e}(s.EventArgs),ot=function(){function t(t){this._altStyle=null,this._symbolMarker=Q.Dot,this._visibility=$.Visible,this._interpolateNulls=null,this._cache={},this.rendering=new s.Event,this.rendered=new s.Event,this.initialize(t)}return Object.defineProperty(t.prototype,"interpolateNulls",{get:function(){return null==this._interpolateNulls?this._chart&&this._chart.interpolateNulls:this._interpolateNulls},set:function(t){t!=this._interpolateNulls&&(this._interpolateNulls=(0,s.asBoolean)(t,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"style",{get:function(){return this._style},set:function(t){t!=this._style&&(this._style=t,this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"altStyle",{get:function(){return this._altStyle},set:function(t){t!=this._altStyle&&(this._altStyle=t,this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"symbolStyle",{get:function(){return this._symbolStyle},set:function(t){t!=this._symbolStyle&&(this._symbolStyle=t,this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"symbolSize",{get:function(){return this._symbolSize},set:function(t){t!=this._symbolSize&&(this._symbolSize=(0,s.asNumber)(t,!0,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"symbolMarker",{get:function(){return this._symbolMarker},set:function(t){(t=(0,s.asEnum)(t,Q,!0))!=this._symbolMarker&&(this._symbolMarker=t,this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"binding",{get:function(){return this._binding?this._binding:this._chart?this._chart.binding:null},set:function(t){t!=this._binding&&(this._binding=(0,s.asString)(t,!0),this._clearValues(),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bindingX",{get:function(){return this._bindingX?this._bindingX:this._chart?this._chart.bindingX:null},set:function(t){t!=this._bindingX&&(this._bindingX=(0,s.asString)(t,!0),this._clearValues(),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this._name},set:function(t){this._name=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"itemsSource",{get:function(){return this._itemsSource},set:function(t){t!=this._itemsSource&&(this._cv&&(this._cv.currentChanged.removeHandler(this._cvCurrentChanged,this),this._cv.collectionChanged.removeHandler(this._cvCollectionChanged,this),this._cv=null),this._itemsSource=t,this._cv=(0,s.asCollectionView)(t),null!=this._cv&&(this._cv.currentChanged.addHandler(this._cvCurrentChanged,this),this._cv.collectionChanged.addHandler(this._cvCollectionChanged,this)),this._clearValues(),this._itemsSource=t,this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"collectionView",{get:function(){return this._cv?this._cv:this._chart?this._chart.collectionView:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"chart",{get:function(){return this._chart},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hostElement",{get:function(){return this._hostElement},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"legendElement",{get:function(){return this._legendElement},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cssClass",{get:function(){return this._cssClass},set:function(t){this._cssClass=(0,s.asString)(t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"visibility",{get:function(){return this._visibility},set:function(t){(t=(0,s.asEnum)(t,$))!=this._visibility&&(this._visibility=t,this._clearValues(),this._invalidate(),this._chart&&this._chart.onSeriesVisibilityChanged(new rt(this)))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tooltipContent",{get:function(){return this._tooltipContent},set:function(t){t!=this._tooltipContent&&(this._tooltipContent=t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"itemFormatter",{get:function(){return this._itemFormatter},set:function(t){t!=this._itemFormatter&&(this._itemFormatter=(0,s.asFunction)(t),this._invalidate())},enumerable:!0,configurable:!0}),t.prototype.hitTest=function(t,e){return(0,s.isNumber)(t)&&(0,s.isNumber)(e)?t=new s.Point(t,e):t instanceof MouseEvent&&(t=new s.Point(t.pageX,t.pageY)),(0,s.asType)(t,s.Point),this._chart?this._chart._hitTestSeries(t,this._chart.series.indexOf(this)):null},t.prototype.getPlotElement=function(t){if(this.hostElement&&t<this._pointIndexes.length){var e=this._pointIndexes[t];if(e<this.hostElement.childNodes.length)return this.hostElement.childNodes[e]}return null},Object.defineProperty(t.prototype,"axisX",{get:function(){return this._axisX},set:function(t){if(t!=this._axisX){if(this._axisX=(0,s.asType)(t,B,!0),this._axisX){var e=this._axisX._chart=this._chart;e&&-1==e.axes.indexOf(this._axisX)&&e.axes.push(this._axisX)}this._invalidate()}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"axisY",{get:function(){return this._axisY},set:function(t){if(t!=this._axisY){if(this._axisY=(0,s.asType)(t,B,!0),this._axisY){var e=this._axisY._chart=this._chart;e&&-1==e.axes.indexOf(this._axisY)&&e.axes.push(this._axisY)}this._invalidate()}},enumerable:!0,configurable:!0}),t.prototype.initialize=function(t){(0,s.copy)(this,t)},t.prototype.pointToData=function(t){return(0,s.asType)(t,s.Point),(t=t.clone()).x=this._getAxisX().convertBack(t.x),t.y=this._getAxisY().convertBack(t.y),t},t.prototype.dataToPoint=function(t){return(0,s.asType)(t,s.Point),(t=t.clone()).x=this._getAxisX().convert(t.x),t.y=this._getAxisY().convert(t.y),t},t.prototype.onRendering=function(t,e,i){var n=new E(t,e,i);return this.rendering.raise(this,n),n.cancel},t.prototype.onRendered=function(t){this.rendered.raise(this,new S(t))},Object.defineProperty(t.prototype,"_chart",{get:function(){return this.__chart},set:function(t){t!==this.__chart&&(this.__chart=t)},enumerable:!0,configurable:!0}),t.prototype._getSymbolSize=function(){return null!=this.symbolSize?this.symbolSize:this.chart.symbolSize},Object.defineProperty(t.prototype,"_plotter",{get:function(){return this.chart&&!this.__plotter&&(this.__plotter=this.chart._getPlotter(this)),this.__plotter},set:function(t){t!=this.__plotter&&(this.__plotter=t)},enumerable:!0,configurable:!0}),t.prototype.getDataType=function(t){return 0==t?this._valueDataType:1==t?this._xvalueDataType:null},t.prototype.getValues=function(t){if(0==t){if(null==this._values)if(this._valueDataType=null,null!=this._cv){var e=this._bindValues(this._cv.items,this._getBinding(0));this._values=e.values,this._valueDataType=e.dataType}else null!=this.binding&&null!=this._chart&&null!=this._chart.collectionView&&(e=this._bindValues(this._chart.collectionView.items,this._getBinding(0)),this._values=e.values,this._valueDataType=e.dataType);return this._values}if(1==t){if(null==this._xvalues&&(this._xvalueDataType=null,null!=this.bindingX))if(null!=this._cv)e=this._bindValues(this._cv.items,this.bindingX,!0),this._xvalueDataType=e.dataType,this._xvalues=e.values;else{if(null==this._bindingX)return null;null!=this._chart&&null!=this._chart.collectionView&&(e=this._bindValues(this._chart.collectionView.items,this.bindingX,!0),this._xvalueDataType=e.dataType,this._xvalues=e.values)}return this._xvalues}return null},t.prototype.drawLegendItem=function(t,e,i){var n=this._getChartType();null==n&&(n=this._chart._getChartType());var r=this._getLegendStyle(this.style);n===et.Funnel?this._drawFunnelLegendItem(t,e,i,r,this.symbolStyle):this._drawLegendItem(t,e,n,this.name,r,this.symbolStyle)},t.prototype._getLegendStyle=function(t){if(t){var e={};return t.fill&&(e.fill=t.fill),t.stroke&&(e.stroke=t.stroke),e}},t.prototype.measureLegendItem=function(t,e){var i=this._getChartType();return null==i&&(i=this._chart._getChartType()),i===et.Funnel?this._measureLegendItem(t,this._getFunnelLegendName(e)):this._measureLegendItem(t,this.name)},t.prototype.legendItemLength=function(){var t=this._getChartType();return null==t&&(t=this._chart._getChartType()),t===et.Funnel?this._chart._xlabels&&this._chart._xlabels.length?this._chart._xlabels.length:this._chart._xvals&&this._chart._xvals.length?this._chart._xvals.length:1:1},t.prototype.getDataRect=function(t,e){return null},t.prototype._getChartType=function(){return this._chartType},t.prototype._clearValues=function(){this._values=null,this._xvalues=null,this.__plotter=null,this._cache={}},t.prototype._getBinding=function(t){var e=this.binding;if(e){var i=this.chart?this.chart._bindingSeparator:",";if(i){var n=e.split(i);n&&n.length>t&&(e=n[t].trim())}}return e},t.prototype._getBindingValues=function(t){if(this._cache[t])return this._cache[t];var e;null!=this._cv?e=this._cv.items:null!=this._chart&&null!=this._chart.collectionView&&(e=this._chart.collectionView.items);var i=this._bindValues(e,this._getBinding(t));return this._cache[t]=i.values},t.prototype._getItem=function(t){var e=null,i=null;return null!=this.itemsSource?i=null!=this._cv?this._cv.items:this.itemsSource:null!=this._chart.itemsSource&&(i=null!=this._chart.collectionView?this._chart.collectionView.items:this._chart.itemsSource),null!=i&&(e=i[t]),e},t.prototype._getLength=function(){var t=0,e=null;return null!=this.itemsSource?e=null!=this._cv?this._cv.items:this.itemsSource:null!=this._chart.itemsSource&&(e=null!=this._chart.collectionView?this._chart.collectionView.items:this._chart.itemsSource),null!=e&&(t=e.length),t},t.prototype._setPointIndex=function(t,e){this._pointIndexes[t]=e},t.prototype._getDataRect=function(){var t=this.getValues(0),e=this.getValues(1);if(t){for(var i=NaN,n=NaN,r=NaN,o=NaN,a=t.length,l=0;l<a;l++){var h=t[l];if(isFinite(h)&&(isNaN(n)?n=o=h:h<n?n=h:h>o&&(o=h)),e){var c=e[l];isFinite(c)&&(isNaN(i)?i=r=c:c<i?i=c:h>o&&(r=c))}}if(e||(i=0,r=a-1),!isNaN(n))return new s.Rect(i,n,r-i,o-n)}return null},t.prototype._isCustomAxisX=function(){return!(!this._axisX||this._chart&&this._axisX==this.chart.axisX)},t.prototype._isCustomAxisY=function(){return!(!this._axisY||this._chart&&this._axisY==this.chart.axisY)},t.prototype._getAxisX=function(){var t=null;return this.axisX?t=this.axisX:this.chart&&(t=this.chart.axisX),t},t.prototype._getAxisY=function(){var t=null;return this.axisY?t=this.axisY:this.chart&&(t=this.chart.axisY),t},t.prototype._measureLegendItem=function(e,i){var n=new s.Size;if(n.width=t._LEGEND_ITEM_WIDTH,n.height=t._LEGEND_ITEM_HEIGHT,this._name){var r=e.measureString(i,_t._CSS_LABEL,_t._CSS_LEGEND);n.width+=r.width,n.height<r.height&&(n.height=r.height)}return n.width+=3*t._LEGEND_ITEM_MARGIN,n.height+=2*t._LEGEND_ITEM_MARGIN,n},t.prototype._drawFunnelLegendItem=function(e,i,n,r,o){e.strokeWidth=1;var a=t._LEGEND_ITEM_MARGIN,l=null,h=null;null===l&&(l=this._chart._getColorLight(n)),null===h&&(h=this._chart._getColor(n)),e.fill=l,e.stroke=h;var c=i.top+.5*i.height,u=t._LEGEND_ITEM_WIDTH,d=t._LEGEND_ITEM_HEIGHT,p=this._getFunnelLegendName(n);e.drawRect(i.left+a,c-.5*d,u,d,null,o||r),null!=p&&_t._renderText(e,p,new s.Point(i.left+d+2*a,c),0,1,_t._CSS_LABEL,_t._CSS_LEGEND)},t.prototype._getFunnelLegendName=function(t){var e,i=this._chart;return i._xlabels&&i._xlabels.length&&t<i._xlabels.length?e=i._xlabels[t]:i._xvals&&i._xvals.length&&t<i._xvals.length&&(e=i._xvals[t],i._xDataType===s.DataType.Date&&(e=_t._fromOADate(e))),null==e&&(e=this.name),e.toString()},t.prototype._drawLegendItem=function(e,i,n,r,o,a){e.strokeWidth=1;var l=t._LEGEND_ITEM_MARGIN,h=null,c=null;null===h&&(h=this._chart._getColorLight(this._chart.series.indexOf(this))),null===c&&(c=this._chart._getColor(this._chart.series.indexOf(this))),e.fill=h,e.stroke=c;var u=i.top+.5*i.height,d=t._LEGEND_ITEM_WIDTH,p=t._LEGEND_ITEM_HEIGHT;switch(n){case et.Area:case et.SplineArea:case et.StepArea:e.drawRect(i.left+l,u-.5*p,d,p,null,o);break;case et.Bar:case et.Column:e.drawRect(i.left+l,u-.5*p,d,p,null,a||o);break;case et.Scatter:case et.Bubble:var f=.3*d,_=.3*p;this.symbolMarker==Q.Box?e.drawRect(i.left+l+.5*d-f,u-_,2*f,2*_,null,a||o):e.drawEllipse(i.left+.5*d+l,u,f,_,null,a||o);break;case et.Line:case et.Spline:case et.Step:e.drawLine(i.left+l,u,i.left+d+l,u,null,o);break;case et.LineSymbols:case et.SplineSymbols:case et.StepSymbols:f=.3*d,_=.3*p,this.symbolMarker==Q.Box?e.drawRect(i.left+l+.5*d-f,u-_,2*f,2*_,null,a||o):e.drawEllipse(i.left+.5*d+l,u,f,_,null,a||o),e.drawLine(i.left+l,u,i.left+d+l,u,null,o);break;case et.Candlestick:case et.HighLowOpenClose:e.drawLine(i.left+l,u,i.left+d+l,u,null,a||o)}this._name&&_t._renderText(e,r,new s.Point(i.left+p+2*l,u),0,1,_t._CSS_LABEL,_t._CSS_LEGEND)},t.prototype._cvCollectionChanged=function(t,e){this._clearValues(),this._invalidate()},t.prototype._cvCurrentChanged=function(t,e){this._chart&&this._chart._notifyCurrentChanged&&this._invalidate()},t.prototype._bindValues=function(t,e,i){var n,r,o;if(void 0===i&&(i=!1),null!=t){var a=t.length;n=new Array(t.length);for(var l=e?new s.Binding(e):null,h=0;h<a;h++){o=null;var c=t[h];null!=l&&(c=l.getValue(c)),(0,s.isArray)(c)&&c.length>0&&(o=c,c=c[0]),(0,s.isNumber)(c)?(n[h]=c,r=s.DataType.Number):(0,s.isDate)(c)?(n[h]=c.valueOf(),r=s.DataType.Date):i&&c&&(n[h]=h,r=s.DataType.Number),(0,s.isArray)(o)&&o.length>0&&(n[h]=o)}}var u=new nt;return u.values=n,u.dataType=r,u},t.prototype._invalidate=function(){this._chart&&this._chart.invalidate()},t.prototype._indexToPoint=function(t){if(t>=0&&t<this._values.length){var e=this._values[t],i=this._xvalues?this._xvalues[t]:t;return new s.Point(i,e)}return null},t.prototype._getSymbolFill=function(t){var e=null;return this.symbolStyle&&(e=this.symbolStyle.fill),!e&&this.style&&(e=this.style.fill),!e&&this.chart&&(e=this.chart._getColorLight(t)),e},t.prototype._getSymbolStroke=function(t){var e=null;return this.symbolStyle&&(e=this.symbolStyle.stroke),!e&&this.style&&(e=this.style.stroke),!e&&this.chart&&(e=this.chart._getColor(t)),e},t.prototype._getAltSymbolStroke=function(t){var e=null;return this.altStyle&&(e=this.altStyle.stroke),e},t.prototype._getAltSymbolFill=function(t){var e=null;return this.altStyle&&(e=this.altStyle.fill),e},t.prototype._renderLabels=function(t,e,i,n){this._plotter&&this._plotter._renderLabels(t,this,e,i,n)},t._LEGEND_ITEM_WIDTH=10,t._LEGEND_ITEM_HEIGHT=10,t._LEGEND_ITEM_MARGIN=4,t._DEFAULT_SYM_SIZE=10,t}(),st=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),Object.defineProperty(e.prototype,"chartType",{get:function(){return this._chartType},set:function(t){(t=(0,s.asEnum)(t,et,!0))!=this._chartType&&(this._chartType=t,this._invalidate())},enumerable:!0,configurable:!0}),e}(ot),at=function(t){function e(e,i){var n=t.call(this,e,null,!0)||this;n._areas=[],n._keywords=new I,n._startAngle=0,n._innerRadius=0,n._offset=0,n._reversed=!1,n._isAnimated=!1,n._selectedItemPosition=g.None,n._selectedItemOffset=0,n._pieGroups=[],n._rotationAngles=[],n._centers=[new s.Point],n._selectedOffset=new s.Point,n._selectedIndex=-1,n._angles=[],n._colRowLens=[],n._titles=void 0,n._values=[],n._labels=[],n._pels=[],n._sum=0,n._sums=[],n._bindingSeparator=",",n.applyTemplate("wj-control wj-flexchart wj-flexpie",null,null),n._currentRenderEngine=new b(n.hostElement),n._legend=new C(n),n._tooltip=new R,n._tooltip.content="<b>{name}</b><br/>{value}",n._tooltip.showDelay=0,n._lbl=new H,n._lbl._chart=n;var r=n;return n.hostElement.addEventListener("mousemove",(function(t){var e=r._tooltip;if(e.content&&!r.isTouching){var i=r.hitTest(t);if(i.distance<=e.threshold){var n=r._getLabelContent(i,r.tooltip.content);r._showToolTip(n,new s.Rect(t.clientX,t.clientY,5,5))}else r._hideToolTip()}})),n.hostElement.addEventListener("click",(function(t){var e=!0;if(r.selectionMode==_.Point){var i=r.hitTest(t),n=M._SELECTION_THRESHOLD;r.tooltip&&r.tooltip.threshold&&(n=r.tooltip.threshold),i.distance<=n?(i.pointIndex!=r._selectionIndex&&r.selectedItemPosition!=g.None&&(e=!1),i.pointIndex!=r._selectionIndex&&r._select(i.pointIndex,!0)):r._selectedIndex>=0&&r._select(null)}if(e&&r.isTouching){var o=r._tooltip;if(o.content)if((i=r.hitTest(t)).distance<=o.threshold){var a=r._getLabelContent(i,r.tooltip.content);r._showToolTip(a,new s.Rect(t.clientX,t.clientY,5,5))}else r._hideToolTip()}})),n.hostElement.addEventListener("mouseleave",(function(t){r._hideToolTip()})),n.deferUpdate((function(){return n.initialize(i)})),n}return l(e,t),Object.defineProperty(e.prototype,"binding",{get:function(){return this._binding},set:function(t){t!=this._binding&&(this._binding=(0,s.asString)(t,!0),this._bindChart())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bindingName",{get:function(){return this._bindingName},set:function(t){t!=this._bindingName&&(this._bindingName=(0,s.asString)(t,!0),this._bindChart())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startAngle",{get:function(){return this._startAngle},set:function(t){t!=this._startAngle&&(this._startAngle=(0,s.asNumber)(t,!0),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"offset",{get:function(){return this._offset},set:function(t){t!=this._offset&&(this._offset=(0,s.asNumber)(t,!0),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"innerRadius",{get:function(){return this._innerRadius},set:function(t){t!=this._innerRadius&&(this._innerRadius=(0,s.asNumber)(t,!0),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"innerTextStyle",{get:function(){return this._innerTextStyle},set:function(t){t!=this._innerText&&(this._innerTextStyle=t,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"innerText",{get:function(){return this._innerText},set:function(t){t!=this._innerText&&(this._innerText=t,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reversed",{get:function(){return this._reversed},set:function(t){t!=this._reversed&&(this._reversed=(0,s.asBoolean)(t,!0),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedItemPosition",{get:function(){return this._selectedItemPosition},set:function(t){(t=(0,s.asEnum)(t,g,!0))!=this._selectedItemPosition&&(this._selectedItemPosition=t,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedItemOffset",{get:function(){return this._selectedItemOffset},set:function(t){t!=this._selectedItemOffset&&(this._selectedItemOffset=(0,s.asNumber)(t,!0),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isAnimated",{get:function(){return this._isAnimated},set:function(t){t!=this._isAnimated&&(this._isAnimated=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tooltip",{get:function(){return this._tooltip},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dataLabel",{get:function(){return this._lbl},set:function(t){t!=this._lbl&&(this._lbl=t,this._lbl&&(this._lbl._chart=this))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedIndex",{get:function(){return this._selectedIndex},set:function(t){if(t!=this._selectedIndex){var e=(0,s.asNumber)(t,!0);this._select(e,!0)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"titles",{get:function(){return this._titles},set:function(t){t!==this._titles&&(this._titles=t,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"chartsPerLine",{get:function(){return this._chartsPerLine},set:function(t){t!=this._chartsPerLine&&(this._chartsPerLine=(0,s.asNumber)(t,!0,!0),this.invalidate())},enumerable:!0,configurable:!0}),e.prototype._getLabelsForLegend=function(){return this._labels},e.prototype.hitTest=function(t,e){var i=this._toControl(t,e),n=new tt(this,i),r=null;if(M._contains(this._rectHeader,i))n._chartElement=W.Header;else if(M._contains(this._rectFooter,i))n._chartElement=W.Footer;else if(M._contains(this._rectLegend,i))n._chartElement=W.Legend,null!==(r=this.legend._hitTest(i))&&r>=0&&r<this._areas.length&&n._setData(null,r);else if(M._contains(this._rectChart,i)){for(var o,s=this._areas.length,a=NaN,l=0;l<s;l++){var h=i.clone(),c=this._areas[l],u=this._rotationAngles[c.gi];if(0!=u){var d=this._centers[c.gi],p=d.x,f=d.y,_=-p+h.x,g=-f+h.y,m=Math.sqrt(_*_+g*g),y=Math.atan2(g,_)-u*Math.PI/180;h.x=p+m*Math.cos(y),h.y=f+m*Math.sin(y)}l==this._selectedIndex&&(h.x-=this._selectedOffset.x,h.y-=this._selectedOffset.y);var b=this._areas[l];if(b.contains(h)&&(n._setDataGroup(c.gi,b.tag),n._dist=0,l!=this._selectedIndex))break;var v=b.distance(h);void 0!==v&&(isNaN(a)||v<a)&&(a=v,o=b)}0!==n._dist&&null!=o&&(n._setDataGroup(o.gi,o.tag),n._dist=a),n._chartElement=W.ChartArea}else n._chartElement=W.None;return n},e.prototype._performBind=function(){if(this._initData(),this._cv){this._selectionIndex=this._cv.currentPosition;var t=this._cv.items;if(t){for(var e=t.length,i=this._getBindings(),n=0;n<i.length;n++)this._values[n]=[],this._sums[n]=0;for(var r=0;r<e;r++){var o=t[r];for(n=0;n<i.length;n++)this._sums[n]+=Math.abs(this._getBindData(o,this._values[n],0==n?this._labels:null,i[n],this.bindingName))}}}},e.prototype._getBindings=function(){var t=[],e=this.binding;if(e){var i=this._bindingSeparator;i&&(t=e.split(i))}return t},e.prototype._initData=function(){this._sum=0,this._sums=[],this._values=[],this._labels=[]},e.prototype._getBindData=function(t,e,i,n,r){var o,a=0,l=n?new s.Binding(n):null;l&&(o=l.getValue(t)),a=0,(0,s.isNumber)(o)?a=(0,s.asNumber)(o):o&&(a=parseFloat(o.toString())),!isNaN(a)&&isFinite(a)||(a=0),e.push(a);var h=r?new s.Binding(r):null;if(i)if(h&&t){var c=h.getValue(t);c&&(c=c.toString()),i.push(c)}else i.push(a.toString());return a},e.prototype._render=function(e,i,n){void 0===i&&(i=!0),void 0===n&&(n=null),this._selectionAnimationID&&clearInterval(this._selectionAnimationID),this.onRendering(new S(e)),t.prototype._render.call(this,e,i,n)},e.prototype._prepareRender=function(){this._areas=[]},e.prototype._renderChart=function(t,i,n){var r=this._rectChart.clone(),o=(new s.Size(r.width,r.height),i.width),a=i.height,l=this._parseMargin(this.plotMargin),h=this.dataLabel,c=h.content&&h.position==T.Outside,u=c?((0,s.isNumber)(h.offset)?h.offset:0)+24:0;isNaN(l.left)&&(l.left=c?u:e._MARGIN),isNaN(l.right)&&(l.right=c?u:e._MARGIN),isNaN(l.top)&&(l.top=c?u:e._MARGIN),isNaN(l.bottom)&&(l.bottom=c?u:e._MARGIN),i.top+=l.top,a=i.height-(l.top+l.bottom),i.height=a>0?a:24,i.left+=l.left,o=i.width-(l.left+l.right),i.width=o>0?o:24;var d=this._getBindings(),p=this.titles;void 0===p&&d.length>1&&(p=d);var f=this._layout(t,i,p,d.length);this._angles=[],this._pels=[],this._pieGroups=[],this._rotationAngles=[];for(var _=0;_<d.length;_++){var g=f[_];p&&_<p.length&&p[_]&&M._renderText(t,p[_],new s.Point(g.left+.5*g.width,g.top),1,2,e._CSS_GROUP_TITLE);var m=t.startGroup("wj-slice-group",null,!0);this._pieGroups.push(m),this._renderData(t,g,_,m),t.endGroup(),this._rotationAngles.push(0)}this._highlightCurrent(),this.innerText&&this._renderInnerText(t),this.dataLabel.content&&this.dataLabel.position!=T.None&&this._renderLabels(t),this.onRendered(new S(t))},e.prototype._layout=function(t,i,n,r){var o=0,a=r,l=1,h=0;if(n)for(var c=0;c<n.length;c++)h=Math.max(h,t.measureString(n[c],e._CSS_GROUP_TITLE).height);var u=Math.floor(this.chartsPerLine);if(u>0){a=Math.min(r,u),l=Math.ceil(r/a);var d=Math.floor(i.width/a),p=Math.floor(i.height/l)-h;o=Math.min(d,p)}else for(var f=1;f<=r;f++){var _=Math.floor((r+(f-1))/f);d=Math.floor(i.width/f),p=Math.floor(i.height/_),(p-=h)<d&&(d=p),d>o&&(o=d,a=f,l=_)}for(var g=[],m=.5*(i.width-o*a),y=.5*(i.height-(o+h)*l),b=0;b<l;b++)for(var v=0;v<a;v++)g.push(new s.Rect(i.left+o*v+8+m,i.top+(o+h)*b+8+y+h,o-16,o-16));return g},e.prototype._getDesiredLegendSize=function(t,e,i,n){var r=new s.Size,o=(new s.Size(i,n),this._getLabelsForLegend()),a=o.length,l=0,h=0;this._colRowLens=[];for(var c=0;c<a;c++){var u=this._measureLegendItem(t,o[c]);e?(h+u.height>n&&(r.height=n,this._colRowLens.push(l),l=0,h=0),l<u.width&&(l=u.width),h+=u.height):(l+u.width>i&&(r.width=i,this._colRowLens.push(h),h=0,l=0),h<u.height&&(h=u.height),l+=u.width)}return e?(r.height<h&&(r.height=h),this._colRowLens.push(l),r.width=this._colRowLens.reduce((function(t,e){return t+e}),0),r.width=this._getLegendSize(i,r.width)):(r.width<l&&(r.width=l),this._colRowLens.push(h),r.height=this._colRowLens.reduce((function(t,e){return t+e}),0),r.height=this._getLegendSize(n,r.height)),r},e.prototype._renderLegend=function(t,e,i,n,r,o){for(var a=this._rectLegend,l=this._getLabelsForLegend(),h=l.length,c=0,u=e.clone(),d=0;d<h;d++){var p=this._measureLegendItem(t,l[d]);n?u.y+p.height>a.top+a.height+1&&(u.x+=this._colRowLens[c],c++,u.y=e.y):u.x+p.width>a.left+a.width+1&&(u.y+=this._colRowLens[c],c++,u.x=e.x);var f=new s.Rect(u.x,u.y,p.width,p.height);this._drawLegendItem(t,f,d,l[d]),i.push(f),n?u.y+=p.height:u.x+=p.width}},e.prototype._renderData=function(t,e,i,n){var r=this._sums[i],o=this.startAngle+180,a=this.innerRadius,l=this.offset;if(a>1&&(a=1),r>0){var h=o*Math.PI/180,c=e.left+.5*e.width,u=e.top+.5*e.height,d=Math.min(.5*e.width,.5*e.height);this._centers[i]=new s.Point(c,u);var p=Math.max(l,this.selectedItemOffset);p>0&&(l*=d/=1+p),this._radius=d;var f=a*d;this._renderPie(t,i,d,f,h,l)}},e.prototype._renderPie=function(t,e,i,n,r,o){this._renderSlices(t,this._values[e],this._sums[e],e,i,n,r,2*Math.PI,o)},e.prototype._getCenter=function(){return this._centers[0]},e.prototype._renderSlices=function(t,e,i,n,r,o,s,a,l){for(var h,c,u,d=e.length,p=0,f=s,_=1==this.reversed,g=this._centers[n],m=0;m<d;m++)e[m]>0&&p++;var y=1===p?360:359.9/360;for(m=0;m<d;m++){c=g.x,u=g.y,h=t.startGroup("wj-slice"),t.fill=this._getColorLight(m),t.stroke=this._getColor(m);var b=Math.abs(e[m]),v=Math.abs(b-i)<1e-10?a:a*b/i;v=Math.min(v,a*y);var w=_?f-.5*v:f+.5*v;l>0&&v<a&&(c+=l*Math.cos(w),u+=l*Math.sin(w)),this._renderSlice(t,c,u,w,n,m,r,o,f,v,a),_?f-=v:f+=v,t.endGroup(),this._pels.push(h)}},e.prototype._renderSlice=function(t,e,i,n,r,o,a,l,h,c,u){var d=this,p=!!this.reversed;if(this._angles.push(n),this.itemFormatter){var f=new tt(this,new s.Point(e+a*Math.cos(n),i+a*Math.sin(n)),W.SeriesSymbol);f._setData(null,o),this.itemFormatter(t,f,(function(){d._drawSlice(t,r,o,p,e,i,a,l,h,c)})),t.cssPriority=!0}else this._drawSlice(t,r,o,p,e,i,a,l,h,c)},e.prototype._getSelectedItemOffset=function(t,e){var i=0,n=0,r=0;return t==this._selectedIndex&&this.selectedItemOffset>0&&(r=this.selectedItemOffset),r>0&&(i=Math.cos(e)*r*this._radius,n=Math.sin(e)*r*this._radius),{x:i,y:n}},e.prototype._renderInnerText=function(t){for(var i=this.innerText,n=this.innerTextStyle,r=0;r<this._centers.length;r++){var o=this._centers[r],a=void 0;(a=(0,s.isFunction)(i)?i(r):(0,s.isArray)(i)?(0,s.asString)(i[r]):(0,s.asString)(i))&&(a=(0,s.format)(a,{total:this._sums[r],binding:this._getBindings()[r]}),n&&(t.cssPriority=!1),e._renderText(t,a,o,1,1,M._CSS_TITLE,null,n),t.cssPriority=!0)}},e.prototype._renderLabels=function(t){var e=this._areas.length,i=this.dataLabel,n=i.position,r="wj-data-label",o=this._rotationAngles,a=i.connectingLine,l=i.offset?i.offset:0;t.stroke="null",t.fill="transparent",t.strokeWidth=1,t.startGroup("wj-data-labels");for(var h=0;h<e;h++){var c=this._areas[h];if(c){var u=c.radius,d=c.langle+o[c.gi],p=1,f=1;n==T.Center||n===T.Radial||n===T.Circular?u*=.5*(1+(c.innerRadius||0)/c.radius):((d=lt.clampAngle(d))<=-170||d>=170?(p=2,f=1):d>=-100&&d<=-80?(p=1,f=2):d>=-10&&d<=10?(p=0,f=1):d>=80&&d<=100?(p=1,f=0):-180<d&&d<-90?(p=2,f=2):-90<=d&&d<0?(p=0,f=2):0<d&&d<90?(p=0,f=0):90<d&&d<180&&(p=2,f=0),n==T.Inside&&(p=2-p,f=2-f)),d*=Math.PI/180;var _=c.gi?h-c.gi*this._values[0].length:h,g=this._getSelectedItemOffset(_,d),m=g.x,y=g.y,b=u;n==T.Outside?b+=l:n==T.Inside&&(b-=l);var v=c.center.x,w=c.center.y,C=this._centers[c.gi],x=v-C.x,S=w-C.y;if(0!=this._rotationAngles[c.gi]){var E=Math.sqrt(x*x+S*S),P=Math.atan2(S,x)+this._rotationAngles[c.gi]*Math.PI/180;v=C.x+E*Math.cos(P),w=C.y+E*Math.sin(P)}var I=new s.Point(v+m+b*Math.cos(d),w+y+b*Math.sin(d));i.border&&n!=T.Center&&(0==p?I.x+=2:2==p&&(I.x-=2),0==f?I.y+=2:2==f&&(I.y-=2));var D=new tt(this,I);D._setDataGroup(c.gi,c.tag);var R=this._getLabelContent(D,i.content),A=new L(t,D,I,R);if(i.onRendering&&(i.onRendering(A)?(R=A.text,I=A.point):R=null),R){var k,O=180*Math.atan2(w-I.y,v-I.x)/Math.PI;if(O=(O+360)%360,n===T.Radial||n===T.Circular?(n===T.Radial?O>90&&O<270&&(O+=180):(O>180&&O<360&&(O+=180),O-=90),(k=M._renderRotatedText(t,R,I,p,f,I,O,r).getBBox()).left=k.x,k.top=k.y):k=M._renderText(t,R,I,p,f,r),i.border&&t.drawRect(k.left-2,k.top-2,k.width+4,k.height+4,"wj-data-label-border"),a){var j=new s.Point(v+m+u*Math.cos(d),w+y+u*Math.sin(d));t.drawLine(I.x,I.y,j.x,j.y,"wj-data-label-line")}}t.cssPriority=!0}}t.endGroup()},e.prototype._drawSlice=function(t,e,i,n,r,o,a,l,h,c){var u;n?l>0?(0!=c&&t.drawDonutSegment(r,o,a,l,h-c,c),(u=new ct(new s.Point(r,o),a,l,h-c,c,this.startAngle)).tag=i,this._areas.push(u)):(0!=c&&t.drawPieSegment(r,o,a,h-c,c),(u=new ht(new s.Point(r,o),a,h-c,c,this.startAngle)).tag=i,this._areas.push(u)):(l>0?(0!=c&&t.drawDonutSegment(r,o,a,l,h,c),(u=new ct(new s.Point(r,o),a,l,h,c,this.startAngle)).tag=i,this._areas.push(u)):(0!=c&&t.drawPieSegment(r,o,a,h,c),(u=new ht(new s.Point(r,o),a,h,c,this.startAngle)).tag=i,this._areas.push(u)),h+=c),u&&(u.gi=e)},e.prototype._measureLegendItem=function(t,e){var i=new s.Size;if(i.width=st._LEGEND_ITEM_WIDTH,i.height=st._LEGEND_ITEM_HEIGHT,e){var n=t.measureString(e,M._CSS_LABEL,M._CSS_LEGEND);i.width+=n.width,i.height<n.height&&(i.height=n.height)}return i.width+=3*st._LEGEND_ITEM_MARGIN,i.height+=2*st._LEGEND_ITEM_MARGIN,i},e.prototype._drawLegendItem=function(t,e,i,n){t.strokeWidth=1;var r=st._LEGEND_ITEM_MARGIN,o=null,a=null;null===o&&(o=this._getColorLight(i)),null===a&&(a=this._getColor(i)),t.fill=o,t.stroke=a;var l=e.top+.5*e.height,h=st._LEGEND_ITEM_WIDTH,c=st._LEGEND_ITEM_HEIGHT;t.drawRect(e.left+r,l-.5*c,h,c,null),null!=n&&M._renderText(t,n.toString(),new s.Point(e.left+c+2*r,l),0,1,M._CSS_LABEL)},e.prototype._getLabelContent=function(t,e){return(0,s.isString)(e)?this._keywords.replace(e,t):(0,s.isFunction)(e)?e(t):null},e.prototype._select=function(t,e){if(void 0===e&&(e=!1),this._highlight(!1,this._selectionIndex),this._selectionIndex=t,this.selectionMode==_.Point){var i=this._cv;i&&(this._notifyCurrentChanged=!1,i.moveCurrentToPosition(t),this._notifyCurrentChanged=!0)}null==t?(this._selectedIndex=-1,this.invalidate()):this.isAnimated&&this.selectedItemPosition!=g.None||!(this.selectedItemOffset>0||this.selectedItemPosition!=g.None)?this._highlight(!0,this._selectionIndex,e):(this._selectedIndex=t,this.invalidate()),this.onSelectionChanged()},e.prototype._highlightCurrent=function(){if(this.selectionMode!=_.None){var t=-1,e=this._cv;e&&(t=e.currentPosition),this._highlight(!0,t)}},e.prototype._highlight=function(t,e,i){if(void 0===i&&(i=!1),this.selectionMode==_.Point&&null!=e&&e>=0)if(t){for(var n=[],r=0;r<this._pieGroups.length;r++){if(d=this._pels[e+r*this._values[0].length]){d.parentNode.appendChild(d);var o=this._find(d,["ellipse"]);this._highlightItems(this._find(d,["path","ellipse"]),M._CSS_SELECTION,t)}var s=this._angles[e+r*this._values[0].length];if(this.selectedItemPosition!=g.None&&0!=s){var a=0;this.selectedItemPosition==g.Left?a=180:this.selectedItemPosition==g.Top?a=-90:this.selectedItemPosition==g.Bottom&&(a=90);var l=a*Math.PI/180-s;l*=180/Math.PI,i&&this.isAnimated?n.push(l):(this._rotationAngles[r]=l,this._pieGroups[r].transform.baseVal.getItem(0).setRotate(l,this._centers[r].x,this._centers[r].y))}var h=this.selectedItemOffset;if(h>0&&o&&0==o.length){var c=this._selectedOffset.x=Math.cos(s)*h*this._radius,u=this._selectedOffset.y=Math.sin(s)*h*this._radius;d&&d.setAttribute("transform","translate("+c.toFixed()+","+u.toFixed()+")")}this._selectedIndex=e}n.length>0&&this._animateSelectionAngle(n,.5)}else{for(r=0;r<this._pieGroups.length;r++){var d;(d=this._pels[e+r*this._values[0].length])&&(d.parentNode.insertBefore(d,d.parentNode.childNodes.item(e)),d.removeAttribute("transform"),this._highlightItems(this._find(d,["path","ellipse"]),M._CSS_SELECTION,t))}this._selectedIndex==e&&(this._selectedIndex=-1)}},e.prototype._animateSelectionAngle=function(t,e){var i=this,n=i._pieGroups;i._selectionAnimationID&&clearInterval(this._selectionAnimationID),this._selectionAnimationID=(0,s.animate)((function(e){if(n==i._pieGroups){for(var r=0;r<n.length;r++){var o=lt.clampAngle(i._rotationAngles[r]),s=lt.clampAngle(t[r])-o,a=o;i._rotationAngles[r]=o=a+s*e,n[r].transform.baseVal.getItem(0).setRotate(o,i._centers[r].x,i._centers[r].y)}1==e&&clearInterval(i._selectionAnimationID),e>.99&&(i.selectedItemOffset>0||i.selectedItemPosition!=g.None)&&i.invalidate()}}),1e3*e)},e.prototype._getHitTestItem=function(t){var e,i=null;return(e=null!=this._cv?this._cv.items:this.itemsSource)&&t<e.length&&(i=e[t]),i},e.prototype._getHitTestValue=function(t,e){return null==e&&(e=0),this._values[e][t]},e.prototype._getHitTestLabel=function(t){return this._labels[t]},e._MARGIN=4,e._CSS_GROUP_TITLE="wj-label",e}(M),lt=function(){function t(){}return t.clampAngle=function(t,e){void 0===e&&(e=0);var i=(t+180)%360-180;return i<-180+(e<0?e+360:e)&&(i+=360),i},t}(),ht=function(){function t(t,e,i,n,r){void 0===r&&(r=0),this._isFull=!1,this._center=t,this._radius=e,this._originAngle=i,this._originSweep=n,n>=2*Math.PI&&(this._isFull=!0),this._sweep=.5*n*180/Math.PI,this._angle=lt.clampAngle(180*i/Math.PI+this._sweep),this._radius2=e*e,this._startAngle=r}return t.prototype.contains=function(t){var e=t.x-this._center.x,i=t.y-this._center.y;if(e*e+i*i<=this._radius2){var n=180*Math.atan2(i,e)/Math.PI,r=lt.clampAngle(this._angle,this._startAngle)-lt.clampAngle(n,this._startAngle);if(this._isFull||Math.abs(r)<=this._sweep)return!0}return!1},t.prototype.distance=function(t){if(this.contains(t))return 0;var e=t.x-this._center.x,i=t.y-this._center.y,n=e*e+i*i,r=180*Math.atan2(i,e)/Math.PI,o=lt.clampAngle(this._angle,this._startAngle)-lt.clampAngle(r,this._startAngle);return this._isFull||Math.abs(o)<=this._sweep?Math.sqrt(n)-this._radius:void 0},Object.defineProperty(t.prototype,"center",{get:function(){return this._center},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"radius",{get:function(){return this._radius},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"langle",{get:function(){return this._angle},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"angle",{get:function(){return this._originAngle},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sweep",{get:function(){return this._originSweep},enumerable:!0,configurable:!0}),t}(),ct=function(){function t(t,e,i,n,r,o){void 0===o&&(o=0),this._isFull=!1,this._center=t,this._radius=e,this._iradius=i,this._originAngle=n,this._originSweep=r,r>=2*Math.PI&&(this._isFull=!0),this._sweep=.5*r*180/Math.PI,this._angle=lt.clampAngle(180*n/Math.PI+this._sweep),this._radius2=e*e,this._iradius2=i*i,this._startAngle=o}return t.prototype.contains=function(t){var e=t.x-this._center.x,i=t.y-this._center.y,n=e*e+i*i;if(n>=this._iradius2&&n<=this._radius2){var r=180*Math.atan2(i,e)/Math.PI,o=lt.clampAngle(this._angle,this._startAngle)-lt.clampAngle(r,this._startAngle);if(this._isFull||Math.abs(o)<=this._sweep)return!0}return!1},t.prototype.distance=function(t){if(this.contains(t))return 0},Object.defineProperty(t.prototype,"center",{get:function(){return this._center},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"radius",{get:function(){return this._radius},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"langle",{get:function(){return this._angle},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"angle",{get:function(){return this._originAngle},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sweep",{get:function(){return this._originSweep},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"innerRadius",{get:function(){return this._iradius},enumerable:!0,configurable:!0}),t}(),ut=function(){function t(){this._DEFAULT_WIDTH=2,this._DEFAULT_SYM_SIZE=10,this.clipping=!0}return t.prototype.clear=function(){this.seriesCount=0,this.seriesIndex=0},t.prototype._renderLabels=function(t,e,i,n,r){var o=i.length,a=n.dataLabel,l=a.border,h=a.offset,c=a.connectingLine;void 0===h&&(h=c?16:0),l&&(h-=2);for(var u=0;u<o;u++){var d=i[u],p=(0,s.asType)(d.tag,K,!0);p&&!d.ignoreLabel&&this._renderLabel(t,d,p,n,a,e,h,r)}},t.prototype._renderLabel=function(t,e,i,n,r,o,s,a){var l=null==r.position?P.Top:r.position,h=r.border,c=r.connectingLine,u=new tt(n,p);u._setDataPoint(i);var d=n._getLabelContent(u,r.content),p=this._getLabelPoint(o,i);if(this._getPointAndPosition(p,l,e,n),n._plotRect.contains(p)){var f=new L(t,u,p,d);if(r.onRendering&&(r.onRendering(f)?(d=f.text,p=f.point):d=null),d){var _=this._renderLabelAndBorder(t,d,l,s,p,c,2,h);if(_){var g=new U(_);g.tag=i,a.push(g)}}t.cssPriority=!0}},t.prototype._getPointAndPosition=function(t,e,i,n){if(i instanceof U){var r=i;n._isRotated()?t.y=r.rect.top+.5*r.rect.height:t.x=r.rect.left+.5*r.rect.width}},t.prototype._getLabelPoint=function(t,e){var i=t._getAxisX(),n=t._getAxisY();return new s.Point(i.convert(e.dataX),n.convert(e.dataY))},t.prototype._renderLabelAndBorder=function(t,e,i,n,r,o,s,a){var l,h="wj-data-label",c="wj-data-label-line",u=_t._CSS_DATA_LABELS;switch(i){case P.Top:o&&t.drawLine(r.x,r.y,r.x,r.y-n,c),r.y-=s+n,l=_t._renderText(t,e,r,1,2,h,u);break;case P.Bottom:o&&t.drawLine(r.x,r.y,r.x,r.y+n,c),r.y+=s+n,l=_t._renderText(t,e,r,1,0,h,u);break;case P.Left:o&&t.drawLine(r.x,r.y,r.x-n,r.y,c),r.x-=s+n,l=_t._renderText(t,e,r,2,1,h,u);break;case P.Right:o&&t.drawLine(r.x,r.y,r.x+n,r.y,c),r.x+=s+n,l=_t._renderText(t,e,r,0,1,h,u);break;case P.Center:l=_t._renderText(t,e,r,1,1,h,u)}return a&&l&&t.drawRect(l.left-s,l.top-s,l.width+2*s,l.height+2*s,"wj-data-label-border"),l},t.prototype.getOption=function(t,e){var i=this.chart._options;if(e&&(i=i?i[e]:null),i&&!(0,s.isUndefined)(i[t])&&null!==i[t])return i[t]},t.prototype.getNumOption=function(t,e){var i=this.chart._options;if(e&&(i=i?i[e]:null),i&&i[t])return(0,s.asNumber)(i[t],!0)},t.prototype.getItemFormatter=function(t){if(t instanceof ot){var e=t;return e.itemFormatter?e.itemFormatter:this.chart.itemFormatter}return this.chart.itemFormatter},t.cloneStyle=function(t,e){if(!t)return t;var i={};for(var n in t)e&&e.indexOf(n)>=0||(i[n]=t[n]);return i},t.prototype.isValid=function(t,e,i,n){return isFinite(t)&&isFinite(e)&&_t._contains(this.chart._plotRect,new s.Point(t,e))},t.prototype.load=function(){},t.prototype.unload=function(){},t.prototype._createSteps=function(t,e,i){var n=this.getOption("position","step"),r=i||t.length,o=[],s=[],a=this.chart._isRotated();if("center"==n)if(a)for(var l=0;l<r;l++){var h=0==l?e[l+1]-e[l]:e[l]-e[l-1],c=l==r-1?e[l]-e[l-1]:e[l+1]-e[l];o.push(t[l]),s.push(e[l]-.5*h),o.push(t[l]),s.push(e[l]+.5*c)}else for(l=0;l<r;l++){var u=0==l?t[l+1]-t[l]:t[l]-t[l-1],d=l==r-1?t[l]-t[l-1]:t[l+1]-t[l];o.push(t[l]-.5*u),s.push(e[l]),o.push(t[l]+.5*d),s.push(e[l])}else if("end"==n)for(l=0;l<r;l++)l>0&&(a?(o.push(t[l]),s.push(e[l-1])):(o.push(t[l-1]),s.push(e[l]))),o.push(t[l]),s.push(e[l]);else for(l=0;l<r;l++)o.push(t[l]),s.push(e[l]),l<r-1&&(a?(o.push(t[l]),s.push(e[l+1])):(o.push(t[l+1]),s.push(e[l])));return{x:o,y:s}},t}();!function(t){t[t.Column=0]="Column",t[t.Bar=1]="Bar",t[t.Scatter=2]="Scatter",t[t.Line=3]="Line",t[t.LineSymbols=4]="LineSymbols",t[t.Area=5]="Area",t[t.Bubble=6]="Bubble",t[t.Candlestick=7]="Candlestick",t[t.HighLowOpenClose=8]="HighLowOpenClose",t[t.Spline=9]="Spline",t[t.SplineSymbols=10]="SplineSymbols",t[t.SplineArea=11]="SplineArea",t[t.Funnel=12]="Funnel",t[t.Step=13]="Step",t[t.StepSymbols=14]="StepSymbols",t[t.StepArea=15]="StepArea"}(et||(et={})),function(t){t[t.None=0]="None",t[t.Stacked=1]="Stacked",t[t.Stacked100pc=2]="Stacked100pc"}(it||(it={}));var dt,pt,ft,_t=function(t){function e(i,n){var r=t.call(this,i,null,!0)||this;r._series=new s.ObservableArray,r._axes=new z,r._pareas=new p,r._interpolateNulls=!1,r._legendToggle=!1,r._symbolSize=10,r._dataInfo=new mt,r.__barPlotter=null,r.__linePlotter=null,r.__areaPlotter=null,r.__bubblePlotter=null,r.__financePlotter=null,r.__funnelPlotter=null,r._plotters=[],r._rotated=!1,r._stacking=it.None,r._xlabels=[],r._xvals=[],r._lblAreas=[],r._colRowLens=[],r._selectedEls=[],r._markers=[],r._bindingSeparator=",",r.seriesVisibilityChanged=new s.Event,r.applyTemplate("wj-control wj-flexchart",null,null);var o=r;return o._series.collectionChanged.addHandler((function(){for(var t=o._series,e=0;e<t.length;e++){var i=(0,s.tryCast)(t[e],ot);if(!i)throw"chartSeries array must contain SeriesBase objects.";i._chart=o,i.axisX&&null==i.axisX._chart&&(i.axisX._chart=o,o.axes.push(i.axisX)),i.axisY&&null==i.axisY._chart&&(i.axisY._chart=o,o.axes.push(i.axisY))}o.invalidate()})),r._currentRenderEngine=new b(r.hostElement),r._hitTester=new Z(r),r._legend=new C(r),r._tooltip=new R,r._tooltip.showDelay=0,r._lbl=new N,r._lbl._chart=r,r._initAxes(),o._axes.collectionChanged.addHandler((function(){for(var t=o._axes,e=0;e<t.length;e++){var i=(0,s.tryCast)(t[e],B);if(!i)throw"axes array must contain Axis objects.";i._chart=o}o.invalidate()})),o._pareas.collectionChanged.addHandler((function(){for(var t=o._pareas,e=0;e<t.length;e++){var i=(0,s.tryCast)(t[e],d);if(!i)throw"plotAreas array must contain PlotArea objects.";i._chart=o}o.invalidate()})),r._keywords=new I,r.hostElement.addEventListener("click",(function(t){var e=o._tooltip;e.content&&o.isTouching&&o._updateTooltip(e,t)})),r.hostElement.addEventListener("mousemove",(function(t){var e=o._tooltip;e.content&&!o.isTouching&&o._updateTooltip(e,t)})),r.hostElement.addEventListener("mouseleave",(function(t){o._hideToolTip()})),r.hostElement.addEventListener("click",(function(t){if(o.selectionMode!=_.None){var i=o._hitTestData(t),n=e._SELECTION_THRESHOLD;o.tooltip&&o.tooltip.threshold&&(n=o.tooltip.threshold),i.distance<=n&&i.series?o._select(i.series,i.pointIndex):o.selectionMode==_.Series&&(i=o.hitTest(t)).chartElement==W.Legend&&i.series?o._select(i.series,null):o._select(null,null)}!0===o.legendToggle&&(i=o.hitTest(t)).chartElement==W.Legend&&i.series&&(i.series.visibility==$.Legend?i.series.visibility=$.Visible:i.series.visibility==$.Visible&&(i.series.visibility=$.Legend),o.focus())})),r.deferUpdate((function(){return r.initialize(n)})),r}return l(e,t),e.prototype.initialize=function(e){if(e&&e.renderEngine){var i=(0,s.asType)(this._currentRenderEngine,b,!0);i&&i.detach(),this._currentRenderEngine=null}t.prototype.initialize.call(this,e)},e.prototype._initAxes=function(){this._axisX=new B(g.Bottom),this._axisY=new B(g.Left),this._axisX.majorGrid=!1,this._axisX.name="axisX",this._axisY.majorGrid=!0,this._axisY.majorTickMarks=O.None,this._axisY.name="axisY",this._axisX._chart=this,this._axisY._chart=this,this._axes.push(this._axisX),this._axes.push(this._axisY)},Object.defineProperty(e.prototype,"series",{get:function(){return this._series},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"axes",{get:function(){return this._axes},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"axisX",{get:function(){return this._axisX},set:function(t){if(t!=this._axisX){var e=this._axisX=(0,s.asType)(t,B);this.beginUpdate(),e&&(void 0===e.majorGrid&&(e.majorGrid=!1),void 0===e.name&&(e.name="axisX"),null==e.position&&(e.position=g.Bottom),e._axisType=A.X,e._chart=this),this.endUpdate()}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"axisY",{get:function(){return this._axisY},set:function(t){if(t!=this._axisY){var e=this._axisY=(0,s.asType)(t,B);this.beginUpdate(),e&&(void 0===e.majorGrid&&(e.majorGrid=!0),void 0===e.name&&(e.name="axisY"),void 0===e.majorTickMarks&&(e.majorTickMarks=O.None),null==e.position&&(e.position=g.Left),e._axisType=A.Y,e._chart=this),this.endUpdate()}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"plotAreas",{get:function(){return this._pareas},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"binding",{get:function(){return this._binding},set:function(t){t!=this._binding&&(this._binding=(0,s.asString)(t,!0),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bindingX",{get:function(){return this._bindingX},set:function(t){t!=this._bindingX&&(this._bindingX=(0,s.asString)(t,!0),this._bindChart())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"symbolSize",{get:function(){return this._symbolSize},set:function(t){t!=this._symbolSize&&(this._symbolSize=(0,s.asNumber)(t,!1,!0),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"interpolateNulls",{get:function(){return this._interpolateNulls},set:function(t){t!=this._interpolateNulls&&(this._interpolateNulls=(0,s.asBoolean)(t),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"legendToggle",{get:function(){return this._legendToggle},set:function(t){t!=this._legendToggle&&(this._legendToggle=(0,s.asBoolean)(t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tooltip",{get:function(){return this._tooltip},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dataLabel",{get:function(){return this._lbl},set:function(t){t!=this._lbl&&(this._lbl=(0,s.asType)(t,N),this._lbl&&(this._lbl._chart=this))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selection",{get:function(){return this._selection},set:function(t){t!=this._selection&&(this._selection=(0,s.asType)(t,ot,!0),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"renderEngine",{get:function(){return this._currentRenderEngine},set:function(t){if(t!=this._currentRenderEngine){var e=(0,s.asType)(this._currentRenderEngine,b,!0);e&&e.detach(),this._currentRenderEngine=t;var i=(0,s.asType)(this._currentRenderEngine,b,!0);i&&i.attach(this.hostElement),this.refresh()}},enumerable:!0,configurable:!0}),e.prototype.onSeriesVisibilityChanged=function(t){this.seriesVisibilityChanged.raise(this,t)},e.prototype.hitTest=function(t,i){var n=this._toControl(t,i),r=new tt(this,n),o=null;if(e._contains(this._rectHeader,n))r._chartElement=W.Header;else if(e._contains(this._rectFooter,n))r._chartElement=W.Footer;else if(e._contains(this._rectLegend,n))r._chartElement=W.Legend,null!==(o=this.legend._hitTest(n))&&o>=0&&o<this.series.length&&(this._getChartType()===et.Bar?r._setData(this.series[this.series.length-1-o]):r._setData(this.series[o]));else if(e._contains(this._rectChart,n)){var s=this._hitTestLabels(n);if(s)r._chartElement=W.DataLabel,r._dist=0,r._setDataPoint(s.tag);else{for(var a=this._hitTester.hitTest(n),l=null,h=null,c=this.series.length-1;c>=0;c--)if(this.series[c].hitTest!==st.prototype.hitTest){var u=this.series[c].hitTest(t);if(u&&((!l||u.distance<l.distance)&&(l=u,h=c),0===u.distance))break}a&&a.area?l&&l.distance<a.distance||l&&l.distance==a.distance&&h>a.area.tag.seriesIndex?r=l:(r._setDataPoint(a.area.tag),r._dist=a.distance):l&&(r=l);var d=!1;this.axes.some((function(t){if(e._contains(t._axrect,n))return t.axisType===A.X?r._chartElement=W.AxisX:r._chartElement=W.AxisY,d=!0,!0})),d||(e._contains(this._plotRect,n)?r._chartElement=W.PlotArea:e._contains(this._rectChart,n)&&(r._chartElement=W.ChartArea))}}else r._chartElement=W.None;return r},e.prototype.pointToData=function(t,e){return(0,s.isNumber)(t)&&(0,s.isNumber)(e)&&(t=new s.Point(t,e)),t instanceof MouseEvent?(t=new s.Point(t.pageX,t.pageY),t=this._toControl(t)):t=t.clone(),t.x=this.axisX.convertBack(t.x),t.y=this.axisY.convertBack(t.y),t},e.prototype.dataToPoint=function(t,e){(0,s.isNumber)(t)&&(0,s.isNumber)(e)&&(t=new s.Point(t,e)),(0,s.asType)(t,s.Point);var i=t.clone();return i.x=this.axisX.convert(i.x),i.y=this.axisY.convert(i.y),i},e.prototype.dispose=function(){this._markers.forEach((function(t){return t.remove()})),this._markers=[],t.prototype.dispose.call(this)},e.prototype._copy=function(t,e){if("series"==t){this.series.clear();for(var i=(0,s.asArray)(e),n=0;n<i.length;n++){var r=this._createSeries();(0,s.copy)(r,i[n]),this.series.push(r)}return!0}return!1},e.prototype._createSeries=function(){return new st},e.prototype._clearCachedValues=function(){for(var t=0;t<this._series.length;t++){var e=this._series[t];null==e.itemsSource&&e._clearValues()}},e.prototype._performBind=function(){if(this._xDataType=null,this._xlabels.splice(0),this._xvals.splice(0),this._cv){var t=this._cv.items;if(t){for(var e=t.length,i=this.bindingX?new s.Binding(this.bindingX):null,n=0;n<e;n++){var r=t[n];if(i){var o=i.getValue(r);(0,s.isNumber)(o)?(this._xvals.push((0,s.asNumber)(o)),this._xDataType=s.DataType.Number):(0,s.isDate)(o)&&(this._xvals.push((0,s.asDate)(o).valueOf()),this._xDataType=s.DataType.Date),this._xlabels.push(o)}}this._xvals.length==e?this._xlabels.splice(0):this._xvals.splice(0)}}},e.prototype._hitTestSeries=function(t,e){var i=this._toControl(t),n=new tt(this,i),r=this._hitTester.hitTestSeries(i,e);return r&&r.area&&(n._setDataPoint(r.area.tag),n._chartElement=W.PlotArea,n._dist=r.distance),n},e.prototype._hitTestData=function(t){var e=this._toControl(t),i=new tt(this,e),n=this._hitTester.hitTest(e,!0);return n&&n.area&&(i._setDataPoint(n.area.tag),i._dist=n.distance),i},e.prototype._hitTestLabels=function(t){for(var e=null,i=this._lblAreas.length,n=0;n<i;n++)if(this._lblAreas[n].contains(t)){e=this._lblAreas[n];break}return e},e._dist2=function(t,e){var i=t.x-e.x,n=t.y-e.y;return i*i+n*n},e._dist=function(t,i,n){return Math.sqrt(e._distToSegmentSquared(t,i,n))},e._distToSegmentSquared=function(t,i,n){var r=e._dist2(i,n);if(0==r)return e._dist2(t,i);var o=((t.x-i.x)*(n.x-i.x)+(t.y-i.y)*(n.y-i.y))/r;return o<0?e._dist2(t,i):o>1?e._dist2(t,n):e._dist2(t,new s.Point(i.x+o*(n.x-i.x),i.y+o*(n.y-i.y)))},e.prototype._isRotated=function(){return this._getChartType()==et.Bar?!this._rotated:this._rotated},e.prototype._getChartType=function(){return null},e.prototype._prepareRender=function(){this._hitTester.clear()},e.prototype._renderChart=function(t,i,n){var r=this._rectChart.clone(),o=new s.Size(r.width,r.height);i.width,i.height,this._selectedEls.length=0,(y=this._getPlotter(null)).stacking=this._stacking,this._curPlotter!=y&&(this._curPlotter&&this._curPlotter.unload(),this._curPlotter=y),y.load();var a=this._isRotated();this._dataInfo.analyse(this._series,a,y.stacking,this._xvals.length>0?this._xvals:null,this.axisX._getLogBase()>0,this.axisY._getLogBase()>0);var l=y.adjustLimits(this._dataInfo,i.clone());if(a){var h=this._dataInfo.getDataTypeX();h||(h=this._xDataType),this.axisX._updateActualLimits(this._dataInfo.getDataTypeY(),l.left,l.right),this.axisY._updateActualLimits(h,l.top,l.bottom,this._xlabels,this._xvals)}else{var c=this._dataInfo.getDataTypeX();c||(c=this._xDataType),this.axisX._updateActualLimits(c,l.left,l.right,this._xlabels,this._xvals),this.axisY._updateActualLimits(this._dataInfo.getDataTypeY(),l.top,l.bottom)}var u=this._getAxes();if(this._updateAuxAxes(u,a),this._layout(i,o,t),t.startGroup(e._CSS_PLOT_AREA),t.fill="transparent",t.stroke=null,this.plotAreas.length>0)for(var d=0;d<this.plotAreas.length;d++)this.plotAreas[d]._render(t);else{var p=this._plotRect;t.drawRect(p.left,p.top,p.width,p.height)}t.endGroup();var f=this._series.length;this._clearPlotters();var _={};for(d=0;d<f;d++){var g=this._series[d];if(((x=g.visibility)==$.Visible||x==$.Plot)&&g.getValues(0)){var m=g._getAxisY(),y=this._getPlotter(g);if(!m||m==this.axisY||y instanceof vt)y.seriesCount++;else{var b=m._uniqueId;_[b]?_[b].count+=1:_[b]={count:1,index:0}}}}if(this.onRendering(new S(t)),this._getChartType()!==et.Funnel)for(d=0;d<u.length;d++){var v=u[d];C=v.axisType==A.X?t.startGroup(e._CSS_AXIS_X,this._chartRectId):t.startGroup(e._CSS_AXIS_Y,this._chartRectId),v._hostElement=n?C:v._hostElement,v._render(t),t.endGroup()}for(t.startGroup("wj-series-group"),this._plotrectId="plotRect"+(1e6*Math.random()).toFixed(),t.addClipRect(this._plotRect,this._plotrectId),d=0;d<f;d++){var w=this._series[d];w._pointIndexes=[],y=this._getPlotter(w),w._plotter=y;var C=t.startGroup(w.cssClass,y.clipping?this._plotrectId:null);w._hostElement=n?C:w._hostElement;var x=w.visibility,E=w.axisX,T=w.axisY;if(E||(E=this.axisX),T||(T=this.axisY),x==$.Visible||x==$.Plot){var M,I,D=_[T._uniqueId];!D||y instanceof vt?(M=y.seriesIndex,I=y.seriesCount,y.seriesIndex++,w.onRendering(t,M,I)||y.plotSeries(t,E,T,w,this,M,I)):(M=D.index,I=D.count,D.index++,w.onRendering(t,M,I)||y.plotSeries(t,E,T,w,this,M,I)),w.onRendered(t)}t.endGroup()}t.endGroup(),this._lblAreas=[],this.dataLabel.content&&this.dataLabel.position!=P.None&&this._renderLabels(t),this._highlightCurrent(),this.onRendered(new S(t))},e.prototype._getDesiredLegendSize=function(t,e,i,n){var r=new s.Size,o=this.series,a=o.length,l=0,h=0;this._colRowLens=[];for(var c=0;c<a;c++){var u=(0,s.tryCast)(o[c],ot),d=u.visibility;if(u.name&&d!=$.Hidden&&d!=$.Plot)for(var p=u.legendItemLength(),f=0;f<p;f++){var _=u.measureLegendItem(t,f);e?(l+_.height>n&&(r.height=n,this._colRowLens.push(h),h=0,l=0),h<_.width&&(h=_.width),l+=_.height):(h+_.width>i&&(r.width=i,this._colRowLens.push(l),l=0,h=0),l<_.height&&(l=_.height),h+=_.width)}}return e?(r.height<l&&(r.height=l),this._colRowLens.push(h),r.width=this._colRowLens.reduce((function(t,e){return t+e}),0),r.width=this._getLegendSize(i,r.width)):(r.width<h&&(r.width=h),this._colRowLens.push(l),r.height=this._colRowLens.reduce((function(t,e){return t+e}),0),r.height=this._getLegendSize(n,r.height)),r},e.prototype._renderLegend=function(t,e,i,n,r,o){var a,l=this.series,h=l.length,c=e.clone(),u=0;if(this._legendReversed())for(var d=h-1;d>=0;d--)a=(0,s.tryCast)(l[d],ot),u=this._renderLegendElements(t,a,e,c,i,n,r,o,u);else for(d=0;d<h;d++)a=(0,s.tryCast)(l[d],ot),u=this._renderLegendElements(t,a,e,c,i,n,r,o,u)},e.prototype._legendReversed=function(){var t=!1,e=this._getChartType();return(e===et.Bar||e===et.Column&&this._rotated)&&(this._stacking!==it.None||this.axisY.reversed||(t=!0)),t},e.prototype._renderLegendElements=function(t,e,i,n,r,o,a,l,h){var c=this._rectLegend,u=h;if(!e)return u;var d=e.visibility;if(!e.name||d==$.Hidden||d==$.Plot)return e._legendElement=null,r.push(null),u;var p=e.legendItemLength(),f=t.startGroup(e.cssClass);d==$.Legend?(f.setAttribute("opacity","0.5"),e._legendElement=f):d==$.Visible?e._legendElement=f:e._legendElement=null;for(var _=0;_<p;_++){var g=e.measureLegendItem(t,_);o?n.y+g.height>c.top+c.height+1&&(n.x+=this._colRowLens[u],u++,n.y=i.y):n.x+g.width>c.left+c.width+1&&(n.y+=this._colRowLens[u],u++,n.x=i.x);var m=new s.Rect(n.x,n.y,g.width,g.height);d!=$.Legend&&d!=$.Visible||e.drawLegendItem(t,m,_),r.push(m),o?n.y+=g.height:n.x+=g.width}return t.endGroup(),u},e.prototype._renderLabels=function(t){var i=this.series,n=i.length;t.stroke="null",t.fill="transparent",t.strokeWidth=1;var r=e._CSS_DATA_LABELS;t.startGroup(r);for(var o=0;o<n;o++){var s=i[o],a=this._hitTester._map[o];a&&s._renderLabels(t,a,this,this._lblAreas)}t.endGroup()},e.prototype._getAxes=function(){for(var t=[this.axisX,this.axisY],e=this.series.length,i=0;i<e;i++){var n=this.series[i],r=n.axisX;r&&-1===t.indexOf(r)&&t.push(r);var o=n.axisY;o&&-1===t.indexOf(o)&&t.push(o)}return t},e.prototype._clearPlotters=function(){for(var t=this._plotters.length,e=0;e<t;e++)this._plotters[e].clear()},e.prototype._initPlotter=function(t){t.chart=this,t.dataInfo=this._dataInfo,t.hitTester=this._hitTester,this._plotters.push(t)},Object.defineProperty(e.prototype,"_barPlotter",{get:function(){return null===this.__barPlotter&&(this.__barPlotter=new vt,this._initPlotter(this.__barPlotter)),this.__barPlotter},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_linePlotter",{get:function(){return null===this.__linePlotter&&(this.__linePlotter=new Tt,this._initPlotter(this.__linePlotter)),this.__linePlotter},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_areaPlotter",{get:function(){return null===this.__areaPlotter&&(this.__areaPlotter=new bt,this._initPlotter(this.__areaPlotter)),this.__areaPlotter},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_bubblePlotter",{get:function(){return null===this.__bubblePlotter&&(this.__bubblePlotter=new Mt,this._initPlotter(this.__bubblePlotter)),this.__bubblePlotter},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_financePlotter",{get:function(){return null===this.__financePlotter&&(this.__financePlotter=new xt,this._initPlotter(this.__financePlotter)),this.__financePlotter},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_funnelPlotter",{get:function(){return null===this.__funnelPlotter&&(this.__funnelPlotter=new wt,this._initPlotter(this.__funnelPlotter)),this.__funnelPlotter},enumerable:!0,configurable:!0}),e.prototype._getPlotter=function(t){var e,i=this._getChartType(),n=!1;if(t){var r=t._getChartType();null!=r&&r!=i&&(i=r,n=!0)}switch(i){case et.Column:this._barPlotter.isVolume=!1,this._barPlotter.width=.7,e=this._barPlotter;break;case et.Bar:this._barPlotter.rotated=!this._rotated,this._barPlotter.isVolume=!1,this._barPlotter.width=.7,e=this._barPlotter;break;case et.Line:this._linePlotter.hasSymbols=!1,this._linePlotter.hasLines=!0,this._linePlotter.isSpline=!1,this._linePlotter.isStep=!1,e=this._linePlotter;break;case et.Scatter:this._linePlotter.hasSymbols=!0,this._linePlotter.hasLines=!1,this._linePlotter.isSpline=!1,this._linePlotter.isStep=!1,e=this._linePlotter;break;case et.LineSymbols:this._linePlotter.hasSymbols=!0,this._linePlotter.hasLines=!0,this._linePlotter.isSpline=!1,this._linePlotter.isStep=!1,e=this._linePlotter;break;case et.Area:this._areaPlotter.isSpline=!1,this._areaPlotter.isStep=!1,e=this._areaPlotter;break;case et.Bubble:e=this._bubblePlotter;break;case et.Candlestick:(o=this._financePlotter).isCandle=!0,o.isEqui=!1,o.isArms=!1,o.isVolume=!1,e=o;break;case et.HighLowOpenClose:var o;(o=this._financePlotter).isCandle=!1,o.isEqui=!1,o.isArms=!1,o.isVolume=!1,e=o;break;case et.Spline:this._linePlotter.hasSymbols=!1,this._linePlotter.hasLines=!0,this._linePlotter.isSpline=!0,this._linePlotter.isStep=!1,e=this._linePlotter;break;case et.SplineSymbols:this._linePlotter.hasSymbols=!0,this._linePlotter.hasLines=!0,this._linePlotter.isSpline=!0,this._linePlotter.isStep=!1,e=this._linePlotter;break;case et.SplineArea:this._areaPlotter.isSpline=!0,this._areaPlotter.isStep=!1,e=this._areaPlotter;break;case et.Funnel:e=this._funnelPlotter;break;case et.Step:this._linePlotter.hasSymbols=!1,this._linePlotter.hasLines=!0,this._linePlotter.isSpline=!1,this._linePlotter.isStep=!0,e=this._linePlotter;break;case et.StepSymbols:this._linePlotter.hasSymbols=!0,this._linePlotter.hasLines=!0,this._linePlotter.isSpline=!1,this._linePlotter.isStep=!0,e=this._linePlotter;break;case et.StepArea:this._areaPlotter.isSpline=!1,this._areaPlotter.isStep=!0,e=this._areaPlotter;break;default:throw"Invalid chart type."}return e.rotated=this._rotated,i==et.Bar&&(e.rotated=!e.rotated),n&&(e.rotated=this._isRotated()),e},e.prototype._layout=function(t,e,i){this.plotAreas.length>0?this._layoutMultiple(t,e,i):this._layoutSingle(t,e,i)},e.prototype._layoutSingle=function(t,e,i){for(var n=t.width,r=t.height,o=new s.Size(n,.75*r),a=new s.Size(r,.75*n),l=0,h=0,c=n,u=r,d=0,p=0,f=n,_=r,m=this._getAxes(),y=this.axisY._getHeight(i,r),b=0;b<m.length;b++){var v=(M=m[b]).origin,w=M._getPosition();if(M.axisType==A.X){(E=M._getHeight(i,Math.max(10,n-y)))>o.height&&(E=o.height),M._desiredSize=new s.Size(o.width,E);var C=M._hasOrigin=(0,s.isNumber)(v)&&v>this.axisY._getMinNum()&&v<this.axisY._getMaxNum(),x=Math.min(.25*n,M._annoSize.width);if(w==g.Bottom)if(l=Math.max(l,.5*x),c=Math.min(c,n-.5*x),C){var S=this._convertY(v,p,_);_-=Math.max(0,S+E-_)}else _-=E;else w==g.Top&&(l=Math.max(l,.5*x),c=Math.min(c,n-.5*x),C?(S=this._convertY(v,p,_),p+=Math.max(0,p-(S-E))):p+=E)}else if(M.axisType==A.Y){var E;if((E=M===this.axisX?y:M._getHeight(i,r))>a.height&&(E=a.height),M._desiredSize=new s.Size(a.width,E),C=M._hasOrigin=(0,s.isNumber)(v)&&v>this.axisX._getMinNum()&&v<this.axisX._getMaxNum(),w==g.Left)if(M._actualAngle<0?u=Math.min(u,r-M._annoSize.height):M._actualAngle>0?h=Math.max(h,M._annoSize.height):(h=Math.max(h,M._annoSize.height),u=Math.min(u,r-M._annoSize.height)),C){var P=this._convertX(v,d,f);d+=Math.max(0,d-(P-E))}else d+=E;else w==g.Right&&(M._actualAngle>0?u=Math.min(u,r-M._annoSize.height):M._actualAngle<0?h=Math.max(h,M._annoSize.height):(h=Math.max(h,M._annoSize.height),u=Math.min(u,r-M._annoSize.height)),C?(P=this._convertX(v,d,f),f-=Math.max(0,P+E-f)):f-=E)}}var T=this._parseMargin(this.plotMargin);for(l=d=isNaN(T.left)?Math.max(l,d)+t.left:T.left,c=f=isNaN(T.right)?Math.min(c,f)+t.left:e.width-T.right,h=p=isNaN(T.top)?Math.max(h,p)+t.top:T.top,u=_=isNaN(T.bottom)?Math.min(u,_)+t.top:e.height-T.bottom,n=Math.max(1,c-l),r=Math.max(1,u-h),this._plotRect=new s.Rect(l,h,n,r),u<=h&&(_=p+1),i.stroke=null,b=0;b<m.length;b++){var M,I;if(v=(M=m[b]).origin,w=M._getPosition(),M.axisType==A.X)M._hasOrigin?(S=this._convertY(v,this._plotRect.top,this._plotRect.bottom),w==g.Bottom?(I=new s.Rect(l,S,n,M._desiredSize.height),_+=Math.max(0,I.bottom-this._plotRect.bottom)):w==g.Top?(I=new s.Rect(l,S-M._desiredSize.height,n,M._desiredSize.height),p-=Math.max(0,this._plotRect.top-I.top)):I=new s.Rect(l,S,n,1)):w==g.Bottom?(I=new s.Rect(l,_,n,M._desiredSize.height),_+=M._desiredSize.height):w==g.Top?(I=new s.Rect(l,p-M._desiredSize.height,n,M._desiredSize.height),p-=M._desiredSize.height):I=new s.Rect(l,p,n,1),M._layout(I,this._plotRect);else if(M.axisType==A.Y){var D;M._hasOrigin?(P=this._convertX(v,this._plotRect.left,this._plotRect.right),w==g.Left?(D=new s.Rect(P-M._desiredSize.height,h,r,M._desiredSize.height),d-=M._desiredSize.height):w==g.Right?(D=new s.Rect(P,h,r,M._desiredSize.height),f+=M._desiredSize.height):D=new s.Rect(P,h,r,1)):w==g.Left?(D=new s.Rect(d-M._desiredSize.height,h,r,M._desiredSize.height),d-=M._desiredSize.height):w==g.Right?(D=new s.Rect(f,h,r,M._desiredSize.height),f+=M._desiredSize.height):D=new s.Rect(d,h,r,1),M._layout(D,this._plotRect)}}},e.prototype._layoutMultiple=function(t,e,i){for(var n=t.width,r=t.height,o=[],a=[],l=this._getAxes(),h=l.length,c=0;c<h;c++)if((P=l[c])._plotrect=null,P.axisType==A.X){for(var u=P.plotArea?P.plotArea.column:0;o.length<=u;)o.push(new gt);o[u].axes.push(P)}else if(P.axisType==A.Y){for(var d=P.plotArea?P.plotArea.row:0;a.length<=d;)a.push(new gt);a[d].axes.push(P)}for(var p=o.length,f=a.length,_=new s.Size(n,.3*r),m=new s.Size(r,.3*n),y=0,b=0,v=n,w=r,C=0;C<p;C++)for((k=o[C]).right=n,k.bottom=r,c=0;c<k.axes.length;c++){var x=(P=k.axes[c])._getHeight(i,P.axisType==A.X?n:r);x>_.height&&(x=_.height);var S=new s.Size(_.width,x);P._desiredSize=S,0==C&&(k.left=Math.max(k.left,.5*P._annoSize.width)),C==p-1&&(k.right=Math.min(k.right,n-.5*P._annoSize.width)),(F=P._getPosition())==g.Bottom?k.bottom-=S.height:F==g.Top&&(k.top+=S.height)}for(var E=0;E<f;E++)for((k=a[E]).right=n,k.bottom=r,c=0;c<k.axes.length;c++){var P=k.axes[c],T=new s.Size(m.width,P._getHeight(i,P.axisType==A.X?n:r));T.height>m.height&&(T.height=m.height),P._desiredSize=T,0==E&&(k.top=Math.max(k.top,.5*P._annoSize.width)),E==f-1&&(k.bottom=Math.min(k.bottom,r-.5*P._annoSize.width)),(F=P._getPosition())==g.Left?k.left+=T.height:F==g.Right&&(k.right-=T.height)}var M=0,I=0,D=n,R=r;for(C=0;C<p;C++){var k=o[C];M=Math.max(M,k.left),I=Math.max(I,k.top),D=Math.min(D,k.right),R=Math.min(R,k.bottom)}for(E=0;E<f;E++)k=a[E],M=Math.max(M,k.left),I=Math.max(I,k.top),D=Math.min(D,k.right),R=Math.min(R,k.bottom);M=y=Math.max(y,M),D=v=Math.min(v,D),I=b=Math.max(b,I),R=w=Math.min(w,R),this._plotRect=new s.Rect(y,b,v-y,w-b);var O=this._plotRect.clone(),L=y,j=this.plotAreas._calculateWidths(this._plotRect.width,p);for(C=0;C<p;C++){R=w,I=b,k=o[C];var N=j[C];for(c=0;c<k.axes.length;c++){var H,F=(P=k.axes[c])._getPosition(),B=new s.Rect(L,O.top,N,O.height);F==g.Bottom?(H=new s.Rect(L,R,N,P._desiredSize.height),R+=P._desiredSize.height):F==g.Top&&(H=new s.Rect(L,I-P._desiredSize.height,N,P._desiredSize.height),I-=P._desiredSize.height),P._layout(H,B)}for(c=0;c<this.plotAreas.length;c++)(K=this.plotAreas[c]).column==C&&K._setPlotX(L,N);L+=N}var z=b,V=this.plotAreas._calculateHeights(this._plotRect.height,f);for(E=0;E<f;E++){M=y,D=v,k=a[E];var G=V[E];for(c=0;c<k.axes.length;c++){var Y;F=(P=k.axes[c])._getPosition(),B=new s.Rect(O.left,z,O.width,G),P._plotrect?(B.left=P._plotrect.left,B.width=P._plotrect.width):j&&j.length>0&&(B.width=j[0]),F==g.Left?(Y=new s.Rect(M-P._desiredSize.height,z,G,P._desiredSize.height),M-=P._desiredSize.height):F==g.Right&&(Y=new s.Rect(D,z,G,P._desiredSize.height),D+=P._desiredSize.height),P._layout(Y,B)}for(c=0;c<this.plotAreas.length;c++){var K;(K=this.plotAreas[c]).row==E&&K._setPlotY(z,G)}z+=G}},e.prototype._convertX=function(t,e,i){var n=this.axisX;return n.reversed?i-(i-e)*(t-n._getMinNum())/(n._getMaxNum()-n._getMinNum()):e+(i-e)*(t-n._getMinNum())/(n._getMaxNum()-n._getMinNum())},e.prototype._convertY=function(t,e,i){var n=this.axisY;return n.reversed?e+(i-e)*(t-n._getMinNum())/(n._getMaxNum()-n._getMinNum()):i-(i-e)*(t-n._getMinNum())/(n._getMaxNum()-n._getMinNum())},e.prototype._getLabelContent=function(t,e){return(0,s.isString)(e)?this._keywords.replace(e,t):(0,s.isFunction)(e)?e(t):null},e.prototype._select=function(t,e){var i=!1;if(t==this._selection&&e==this._selectionIndex||(i=!0),this._selection&&this._highlight(this._selection,!1,this._selectionIndex),this._selection=t,this._selectionIndex=e,this._selection&&this._highlight(this._selection,!0,this._selectionIndex),this.selectionMode==_.Point){var n=t?t.collectionView:this._cv;n&&(this._notifyCurrentChanged=!1,n.moveCurrentToPosition(t?e:-1),this._notifyCurrentChanged=!0)}i&&this.onSelectionChanged()},e.prototype._highlightCurrent=function(){if(this.selectionMode!=_.None){var t=this._selection,e=-1;if(t){var i=t.collectionView;i||(i=this._cv),i&&(e=i.currentPosition),this._highlight(t,!0,e)}}},e.prototype._highlight=function(t,i,n){if(t=(0,s.asType)(t,ot,!0),this.selectionMode==_.Series){var r=this.series.indexOf(t),o=t.hostElement;i?o.parentNode.appendChild(o):o.parentNode.insertBefore(o,o.parentNode.childNodes.item(r));var a=this._find(o,["rect","ellipse","polyline","polygon","line","path"]);this._highlightItems(a,e._CSS_SELECTION,i),t.legendElement&&this._highlightItems(this._find(t.legendElement,["rect","ellipse","line"]),e._CSS_SELECTION,i)}else if(this.selectionMode==_.Point)if(r=this.series.indexOf(t),o=t.hostElement,i){o.parentNode.appendChild(o);var l=t.getPlotElement(n);if(l)if(l instanceof SVGElement){if("g"!=l.nodeName&&(this._highlightItems([l],e._CSS_SELECTION,i),this._selectedEls.push(l)),(a=this._find(l,["line","rect","ellipse","path","polygon"])).length>0){this._highlightItems(a,e._CSS_SELECTION,i);for(var h=0;h<a.length;h++)this._selectedEls.push(a[h])}}else if(Array.isArray(l))for(this._highlightItems(l,e._CSS_SELECTION,i),h=0;h<l.length;h++)this._selectedEls.push(l[h])}else o.parentNode.insertBefore(o,o.parentNode.childNodes.item(r)),this._selectedEls.length>0&&(this._highlightItems(this._selectedEls,e._CSS_SELECTION,i),this._selectedEls.length=0)},e.prototype._updateTooltip=function(t,e){var i,n=this.hitTest(e);if(n.distance<=t.threshold){var r=t.content;if(n.series){var o=n.series.tooltipContent;(o||""===o)&&(r=o)}i=this._getLabelContent(n,r)}i?this._showToolTip(i,new s.Rect(e.clientX,e.clientY,5,5)):this._hideToolTip()},e.prototype._updateAuxAxes=function(t,e){for(var i=2;i<t.length;i++){var n=t[i];n._chart=this;for(var r,o,a=[],l=0;l<this.series.length;l++){var h=this.series[l];h.axisX!=n&&h.axisY!=n||a.push(h)}for(l=0;l<a.length;l++){var c=a[l].getDataRect()||a[l]._getDataRect();c&&(n.axisType==A.X&&!e||n.axisType==A.Y&&e?((void 0===r||c.left<r)&&(r=c.left),(void 0===o||c.right>o)&&(o=c.right)):((void 0===r||c.top<r)&&(r=c.top),(void 0===o||c.bottom>o)&&(o=c.bottom)))}var u=a[0].getDataType(0);null==u&&(u=s.DataType.Number),t[i]._updateActualLimits(u,r,o)}},e._CSS_AXIS_X="wj-axis-x",e._CSS_AXIS_Y="wj-axis-y",e._CSS_LINE="wj-line",e._CSS_GRIDLINE="wj-gridline",e._CSS_TICK="wj-tick",e._CSS_GRIDLINE_MINOR="wj-gridline-minor",e._CSS_TICK_MINOR="wj-tick-minor",e._CSS_DATA_LABELS="wj-data-labels",e}(M),gt=function(){function t(){this._axes=new Array,this.left=0,this.right=0,this.top=0,this.bottom=0}return Object.defineProperty(t.prototype,"axes",{get:function(){return this._axes},enumerable:!0,configurable:!0}),t}(),mt=function(){function t(){this.stackAbs={},this._xvals=null}return t.prototype.analyse=function(t,e,i,n,r,o){var a=this;this.minY=NaN,this.maxY=NaN,this.minX=NaN,this.maxX=NaN,this.minXp=NaN,this.minYp=NaN,this.dx=0;var l={},h={},c={};if(this.dataTypeX=null,this.dataTypeY=null,this._xvals=n,null!=n)for(var u=n.length,d=0;d<u;d++){var p=n[d];if((isNaN(this.minX)||this.minX>p)&&(this.minX=p),(isNaN(this.maxX)||this.maxX<p)&&(this.maxX=p),p>0&&(isNaN(this.minXp)||this.minXp>p)&&(this.minXp=p),d>0){var f=Math.abs(p-n[d-1]);!isNaN(f)&&(f<this.dx||0==this.dx)&&(this.dx=f)}}var _,g,m,y,b,v,w,C,x,S,E,P=function(){if(_=t[d],g=_._getChartType(),m=void 0!==_.chartType,(y=_.visibility)==$.Hidden||y==$.Legend)return"continue";if((b=_.getDataRect())&&(!isNaN(T.minX)&&T.minX<b.left&&(v=b.right,b.left=T.minX,b.width=v-T.minX),!isNaN(T.maxX)&&T.maxX>b.right&&(b.width=T.maxX-b.left),_._isCustomAxisY()||(!isNaN(T.minY)&&T.minY<b.top&&(v=b.bottom,b.top=T.minY,b.height=v-T.minY),!isNaN(T.maxY)&&T.maxY>b.bottom&&(b.height=T.maxY-b.top))),w=null,e?_._isCustomAxisY()||(w=_.getValues(1)):_._isCustomAxisX()||(w=_.getValues(1)),w){T.dataTypeX||(T.dataTypeX=_.getDataType(1));for(var r=0;r<w.length;r++)C=w[r],isFinite(C)&&((isNaN(T.minX)||T.minX>C)&&(T.minX=C),(isNaN(T.maxX)||T.maxX<C)&&(T.maxX=C),r>0&&(!g||g==et.Column||g==et.Bar)&&(f=Math.abs(C-w[r-1]),!isNaN(f)&&f>0&&(f<T.dx||0==T.dx)&&(T.dx=f)))}if(x=null,S=!1,e?(S=_._isCustomAxisX(),x=_.getValues(0)):(S=_._isCustomAxisY(),x=_.getValues(0)),x&&(T.dataTypeY||S||(T.dataTypeY=_.getDataType(0)),isNaN(T.minX)?T.minX=0:w||n||(T.minX=Math.min(T.minX,0)),isNaN(T.maxX)?T.maxX=x.length-1:w||n||(T.maxX=Math.max(T.maxX,x.length-1)),!S))for(var o=i==it.None||m,u=function(t){var e=x[t],i=w?(0,s.asNumber)(w[t],!0):n?(0,s.asNumber)(n[t],!0):t;(0,s.isArray)(e)?e.forEach((function(t){a._parseYVal(t,i,o,c,l,h)})):T._parseYVal(e,i,o,c,l,h)},p=0;p<x.length;p++)u(p);(E=_.getDataRect(new s.Rect(T.minX,T.minY,T.maxX-T.minX,T.maxY-T.minY),b))&&(T.minX=E.left,T.maxX=E.right,S||(T.minY=E.top,T.maxY=E.bottom))},T=this;for(d=0;d<t.length;d++)P();if(i==it.Stacked){for(var M in l)l[M]>this.maxY&&(this.maxY=l[M]);for(var M in h)h[M]<this.minY&&(this.minY=h[M])}else if(i==it.Stacked100pc){for(var M in this.minY=0,this.maxY=0,c){var I=c[M];if(isFinite(I)&&0!=I){var D=l[M],R=h[M];isFinite(D)&&(D=Math.max(D/I,this.maxY))>this.maxY&&(this.maxY=D),isFinite(R)&&(R=Math.min(R/I,this.minY))<this.minY&&(this.minY=R)}}this.minY==this.maxY&&(this.minY=0,this.maxY=1)}this.stackAbs=c,r&&(e?this.minY=isNaN(this.minYp)?1:this.minYp:this.minX=isNaN(this.minXp)?1:this.minXp),o&&(e?this.minX=isNaN(this.minXp)?1:this.minXp:this.minY=isNaN(this.minYp)?1:this.minYp)},t.prototype._parseYVal=function(t,e,i,n,r,o){isFinite(t)&&(null!=t&&(isNaN(this.minY)||this.minY>t)&&(this.minY=t),null!=t&&(isNaN(this.maxY)||this.maxY<t)&&(this.maxY=t),t>0&&(isNaN(this.minYp)||this.minYp>t)&&(this.minYp=t),i||(t>0?isNaN(r[e])?r[e]=t:r[e]+=t:isNaN(o[e])?o[e]=t:o[e]+=t,isNaN(n[e])?n[e]=Math.abs(t):n[e]+=Math.abs(t)))},t.prototype.getMinY=function(){return this.minY},t.prototype.getMaxY=function(){return this.maxY},t.prototype.getMinX=function(){return this.minX},t.prototype.getMaxX=function(){return this.maxX},t.prototype.getMinXp=function(){return this.minXp},t.prototype.getMinYp=function(){return this.minYp},t.prototype.getDeltaX=function(){return this.dx},t.prototype.getDataTypeX=function(){return this.dataTypeX},t.prototype.getDataTypeY=function(){return this.dataTypeY},t.prototype.getStackedAbsSum=function(t){var e=this.stackAbs[t];return isFinite(e)?e:0},t.prototype.getXVals=function(){return this._xvals},t.isValid=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i=t.length,n=0;n<i;n++)if(!isFinite(t[n]))return!1;return!0},t}(),yt=function(t){function e(e,i){var n=t.call(this,e,null)||this;return n._chartType=et.Column,n.initialize(i),n}return l(e,t),e.prototype._getChartType=function(){return this._chartType},Object.defineProperty(e.prototype,"chartType",{get:function(){return this._chartType},set:function(t){(t=(0,s.asEnum)(t,et))!=this._chartType&&(this._chartType=t,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rotated",{get:function(){return this._rotated},set:function(t){t!=this._rotated&&(this._rotated=(0,s.asBoolean)(t),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stacking",{get:function(){return this._stacking},set:function(t){(t=(0,s.asEnum)(t,it))!=this._stacking&&(this._stacking=t,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this._options},set:function(t){t!=this._options&&(this._options=t,this.invalidate())},enumerable:!0,configurable:!0}),e}(_t),bt=function(t){function e(){var e=t.call(this)||this;return e.stacking=it.None,e.isSpline=!1,e.isStep=!1,e.stackPos={},e.stackNeg={},e}return l(e,t),e.prototype.adjustLimits=function(t,e){this.dataInfo=t;for(var i=t.getMinX(),n=t.getMinY(),r=t.getMaxX(),o=t.getMaxY(),a=0;a<this.chart.series.length;a++){var l=this.chart.series[a];if(this._isRange(l)){var h=l._getChartType();if(!h||h==et.Area)for(var c=l._getBindingValues(1),u=0;u<c.length;u++)c[u]>o?o=c[u]:c[u]<n&&(n=c[u])}}if(this.isSpline){var d=.1*(o-n);this.chart.axisY._getLogBase()||(n-=d),o+=d}return this.rotated?new s.Rect(n,i,o-n,r-i):new s.Rect(i,n,r-i,o-n)},e.prototype.clear=function(){t.prototype.clear.call(this),this.stackNeg={},this.stackPos={}},e.prototype.plotSeries=function(t,e,i,n,r,o,a,l){var h=n;if(this._isRange(h))this.plotSeriesRanged(t,e,i,n,r,o,a,l);else{var c=[],u=this.chart.series.indexOf(n),d=n.getValues(0),p=n.getValues(1);if(d){var f=d.length;if(f){p||(p=this.dataInfo.getXVals());var _=!0;p?p.length<f&&(f=p.length):(_=!1,p=new Array(f));var g=new Array,m=new Array,y=new Array,b=new Array,v=this.stacking!=it.None&&!h._isCustomAxisY(),w=this.stacking==it.Stacked100pc&&!h._isCustomAxisY();void 0!==h._getChartType()&&(v=w=!1);for(var C=this.rotated,x=!1,S=h.interpolateNulls,E=null,P=null,T=this.chart._plotRect,M=0;M<f;M++){var I=_?p[M]:M,D=d[M];if((null===E||I>E)&&(E=I),(null===P||I<P)&&(P=I),mt.isValid(I,D)){var R=C?i.convert(I):e.convert(I);if(v){w&&(D/=this.dataInfo.getStackedAbsSum(I));var A=0;D>=0?(A=isNaN(this.stackPos[I])?0:this.stackPos[I],D=this.stackPos[I]=A+D):(A=isNaN(this.stackNeg[I])?0:this.stackNeg[I],D=this.stackNeg[I]=A+D),C?(A<e.actualMin&&(A=e.actualMin),y.push(e.convert(A)),b.push(R)):(y.push(R),A<i.actualMin&&(A=i.actualMin),b.push(i.convert(A)))}if(C){var k=e.convert(D);isNaN(R)||isNaN(k)?(x=!0,v||!0===S||(g.push(void 0),m.push(void 0))):(g.push(k),m.push(R),_t._contains(T,new s.Point(k,R))&&((O=new X(new s.Point(k,R),this._DEFAULT_SYM_SIZE)).tag=new K(u,M,D,I),this.hitTester.add(O,u)))}else{var O;k=i.convert(D),isNaN(R)||isNaN(k)?(x=!0,v||!0===S||(g.push(void 0),m.push(void 0))):(g.push(R),m.push(k),_t._contains(T,new s.Point(R,k))&&((O=new X(new s.Point(R,k),this._DEFAULT_SYM_SIZE)).tag=new K(u,M,I,D),this.hitTester.add(O,u)))}}else x=!0,v||!0===S||(g.push(void 0),m.push(void 0))}l&&g.forEach((function(t,e){null!=t&&c.push(new s.Point(t,m[e]))}));var L=this._DEFAULT_WIDTH,j=r._getColorLight(u),N=r._getColor(u),H=ut.cloneStyle(n.style,["fill"]),F=ut.cloneStyle(n.style,["stroke"]);if(!v&&!0!==S&&x){var B=[],z=[];for(M=0;M<f;M++)void 0===g[M]?(B.length>1&&(B=(V=this._modifyPoints(B,z)).x,z=V.y,t.stroke=N,t.strokeWidth=L,t.fill="none",t.drawLines(B,z,null,H),this.hitTester.add(new q(B,z),u),C?(B.push(e.convert(e.actualMin),e.convert(e.actualMin)),z.push(i.convert(i.actualMax),i.convert(i.actualMin))):(B.push(B[B.length-1],B[0]),z.push(i.convert(i.actualMin),i.convert(i.actualMin))),t.fill=j,t.stroke="none",t.drawPolygon(B,z,null,F,this.chart._plotrectId)),B=[],z=[]):(B.push(g[M]),z.push(m[M]));B.length>1&&(B=(V=this._modifyPoints(B,z)).x,z=V.y,t.stroke=N,t.strokeWidth=L,t.fill="none",t.drawLines(B,z,null,H),this.hitTester.add(new q(B,z),u),C?(B.push(e.convert(e.actualMin),e.convert(e.actualMin)),z.push(i.convert(i.actualMax),i.convert(i.actualMin))):(B.push(B[B.length-1],B[0]),z.push(i.convert(i.actualMin),i.convert(i.actualMin))),t.fill=j,t.stroke="none",t.drawPolygon(B,z,null,F,this.chart._plotrectId))}else{var V;if(g=(V=this._modifyPoints(g,m)).x,m=V.y,v){var G=this._modifyPoints(y,b);y=G.x,b=G.y,g=g.concat(y.reverse()),m=m.concat(b.reverse())}else C?(g.push(e.convert(e.actualMin),e.convert(e.actualMin)),m.push(m[m.length-1],m[0])):(g.push(g[g.length-1],g[0]),m.push(i.convert(i.actualMin),i.convert(i.actualMin)));t.fill=j,t.stroke="none",t.drawPolygon(g,m,null,F,this.chart._plotrectId),v?(g=g.slice(0,g.length-y.length),m=m.slice(0,m.length-b.length)):(g=g.slice(0,g.length-2),m=m.slice(0,m.length-2)),t.stroke=N,t.strokeWidth=L,t.fill="none",t.drawLines(g,m,null,H,this.chart._plotrectId),this.hitTester.add(new q(g,m),u)}this._drawSymbols(t,n,u),l&&c&&c.length&&l(c)}}}},e.prototype._isRange=function(t){var e=this.chart?this.chart._bindingSeparator:",",i=null==t.binding?null:t.binding.split(e);return null!=i&&2==i.length},e.prototype._modifyPoints=function(t,e){var i={x:t,y:e};if(this.isSpline){var n=this._convertToSpline(t,e);i.x=n.xs,i.y=n.ys}else if(this.isStep){var r=this._createSteps(t,e);i.x=r.x,i.y=r.y}return i},e.prototype.plotSeriesRanged=function(t,e,i,n,r,o,a,l){var h=[],c=this.chart.series.indexOf(n),u=n,d=n.getValues(0),p=n.getValues(1),f=u._getBindingValues(1);if(d){var _=d.length;if(_){p||(p=this.dataInfo.getXVals());var g=!0;p?p.length<_&&(_=p.length):(g=!1,p=new Array(_));for(var m=new Array,y=new Array,b=new Array,v=this.rotated,w=!1,C=u.interpolateNulls,x=this.chart._plotRect,S=0;S<_;S++){var E=g?p[S]:S,P=d[S],T=f[S];if(mt.isValid(E,P,T)){var M=v?i.convert(E):e.convert(E);if(v){var I=e.convert(P),D=e.convert(T);isNaN(M)||isNaN(I)?(w=!0,!0!==C&&(m.push(void 0),y.push(void 0),b.push(void 0))):(m.push(I),y.push(M),b.push(D),_t._contains(x,new s.Point(I,M))&&((R=new X(new s.Point(I,M),this._DEFAULT_SYM_SIZE)).tag=new K(c,S,P,E),this.hitTester.add(R,c)),_t._contains(x,new s.Point(D,M))&&((R=new X(new s.Point(D,M),this._DEFAULT_SYM_SIZE)).tag=new K(c,S,T,E),this.hitTester.add(R,c)))}else{var R;I=i.convert(P),D=i.convert(T),isNaN(M)||isNaN(I)?(w=!0,!0!==C&&(m.push(void 0),y.push(void 0),b.push(void 0))):(m.push(M),y.push(I),b.push(D),_t._contains(x,new s.Point(M,I))&&((R=new X(new s.Point(M,I),this._DEFAULT_SYM_SIZE)).tag=new K(c,S,E,P),this.hitTester.add(R,c)),_t._contains(x,new s.Point(M,D))&&((R=new X(new s.Point(M,D),this._DEFAULT_SYM_SIZE)).tag=new K(c,S,E,T),this.hitTester.add(R,c)))}}else w=!0,!0!==C&&(m.push(void 0),y.push(void 0),b.push(void 0))}l&&m.forEach((function(t,e){null!=t&&h.push(new s.Point(t,y[e]))}));var A=this._DEFAULT_WIDTH,k=r._getColorLight(c),O=r._getColor(c),L=ut.cloneStyle(n.style,["fill"]),j=ut.cloneStyle(n.style,["stroke"]);if(!0!==C&&w){var N=[],H=[],F=[];for(S=0;S<_;S++)if(void 0===m[S]){if(N.length>1){var B=v?F.slice(0).reverse():N.slice(0).reverse(),z=v?H.slice(0).reverse():F.slice(0).reverse();this._drawRangedArea(t,N,H,B,z,k,O,A,j,L),this.hitTester.add(new q(N,H),c),this.hitTester.add(new q(B,z),c)}N=[],H=[],F=[]}else N.push(m[S]),H.push(y[S]),F.push(b[S]);N.length>1&&(B=v?F.slice(0).reverse():N.slice(0).reverse(),z=v?H.slice(0).reverse():F.slice(0).reverse(),this._drawRangedArea(t,N,H,B,z,k,O,A,j,L),this.hitTester.add(new q(N,H),c),this.hitTester.add(new q(B,z),c))}else{var V=v?b.slice(0).reverse():m.slice(0).reverse(),G=v?y.slice(0).reverse():b.slice(0).reverse();this._drawRangedArea(t,m,y,V,G,k,O,A,j,L),this.hitTester.add(new q(m,y),c),this.hitTester.add(new q(V,G),c)}this._drawSymbols(t,n,c),l&&h&&h.length&&l(h)}}},e.prototype._drawRangedArea=function(t,e,i,n,r,o,s,a,l,h){if(this.isSpline){var c=this._convertToSpline(e,i),u=this._convertToSpline(n,r);e=c.xs,i=c.ys,n=u.xs,r=u.ys}e=e.concat(n),i=i.concat(r),t.fill=o,t.stroke="none",t.drawPolygon(e,i,null,l),e=e.slice(0,e.length-n.length),i=i.slice(0,i.length-r.length),t.stroke=s,t.strokeWidth=a,t.fill="none",t.drawLines(e,i,null,h),t.drawLines(n,r,null,h)},e.prototype._convertToSpline=function(t,e){if(t&&e){var i=new c(t,e).calculate();return{xs:i.xs,ys:i.ys}}return{xs:t,ys:e}},e.prototype._drawSymbols=function(t,e,i){var n=this.getItemFormatter(e);if(null!=n){for(var r=this.hitTester._map[i],o=0;o<r.length;o++){var a=(0,s.tryCast)(r[o],X);if(a){var l=a.tag;t.startGroup();var h=new tt(this.chart,a.center,W.SeriesSymbol);h._setDataPoint(l),n(t,h,(function(){})),t.endGroup()}}t.cssPriority=!0}},e}(ut),vt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.origin=0,e.width=.7,e.isVolume=!1,e._volHelper=null,e.stackPosMap={},e.stackNegMap={},e.stacking=it.None,e}return l(e,t),e.prototype.clear=function(){t.prototype.clear.call(this),this.stackNegMap[this.chart.axisY._uniqueId]={},this.stackPosMap[this.chart.axisY._uniqueId]={},this._volHelper=null},e.prototype.load=function(){if(t.prototype.load.call(this),this.isVolume){var e,i,n,r,o,a,l,c,u=null,d=null;for(a=0;a<this.chart.series.length;a++){if(o=(e=this.chart.series[a]).getDataType(1)||e.chart._xDataType,i=e._getAxisX(),(n=null===(n=e._getChartType())||(0,s.isUndefined)(n)?this.chart._getChartType():n)===et.Column){var p=this.chart?this.chart._bindingSeparator:",",f=e.binding.split(p).length-1;r=e._getBindingValues(f)}else r=n===et.Candlestick?e._getBindingValues(4):null;var _;if(o===s.DataType.Date)for(l=[],c=[],a=0;a<e._getLength();a++)_=e._getItem(a)[e.bindingX].valueOf(),l.push(_),c.push({value:_,text:s.Globalize.format(new Date(_),i.format||"d")});else l=this.dataInfo.getXVals();if(u=this.dataInfo.getMinX(),d=this.dataInfo.getMaxX(),r&&r.length>0){this._volHelper=new h(r,l,u,d,o),i._customConvert=this._volHelper.convert.bind(this._volHelper),i._customConvertBack=this._volHelper.convertBack.bind(this._volHelper),c&&c.length>0&&(this._itemsSource=i.itemsSource=c);break}}}},e.prototype.unload=function(){t.prototype.unload.call(this);for(var e,i=0;i<this.chart.series.length;i++)(e=this.chart.series[i]._getAxisX())&&(e._customConvert=null,e._customConvertBack=null,e.itemsSource&&e.itemsSource==this._itemsSource&&(this._itemsSource=e.itemsSource=null))},e.prototype.adjustLimits=function(t,e){this.dataInfo=t;var i=t.getMinX(),n=t.getMaxX(),r=t.getMinY(),o=t.getMaxY(),a=t.getDeltaX();a<=0&&(a=1);var l=!1;!this.isVolume||this.chart._getChartType()!==et.Column&&this.chart._getChartType()!==et.Candlestick?this.unload():this.load();for(var h=0;h<this.chart.series.length;h++){var c=this.chart.series[h],u=c._getChartType();(u=null===u||(0,s.isUndefined)(u)?this.chart._getChartType():u)!==et.Column&&u!==et.Bar||this._isRange(c)&&c._getBindingValues(1).forEach((function(t){t<r?r=t:t>o&&(o=t)})),l||"BoxWhisker"==c.constructor.name||(l=!0)}return this.rotated?(!this.chart.axisY._getLogBase()&&t.getDataTypeY()!==s.DataType.Date&&l&&(this.origin>o?o=this.origin:this.origin<r&&(r=this.origin)),new s.Rect(r,i-.5*a,o-r,n-i+a)):(!this.chart.axisY._getLogBase()&&t.getDataTypeY()!==s.DataType.Date&&l&&(this.origin>o?o=this.origin:this.origin<r&&(r=this.origin)),new s.Rect(i-.5*a,r,n-i+a,o-r))},e.prototype._isRange=function(t){var e=this.chart?this.chart._bindingSeparator:",",i=(null==t.binding?"":t.binding.split(e)).length-1;return this.isVolume?2===i:1===i},e.prototype.plotSeries=function(t,e,i,n,r,o,a,l){var h=[],c=this.chart.series.indexOf(n),u=(0,s.asType)(n,ot),d=this.chart._options,p=this.width,f=0;if(o=o||0,a=a||1,d&&d.groupWidth){var _=d.groupWidth;if((0,s.isNumber)(_)){var g=(0,s.asNumber)(_);isFinite(g)&&g>0&&(f=g,p=1)}else if((0,s.isString)(_)){var m=(0,s.asString)(_);m&&m.indexOf("%")>=0?(m=m.replace("%",""),g=parseFloat(m),isFinite(g)&&(g<0?g=0:g>100&&(g=100),f=0,p=g/100)):(g=parseFloat(m),isFinite(g)&&g>0&&(f=g,p=1))}}var y=p/a,b=u._getAxisY()._uniqueId,v=this.stackNegMap[b],w=this.stackPosMap[b],C=n.getValues(0),x=n.getValues(1),S=this._isRange(u),E=u._bindValues(null==u._cv?null==this.chart.collectionView?null:this.chart.collectionView.items:u._cv.items,u._getBinding(1)).values;if(C){if(x||(x=this.dataInfo.getXVals()),x){var P=this.dataInfo.getDeltaX();P>0&&(p*=P,y*=P)}var T=u._getSymbolFill(c),M=u._getAltSymbolFill(c)||T,I=u._getSymbolStroke(c),D=u._getAltSymbolStroke(c)||I,R=C.length;null!=x&&(R=Math.min(R,x.length));var A,k,O=this.origin,L=0,j=this.stacking!=it.None,N=this.stacking==it.Stacked100pc;void 0!==u._getChartType()&&(j=N=!1);var H=this.getItemFormatter(n),F=e._actualMin,B=e._actualMax,z=i._actualMin,V=i._actualMax;if(this.rotated)for(O<F?O=F:O>B&&(O=B),u._isCustomAxisY()&&(j=N=!1),X=e.convert(O),q=0;q<R;q++)if($=x?x[q]:q,Q=C[q],Z=X,this._getSymbolOrigin&&(Z=i.convert(this._getSymbolOrigin(O,q))),S&&E&&E.length&&(tt=E[q],mt.isValid(tt)&&(Z=e.convert(tt))),this._getSymbolStyles&&(T=(J=this._getSymbolStyles(q))&&J.fill?J.fill:T,M=J&&J.fill?J.fill:M,I=J&&J.stroke?J.fill:I,D=J&&J.stroke?J.fill:D),A=Q>0?T:M,k=Q>0?I:D,t.fill=A,t.stroke=k,mt.isValid($,Q))if(j){if(nt=$+.5*p,(et=$-.5*p)<z&&nt<z||et>V&&nt>V)continue;if(et=i.convert(Math.max(et,z)),nt=i.convert(Math.min(nt,V)),N&&(Q/=this.dataInfo.getStackedAbsSum($)),st=0,Q>=0?(st=isNaN(w[$])?0:w[$],ct=e.convert(st),rt=e.convert(st+Q),w[$]=st+Q):(st=isNaN(v[$])?0:v[$],ct=e.convert(st),rt=e.convert(st+Q),v[$]=st+Q),l&&h.push(new s.Point(rt,i.convert($))),!mt.isValid(ct,rt))continue;if(at=new s.Rect(Math.min(ct,rt),Math.min(et,nt),Math.abs(rt-ct),Math.abs(nt-et)),f>0){(pt=1-f/at.height)<0&&(pt=0);var G=at.top+.5*at.height;at.top+=(G-at.top)*pt,at.height=Math.min(f,at.height)}ht=new U(at),this.drawSymbol(t,at,n,q,new s.Point(rt,at.top+.5*at.height),H),n._setPointIndex(q,L),L++,ht.tag=new K(c,q,st+Q,$),this.hitTester.add(ht,c)}else{if(nt=$-.5*p+(o+1)*y,(et=$-.5*p+o*y)<z&&nt<z||et>V&&nt>V)continue;et=i.convert(Math.max(et,z)),nt=i.convert(Math.min(nt,V));var Y=e.convert(Q);if(!mt.isValid(Y,et,nt))continue;var W=new s.Rect(Math.min(Y,Z),Math.min(et,nt),Math.abs(Z-Y),Math.abs(nt-et));l&&h.push(new s.Point(Y,(et+nt)/2)),f>0&&((pt=1-(dt=f/a)/W.height)<0&&(pt=0),G=i.convert($),W.top+=(G-W.top)*pt,W.height=Math.min(dt,W.height)),ht=new U(W),this.drawSymbol(t,W,n,q,new s.Point(Y,W.top+.5*W.height),H),n._setPointIndex(q,L),L++,ht.tag=new K(c,q,Q,$),this.hitTester.add(ht,c)}else l&&h.push(null);else{O<z?O=z:O>V&&(O=V);var X=i.convert(O);u._isCustomAxisY()&&(j=N=!1);for(var q=0;q<R;q++){var J,Z=X,$=x?x[q]:q,Q=C[q];if(this._getSymbolOrigin&&(Z=i.convert(this._getSymbolOrigin(O,q,R))),S&&E&&E.length){var tt=E[q];mt.isValid(tt)&&(Z=i.convert(tt))}if(this._getSymbolStyles&&(T=(J=this._getSymbolStyles(q,R))&&J.fill?J.fill:T,M=J&&J.fill?J.fill:M,I=J&&J.stroke?J.stroke:I,D=J&&J.stroke?J.stroke:D),A=Q>0?T:M,k=Q>0?I:D,t.fill=A,t.stroke=k,t.strokeWidth=null,mt.isValid($,Q))if(j){var et,nt,rt=$+.5*p;if((ct=$-.5*p)<F&&rt<F||ct>B&&rt>B)continue;if(ct=e.convert(ct),rt=e.convert(rt),!mt.isValid(ct,rt))continue;N&&(Q/=this.dataInfo.getStackedAbsSum($));var st=0;if(Q>=0?(st=isNaN(w[$])?0:w[$],et=i.convert(Math.max(st,z)),nt=i.convert(Math.max(st+Q,z)),w[$]=st+Q):(st=isNaN(v[$])?0:v[$],et=i.convert(st),nt=i.convert(st+Q),v[$]=st+Q),l&&h.push(new s.Point(e.convert($),nt)),!mt.isValid(et,nt))continue;var at=new s.Rect(Math.min(ct,rt),Math.min(et,nt),Math.abs(rt-ct),Math.abs(nt-et));if(f>0){(pt=1-f/at.width)<0&&(pt=0);var lt=at.left+.5*at.width;at.left+=(lt-at.left)*pt,at.width=Math.min(f,at.width)}var ht=new U(at);this.drawSymbol(t,at,n,q,new s.Point(at.left+.5*at.width,nt),H),n._setPointIndex(q,L),L++,ht.tag=new K(c,q,$,st+Q),this.hitTester.add(ht,c)}else{var ct;if(rt=$-.5*p+(o+1)*y,(ct=$-.5*p+o*y)<F&&rt<F||ct>B&&rt>B)continue;ct=e.convert(ct),rt=e.convert(rt);var ut=i.convert(Q);if(!mt.isValid(ut,ct,rt))continue;var dt,pt,ft=new s.Rect(Math.min(ct,rt),Math.min(ut,Z),Math.abs(rt-ct),Math.abs(Z-ut));l&&h.push(new s.Point((ct+rt)/2,ut)),f>0&&((pt=1-(dt=f/a)/ft.width)<0&&(pt=0),lt=e.convert($),ft.left+=(lt-ft.left)*pt,ft.width=Math.min(dt,ft.width)),ht=new U(ft),this.drawSymbol(t,ft,n,q,new s.Point(ft.left+.5*ft.width,ut),H),n._setPointIndex(q,L),L++,ht.tag=new K(c,q,$,Q),this.hitTester.add(ht,c)}else l&&h.push(null)}}l&&h&&h.length&&l(h)}},e.prototype.drawSymbol=function(t,e,i,n,r,o){var s=this;if(o){t.startGroup();var a=new tt(this.chart,r,W.SeriesSymbol);a._setData(i,n),o(t,a,(function(){s.drawDefaultSymbol(t,e,i)})),t.cssPriority=!0,t.endGroup()}else this.drawDefaultSymbol(t,e,i)},e.prototype.drawDefaultSymbol=function(t,e,i){t.drawRect(e.left,e.top,e.width,e.height,null,i.symbolStyle)},e}(ut),wt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.stacking=it.None,e}return l(e,t),e.prototype.adjustLimits=function(t,e){this.dataInfo=t;var i=t.getMinX(),n=t.getMinY(),r=t.getMaxX(),o=t.getMaxY();return new s.Rect(i,n,r-i,o-n)},e.prototype.plotSeries=function(t,e,i,n,r,o,a,l){var h=this.chart.series.indexOf(n);if(!(h>0)){var c,u,d,p,f,_=(0,s.asType)(n,ot),g=this.chart._options,m=n.getValues(0),y=n.getValues(1),b=this.chart._plotRect,v=g&&g.funnel&&null!=g.funnel.neckWidth?g.funnel.neckWidth:.2,w=g&&g.funnel&&null!=g.funnel.neckHeight?g.funnel.neckHeight:0,C=v*b.width,x=0,S=0,E=0,P=0,T=b.left,M=b.top,I=b.width,D=b.height;if(m){this.rotated&&(M+=b.height),C=C||1,y||(y=this.dataInfo.getXVals());var R=m.length;null!=y&&(R=Math.min(R,y.length));var A=0;for(x=0;x<R;x++)mt.isValid(m[x])&&(S+=m[x],m[x]>A&&(A=m[x]));var k,O,L=0;if(g&&g.funnel&&"rectangle"===g.funnel.type&&A>0){w=D/R,v=I;var j=I/A;for(x=0;x<R;x++){var N=y?y[x]:x,H=m[x],F=_._getSymbolFill(x),B=_._getAltSymbolFill(x)||F,z=_._getSymbolStroke(x),V=_._getAltSymbolStroke(x)||z;if(this._getSymbolStyles&&(F=(W=this._getSymbolStyles(x,R))&&W.fill?W.fill:F,B=W&&W.fill?W.fill:B,z=W&&W.stroke?W.stroke:z,V=W&&W.stroke?W.stroke:V),k=H>0?F:B,O=H>0?z:V,t.fill=k,t.stroke=O,mt.isValid(N)&&mt.isValid(H)){j||(j=I/H);var G=j*H;T+=(v-G)/2,this.rotated&&(M-=w),t.drawRect(T,M,G,w),Y=new Ct(new s.Point(T,M),G,w,G,w),this.rotated||(M+=w),v=G,Y.tag=new K(h,x,N,H),this.hitTester.add(Y,h),n._setPointIndex(x,L),L++}}}else for(E=b.left+b.width*(1-v)/2,P=b.top+b.height*(this.rotated?w:1-w),u=(1-v)*b.width/2/(b.height*(1-w)),!isNaN(u)&&isFinite(u)||(I=C,T=E,M=P),c=b.width*v*b.height+b.width*(1-v)/2*b.height*(1-w),x=0;x<R;x++){N=y?y[x]:x,H=m[x];var Y,W,U=[],X=[];if(F=_._getSymbolFill(x),B=_._getAltSymbolFill(x)||F,z=_._getSymbolStroke(x),V=_._getAltSymbolStroke(x)||z,this._getSymbolStyles&&(F=(W=this._getSymbolStyles(x,R))&&W.fill?W.fill:F,B=W&&W.fill?W.fill:B,z=W&&W.stroke?W.stroke:z,V=W&&W.stroke?W.stroke:V),k=H>0?F:B,O=H>0?z:V,t.fill=k,t.stroke=O,mt.isValid(N)&&mt.isValid(H)){var q=c*H/S;I>C?(p=this._getTrapezoidOffsetY(I,q,u),this.rotated?M-p>P?(U=[T,T+(d=u*p),T+I-d,T+I],X=[M,M-p,M-p,M],Y=new Ct(new s.Point(T,M-p),I,p,I-2*d,0,!0),I-=2*d,T+=d,M-=p):(d=u*(p=M-P),f=(q-=this._getTrapezoidArea(I,u,p))/C,U.push(T,T+d,T+d,T+d+C,T+d+C,T+I),X.push(M,M-p,M-p-f,M-p-f,M-p,M),Y=new Ct(new s.Point(T,M-p-f),I,p+f,C,f,!0),I=C,T+=d,M=M-p-f):M+p<P?(U=[T,T+(d=u*p),T+I-d,T+I],X=[M,M+p,M+p,M],Y=new Ct(new s.Point(T,M),I,p,I-2*d,0),I-=2*d,T+=d,M+=p):(d=u*(p=P-M),f=(q-=this._getTrapezoidArea(I,u,p))/C,U.push(T,T+d,T+d,T+d+C,T+d+C,T+I),X.push(M,M+p,M+p+f,M+p+f,M+p,M),Y=new Ct(new s.Point(T,M),I,p+f,C,f),I=C,T+=d,M=M+p+f),t.drawPolygon(U,X)):(f=q/C,this.rotated&&(M-=f),t.drawRect(T,M,I,f),Y=new Ct(new s.Point(T,M),C,f,C,f),this.rotated||(M+=f)),Y.tag=new K(h,x,N,H),this.hitTester.add(Y,h),n._setPointIndex(x,L),L++}}}}},e.prototype._getTrapezoidArea=function(t,e,i){var n=i*e;return n*i+(t-2*n)*i},e.prototype._getTrapezoidOffsetY=function(t,e,i){var n=Math.pow(t/2/i,2)-e/i;return t/2/i-Math.sqrt(n>=0?n:0)},e.prototype.drawDefaultSymbol=function(t,e,i){t.drawRect(e.left,e.top,e.width,e.height,null,i.symbolStyle)},e.prototype._getPointAndPosition=function(t,e,i,n){var r=i;t.x=r.center.x,t.y=r.center.y,e=null==e?P.Center:e},e}(ut),Ct=function(){function t(t,e,i,n,r,o){void 0===o&&(o=!1),this._startPoint=t,this._width=e,this._height=i,this._neckWidth=n,this._neckHeight=r,this._center=new s.Point(this._startPoint.x+e/2,this._startPoint.y+i/2),this._offsetX=(e-n)/2,this._offsetY=i-r,this._rotated=o}return t.prototype.contains=function(t){var e=this._startPoint,i=this._offsetX,n=this._offsetY;if(this._rotated){if(t.x>=e.x&&t.x<=e.x+this._width&&t.y>=e.y&&t.y<=e.y+this._height){if(t.x>=e.x+i&&t.x<=e.x+this._width-i)return!0;if(t.y<e.y+this._neckHeight)return!1;if(t.x<this._center.x)return(e.y+this._height-t.y)/(t.x-e.x)<n/i;if(t.x>this._center.x)return(e.y+this._height-t.y)/(e.x+this._width-t.x)<n/i}}else if(t.x>=e.x&&t.x<=e.x+this._width&&t.y>=e.y&&t.y<=e.y+this._height){if(t.x>=e.x+i&&t.x<=e.x+this._width-i)return!0;if(t.y>e.y+n)return!1;if(t.x<this._center.x)return(t.y-e.y)/(t.x-e.x)<n/i;if(t.x>this._center.x)return(t.y-e.y)/(e.x+this._width-t.x)<n/i}return!1},t.prototype.distance=function(t){if(this.contains(t))return 0;var e=this._startPoint,i=this._width,n=this._height,r=this._offsetX,o=this._offsetY;if(this._rotated){if(t.y>e.y+n)return t.x<e.x?Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y+n-t.y,2)):t.x>e.x+i?Math.sqrt(Math.pow(t.x-e.x-i,2)+Math.pow(e.y+n-t.y,2)):t.y-e.y-n;if(t.y<e.y)return t.x<e.x+r?Math.sqrt(Math.pow(e.x+r-t.x,2)+Math.pow(t.y-e.y-n,2)):t.x>e.x+i-r?Math.sqrt(Math.pow(t.x-e.x-i+r,2)+Math.pow(t.y-e.y-n,2)):e.y-t.y;if(!(t.y<e.y+n-o))return t.x<e.x+r?Math.min(Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(t.y-e.y-n,2)),Math.sqrt(Math.pow(t.x-r/2-e.x,2)+Math.pow(t.y-n+o/2-e.y,2)),Math.sqrt(Math.pow(t.x-r-e.x,2)+Math.pow(t.y-n+o-e.y,2))):Math.min(Math.sqrt(Math.pow(t.x-i-e.x,2)+Math.pow(t.y-n-e.y,2)),Math.sqrt(Math.pow(t.x-i+r/2-e.x,2)+Math.pow(t.y-n+o/2-e.y,2)),Math.sqrt(Math.pow(t.x-i+r-e.x,2)+Math.pow(t.y-n+o-e.y,2)));if(t.x<e.x+r)return e.x+r-t.x;if(t.x>e.x+i-r)return t.x-e.x-i+r}else{if(t.y<e.y)return t.x<e.x?Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)):t.x>e.x+i?Math.sqrt(Math.pow(t.x-e.x-i,2)+Math.pow(e.y-t.y,2)):e.y-t.y;if(t.y>e.y+n)return t.x<e.x+r?Math.sqrt(Math.pow(e.x+r-t.x,2)+Math.pow(t.y-e.y-n,2)):t.x>e.x+i-r?Math.sqrt(Math.pow(t.x-e.x-i+r,2)+Math.pow(t.y-e.y-n,2)):t.y-e.y-n;if(!(t.y>e.y+o))return t.x<e.x+r?Math.min(Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(t.y-e.y,2)),Math.sqrt(Math.pow(t.x-r/2-e.x,2)+Math.pow(t.y-o/2-e.y,2)),Math.sqrt(Math.pow(t.x-r-e.x,2)+Math.pow(t.y-o-e.y,2))):Math.min(Math.sqrt(Math.pow(t.x-i-e.x,2)+Math.pow(t.y-e.y,2)),Math.sqrt(Math.pow(t.x-i+r/2-e.x,2)+Math.pow(t.y-o/2-e.y,2)),Math.sqrt(Math.pow(t.x-i+r-e.x,2)+Math.pow(t.y-o-e.y,2)));if(t.x<e.x+r)return e.x+r-t.x;if(t.x>e.x+i-r)return t.x-e.x-i+r}},Object.defineProperty(t.prototype,"center",{get:function(){return this._center},enumerable:!0,configurable:!0}),t}(),xt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isCandle=!0,e.isArms=!1,e.isEqui=!1,e.isVolume=!1,e._volHelper=null,e._symWidth=.7,e}return l(e,t),e.prototype.clear=function(){t.prototype.clear.call(this),this._volHelper=null},e.prototype.load=function(){if(t.prototype.load.call(this),this.isVolume){var e,i,n,r,o,a,l,c,u=null,d=null;for(a=0;a<this.chart.series.length;a++){var p;if(o=(e=this.chart.series[a]).getDataType(1)||e.chart._xDataType,i=e._getAxisX(),r=(n=null===(n=e._getChartType())||(0,s.isUndefined)(n)?this.chart._getChartType():n)===et.Column?e._getBindingValues(1):n===et.Candlestick?e._getBindingValues(4):null,o===s.DataType.Date)for(l=[],c=[],a=0;a<e._getLength();a++)p=e._getItem(a)[e.bindingX].valueOf(),l.push(p),c.push({value:p,text:s.Globalize.format(new Date(p),i.format||"d")});else l=this.dataInfo.getXVals();if(u=this.dataInfo.getMinX(),d=this.dataInfo.getMaxX(),r&&r.length>0){this._volHelper=new h(r,l,u,d,o),i._customConvert=this._volHelper.convert.bind(this._volHelper),i._customConvertBack=this._volHelper.convertBack.bind(this._volHelper),c&&c.length>0&&(this._itemsSource=i.itemsSource=c);break}}}},e.prototype.unload=function(){t.prototype.unload.call(this);for(var e,i=0;i<this.chart.series.length;i++)(e=this.chart.series[i]._getAxisX())&&(e._customConvert=null,e._customConvertBack=null,e.itemsSource&&e.itemsSource==this._itemsSource&&(this._itemsSource=e.itemsSource=null))},e.prototype.parseSymbolWidth=function(t){if(this._isPixel=void 0,t)if((0,s.isNumber)(t)){var e=(0,s.asNumber)(t);isFinite(e)&&e>0&&(this._symWidth=e,this._isPixel=!0)}else if((0,s.isString)(t)){var i=(0,s.asString)(t);if(i&&i.indexOf("%")>=0){i=i.replace("%","");var n=parseFloat(i);isFinite(n)&&(n<0?n=0:n>100&&(n=100),this._symWidth=n/100,this._isPixel=!1)}else n=parseFloat(t),isFinite(n)&&n>0&&(this._symWidth=n,this._isPixel=!0)}},e.prototype.adjustLimits=function(t,e){this.dataInfo=t;var i=t.getMinX(),n=t.getMinY(),r=t.getMaxX(),o=t.getMaxY(),a=t.getDeltaX(),l=this.chart._xDataType;a<=0&&(a=1);var h=this.chart.series,c=h.length,u=0;this.parseSymbolWidth(this.symbolWidth),!this.isVolume||this.chart._getChartType()!==et.Column&&this.chart._getChartType()!==et.Candlestick?this.unload():this.load();for(var d=0;d<c;d++){var p=h[d];if(!p._isCustomAxisY()){var f=p._getBinding(1),_=p._getBinding(2),g=p._getBinding(3),m=p._getLength();if(m){var y=p._getSymbolSize();y>u&&(u=y);for(var b=0;b<m;b++){var v=p._getItem(b);v&&[f?v[f]:null,_?v[_]:null,g?v[g]:null].forEach((function(t){mt.isValid(t)&&null!==t&&((isNaN(n)||t<n)&&(n=t),(isNaN(o)||t>o)&&(o=t))}))}}}}var w=r-i,C=this.chart._plotRect;if(C&&C.width&&!this.isVolume){isNaN(y)&&(y=p._getSymbolSize()),y+=2;var x=C.width/(C.width-y)*w;i-=.5*(x-w),w=x}return!(l===s.DataType.Date&&this.isVolume||l===s.DataType.Number)||this.chart._getChartType()!==et.Column&&this.chart._getChartType()!==et.Candlestick?this.chart._isRotated()?new s.Rect(n,i,o-n,w):new s.Rect(i,n,w,o-n):new s.Rect(i-.5*a,n,r-i+a,o-n)},e.prototype.plotSeries=function(t,e,i,n,r,o,a,l){var h=this,c=(0,s.asType)(n,ot),u=this.chart.series.indexOf(n),d=n.getValues(0),p=n.getValues(1),f=this._symWidth,_=this.chart._isRotated();if(d){if(p||(p=this.dataInfo.getXVals()),p){var g=this.dataInfo.getDeltaX();g>0&&!1===this._isPixel&&(f*=g)}var m=d.length,y=!0;p?m=Math.min(m,p.length):(y=!1,p=new Array(m));var b=this._DEFAULT_WIDTH,v=c._getSymbolFill(u),w=c._getAltSymbolFill(u)||"transparent",C=c._getSymbolStroke(u),x=c._getAltSymbolStroke(u)||C,S=void 0===this._isPixel?c._getSymbolSize():f;t.stroke=C,t.strokeWidth=b,t.fill=v;for(var E,P,T=c._getBinding(1),M=c._getBinding(2),I=c._getBinding(3),D=_?i.actualMin:e.actualMin,R=_?i.actualMax:e.actualMax,A=0,k=null,O=null,L=this.getItemFormatter(n),j=0;j<m;j++)if(k=c._getItem(j)){var N=y?p[j]:j;if(mt.isValid(N)&&D<=N&&N<=R){var H=d[j],F=T?k[T]:null,B=M?k[M]:null,z=I?k[I]:null;if(t.startGroup(),this.isEqui&&null!==O?O[I]!==k[I]&&(E=O[I]<k[I]?w:v,P=O[I]<k[I]?x:C):(E=B<z?w:v,P=B<z?x:C),t.fill=E,t.stroke=P,t.strokeWidth=b,L){var V=new tt(this.chart,new s.Point(e.convert(N),i.convert(H)),W.SeriesSymbol);V._setData(c,j),L(t,V,(function(){h._drawSymbol(t,e,i,u,j,E,S,N,H,F,B,z)})),t.cssPriority=!0}else this._drawSymbol(t,e,i,u,j,E,S,N,H,F,B,z);t.endGroup(),n._setPointIndex(j,A),A++}O=k}}},e.prototype._drawSymbol=function(t,e,i,n,r,o,a,l,h,c,u,d){var p,f=null,_=null,g=null,m=null,y=this.chart._isRotated(),b=y?new K(n,r,h,l):new K(n,r,l,h);if(y){var v=i;i=e,e=v}if(!1===this._isPixel&&(g=e.convert(l-.5*a))>(m=e.convert(l+.5*a))){var w=g;g=m,m=w}l=e.convert(l),!1!==this._isPixel&&(g=l-.5*a,m=l+.5*a),this.isCandle?(mt.isValid(u)&&mt.isValid(d)&&(u=i.convert(u),d=i.convert(d),_=(f=Math.min(u,d))+Math.abs(u-d),y?(t.drawRect(f,g,_-f||1,m-g||1),p=new U(new s.Rect(f,g,_-f||1,m-g||1))):(t.drawRect(g,f,m-g||1,_-f||1),p=new U(new s.Rect(g,f,m-g||1,_-f||1))),p.tag=b,this.hitTester.add(p,n)),mt.isValid(h)&&(h=i.convert(h),null!==f&&(y?(t.drawLine(_,l,h,l),p.rect.width=p.rect.width+h):(t.drawLine(l,f,l,h),p.rect.top=h,p.rect.height=p.rect.height+h))),mt.isValid(c)&&(c=i.convert(c),null!==_&&(y?(t.drawLine(f,l,c,l),p.rect.left=c,p.rect.width=p.rect.width+c):(t.drawLine(l,_,l,c),p.rect.height=p.rect.height+c)))):this.isEqui?mt.isValid(h)&&mt.isValid(c)&&(h=i.convert(h),c=i.convert(c),_=(f=Math.min(h,c))+Math.abs(h-c),t.drawRect(g,f,m-g||1,_-f||1),(p=new U(new s.Rect(g,f,m-g||1,_-f||1))).tag=b,this.hitTester.add(p,n)):this.isArms?(mt.isValid(u)&&mt.isValid(d)&&(u=i.convert(u),d=i.convert(d),_=(f=Math.min(u,d))+Math.abs(u-d),t.drawRect(g,f,m-g||1,_-f||1)),mt.isValid(h)&&null!==f&&(h=i.convert(h),t.drawLine(l,f,l,h)),mt.isValid(c)&&null!==_&&(c=i.convert(c),t.drawLine(l,_,l,c)),mt.isValid(h)&&mt.isValid(c)&&(t.fill="transparent",_=(f=Math.min(h,c))+Math.abs(h-c),t.drawRect(g,f,m-g||1,_-f||1),(p=new U(new s.Rect(g,f,m-g||1,_-f||1))).tag=b,this.hitTester.add(p,n))):(mt.isValid(h)&&mt.isValid(c)&&(h=i.convert(h),c=i.convert(c),_=(f=Math.min(h,c))+Math.abs(h-c),y?(t.drawLine(c,l,h,l),p=new U(new s.Rect(f,g,_-f||1,m-g||1))):(t.drawLine(l,c,l,h),p=new U(new s.Rect(g,f,m-g||1,_-f||1))),p.tag=b,this.hitTester.add(p,n)),mt.isValid(u)&&(u=i.convert(u),y?t.drawLine(u,g,u,l):t.drawLine(g,u,l,u)),mt.isValid(d)&&(d=i.convert(d),y?t.drawLine(d,l,d,m):t.drawLine(l,d,m,d)))},e}(ut),St=function(){function t(){this._moveMarker=function(t){var e=t.currentTarget,i=this._markers,n=e.getAttribute("data-markerIndex");null!=n&&i[n].forEach((function(e){e._moveMarker(t)}))},this._markers=[],this._bindMoveMarker=this._moveMarker.bind(this)}return t.prototype.attach=function(t){var e,i,n=t.chart.hostElement,r=this._markers,o=n.getAttribute("data-markerIndex");null!=o?(i=r[o])&&(0,s.isArray)(i)?i.push(t):(r[o]=[t],this._bindMoveEvent(n)):(e=r.length,i=[t],r.push(i),n.setAttribute("data-markerIndex",e),this._bindMoveEvent(n))},t.prototype.detach=function(t){var e,i,n=t.chart.hostElement,r=this._markers,o=n.getAttribute("data-markerIndex");null!=o&&((e=(i=r[o]).indexOf(t))>-1&&i.splice(e,1),0===i.length&&((e=r.indexOf(i))>-1&&(r[e]=void 0),this._unbindMoveEvent(n)))},t.prototype._unbindMoveEvent=function(t){var e=this._bindMoveMarker;t.removeEventListener("mousemove",e),"ontouchstart"in window&&t.removeEventListener("touchmove",e)},t.prototype._bindMoveEvent=function(t){var e=this._bindMoveMarker;t.addEventListener("mousemove",e),"ontouchstart"in window&&t.addEventListener("touchmove",e)},t}(),Et=new St;!function(t){t[t.None=0]="None",t[t.Vertical=1]="Vertical",t[t.Horizontal=2]="Horizontal",t[t.Both=3]="Both"}(dt||(dt={})),function(t){t[t.None=0]="None",t[t.Move=1]="Move",t[t.Drag=2]="Drag"}(pt||(pt={})),function(t){t[t.Auto=2]="Auto",t[t.Right=0]="Right",t[t.Left=1]="Left",t[t.Bottom=4]="Bottom",t[t.Top=6]="Top"}(ft||(ft={}));var Pt=function(){function t(t,e){this._wrapperMousedown=null,this._wrapperMouseup=null,this.positionChanged=new s.Event,this._chart=t,t._markers.push(this),t.rendered.addHandler(this._initialize,this),this._resetDefaultValue(),(0,s.copy)(this,e),this._initialize()}return Object.defineProperty(t.prototype,"chart",{get:function(){return this._chart},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isVisible",{get:function(){return this._isVisible},set:function(t){t!==this._isVisible&&(this._isVisible=(0,s.asBoolean)(t),this._marker&&this._toggleVisibility())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"seriesIndex",{get:function(){return this._seriesIndex},set:function(t){t!==this._seriesIndex&&(this._seriesIndex=(0,s.asNumber)(t,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"horizontalPosition",{get:function(){return this._horizontalPosition},set:function(t){if(t!==this._horizontalPosition){if(this._horizontalPosition=(0,s.asNumber)(t,!0),this._horizontalPosition<0||this._horizontalPosition>1)throw"horizontalPosition's value should be in (0, 1).";this._marker&&this._updateMarkerPosition()}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"x",{get:function(){var t=this._chart.axisX,e=this.chart.pageToControl(this._targetPoint);return t.convertBack(e.x)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){var t=this._chart.axisY,e=this.chart.pageToControl(this._targetPoint);return t.convertBack(e.y)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"content",{get:function(){return this._content},set:function(t){t!==this._content&&(this._content=(0,s.asFunction)(t),this._updateMarkerPosition())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"verticalPosition",{get:function(){return this._verticalPosition},set:function(t){if(t!==this._verticalPosition){if(this._verticalPosition=(0,s.asNumber)(t,!0),this._verticalPosition<0||this._verticalPosition>1)throw"verticalPosition's value should be in (0, 1).";this._marker&&this._updateMarkerPosition()}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"alignment",{get:function(){return this._alignment},set:function(t){t!==this._alignment&&(this._alignment=t,this._marker&&this._updatePositionByAlignment())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lines",{get:function(){return this._lines},set:function(t){(t=(0,s.asEnum)(t,dt))!=this._lines&&(this._lines=t,this._marker&&this._resetLinesVisibility())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"interaction",{get:function(){return this._interaction},set:function(t){(t=(0,s.asEnum)(t,pt))!=this._interaction&&(this._marker&&this._detach(),this._interaction=t,this._marker&&this._attach(),this._toggleElesDraggableClass(this._interaction==pt.Drag))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dragThreshold",{get:function(){return this._dragThreshold},set:function(t){t!=this._dragThreshold&&(this._dragThreshold=(0,s.asNumber)(t))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dragContent",{get:function(){return this._dragContent},set:function(e){e!==this._dragContent&&(this._dragContent=(0,s.asBoolean)(e)),(0,s.toggleClass)(this._dragEle,t._CSS_LINE_DRAGGABLE,this._interaction===pt.Drag&&this._dragContent&&this._lines!==dt.None)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dragLines",{get:function(){return this._dragLines},set:function(t){t!=this._dragLines&&(this._dragLines=(0,s.asBoolean)(t))},enumerable:!0,configurable:!0}),t.prototype.onPositionChanged=function(t){this.positionChanged.raise(this,t)},t.prototype.remove=function(){var t=this._chart;this._marker&&(t.rendered.removeHandler(this._initialize,this),this._detach(),this._removeMarker(),this._wrapperMoveMarker=null,this._wrapperMousedown=null,this._wrapperMouseup=null)},t.prototype._attach=function(){var e=this._chart.hostElement;this._interaction!==pt.None?(0,s.addClass)(e,t._CSS_TOUCH_DISABLED):(0,s.removeClass)(e,t._CSS_TOUCH_DISABLED),Et.attach(this),this._attachDrag()},t.prototype._attachDrag=function(){this._interaction===pt.Drag&&(this._wrapperMousedown||(this._wrapperMousedown=this._onMousedown.bind(this)),this._wrapperMouseup||(this._wrapperMouseup=this._onMouseup.bind(this)),this._toggleDragEventAttach(!0))},t.prototype._detach=function(){(0,s.removeClass)(this._chart.hostElement,t._CSS_TOUCH_DISABLED),Et.detach(this),this._detachDrag()},t.prototype._detachDrag=function(){this._interaction===pt.Drag&&this._toggleDragEventAttach(!1)},t.prototype._toggleDragEventAttach=function(t){var e=this._chart.hostElement,i=t?"addEventListener":"removeEventListener";e[i]("mousedown",this._wrapperMousedown),document[i]("mouseup",this._wrapperMouseup),"ontouchstart"in window&&e[i]("touchstart",this._wrapperMousedown),"ontouchend"in window&&document[i]("touchend",this._wrapperMouseup)},t.prototype._onMousedown=function(e){var i,n,r,o,a,l=this._getEventPoint(e);this._interaction===pt.Drag&&(o=!(0===(i=(0,s.getElementRect)(this._hLine)).width||0===i.height),a=!(0===(n=(0,s.getElementRect)(this._vLine)).width||0===n.height),r=(0,s.getElementRect)(this._markerContent),this._dragContent&&this._pointInRect(l,r)?(this._capturedEle=this._markerContent,this._contentDragStartPoint=new s.Point(l.x,l.y),this._mouseDownCrossPoint=new s.Point(this._targetPoint.x,this._targetPoint.y)):o&&(Math.abs(i.top-l.y)<=this._dragThreshold||Math.abs(l.y-i.top-i.height)<=this._dragThreshold||l.y>=i.top&&l.y<=i.top+i.height)?(this._capturedEle=this._hLine,this._contentDragStartPoint=void 0,(0,s.addClass)(this._chart.hostElement,t._CSS_LINE_DRAGGABLE)):a&&(Math.abs(n.left-l.x)<=this._dragThreshold||Math.abs(l.x-n.left-n.width)<=this._dragThreshold||l.x>=n.left&&l.x<=n.left+n.width)&&(this._capturedEle=this._vLine,this._contentDragStartPoint=void 0,(0,s.addClass)(this._chart.hostElement,t._CSS_LINE_DRAGGABLE)),e.preventDefault())},t.prototype._onMouseup=function(e){var i=this._alignment===ft.Auto&&this._capturedEle===this._markerContent&&this._lines!==dt.None;this._capturedEle=void 0,this._contentDragStartPoint=void 0,this._mouseDownCrossPoint=void 0,i&&(this._updatePositionByAlignment(),this._updatePositionByAlignment()),(0,s.removeClass)(this._chart.hostElement,t._CSS_LINE_DRAGGABLE)},t.prototype._moveMarker=function(t){var e,i,n,r,o,a,l=this._chart,h=this._getEventPoint(t),c=this._plotRect,u=this._interaction===pt.Drag,d=this._lines===dt.Horizontal,p=this._lines===dt.Vertical,f=this._seriesIndex,_=(0,s.getElementRect)(l.hostElement);if(c&&this._isVisible&&this._interaction!==pt.None&&(this._interaction!==pt.Drag||this._capturedEle&&this._lines!==dt.None)){if(u&&(this._contentDragStartPoint?(h.x=d?this._targetPoint.x:this._mouseDownCrossPoint.x+h.x-this._contentDragStartPoint.x,h.y=p?this._targetPoint.y:this._mouseDownCrossPoint.y+h.y-this._contentDragStartPoint.y):d||!this._dragLines&&this._capturedEle===this._hLine?h.x=this._targetPoint.x:(p||!this._dragLines&&this._capturedEle===this._vLine)&&(h.y=this._targetPoint.y)),u&&this._lines===dt.Horizontal||!this._dragLines&&this._capturedEle===this._hLine){if(h.y<=c.top||h.y>=c.top+c.height)return}else if(u&&this._lines===dt.Vertical||!this._dragLines&&this._capturedEle===this._vLine){if(h.x<=c.left||h.x>=c.left+c.width)return}else if(h.x<=c.left||h.y<=c.top||h.x>=c.left+c.width||h.y>=c.top+c.height)return;if(null!=f&&f>=0&&f<l.series.length){if(null==(i=(e=l.series[f]).hitTest(new s.Point(h.x,NaN)))||null==i.x||null==i.y)return;n=e.axisX||l.axisX,r=e._getAxisY(),o=(0,s.isDate)(i.x)?_t._toOADate(i.x):i.x,o=(0,s.isString)(o)?i.pointIndex:o,a=(0,s.isDate)(i.y)?_t._toOADate(i.y):i.y;var g=this._getElementPaddingValuee(l.hostElement,"padding-left"),m=this._getElementPaddingValuee(l.hostElement,"padding-top");h.x=n.convert(o)+g+_.left,this.chart._stacking!=it.None&&(a=this._calcStackedValue(f,o,a)),h.y=r.convert(a)+m+_.top}this._updateMarkerPosition(h),t.preventDefault()}},t.prototype._calcStackedValue=function(t,e,i){for(var n=i,r=this.chart._stacking==it.Stacked100pc,o=0;o<t;o++){var s=this.chart.series[o],a=s.getValues(1),l=s.getValues(0);if(l)for(var h=0;h<l.length;h++)if(e===(a?a[h]:h)){isFinite(l[h])&&(r||this._sign(i)==this._sign(l[h]))&&(n+=l[h]);break}}return r&&n&&(n/=this.chart._dataInfo.getStackedAbsSum(e))>1&&(n=1),n},t.prototype._sign=function(t){return t>0?1:t<0?-1:0},t.prototype._getElementPaddingValuee=function(t,e){return+window.getComputedStyle(t,null).getPropertyValue(e).replace("px","")},t.prototype._show=function(t){(t||this._marker).style.display="block"},t.prototype._hide=function(t){(t||this._marker).style.display="none"},t.prototype._toggleVisibility=function(){this._isVisible?this._show():this._hide()},t.prototype._resetDefaultValue=function(){this._isVisible=!0,this._alignment=ft.Auto,this._lines=dt.None,this._interaction=pt.None,this._horizontalPosition=null,this._verticalPosition=null,this._content=null,this._seriesIndex=null,this._dragThreshold=15,this._dragContent=!1,this._dragLines=!1,this._targetPoint=new s.Point},t.prototype._initialize=function(){var t,e=this._chart.hostElement.querySelector("."+_t._CSS_PLOT_AREA);this._plot=e,this._marker||this._createMarker(),e&&(this._plotRect=(0,s.getElementRect)(e),t=e.getBBox(),this._plotRect.width=t.width,this._plotRect.height=t.height,this._updateMarkerSize(),this._updateLinesSize()),this._updateMarkerPosition(),this._wrapperMoveMarker=this._moveMarker.bind(this),this._attach()},t.prototype._createMarker=function(){var e,i;e=document.createElement("div"),(0,s.addClass)(e,t._CSS_MARKER),(i=this._getContainer()).appendChild(e),this._markerContainer=i,this._marker=e,this._createChildren()},t.prototype._removeMarker=function(){var t=this._markerContainer;t.removeChild(this._marker),this._content=null,this._hLine=null,this._vLine=null,t.hasChildNodes()||(this._chart.hostElement.removeChild(this._markerContainer),this._markerContainer=null),this._marker=null},t.prototype._getContainer=function(){var e=this._chart.hostElement.querySelector(t._CSS_MARKER_CONTAINER);return e||(e=this._createContainer()),e},t.prototype._createContainer=function(){var e=document.createElement("div"),i=this._chart.hostElement;return(0,s.addClass)(e,t._CSS_MARKER_CONTAINER),i.insertBefore(e,i.firstChild),e},t.prototype._createChildren=function(){var e,i,n,r,o=this._marker;(r=document.createElement("div")).style.position="absolute",r.style.height="100%",r.style.width="100%",o.appendChild(r),this._dragEle=r,e=document.createElement("div"),(0,s.addClass)(e,t._CSS_MARKER_CONTENT),o.appendChild(e),this._markerContent=e,i=document.createElement("div"),(0,s.addClass)(i,t._CSS_MARKER_HLINE),o.appendChild(i),this._hLine=i,n=document.createElement("div"),(0,s.addClass)(n,t._CSS_MARKER_VLINE),o.appendChild(n),this._vLine=n,this._toggleElesDraggableClass(this._interaction===pt.Drag),this._resetLinesVisibility()},t.prototype._toggleElesDraggableClass=function(e){(0,s.toggleClass)(this._hLine,t._CSS_LINE_DRAGGABLE,e),(0,s.toggleClass)(this._vLine,t._CSS_LINE_DRAGGABLE,e),(0,s.toggleClass)(this._dragEle,t._CSS_LINE_DRAGGABLE,e&&this._dragContent&&this._lines!==dt.None)},t.prototype._updateMarkerSize=function(){var t=this._plotRect,e=this._chart.hostElement,i=window.getComputedStyle(e,null),n=(0,s.getElementRect)(e);this._marker&&(this._marker.style.marginTop=t.top-n.top-(parseFloat(i.getPropertyValue("padding-top"))||0)+"px",this._marker.style.marginLeft=t.left-n.left-(parseFloat(i.getPropertyValue("padding-left"))||0)+"px")},t.prototype._updateLinesSize=function(){var t=this._plotRect;this._hLine&&this._vLine&&(this._hLine.style.width=t.width+"px",this._vLine.style.height=t.height+"px")},t.prototype._resetLinesVisibility=function(){this._hLine&&this._vLine&&(this._hide(this._hLine),this._hide(this._vLine),this._lines!==dt.Horizontal&&this._lines!==dt.Both||this._show(this._hLine),this._lines!==dt.Vertical&&this._lines!==dt.Both||this._show(this._vLine))},t.prototype._updateMarkerPosition=function(t){var e,i,n=this._plotRect,r=this._targetPoint,o=!1;this._interaction,pt.Drag,this._plot&&(e=n.left+n.width*(this._horizontalPosition||0),i=n.top+n.height*(this._verticalPosition||0),null==this._horizontalPosition&&t&&(e=t.x),null==this._verticalPosition&&t&&(i=t.y),e===r.x&&i===r.y||(o=!0),r.x=e,r.y=i,this._toggleVisibility(),this._content&&this._updateContent(),o&&this._raisePositionChanged(e,i),this._updatePositionByAlignment(!!t))},t.prototype._updateContent=function(){var t,e=this._chart,i=this._targetPoint,n=e.hitTest(i);t=this._content.call(null,n,i),this._markerContent.innerHTML=t||""},t.prototype._raisePositionChanged=function(t,e){this._plotRect,this.onPositionChanged(new s.Point(t,e))},t.prototype._updatePositionByAlignment=function(t){var e=this._alignment,i=this._targetPoint,n=this._marker,r=0,o=0,s=n.clientWidth,a=n.clientHeight,l=this._plotRect;this._plot&&(!this._capturedEle||this._capturedEle&&this._capturedEle!==this._markerContent?(e===ft.Auto?(i.x+s+12>l.left+l.width&&i.x-s>=0&&(o=s),r=a,i.y-a<l.top&&(r=0)):(1==(1&e)&&(o=s),2==(2&e)&&(r=a)),this._interaction===pt.Move&&0===r&&0===o&&null==this.verticalPosition&&(o=-12)):(parseInt(this._hLine.style.top)>0&&(r=a),parseInt(this._vLine.style.left)>0&&(o=s)),n.style.left=i.x-o-l.left+"px",n.style.top=i.y-r-l.top+"px",this._hLine.style.top=r+"px",this._hLine.style.left=l.left-i.x+o+"px",this._vLine.style.top=l.top-i.y+r+"px",this._vLine.style.left=o+"px")},t.prototype._getEventPoint=function(t){return t instanceof MouseEvent?new s.Point(t.pageX,t.pageY):new s.Point(t.changedTouches[0].pageX,t.changedTouches[0].pageY)},t.prototype._pointInRect=function(t,e){return!(!t||!e)&&t.x>=e.left&&t.x<=e.left+e.width&&t.y>=e.top&&t.y<=e.top+e.height},t._CSS_MARKER="wj-chart-linemarker",t._CSS_MARKER_HLINE="wj-chart-linemarker-hline",t._CSS_MARKER_VLINE="wj-chart-linemarker-vline",t._CSS_MARKER_CONTENT="wj-chart-linemarker-content",t._CSS_MARKER_CONTAINER="wj-chart-linemarker-container",t._CSS_LINE_DRAGGABLE="wj-chart-linemarker-draggable",t._CSS_TOUCH_DISABLED="wj-flexchart-touch-disabled",t}(),Tt=function(t){function e(){var e=t.call(this)||this;return e.hasSymbols=!1,e.hasLines=!0,e.isSpline=!1,e.isStep=!1,e.stacking=it.None,e.stackPos={},e.stackNeg={},e.clipping=!1,e}return l(e,t),e.prototype.clear=function(){t.prototype.clear.call(this),this.stackNeg={},this.stackPos={}},e.prototype.adjustLimits=function(t,e){this.dataInfo=t;var i=t.getMinX(),n=t.getMinY(),r=t.getMaxX(),o=t.getMaxY();if(this.isSpline&&!this.chart.axisY._getLogBase()){var a=.1*(o-n);n-=a,o+=a}return this.rotated?new s.Rect(n,i,o-n,r-i):new s.Rect(i,n,r-i,o-n)},e.prototype.plotSeries=function(t,e,i,n,r,o,a,l){var h=[],c=(0,s.asType)(n,ot),u=this.chart.series.indexOf(n),d=n.getValues(0),p=n.getValues(1);if(d){p||(p=this.dataInfo.getXVals());var f=ut.cloneStyle(n.style,["fill"]),_=d.length,g=!0;p?_=Math.min(_,p.length):(g=!1,p=new Array(_));var m=this._DEFAULT_WIDTH,y=c._getSymbolFill(u),b=c._getAltSymbolFill(u)||y,v=c._getSymbolStroke(u),w=c._getAltSymbolStroke(u)||v,C=c._getSymbolSize();t.stroke=v,t.strokeWidth=m,t.fill=y;var x=new Float64Array(_),S=new Float64Array(_),E=0,P=new Int8Array(_),T=0,M=this.rotated,I=this.stacking!=it.None&&!c._isCustomAxisY(),D=this.stacking==it.Stacked100pc&&!c._isCustomAxisY();void 0!==c._getChartType()&&(I=D=!1);for(var R=c.interpolateNulls,A=!1,k=this.getItemFormatter(n),O=0;O<_;O++){var L=g?p[O]:O,j=d[O];if(isFinite(L)&&isFinite(j)){if(I)if(D&&(j/=this.dataInfo.getStackedAbsSum(L)),j>=0){var N=isNaN(this.stackPos[L])?0:this.stackPos[L];j=this.stackPos[L]=N+j}else N=isNaN(this.stackNeg[L])?0:this.stackNeg[L],j=this.stackNeg[L]=N+j;var H;if(M){H=new K(u,O,j,L);var F=e.convert(j);j=i.convert(L),L=F}else H=new K(u,O,L,j),L=e.convert(L),j=i.convert(j);if(isNaN(L)||isNaN(j))A=!0,!0!==R&&(x[E]=NaN,S[E++]=NaN),P[T++]=1,l&&h.push(null);else{x[E]=L,S[E++]=j,T++,l&&h.push(new s.Point(L,j));var B=new X(new s.Point(L,j),.5*C);B.tag=H,this.hitTester.add(B,u)}}else A=!0,!0!==R&&(x[E]=NaN,S[E++]=NaN),P[T++]=1,l&&h.push(null)}var z=0;if(this.hasLines)if(t.fill=null,A&&!0!==R){var V=[],G=[];for(O=0;O<_;O++)isNaN(x[O])?(V.length>1&&(this._drawLines(t,V,G,null,f,this.chart._plotrectId),this.hitTester.add(new q(V,G),u),z++),V=[],G=[]):(V.push(x[O]),G.push(S[O]));V.length>1&&(this._drawLines(t,V,G,null,f,this.chart._plotrectId),this.hitTester.add(new q(V,G),u),z++)}else this._drawLines(t,x,S,null,f,this.chart._plotrectId,E),this.hitTester.add(new q(x,S),u),z++;if(this.hasSymbols&&C>0||k){t.fill=y;var Y=0;for(O=0;O<_;O++)R&&P[O]||(L=x[Y],j=S[Y],(!1===this.hasLines||k)&&(t.fill=d[O]>0?y:b,t.stroke=d[O]>0?v:w,t.strokeWidth=m),this.isValid(L,j,e,i)&&(this._drawSymbol(t,L,j,C,c,O,k),n._setPointIndex(O,z),z++),Y++)}l&&h&&h.length&&l(h)}},e.prototype._drawLines=function(t,e,i,n,r,o,s){if(this.isSpline&&s>3)t.drawSplines(e,i,n,r,o,s);else if(this.isStep){var a=this._createSteps(e,i,s);e=a.x,i=a.y,t.drawLines(e,i,n,r,o)}else t.drawLines(e,i,n,r,o,s)},e.prototype._drawSymbol=function(t,e,i,n,r,o,a){var l=this;if(a){t.startGroup();var h=new tt(this.chart,new s.Point(e,i),W.SeriesSymbol);h._setData(r,o),a(t,h,(function(){l.hasSymbols&&n>0&&l._drawDefaultSymbol(t,e,i,n,r.symbolMarker,r.symbolStyle)})),t.cssPriority=!0,t.endGroup()}else this._drawDefaultSymbol(t,e,i,n,r.symbolMarker,r.symbolStyle)},e.prototype._drawDefaultSymbol=function(t,e,i,n,r,o){r==Q.Dot?t.drawEllipse(e,i,.5*n,.5*n,null,o):r==Q.Box&&t.drawRect(e-.5*n,i-.5*n,n,n,null,o)},e}(ut),Mt=function(t){function e(){var e=t.call(this)||this;return e._MIN_SIZE=5,e._MAX_SIZE=30,e.hasLines=!1,e.hasSymbols=!0,e.clipping=!0,e}return l(e,t),e.prototype.adjustLimits=function(e,i){var n=this.getNumOption("minSize","bubble");this._minSize=n||this._MIN_SIZE;var r=this.getNumOption("maxSize","bubble");this._maxSize=r||this._MAX_SIZE;for(var o=this.chart.series,s=o.length,a=NaN,l=NaN,h=0;h<s;h++)if(((m=o[h])._getChartType()==et.Bubble||null==m._getChartType()&&m._chart._getChartType()==et.Bubble)&&(y=m._getBindingValues(1)))for(var c=y.length,u=0;u<c;u++)isFinite(y[u])&&((isNaN(a)||y[u]<a)&&(a=y[u]),(isNaN(l)||y[u]>l)&&(l=y[u]));this._minValue=a,this._maxValue=l;var d=t.prototype.adjustLimits.call(this,e,i),p=i.left,f=i.right,_=i.top,g=i.bottom;for(h=0;h<s;h++){var m;if((m=o[h])._getChartType()==et.Bubble||null==m._getChartType()&&m._chart._getChartType()==et.Bubble){var y=m._getBindingValues(1),b=m.getValues(1),v=m.getValues(0);if(y&&b&&v){var w=y.length;for(u=0;u<w;u++){var C=b?b[u]:u,x=v[u],S=y[u];mt.isValid(C,x,S)&&(C=i.left+i.width*(C-d.left)/d.width,x=i.top+i.height*(x-d.top)/d.height,C-(S=this._minSize+(this._maxSize-this._minSize)*(S-a)/(l-a))<p&&(p=C-S),C+S>f&&(f=C+S),x-S<_&&(_=x-S),x+S>g&&(g=x+S))}}}}p=i.left-p+5,f=f-i.right+5,_=i.top-_+5,g=g-i.bottom+5;var E=this.chart.axisX,P=this.chart.axisY;if(!E._isLogAxis())if(this.stacking==it.Stacked100pc&&this.rotated){var T=(i.width-this._maxSize)/d.width;d.left-=.5*this._maxSize/T,d.width+=this._maxSize/T}else T=(i.width-(p+f))/d.width,d.left-=p/T,d.width+=(p+f)/T;if(!P._isLogAxis())if(this.stacking!=it.Stacked100pc||this.rotated)M=(i.height-(_+g))/d.height,d.top-=_/M,d.height+=(_+g)/M;else{var M=(i.height-this._maxSize)/d.height;d.top-=.5*this._maxSize/M,d.height+=this._maxSize/M}return d},e.prototype._drawSymbol=function(t,e,i,n,r,o,a){var l=this;if(null==this._minSize){var h=this.getNumOption("minSize","bubble");this._minSize=h||this._MIN_SIZE}if(null==this._maxSize){var c=this.getNumOption("maxSize","bubble");this._maxSize=c||this._MAX_SIZE}var u=r._getItem(o);if(u){var d=r._getBinding(1);if(d&&(n=u[d],isFinite(n))){null==n&&(n=this._minValue);var p=this._minValue==this._maxValue?1:Math.sqrt((n-this._minValue)/(this._maxValue-this._minValue));if(n=this._minSize+(this._maxSize-this._minSize)*p,a){var f=new tt(this.chart,new s.Point(e,i),W.SeriesSymbol);f._setData(r,o),t.startGroup(),a(t,f,(function(){l._drawDefaultSymbol(t,e,i,n,r.symbolMarker,r.symbolStyle)})),t.endGroup()}else this._drawDefaultSymbol(t,e,i,n,r.symbolMarker,r.symbolStyle);var _=this.hitTester._map[this.chart.series.indexOf(r)];if(null!=_)for(var g=_.length-1;g>=0;g--){var m=_[g];if(m.tag&&m.tag.pointIndex==o){var y=(0,s.tryCast)(m,X);y&&y.setRadius(.5*n)}}}}},e}(Tt);(0,s._registerModule)("wijmo.chart",a)},325:(t,e,i)=>{i.r(e),i.d(e,{BulletGraph:()=>g,Gauge:()=>d,GaugeDirection:()=>p,LinearGauge:()=>_,NeedleLength:()=>u,NeedleShape:()=>c,RadialGauge:()=>f,Range:()=>h,ShowText:()=>r});var n,r,o,s=i(664),a=i(325),l=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),h=function(){function t(t){this._min=0,this._max=100,this._thickness=1,this.propertyChanged=new s.Event,(0,s.isString)(t)?this._name=t:(0,s.copy)(this,t)}return Object.defineProperty(t.prototype,"min",{get:function(){return this._min},set:function(t){this._setProp("_min",(0,s.asNumber)(t,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"max",{get:function(){return this._max},set:function(t){this._setProp("_max",(0,s.asNumber)(t,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){return this._color},set:function(t){this._setProp("_color",(0,s.asString)(t))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"thickness",{get:function(){return this._thickness},set:function(t){this._setProp("_thickness",(0,s.clamp)((0,s.asNumber)(t),0,1))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this._name},set:function(t){this._setProp("_name",(0,s.asString)(t))},enumerable:!0,configurable:!0}),t.prototype.onPropertyChanged=function(t){this.propertyChanged.raise(this,t)},t.prototype._setProp=function(t,e){var i=this[t];if(e!=i){this[t]=e;var n=new s.PropertyChangedEventArgs(t.substr(1),i,e);this.onPropertyChanged(n)}},t._ctr=0,t}();(o=r||(r={}))[o.None=0]="None",o[o.Value=1]="Value",o[o.MinMax=2]="MinMax",o[o.All=3]="All";var c,u,d=function(t){function e(i,n){var o=t.call(this,i,null,!0)||this;o._ranges=new s.ObservableArray,o._rngElements=[],o._format="n0",o._showRanges=!0,o._stackRanges=!1,o._shadow=!0,o._animated=!0,o._readOnly=!0,o._handleWheel=!0,o._step=1,o._showText=r.None,o._showTicks=!1,o._showTickText=!1,o._thickness=.8,o._initialized=!1,o.valueChanged=new s.Event,o._getPercent=function(t){var e=this.max>this.min?(t-this.min)/(this.max-this.min):0;return Math.max(0,Math.min(1,e))},e._ctr++;var a=o.hostElement;(0,s.setAttribute)(a,"role","slider",!0);var l=o.getTemplate();return o.applyTemplate("wj-control wj-gauge",l,{_dSvg:"dsvg",_svg:"svg",_filter:"filter",_gFace:"gface",_gRanges:"granges",_gPointer:"gpointer",_gCover:"gcover",_pFace:"pface",_pPointer:"ppointer",_cValue:"cvalue",_tValue:"value",_tMin:"min",_tMax:"max",_pTicks:"pticks",_gTicks:"gticks",_gNeedle:"gneedle"}),(0,s.setCss)(o._dSvg,{width:"100%",height:"100%"}),o._filterID="wj-gauge-filter-"+e._ctr.toString(36),o._filter.setAttribute("id",o._filterID),o.face=new h,o.pointer=new h,o._ranges.collectionChanged.addHandler((function(){o._ranges.forEach((function(t){(0,s.assert)(t instanceof h,"ranges array must contain Range objects.")})),o._rangesDirty=!0,o.invalidate()})),o.addEventListener(a,"keydown",o._keydown.bind(o)),o.addEventListener(a,"click",(function(t){0==t.button&&(o.focus(),o._applyMouseValue(t))})),o.addEventListener(a,"mousedown",(function(t){0==t.button&&(o.focus(),o._dragging=!0,setTimeout((function(){o._applyMouseValue(t)})))})),o.addEventListener(a,"mousemove",(function(t){o._dragging&&o.containsFocus()&&o._applyMouseValue(t,!0)})),o.addEventListener(a,"mouseup",(function(t){o._dragging=!1})),o.addEventListener(a,"mouseleave",(function(t){t.target==a&&(o._dragging=!1)})),"ontouchstart"in window&&(o.addEventListener(a,"touchstart",(function(t){o.focus(),!t.defaultPrevented&&o._applyMouseValue(t,!1)&&t.preventDefault()})),o.addEventListener(a,"touchmove",(function(t){!t.defaultPrevented&&o._applyMouseValue(t,!0)&&t.preventDefault()}))),o.addEventListener(a,"wheel",(function(t){if(o._handleWheel&&!o.isReadOnly&&!t.defaultPrevented&&o.containsFocus()&&null!=o.value&&o.hitTest(t)){var e=(0,s.clamp)(-t.deltaY,-1,1);o.value=(0,s.clamp)(o.value+(o.step||1)*e,o.min,o.max),t.preventDefault()}})),o.isReadOnly=!0,o.initialize(n),o.invalidate(),o}return l(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this._pointer.max},set:function(t){t!=this.value&&(this._pointer.max=(0,s.asNumber)(t,!0),this._updateAria())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"min",{get:function(){return this._face.min},set:function(t){t!=this.min&&(this._face.min=(0,s.asNumber)(t),this._updateAria())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"max",{get:function(){return this._face.max},set:function(t){t!=this.max&&(this._face.max=(0,s.asNumber)(t),this._updateAria())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"origin",{get:function(){return this._origin},set:function(t){t!=this._origin&&(this._origin=(0,s.asNumber)(t,!0),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isReadOnly",{get:function(){return this._readOnly},set:function(t){this._readOnly=(0,s.asBoolean)(t),(0,s.setAttribute)(this._svg,"cursor",this._readOnly?null:"pointer"),(0,s.toggleClass)(this.hostElement,"wj-state-readonly",this.isReadOnly)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"handleWheel",{get:function(){return this._handleWheel},set:function(t){this._handleWheel=(0,s.asBoolean)(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"step",{get:function(){return this._step},set:function(t){t!=this._step&&(this._step=(0,s.asNumber)(t,!0),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"format",{get:function(){return this._format},set:function(t){t!=this._format&&(this._format=(0,s.asString)(t),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"getText",{get:function(){return this._getText},set:function(t){t!=this._getText&&(this._getText=(0,s.asFunction)(t),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"thickness",{get:function(){return this._thickness},set:function(t){t!=this._thickness&&(this._thickness=(0,s.clamp)((0,s.asNumber)(t,!1),0,1),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"face",{get:function(){return this._face},set:function(t){t!=this._face&&(this._face&&this._face.propertyChanged.removeHandler(this._rangeChanged),this._face=(0,s.asType)(t,h),this._face&&this._face.propertyChanged.addHandler(this._rangeChanged,this),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pointer",{get:function(){return this._pointer},set:function(t){if(t!=this._pointer){var e=null;this._pointer&&(e=this.value,this._pointer.propertyChanged.removeHandler(this._rangeChanged)),this._pointer=(0,s.asType)(t,h),this._pointer&&(e&&(this.value=e),this._pointer.propertyChanged.addHandler(this._rangeChanged,this)),this.invalidate()}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showText",{get:function(){return this._showText},set:function(t){(t=(0,s.asEnum)(t,r))!=this._showText&&(this._showText=t,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showTicks",{get:function(){return this._showTicks},set:function(t){t!=this._showTicks&&(this._showTicks=(0,s.asBoolean)(t),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showTickText",{get:function(){return this._showTickText},set:function(t){t!=this._showTickText&&(this._showTickText=(0,s.asBoolean)(t),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tickSpacing",{get:function(){return this._tickSpacing},set:function(t){t!=this._tickSpacing&&(this._tickSpacing=(0,s.asNumber)(t,!0),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"thumbSize",{get:function(){return this._thumbSize},set:function(t){t!=this._thumbSize&&(this._thumbSize=(0,s.asNumber)(t,!0,!0),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showRanges",{get:function(){return this._showRanges},set:function(t){t!=this._showRanges&&(this._showRanges=(0,s.asBoolean)(t),this._animColor=null,this._rangesDirty=!0,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stackRanges",{get:function(){return this._stackRanges},set:function(t){t!=this._stackRanges&&(this._stackRanges=(0,s.asBoolean)(t),this._animColor=null,this._rangesDirty=!0,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasShadow",{get:function(){return this._shadow},set:function(t){t!=this._shadow&&(this._shadow=(0,s.asBoolean)(t),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isAnimated",{get:function(){return this._animated},set:function(t){this._animated=(0,s.asBoolean)(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ranges",{get:function(){return this._ranges},enumerable:!0,configurable:!0}),e.prototype.onValueChanged=function(t){this.valueChanged.raise(this,t)},e.prototype.refresh=function(e){var i=this;if(void 0===e&&(e=!0),t.prototype.refresh.call(this,e),this._rangesDirty){this._rangesDirty=!1;var n=this._gRanges;for(this._rngElements.forEach((function(t){t.rng.propertyChanged.removeHandler(i._rangeChanged)}));n.lastChild;)n.removeChild(n.lastChild);this._rngElements=[],this._showRanges&&this._ranges.forEach((function(t){t.propertyChanged.addHandler(i._rangeChanged,i),i._rngElements.push({rng:t,el:i._createElement("path",n)})}))}this._showElement(this._tValue,0!=(this.showText&r.Value)),this._showElement(this._tMin,0!=(this.showText&r.MinMax)),this._showElement(this._tMax,0!=(this.showText&r.MinMax)),this._showElement(this._cValue,0!=(this.showText&r.Value)||this._thumbSize>0),this._updateText();var o=this._getFilterUrl();(0,s.setAttribute)(this._pFace,"filter",o),(0,s.setAttribute)(this._pPointer,"filter",o),this._updateRange(this._face),this._updateRange(this._pointer),this._updateTicks(),this._ranges.forEach((function(t){i._updateRange(t)})),this._initialized=!0},e.prototype.hitTest=function(t,e){(0,s.isNumber)(t)&&(0,s.isNumber)(e)?t=new s.Point(t,e):t instanceof s.Point||(t=(0,s.mouseToPage)(t)),t=(0,s.asType)(t,s.Point);var i=s.Rect.fromBoundingRect(this._dSvg.getBoundingClientRect());return t.x-=i.left+pageXOffset,t.y-=i.top+pageYOffset,this._getValueFromPoint(t)},e._getBBox=function(t){try{return t.getBBox()}catch(t){return{x:0,y:0,width:0,height:0}}},e.prototype._getFilterUrl=function(){return this.hasShadow&&!(0,s.isiOS)()?"url(#"+this._filterID+")":null},e.prototype._getRangeElement=function(t){if(t==this._face)return this._pFace;if(t==this._pointer)return this._pPointer;for(var e=0;e<this._rngElements.length;e++){var i=this._rngElements[e];if(i.rng==t)return i.el}return null},e.prototype._rangeChanged=function(t,e){var i=this;if(t==this._pointer&&"max"==e.propertyName&&(this.onValueChanged(),this._updateText()),t!=this._face){if(t==this._pointer&&"max"==e.propertyName&&(this._animInterval&&clearInterval(this._animInterval),this.isAnimated&&!this.isUpdating&&this._initialized)){var n=this._getPointerColor(e.oldValue),r=this._getPointerColor(e.newValue),o=n?new s.Color(n):null,a=r?new s.Color(r):null,l=(0,s.clamp)(Math.abs(e.newValue-e.oldValue)/(this.max-this.min),0,1);return void(this._animInterval=(0,s.animate)((function(n){i._animColor=o&&a?s.Color.interpolate(o,a,n).toString():null,i._updateRange(t,e.oldValue+n*(e.newValue-e.oldValue)),n>=1&&(i._animColor=null,i._animInterval=null,i._updateRange(t),i._updateText())}),l*s.Control._ANIM_DEF_DURATION))}this._updateRange(t)}else this.invalidate()},e.prototype._createElement=function(t,i,n){var r=document.createElementNS(e._SVGNS,t);return n&&r.setAttribute("class",n),i.appendChild(r),r},e.prototype._centerText=function(t,i,n){if("none"!=t.getAttribute("display")){var r=s.Globalize.format(i,this.format);if((0,s.isFunction)(this.getText)){var o="";t==this._tValue?o="value":t==this._tMin?o="min":t==this._tMax&&(o="max"),o&&(r=this.getText(this,o,i,r))}t.textContent=r;var a=s.Rect.fromBoundingRect(e._getBBox(t)),l=n.x-a.width/2,h=n.y+a.height/4;t.setAttribute("x",this._fix(l)),t.setAttribute("y",this._fix(h))}},e.prototype._copy=function(t,e){var i=this;return"ranges"==t?((0,s.asArray)(e).forEach((function(t){var e=new h(t);i.ranges.push(e)})),!0):"pointer"==t&&((0,s.copy)(this.pointer,e),!0)},e.prototype._showElement=function(t,e){(0,s.setAttribute)(t,"display",e?null:"none")},e.prototype._updateRange=function(t,e){void 0===e&&(e=t.max),t==this._pointer&&(t.min=null!=this.origin?this.origin:this.min<0&&this.max>0?0:this.min);var i=this._getRangeElement(t);if(i){this._updateRangeElement(i,t,e);var n=t.color;t==this._pointer&&(n=this._animColor?this._animColor:this._getPointerColor(t.max)),(0,s.setAttribute)(i,"style",n?"fill:"+n:null)}},e.prototype._getPointerColor=function(t){if(!this._showRanges){for(var e,i=0;i<this._ranges.length;i++){var n=this._ranges[i];if(t>=n.min&&t<=n.max){e=n;break}}if(e)return e.color}return this._pointer.color},e.prototype._keydown=function(t){if(!this._readOnly&&this._step){var e=!0;switch(this._getKey(t.keyCode)){case s.Key.Left:case s.Key.Down:this.value=(0,s.clamp)(this.value-this._step,this.min,this.max);break;case s.Key.Right:case s.Key.Up:this.value=(0,s.clamp)(this.value+this._step,this.min,this.max);break;case s.Key.Home:this.value=this.min;break;case s.Key.End:this.value=this.max;break;default:e=!1}e&&t.preventDefault()}},e.prototype._getKey=function(t){return t},e.prototype._applyMouseValue=function(t,e){if(!this.isReadOnly&&this.containsFocus()){var i=this.hitTest(t);if(null!=i){var n=this._animated,r=this._step;return e&&(this._animated=!1),r&&(i=Math.round(i/r)*r),this.value=(0,s.clamp)(i,this.min,this.max),this._animated=n,!0}}return!1},e.prototype._updateRangeElement=function(t,e,i){(0,s.assert)(!1,"Gauge is an abstract class.")},e.prototype._updateText=function(){(0,s.assert)(!1,"Gauge is an abstract class.")},e.prototype._updateTicks=function(){(0,s.assert)(!1,"Gauge is an abstract class.")},e.prototype._getValueFromPoint=function(t){return null},e.prototype._fix=function(t){return(0,s.isNumber)(t)?parseFloat(t.toFixed(4)).toString():this._fix(t.x)+" "+this._fix(t.y)},e.prototype._updateAria=function(){var t=this.hostElement;t&&((0,s.setAttribute)(t,"aria-valuemin",this.min),(0,s.setAttribute)(t,"aria-valuemax",this.max),(0,s.setAttribute)(t,"aria-valuenow",this.value))},e._SVGNS="http://www.w3.org/2000/svg",e._ctr=0,e.controlTemplate='<div wj-part="dsvg" dir="ltr"><svg wj-part="svg" width="100%" height="100%"><defs><filter wj-part="filter"><feOffset dx="3" dy="3"></feOffset><feGaussianBlur result="offset-blur" stdDeviation="5"></feGaussianBlur><feComposite operator="out" in="SourceGraphic" in2="offset-blur" result="inverse"></feComposite><feFlood flood-color="black" flood-opacity="0.2" result="color"></feFlood><feComposite operator="in" in="color" in2="inverse" result="shadow"></feComposite><feComposite operator="over" in="shadow" in2="SourceGraphic"></feComposite></filter></defs><g wj-part="gface" class="wj-face"><path wj-part="pface"/></g><g wj-part="granges" class="wj-ranges"/><g wj-part="gpointer" class="wj-pointer"><path wj-part="ppointer"/></g><g wj-part="gcover" class="wj-cover"><path wj-part="pticks" class="wj-ticks"/><g wj-part="gticks" aria-hidden="true" class="wj-tick-text"/><circle wj-part="cvalue" class="wj-pointer wj-thumb"/><g wj-part="gneedle" class="wj-needle"/><text wj-part="value" class="wj-value"/><text wj-part="min" class="wj-min" aria-hidden="true"/><text wj-part="max" class="wj-max" aria-hidden="true"/></g></svg></div>',e}(s.Control);!function(t){t[t.None=0]="None",t[t.Triangle=1]="Triangle",t[t.Diamond=2]="Diamond",t[t.Hexagon=3]="Hexagon",t[t.Rectangle=4]="Rectangle",t[t.Arrow=5]="Arrow",t[t.WideArrow=6]="WideArrow",t[t.Pointer=7]="Pointer",t[t.WidePointer=8]="WidePointer",t[t.Outer=9]="Outer"}(c||(c={})),function(t){t[t.Outer=0]="Outer",t[t.Middle=1]="Middle",t[t.Inner=2]="Inner"}(u||(u={}));var p,f=function(t){function e(e,i){var n=t.call(this,e,null)||this;return n._startAngle=0,n._sweepAngle=180,n._autoScale=!0,n._ndlShape=c.None,n._ndlLength=u.Middle,(0,s.addClass)(n.hostElement,"wj-radialgauge"),n._thickness=.4,n.showText=r.All,n.initialize(i),n}return l(e,t),Object.defineProperty(e.prototype,"startAngle",{get:function(){return this._startAngle},set:function(t){t!=this._startAngle&&(this._startAngle=(0,s.clamp)((0,s.asNumber)(t,!1),-360,360),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sweepAngle",{get:function(){return this._sweepAngle},set:function(t){t!=this._sweepAngle&&(this._sweepAngle=(0,s.clamp)((0,s.asNumber)(t,!1),-360,360),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"autoScale",{get:function(){return this._autoScale},set:function(t){t!=this._autoScale&&(this._autoScale=(0,s.asBoolean)(t),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"faceBounds",{get:function(){return this._rcSvg?this._rcSvg.clone():null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"clientSize",{get:function(){(0,s._deprecated)("clientSize","faceBounds");var t=this._rcSvg;return t?new s.Size(t.width,t.height):null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"needleElement",{get:function(){return this._ndlElement},set:function(t){if(t!=this._ndlElement){this._ndlShape=0,this._ndlElement=(0,s.asType)(t,SVGElement,!0);for(var e=this._gNeedle;e.firstChild;)(0,s.removeChild)(e.firstChild);this._ndlElement&&((0,s.setAttribute)(e,"transform","scale(0)"),e.appendChild(this._ndlElement)),this.invalidate()}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"needleShape",{get:function(){return this._ndlShape},set:function(t){if(t!=this._ndlShape){var i=null;switch(t=(0,s.asEnum)(t,c)){case c.Triangle:i=e.createNeedleElement([{x:-10,y:10},{x:100,y:0}]);break;case c.Diamond:i=e.createNeedleElement([{x:-20,y:0},{x:0,y:10},{x:100,y:0}]);break;case c.Hexagon:i=e.createNeedleElement([{x:-15,y:0},{x:-10,y:5},{x:10,y:5},{x:100,y:0}]);break;case c.Rectangle:i=e.createNeedleElement([{x:-20,y:3},{x:100,y:3}],10);break;case c.Arrow:i=e.createNeedleElement([{x:-20,y:3},{x:70,y:3},{x:70,y:15},{x:100,y:0}],10);break;case c.WideArrow:i=e.createNeedleElement([{x:-30,y:5},{x:-40,y:15},{x:-20,y:15},{x:-10,y:5},{x:80,y:5},{x:70,y:15},{x:100,y:0}]);break;case c.Pointer:i=e.createNeedleElement([{x:0,y:10},{x:100,y:0}],20,10);break;case c.WidePointer:i=e.createNeedleElement([{x:0,y:20},{x:100,y:0}],20,10);break;case c.Outer:i=e.createNeedleElement([{x:60,y:20},{x:100,y:0}])}this.needleElement=i,this._ndlShape=t,this.invalidate()}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"needleLength",{get:function(){return this._ndlLength},set:function(t){t!=this._ndlLength&&(this._ndlLength=(0,s.asEnum)(t,u),this.invalidate())},enumerable:!0,configurable:!0}),e.createNeedleElement=function(t,e,i){for(var n="",r=0;r<t.length;r++){var o=t[r];if(r==t.length-1&&0==o.y)break;n+=(r>0?" L ":"M ")+o.x+" "+o.y}for(r=t.length-1;r>=0;r--)n+=" L "+(o=t[r]).x+" "+-o.y;n+=" Z";var a="http://www.w3.org/2000/svg",l=document.createElementNS(a,"g"),h=document.createElementNS(a,"path");if((0,s.setAttribute)(h,"d",n),l.appendChild(h),e){var c=document.createElementNS(a,"circle");(0,s.addClass)(c,"wj-needle-cap"),(0,s.setAttribute)(c,"r",e),l.appendChild(c),i&&(c=document.createElementNS(a,"circle"),(0,s.addClass)(c,"wj-inner-needle-cap"),(0,s.setAttribute)(c,"r",i),l.appendChild(c))}return l},e.prototype.refresh=function(e){if(void 0===e&&(e=!0),(0,s.setAttribute)(this._svg,"viewBox",null),this._rcSvg=s.Rect.fromBoundingRect(this._dSvg.getBoundingClientRect()),t.prototype.refresh.call(this,e),this._ctmInv=null,this._ptSvg=null,this._autoScale){(0,s.setAttribute)(this._svg,"viewBox",null);var i=s.Rect.fromBoundingRect(d._getBBox(this._pFace));0!=(this.showText&r.Value)&&(i=s.Rect.union(i,s.Rect.fromBoundingRect(d._getBBox(this._tValue)))),0!=(this.showText&r.MinMax)&&(i=s.Rect.union(i,s.Rect.fromBoundingRect(d._getBBox(this._tMin))),i=s.Rect.union(i,s.Rect.fromBoundingRect(d._getBBox(this._tMax))));var n=[this._fix(i.left),this._fix(i.top),this._fix(i.width),this._fix(i.height)].join(" ");(0,s.setAttribute)(this._svg,"viewBox",n);var o=this._pFace.getCTM();this._ctmInv=o?o.inverse():null,this._ptSvg=this._svg.createSVGPoint()}},e.prototype._updateRangeElement=function(t,e,i){if(this._rcSvg){var n=this._rcSvg,r=new s.Point(n.width/2,n.height/2),o=Math.min(n.width,n.height)/2,a=o*this.thickness,l=a*e.thickness,h=o-(a-l)/2,c=h-l,d=this._getStartAngle(),p=this._getSweepAngle(),f=e==this._face,_=f?0:this._getPercent(e.min),g=d+p*_,m=p*((f?1:this._getPercent(i))-_);if(this.stackRanges&&e!=this.face&&e!=this.pointer){var y=this.ranges.indexOf(e);if(y>-1){var b=this.ranges.length,v=(h-c)/b;h=(c+=(b-1-y)*v)+v}}if(this._updateSegment(t,r,h,c,g,m),e==this._pointer){var w=this._fix;if(this.thumbSize>0){var C=this._animColor?this._animColor:this._getPointerColor(e.max),x=this._getPoint(r,d+p*this._getPercent(i),(h+c)/2),S=this._cValue;(0,s.setAttribute)(S,"cx",w(x.x)),(0,s.setAttribute)(S,"cy",w(x.y)),(0,s.setAttribute)(S,"style",C?"fill:"+C:null),(0,s.setAttribute)(S,"r",w(this.thumbSize/2))}if(this.needleElement){var E=h;this._ndlLength==u.Inner?E=c:this._ndlLength==u.Middle&&(E=(c+h)/2);var P="translate({cx}, {cy}) scale({scale}) rotate({angle})".replace("{cx}",w(r.x)).replace("{cy}",w(r.y)).replace("{scale}",w(E/100)).replace("{angle}",w(g+m));this._gNeedle.setAttribute("transform",P)}}}},e.prototype._getStartAngle=function(){var t=this.startAngle+180;return this.rightToLeft&&(t=180-t),t},e.prototype._getSweepAngle=function(){var t=this.sweepAngle;return this.rightToLeft&&(t=-t),t},e.prototype._updateText=function(){if(this._rcSvg){var t=this._rcSvg,e=new s.Point(t.width/2,t.height/2),i=Math.min(t.width,t.height)/2,n=Math.max(0,i*(1-this.thickness)),o=this._getStartAngle(),a=this._getSweepAngle();this._showElement(this._cValue,this.thumbSize>0);var l=0!=(this.showText&r.MinMax)&&Math.abs(a)<=300;this._showElement(this._tMin,l),this._showElement(this._tMax,l),this._centerText(this._tValue,this.value,e);var h=10*(this._getSweepAngle()<0?-1:1);this._centerText(this._tMin,this.min,this._getPoint(e,o-h,(i+n)/2)),this._centerText(this._tMax,this.max,this._getPoint(e,o+a+h,(i+n)/2))}},e.prototype._updateTicks=function(){for(var t=this.tickSpacing&&this.tickSpacing>0?this.tickSpacing:this.step,e="",i=this._gTicks;i.firstChild;)(0,s.removeChild)(i.firstChild);if(this.showTicks&&t>0)for(var n=this._rcSvg,r=new s.Point(n.width/2,n.height/2),o=Math.min(n.width,n.height)/2,a=o*this.thickness,l=a*this._face.thickness,h=o-(a-l)/2,c=h-l,u=1.15*h,d=this._getStartAngle(),p=this._getSweepAngle(),f=this.min;f<=this.max;f+=t){var _=d+p*this._getPercent(f),g=this._fix(this._getPoint(r,_,c)),m=this._fix(this._getPoint(r,_,h));if(f>this.min&&f<this.max&&(e+="M "+g+" L "+m+" "),this.showTickText){var y=this._createElement("text",i),b=this._getPoint(r,_,u);this._centerText(y,f,b)}}this._pTicks.setAttribute("d",e)},e.prototype._updateSegment=function(t,e,i,n,r,o){o=Math.min(Math.max(o,-359.99),359.99);var a=this._getPoint(e,r,n),l=this._getPoint(e,r,i),h=this._getPoint(e,r+o,i),c=this._getPoint(e,r+o,n),u={large:Math.abs(o)>180?1:0,cw:o>0?1:0,ccw:o>0?0:1,or:this._fix(i),ir:this._fix(n),p1:this._fix(a),p2:this._fix(l),p3:this._fix(h),p4:this._fix(c)},d=(0,s.format)("M {p1} L {p2} A {or} {or} 0 {large} {cw} {p3} L {p4} A {ir} {ir} 0 {large} {ccw} {p1} Z",u);t.setAttribute("d",d)},e.prototype._getPoint=function(t,e,i){return e=e*Math.PI/180,new s.Point(t.x+i*Math.cos(e),t.y+i*Math.sin(e))},e.prototype._getValueFromPoint=function(t){if(this.autoScale&&this._ctmInv&&(this._ptSvg.x=t.x,this._ptSvg.y=t.y,this._ptSvg=this._ptSvg.matrixTransform(this._ctmInv),t.x=this._ptSvg.x,t.y=this._ptSvg.y),!this._rcSvg||!this.sweepAngle)return null;var e=this._rcSvg,i=new s.Point(e.width/2,e.height/2),n=Math.min(e.width,e.height)/2,r=t.x-i.x,o=t.y-i.y,a=o*o+r*r;if(a<100||a>(n+10)*(n+10))return null;var l=180*(Math.PI-Math.atan2(-o,r))/Math.PI,h=this.startAngle,c=this.sweepAngle,u=h+c;if(this.rightToLeft&&(l=180-l),c>0){for(;l<h;)l+=360;for(;l>u;)l-=360}else{for(;l<u;)l+=360;for(;l>h;)l-=360}if((l-h)*(l-u)>0){var d=this._getPoint(i,l,n),p=this._getPoint(i,h,n),f=this._getPoint(i,u,n);l=this._getDist2(d,p)<this._getDist2(d,f)?h:u}var _=c?(0,s.clamp)(Math.abs(l-h)/Math.abs(c),0,1):0;return this.min+_*(this.max-this.min)},e.prototype._getDist2=function(t,e){var i=t.x-e.x,n=t.y-e.y;return i*i+n*n},e}(d);!function(t){t[t.Right=0]="Right",t[t.Left=1]="Left",t[t.Up=2]="Up",t[t.Down=3]="Down"}(p||(p={}));var _=function(t){function e(e,i){var n=t.call(this,e,null)||this;return n._direction=p.Right,(0,s.addClass)(n.hostElement,"wj-lineargauge"),n.initialize(i),n}return l(e,t),Object.defineProperty(e.prototype,"direction",{get:function(){return this._direction},set:function(t){(t=(0,s.asEnum)(t,p))!=this._direction&&(this._direction=t,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"faceBounds",{get:function(){return this._getRangeRect(this._face)},enumerable:!0,configurable:!0}),e.prototype._updateRangeElement=function(t,e,i){var n=this._getRangeRect(e,i);this._updateSegment(t,n);var o=e==this._pointer&&0!=(this.showText&r.Value),a=o||e==this._pointer&&this.thumbSize>0,l=n.left+n.width/2,h=n.top+n.height/2;switch(this._getDirection()){case p.Right:l=n.right;break;case p.Left:l=n.left;break;case p.Up:h=n.top;break;case p.Down:h=n.bottom}if(o&&this._centerText(this._tValue,i,new s.Point(l,h)),o||a){n=s.Rect.fromBoundingRect(d._getBBox(this._tValue));var c=this._animColor?this._animColor:this._getPointerColor(e.max),u=null!=this.thumbSize?this.thumbSize/2:.8*Math.max(n.width,n.height),f=this._cValue;(0,s.setAttribute)(f,"cx",this._fix(l)),(0,s.setAttribute)(f,"cy",this._fix(h)),(0,s.setAttribute)(f,"style",c?"fill:"+c:null),(0,s.setAttribute)(f,"r",this._fix(u))}},e.prototype._updateText=function(){var t=this._getRangeRect(this._face);switch(this._getDirection()){case p.Right:this._setText(this._tMin,this.min,t,"left"),this._setText(this._tMax,this.max,t,"right");break;case p.Left:this._setText(this._tMin,this.min,t,"right"),this._setText(this._tMax,this.max,t,"left");break;case p.Up:this._setText(this._tMin,this.min,t,"bottom"),this._setText(this._tMax,this.max,t,"top");break;case p.Down:this._setText(this._tMin,this.min,t,"top"),this._setText(this._tMax,this.max,t,"bottom")}},e.prototype._updateTicks=function(){for(var t=this.tickSpacing&&this.tickSpacing>0?this.tickSpacing:this.step,e="",i=this._gTicks;i.firstChild;)(0,s.removeChild)(i.firstChild);if(this.showTicks&&t>0)for(var n=this._getRangeRect(this._face),r=new s.Point(n.left-.75*n.width,n.top-.75*n.height),o=void 0,a=this._fix,l=this.min;l<=this.max;l+=t){var h=null;switch(this._getDirection()){case p.Right:r.x=n.left+n.width*this._getPercent(l),h="M "+(o=a(r.x))+" "+a(n.top)+" L "+o+" "+a(n.bottom)+" ";break;case p.Left:r.x=n.right-n.width*this._getPercent(l),h="M "+(o=a(r.x))+" "+a(n.top)+" L "+o+" "+a(n.bottom)+" ";break;case p.Up:r.y=n.bottom-n.height*this._getPercent(l),o=a(r.y),h="M "+a(n.left)+" "+o+" L "+a(n.right)+" "+o+" ";break;case p.Down:r.y=n.top+n.height*this._getPercent(l),o=a(r.y),h="M "+a(n.left)+" "+o+" L "+a(n.right)+" "+o+" "}if(l>this.min&&l<this.max&&(e+=h),this.showTickText){var c=this._createElement("text",i);this._centerText(c,l,r)}}this._pTicks.setAttribute("d",e)},e.prototype._updateSegment=function(t,e){var i={p1:this._fix(new s.Point(e.left,e.top)),p2:this._fix(new s.Point(e.right,e.top)),p3:this._fix(new s.Point(e.right,e.bottom)),p4:this._fix(new s.Point(e.left,e.bottom))},n=(0,s.format)("M {p1} L {p2} L {p3} L {p4} Z",i);t.setAttribute("d",n)},e.prototype._setText=function(t,e,i,n){if("none"!=t.getAttribute("display")){var r=s.Globalize.format(e,this.format);if((0,s.isFunction)(this.getText)){var o=t==this._tValue?"value":t==this._tMin?"min":t==this._tMax?"max":null;(0,s.assert)(null!=o,"unknown element"),r=this.getText(this,o,e,r)}t.textContent=r;var a=s.Rect.fromBoundingRect(d._getBBox(t)),l=new s.Point(i.left+i.width/2-a.width/2,i.top+i.height/2+a.height/2);switch(n){case"top":l.y=i.top-4;break;case"left":l.x=i.left-4-a.width;break;case"right":l.x=i.right+4;break;case"bottom":l.y=i.bottom+4+a.height}t.setAttribute("x",this._fix(l.x)),t.setAttribute("y",this._fix(l.y))}},e.prototype._getRangeRect=function(t,e){void 0===e&&(e=t.max);var i=this.hostElement,n=new s.Rect(0,0,i.clientWidth,i.clientHeight),o=this._getDirection(),a=this.thumbSize?Math.ceil(this.thumbSize/2):0;if(this.showText!=r.None){var l=parseInt(getComputedStyle(i).fontSize);isNaN(l)||(a=Math.max(a,3*l))}switch(o){case p.Right:case p.Left:n=n.inflate(-a,-n.height*(1-this.thickness*t.thickness)/2);break;case p.Up:case p.Down:n=n.inflate(-n.width*(1-this.thickness*t.thickness)/2,-a)}if(this.stackRanges&&t!=this.face&&t!=this.pointer){var h=this.ranges.indexOf(t);if(h>-1){var c=this.ranges.length;switch(o){case p.Right:case p.Left:n.height/=c,n.top+=h*n.height;break;case p.Up:case p.Down:n.width/=c,n.left+=h*n.width}}}var u=t==this._face,d=u?0:this._getPercent(t.min),f=u?1:this._getPercent(e);switch(o){case p.Right:n.left+=n.width*d,n.width*=f-d;break;case p.Left:n.left=n.right-n.width*f,n.width=n.width*(f-d);break;case p.Down:n.top+=n.height*d,n.height*=f-d;break;case p.Up:n.top=n.bottom-n.height*f,n.height=n.height*(f-d)}return n},e.prototype._getValueFromPoint=function(t){var e=this._getRangeRect(this._face),i=0;switch(this._getDirection()){case p.Right:i=e.width>0?(t.x-e.left)/e.width:0;break;case p.Left:i=e.width>0?(e.right-t.x)/e.width:0;break;case p.Up:i=e.height>0?(e.bottom-t.y)/e.height:0;break;case p.Down:i=e.height>0?(t.y-e.top)/e.height:0}return this.min+i*(this.max-this.min)},e.prototype._getDirection=function(){var t=this._direction;if(this.rightToLeft)switch(t){case p.Left:t=p.Right;break;case p.Right:t=p.Left}return t},e.prototype._getKey=function(t){switch(this._getDirection()){case p.Left:switch(t){case s.Key.Left:t=s.Key.Right;break;case s.Key.Right:t=s.Key.Left}break;case p.Down:switch(t){case s.Key.Up:t=s.Key.Down;break;case s.Key.Down:t=s.Key.Up}}return t},e}(d),g=function(t){function e(e,i){var n=t.call(this,e,null)||this;return(0,s.addClass)(n.hostElement,"wj-bulletgraph"),n._pointer.thickness=.35,n._rngTarget=new h("target"),n._rngTarget.thickness=.8,n._rngTarget.color="black",n._rngGood=new h("good"),n._rngGood.color="rgba(0,0,0,.15)",n._rngBad=new h("bad"),n._rngBad.color="rgba(0,0,0,.3)",n.ranges.push(n._rngBad),n.ranges.push(n._rngGood),n.ranges.push(n._rngTarget),n.initialize(i),n}return l(e,t),Object.defineProperty(e.prototype,"target",{get:function(){return this._rngTarget.max},set:function(t){this._rngTarget.max=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"good",{get:function(){return this._rngGood.max},set:function(t){this._rngGood.max=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bad",{get:function(){return this._rngBad.max},set:function(t){this._rngBad.max=t},enumerable:!0,configurable:!0}),e.prototype._getRangeRect=function(e,i){void 0===i&&(i=e.max);var n=t.prototype._getRangeRect.call(this,e,i);if(e==this._rngTarget)switch(this._getDirection()){case p.Right:n.left=n.right-1,n.width=3;break;case p.Left:n.width=3;break;case p.Up:n.height=3;break;case p.Down:n.top=n.bottom-1,n.height=3}return n},e}(_);(0,s._registerModule)("wijmo.gauge",a)},29:(t,e,i)=>{i.r(e),i.d(e,{AllowDragging:()=>ht,AllowMerging:()=>V,AllowPinning:()=>I,AllowResizing:()=>at,AllowSorting:()=>M,AutoSizeMode:()=>lt,CellEditEndingEventArgs:()=>E,CellFactory:()=>J,CellRange:()=>y,CellRangeEventArgs:()=>x,CellType:()=>g,ClipStringOptions:()=>R,Column:()=>k,ColumnCollection:()=>N,ColumnGroup:()=>B,ColumnGroupCollection:()=>z,DataMap:()=>m,DataMapEditor:()=>o,FlexGrid:()=>G,FormatItemEventArgs:()=>S,GridPanel:()=>C,GroupRow:()=>L,HeadersVisibility:()=>D,HitTestInfo:()=>X,KeyAction:()=>rt,MergeManager:()=>U,Row:()=>O,RowCol:()=>A,RowColCollection:()=>j,RowColFlags:()=>P,RowCollection:()=>H,SelMove:()=>w,SelectedState:()=>v,SelectionMode:()=>b,_AddNewHandler:()=>K,_ColumnGroupHandler:()=>F,_CustomEditor:()=>st,_EditHandler:()=>ot,_ImeHandler:()=>Y,_KeyboardHandler:()=>ct,_MouseHandler:()=>pt,_NewRowTemplate:()=>W,_SelectionHandler:()=>T,_getSafariVer:()=>d,softInput:()=>q});var n,r,o,s,a=i(664),l=i(913),h=i(29),c=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),u=null;function d(){return u}if((0,a.isSafari)()){var p=navigator.userAgent.match(/version\/([\d\.]+)/i);if(null!=p){var f=p[1],_=(p=f.match(/(\d+)/g)).map((function(t){return parseInt(t)}));u={full:f,major:_[0],minor:_[1]}}}(s=o||(o={}))[s.AutoComplete=0]="AutoComplete",s[s.DropDownList=1]="DropDownList",s[s.RadioButtons=2]="RadioButtons";var g,m=function(){function t(t,e,i){this._keyPath="",this._displayPath="",this._sortByVal=!0,this._editable=!1,this._serK=!0,this.mapChanged=new a.Event,!(0,a.isArray)(t)||e||i||(t=t.map((function(t){return{value:t}})),e=i="value"),this._cv=(0,a.asCollectionView)(t),this._keyPath=(0,a.asString)(e,!1),this._displayPath=(0,a.asString)(i,!1),this._cv.collectionChanged.addHandler(this.onMapChanged,this)}return Object.defineProperty(t.prototype,"sortByDisplayValues",{get:function(){return this._sortByVal},set:function(t){this._sortByVal=(0,a.asBoolean)(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"serializeKeys",{get:function(){return this._serK},set:function(t){if((t=(0,a.asBoolean)(t))!==this._serK){var e=this._map,i=e&&e.size;this._map=null,this._serK=t,i&&this.onMapChanged(a.EventArgs.empty)}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"collectionView",{get:function(){return this._cv},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectedValuePath",{get:function(){return this._keyPath},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"displayMemberPath",{get:function(){return this._displayPath},enumerable:!0,configurable:!0}),t.prototype.getDataItem=function(t){var e=this;if(!this._map){var i=this._cv.sourceCollection,n=new a._Map(this.serializeKeys);(0,a.isArray)(i)&&this._keyPath&&i.forEach((function(t){var i=t[e._keyPath];n.has(i)||n.set(i,t)})),this._map=n}return this._map.get(t)},t.prototype.getDisplayValue=function(t){var e=this._displayPath,i=this.getDataItem(t);return e&&i?i[e]:t},t.prototype.getKeyValue=function(t,e){var i=this._displayPath,n=this._indexOf(t,i,e,!0);return n<0&&(n=this._indexOf(t,i,e,!1)),n>-1?this._cv.sourceCollection[n][this._keyPath]:null},t.prototype.getDisplayValues=function(t){var e=this;return this._cv&&this._displayPath?this._cv.items.map((function(t){return t[e._displayPath]})):[]},t.prototype.getKeyValues=function(){var t=this;return this._cv&&this._keyPath?this._cv.items.map((function(e){return e[t._keyPath]})):[]},Object.defineProperty(t.prototype,"isEditable",{get:function(){return this._editable},set:function(t){this._editable=(0,a.asBoolean)(t)},enumerable:!0,configurable:!0}),t.prototype.onMapChanged=function(t){this._map=null,this.mapChanged.raise(this,t)},t.prototype._indexOf=function(t,e,i,n){var r=-1,o=-1;if(this._cv&&e){var s=null!=t?t.toString():"";s&&i&&(t=(0,a.toPlainText)(s));for(var l=n?s:s.toLowerCase(),h=this._cv.sourceCollection,c=0;c<h.length;c++){var u=h[c],d=u[e];if(i&&(0,a.isString)(d)&&(d=(0,a.toPlainText)(d)),d==t?r=c:n||d.length!=l.length||d.toLowerCase()!=l?null!=d&&d.toString()==s&&(r=c):r=c,r==c){if(!this._cv.filter||this._cv.filter(u))return r;o<0&&(o=r)}}}return o},t}(),y=function(){function t(t,e,i,n){void 0===t&&(t=-1),void 0===e&&(e=-1),void 0===i&&(i=t),void 0===n&&(n=e),this.setRange(t,e,i,n)}return t.prototype.setRange=function(t,e,i,n){void 0===t&&(t=-1),void 0===e&&(e=-1),void 0===i&&(i=t),void 0===n&&(n=e),this._row=(0,a.asInt)(t),this._col=(0,a.asInt)(e),this._row2=(0,a.asInt)(i),this._col2=(0,a.asInt)(n)},Object.defineProperty(t.prototype,"row",{get:function(){return this._row},set:function(t){this._row=(0,a.asInt)(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"col",{get:function(){return this._col},set:function(t){this._col=(0,a.asInt)(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"row2",{get:function(){return this._row2},set:function(t){this._row2=(0,a.asInt)(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"col2",{get:function(){return this._col2},set:function(t){this._col2=(0,a.asInt)(t)},enumerable:!0,configurable:!0}),t.prototype.clone=function(){return new t(this._row,this._col,this._row2,this._col2)},t.prototype.copy=function(t){this.setRange(t._row,t._col,t._row2,t._col2)},Object.defineProperty(t.prototype,"rowSpan",{get:function(){return Math.abs(this._row2-this._row)+1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"columnSpan",{get:function(){return Math.abs(this._col2-this._col)+1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"topRow",{get:function(){return Math.min(this._row,this._row2)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottomRow",{get:function(){return Math.max(this._row,this._row2)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"leftCol",{get:function(){return Math.min(this._col,this._col2)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rightCol",{get:function(){return Math.max(this._col,this._col2)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isValid",{get:function(){return this._row>-1&&this._col>-1&&this._row2>-1&&this._col2>-1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isSingleCell",{get:function(){return this._row==this._row2&&this._col==this._col2},enumerable:!0,configurable:!0}),t.prototype.contains=function(e,i){var n=(0,a.tryCast)(e,t);if(n)return n.topRow>=this.topRow&&n.bottomRow<=this.bottomRow&&n.leftCol>=this.leftCol&&n.rightCol<=this.rightCol;if((0,a.isInt)(e)&&(0,a.isInt)(i))return e>=this.topRow&&e<=this.bottomRow&&i>=this.leftCol&&i<=this.rightCol;throw"contains expects a CellRange or row/column indices."},t.prototype.containsRow=function(t){return(0,a.asInt)(t)>=this.topRow&&t<=this.bottomRow},t.prototype.containsColumn=function(t){return(0,a.asInt)(t)>=this.leftCol&&t<=this.rightCol},t.prototype.intersects=function(t){return this.intersectsRow(t)&&this.intersectsColumn(t)},t.prototype.intersectsRow=function(t){return t&&!(this.bottomRow<t.topRow||this.topRow>t.bottomRow)},t.prototype.intersectsColumn=function(t){return t&&!(this.rightCol<t.leftCol||this.leftCol>t.rightCol)},t.prototype.getRenderSize=function(t){var e=new a.Size(0,0);if(this.isValid){for(var i=this.topRow;i<=this.bottomRow;i++)e.height+=t.rows[i].renderSize;for(var n=this.leftCol;n<=this.rightCol;n++)e.width+=t.columns[n].renderSize}return e},t.prototype.equals=function(e){return e instanceof t&&this._row==e._row&&this._col==e._col&&this._row2==e._row2&&this._col2==e._col2},t.prototype.combine=function(e){return e?new t(Math.min(this.topRow,e.topRow),Math.min(this.leftCol,e.leftCol),Math.max(this.bottomRow,e.bottomRow),Math.max(this.rightCol,e.rightCol)):this},t.prototype.toString=function(){return(0,a.format)("({row}, {col})-({row2}, {col2})",this)},t}();!function(t){t[t.None=0]="None",t[t.Cell=1]="Cell",t[t.ColumnHeader=2]="ColumnHeader",t[t.RowHeader=3]="RowHeader",t[t.TopLeft=4]="TopLeft",t[t.ColumnFooter=5]="ColumnFooter",t[t.BottomLeft=6]="BottomLeft"}(g||(g={}));var b,v,w,C=function(){function t(t,e,i,n,r){this._offsetY=0,this._rng=new y,this._g=(0,a.asType)(t,G),this._ct=(0,a.asInt)(e),this._rows=(0,a.asType)(i,H),this._cols=(0,a.asType)(n,N),this._e=(0,a.asType)(r,HTMLElement),this._vrb=new y}return Object.defineProperty(t.prototype,"grid",{get:function(){return this._g},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cellType",{get:function(){return this._ct},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"viewRange",{get:function(){return this._getViewRange()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._cols.getTotalSize()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._rows.getTotalSize()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rows",{get:function(){return this._rows},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"columns",{get:function(){return this._cols},enumerable:!0,configurable:!0}),t.prototype.getCellData=function(t,e,i){var n,r=this._g,o=this._rows[(0,a.asNumber)(t,!1,!0)],s=null;if(!o)return null;e=this._toIndex(e),n=this._cols[(0,a.asNumber)(e,!1,!0)];var l=r?r._getBindingColumn(this,t,n):n,h=null;if(o instanceof L&&o.dataItem instanceof a.CollectionViewGroup&&!r.childItemsPath&&(h=o.dataItem),l.binding&&o.dataItem&&!h?s=l._binding.getValue(o.dataItem):o._ubv&&(s=o._ubv[n._hash]),null==s){var c=g;switch(this._ct){case c.TopLeft:case c.ColumnHeader:t!=this._rows.length-1&&l==n||(s=l.header);break;case c.ColumnFooter:if(o instanceof L&&l.aggregate!=a.Aggregate.None){var u=this._g.collectionView;if(u){var d=(0,a.tryCast)(u,a.CollectionView);s=d?d.getAggregate(l.aggregate,l.binding):(0,a.getAggregate)(l.aggregate,u.items,l.binding)}}break;case c.Cell:o instanceof L&&(e==this._cols.firstVisibleIndex?s=o.getGroupHeader():h&&l.aggregate!=a.Aggregate.None&&(s=h.getAggregate(l.aggregate,l.binding,this._g.collectionView)))}}if(i){var p=l.dataMap||o.dataMap;this.cellType==g.Cell&&p&&(s=p.getDisplayValue(s)),s=null!=s?a.Globalize.format(s,l.format||o.format):""}return s},t.prototype.setCellData=function(t,e,i,n,r){void 0===n&&(n=!0),void 0===r&&(r=!0);var o=this._g,s=this._rows[(0,a.asNumber)(t,!1,!0)],l=this._cols[(0,a.asNumber)(this._toIndex(e),!1,!0)],h=a.DataType;if(!s)return!1;var c=o?o._getBindingColumn(this,t,l):l,u=c.dataMap||s.dataMap;if(this._ct==g.Cell){var d=c.getIsRequired(s),p=c.isContentHtml||s.isContentHtml;if(u&&null!=i){var f=u.getKeyValue(i,p);if(null==f&&null==u.getDisplayValue(null)){if(u.getDisplayValue(i)!=i);else if(!u.isEditable||u.displayMemberPath!=u.selectedValuePath){if(""!=i||d)return!1;i=null}}else i=f}var _=h.Object,m=c.dataType||s.dataType,y=this.getCellData(t,e,!1);if(_=m||(0,a.getType)(y),null==i||""===i&&n&&!u){if(d)return!1;_!=h.String&&(i=null),n=!1}if(n){var b=c.format||s.format;if(b||_!=h.Date||(b="d"),c.mask&&(0,a.isString)(i)&&_!=h.String&&(i=i.replace(/_/g,"")),i=(0,a.changeType)(i,_,b,y),_!=h.Object&&(0,a.getType)(i)!=_)return!1}}if(s.dataItem&&c.binding){var v=c._binding,w=s.dataItem,C=v.getValue(w);if(i!==C&&(u&&!u.serializeKeys||!a.DateTime.equals(i,C))){var x=o.collectionView,S=x instanceof a.CollectionView&&w!=x.currentEditItem&&x.trackChanges,E=null;if(S&&(E=x._extend({},w)),v.setValue(w,i),S){var P=new a.NotifyCollectionChangedEventArgs(a.NotifyCollectionChangedAction.Change,w,x.items.indexOf(w));x.onCollectionChanged(P),x._trackItemChanged(w,E)}}}else s._ubv||(s._ubv={}),s._ubv[l._hash]=i;return r&&o&&o.invalidate(),!0},t.prototype.getCellBoundingRect=function(t,e,i){var n=this._g,r=this.rows[t],o=this.columns[this._toIndex(e)],s=new a.Rect(o.pos,r.pos,o.renderSize,r.renderSize);if(n.rightToLeft&&(s.left=this.hostElement.clientWidth-s.right,(0,a.isIE)()||(s.left-=n._root.offsetWidth-n._root.clientWidth)),!i){var l=this.hostElement.getBoundingClientRect();s.left+=l.left,s.top+=l.top-this._offsetY}return t<this.rows.frozen&&(s.top-=n.scrollPosition.y),e<this.columns.frozen&&(s.left-=n.scrollPosition.x*(n.rightToLeft?-1:1)),s},t.prototype.getCellElement=function(e,i){var n=this.hostElement.children,r=Math.min(e+2,n.length);i=this._toIndex(i);for(var o=0;o<r;o++)for(var s=n[o].children,a=Math.min(i+2,s.length),l=0;l<a;l++){var h=s[l],c=h[t._INDEX_KEY];if(c&&(c.row==e&&c.col==i||c.rng&&c.rng.contains(e,i)))return h}return null},t.prototype.getSelectedState=function(t,e,i){var n=this._g,r=n.selectionMode,o=n._selHdl.selection,s=b,a=v;if(r==s.None)return a.None;switch(e=this._toIndex(e),this._ct){case g.Cell:if(i||(i=n.getMergedRange(this,t,e)),i){if(i.contains(o.row,o.col))return n.showMarquee?a.Active:a.Cursor;if(i.intersects(o)&&r!=s.ListBox)return a.Selected;for(var l=i.leftCol;l<=i.rightCol;l++)if(n.columns[l].isSelected)return a.Selected;for(var h=i.topRow;h<=i.bottomRow;h++)if(n.rows[h].isSelected)return a.Selected}if(o.row==t&&o.col==e)return n.showMarquee?a.Active:a.Cursor;if(n.rows[t].isSelected||n.columns[e].isSelected)return a.Selected;if(r==s.MultiRange)for(var c=n._selHdl.extendedSelection,u=0;u<c.length;u++)if(c[u].contains(t,e)||i&&i.intersects(c[u]))return a.Selected;if(i)switch(r){case s.Row:case s.RowRange:if(i.containsRow(o.row))return a.Selected}return r==s.ListBox?a.None:(o=this._getAdjustedSelection(o)).containsRow(t)&&o.containsColumn(e)?a.Selected:a.None;case g.ColumnHeader:if(n.showSelectedHeaders&D.Column&&(n.columns[e].isSelected||o.containsColumn(e)||o.intersectsColumn(i))&&(i&&(t=i.bottomRow),t==this.rows.length-1))return a.Selected;break;case g.RowHeader:if(n.showSelectedHeaders&D.Row&&(n.rows[t].isSelected||o.containsRow(t)||o.intersectsRow(i))&&(i&&(e=i.rightCol),e==this.columns.length-1))return a.Selected}return a.None},Object.defineProperty(t.prototype,"hostElement",{get:function(){return this._e},enumerable:!0,configurable:!0}),t.prototype._toIndex=function(t){if((0,a.isString)(t)&&(t=this._cols.indexOf(t))<0)throw"Invalid column name or binding.";return t},t.prototype._getAdjustedSelection=function(t){var e=this._g,i=this._rng,n=b;switch(e.selectionMode){case n.Cell:i.setRange(t.row,t.col,t.row,t.col);break;case n.Row:i.setRange(t.row,0,t.row,e.columns.length-1);break;case n.RowRange:case n.ListBox:i.setRange(t.row,0,t.row2,e.columns.length-1);break;default:i.copy(t)}return i},t.prototype._getOffsetY=function(){return this._offsetY},t.prototype._updateContent=function(t,e,i){var n=this._g,r=this._e,o=this._rows,s=this._cols,l=this._ct;if(l==g.ColumnHeader||l==g.ColumnFooter||l==g.RowHeader){var h=n._ptScrl,c=r.style;l==g.RowHeader?c.top=h.y+"px":n.rightToLeft?c.right=h.x+"px":c.left=h.x+"px"}this._offsetY!=i&&(t=!1,this._offsetY=i);var u=this._getViewRange(),d=u;if(d.isValid){var p=o.length<=n._vtRows?o.length:0,f=s.length<=n._vtCols?s.length:0;d=new y(Math.max(u.row-p,o.frozen),Math.max(u.col-f,s.frozen),Math.min(u.row2+p,o.length-1),Math.min(u.col2+f,s.length-1))}if(t&&!e&&this._vrb.contains(u)&&!o.frozen&&!s.frozen)return this._activeCell;t&&d.equals(this._vrb)||(e=!1),t&&!e&&this._ct!=g.TopLeft&&this._reorderCells(d,this._vrb),this._activeCell=null,this._vru=u,this._vrb=d,this._recycle=t;var _=0;this._ct==g.Cell&&(_=this._renderColHdrRow(d,e));for(var m=0;m<o.frozen&&m<o.length;m++)_=this._renderRow(m,d,e,_);for(m=d.topRow;m<=d.bottomRow&&m>-1;m++)_=this._renderRow(m,d,e,_);for(;r.childElementCount>_;){var b=r.lastElementChild;(0,a.removeChild)(b),this._removeExtraCells(b,0)}return this._activeCell},t.prototype._clearCells=function(){for(var t=this.hostElement,e=this._g.cellFactory,i=t.childElementCount-1;i>=0;i--){var n=t.children[i];(0,a.removeChild)(n);for(var r=n.childElementCount-1;r>=0;r--)e.disposeCell(n.children[r])}},t.prototype._reorderCells=function(t,e){var i=this;if(this._g._reorderCells&&e.isValid&&t.isValid&&t.intersects(e)){var n,r=function(t,e,n,r,o,s){(0,a.assert)(n<0,"Scroll delta must be a negative number");var l,h,c=-n,u=e+(r-o+1),d=t.childElementCount-u;if(d<c?(l=d,h=c-d):(l=c,h=0),l>0){var p=i._createRange(t,u,u+l);p&&t.insertBefore(p.extractContents(),t.children[e])}if(h>0)for(var f=t.children[e],_=0;_<h;_++){var g=document.createElement("div");g.className=s,t.insertBefore(g,f)}};if(t.row!=e.row){var o=this._e;if(0!=(n=t.row-e.row)){var s=this._ct==g.Cell?1:0,l=o.childElementCount;if(s+=this.rows.frozen,n>0){var h=s,c=Math.min(s+n,l);(p=this._createRange(o,h,c))&&o.appendChild(p.extractContents())}else r(o,s,n,t.row2,e.row,"wj-row")}}if(t.col!=e.col&&(o=this._e,0!=(n=t.col-e.col))){s=this._ct==g.Cell&&this._g.rowHeaderPath?1:0,s+=this.columns.frozen;for(var u=0;u<o.children.length;u++){var d=o.children[u];if(l=d.children.length,(0,a.hasClass)(d,"wj-row"))if(n>0){var p;h=s,c=Math.min(s+n,l),(p=this._createRange(d,h,c))&&d.appendChild(p.extractContents())}else r(d,s,n,t.col2,e.col,"wj-cell")}}}},t.prototype._createRange=function(t,e,i){if(i>e&&i<=t.children.length&&e>-1){this._docRange||(this._docRange=document.createRange());var n=this._docRange;return n.setStart(t,e),n.setEnd(t,i),n}return null},t.prototype._renderColHdrRow=function(t,e){if(e)return 1;var i=this._e.children[0];i||(i=(0,a.createElement)('<div class="wj-row" role="row"></div>',this._e));var n=this._g,r=n?n.columnHeaders.rows.ariaLabel:null;(0,a.setAttribute)(i,"aria-label",r),(0,a.setAttribute)(i,"aria-selected",null);var o=0,s=this._g._getRowHeaderPath();s&&(o=this._renderRowHdrCell(i,-1,s.path));for(var l=0;l<this.columns.frozen&&l<this.columns.length;l++)o=this._renderColHdrCell(i,l,t,e,o);for(l=t.leftCol;l<=t.rightCol&&l>-1;l++)o=this._renderColHdrCell(i,l,t,e,o);return this._removeExtraCells(i,o),1},t.prototype._renderColHdrCell=function(e,i,n,r,o){var s=this.grid,l=this.columns[i];if(l.renderSize<=0)return o;if(r)return o+1;var h=e.children[o];if(h||(h=(0,a.createElement)(t._HTML_CELL,e)),(0,a.setAttribute)(h,"role","columnheader"),h&&this._recycle&&s._lazyRender){var c=h[t._INDEX_KEY];if(c&&-1==c.row&&c.col==i&&i>=this.columns.frozen)return o+1}if(h.textContent=this.columns[i].header,(0,a.setCss)(h,{position:"fixed",left:l.pos,top:-32e3,width:l.renderSize,height:.1,overflow:"hidden",opacity:"0",pointerEvents:"none"}),l.describedById||this.columns.describedById){var u=[l.describedById,this.columns.describedById].join(" ").trim();(0,a.setAttribute)(h,"aria-describedby",u||null)}if(s.allowSorting){var d="none";switch(s._getBindingColumn(this,0,l).currentSort){case"+":d="ascending";break;case"-":d="descending"}(0,a.setAttribute)(h,"aria-sort",d)}return s.isReadOnly||((0,a.setAttribute)(h,"aria-readonly",l.isReadOnly),(0,a.setAttribute)(h,"aria-required",l.getIsRequired())),h[t._INDEX_KEY]={row:-1,col:i,panel:this},o+1},t.prototype._renderRowHdrCell=function(e,i,n){var r=e.children[0];return r||(r=(0,a.createElement)(t._HTML_CELL,e)),r.setAttribute("role",i<0?"columnheader":"rowheader"),r.textContent=n?n.toString():"",(0,a.setCss)(r,{position:"fixed",left:-32e3,top:-32e3,width:.1,height:.1,overflow:"hidden",opacity:"0"}),r[t._INDEX_KEY]={row:i,col:-1,panel:this},1},t.prototype._renderRow=function(t,e,i,n){var r=this._g,o=this.rows[t];if(o.renderSize<=0)return n;var s=this._e.children[n];if(s||(s=(0,a.createElement)('<div class="wj-row"></div>',this._e)),this._ct==g.Cell){s.setAttribute("role","row");var l=b,h=o.isSelected;switch(r.selectionMode){case l.Row:case l.RowRange:h=h||this._g._selHdl.selection.containsRow(t)}(0,a.setAttribute)(s,"aria-selected",!!h||null),(0,a.setAttribute)(s,"aria-level",o instanceof L?o.level+1:null),(0,a.setAttribute)(s,"aria-expanded",o instanceof L?!o.isCollapsed:null),this.rows.ariaLabel&&(0,a.setAttribute)(s,"aria-label",this.rows.ariaLabel)}var c=0;if(this._ct==g.Cell){var u=this._g._getRowHeaderPath();u&&(c=this._renderRowHdrCell(s,t,u.getValue(o.dataItem)))}for(var d=0;d<this.columns.frozen&&d<this.columns.length;d++)c=this._renderCell(s,t,d,e,i,c);for(d=e.leftCol;d<=e.rightCol&&d>-1;d++)c=this._renderCell(s,t,d,e,i,c);return this._removeExtraCells(s,c),n+1},t.prototype._renderCell=function(e,i,n,r,o,s){var l=this._g,h=l.getMergedRange(this,i,n);if(h){for(var c=Math.max(r.row,h.row);c<i;c++)if(this.rows[c].renderSize)return s;for(c=Math.max(r.col,h.col);c<n;c++)if(this.columns[c].renderSize)return s;var u=this.columns.frozen;if(u&&h.col<u&&h.col2>=u&&n>h.col)return s}var d=this.columns[n];if(d.renderSize<=0&&(!h||h.getRenderSize(this).width<=0))return s;var p=e.children[s];if(p&&!o&&this._recycle&&l._lazyRender&&!l.activeEditor){var f=p[t._INDEX_KEY];f&&f.row==i&&f.col==n&&f.rng==h&&i>=this.rows.frozen&&n>=this.columns.frozen&&(o=!0)}var _=v,m=this.getSelectedState(i,n,h),y=m==_.Cursor||m==_.Active;return p&&o?((0,a.toggleClass)(p,"wj-state-active",y),(0,a.toggleClass)(p,"wj-state-selected",m==_.Cursor),(0,a.toggleClass)(p,"wj-state-multi-selected",m==_.Selected),(0,a.setAttribute)(p,"aria-selected",!(!y&&m==_.None)||null),y&&(this._activeCell=p),s+1):(p||(p=(0,a.createElement)(t._HTML_CELL,e)),y&&(this._activeCell=p),this._ct==g.Cell&&((0,a.setAttribute)(p,"role","gridcell"),(0,a.setAttribute)(p,"aria-selected",!(m==_.None&&!y)||null),(0,a.setAttribute)(p,"aria-readonly",!l.canEditCell(i,n)||null),(0,a.setAttribute)(p,"aria-required",d.getIsRequired())),l.cellFactory.updateCell(this,i,n,p,h),p[t._INDEX_KEY]={row:i,col:n,rng:h,panel:this},s+1)},t.prototype._removeExtraCells=function(t,e){for(var i=this._g.cellFactory;t.childElementCount>e;){var n=t.lastElementChild;(0,a.removeChild)(n),i.disposeCell(n)}},t.prototype._getViewRange=function(){var t=this._g,e=t._ptScrl,i=t._szClientSB,n=this._rows,r=this._cols,o=new y(0,0,n.length-1,r.length-1);if(this._ct==g.Cell||this._ct==g.RowHeader){var s=-e.y+this._offsetY,a=i.height;(u=Math.min(n.frozen,n.length-1))>0&&(s+=d=n[u-1].pos,a-=d),u>0&&n[u].pos>i.height?o.row=o.row2=-1:(o.row=Math.min(n.length-1,Math.max(u,n.getItemAt(s))),o.row2=Math.max(o.row,n.getItemAt(s+a)));var l=t.hostElement;if(t._clipToScreen&&l){var h=l.getBoundingClientRect(),c=-h.top-t.cells._e.offsetTop;h.top<0&&(o.row=Math.max(o.row,n.getItemAt(c)-1)),h.bottom>innerHeight&&(o.row2=Math.min(o.row2,n.getItemAt(c+innerHeight)+1))}}if(this._ct==g.Cell||this._ct==g.ColumnHeader){var u,d,p=-e.x,f=i.width;(u=Math.min(r.frozen,r.length-1))>0&&(p+=d=r[u-1].pos,f-=d),u>0&&r[u].pos>i.width?o.col=o.col2=-1:(o.col=Math.min(r.length-1,Math.max(u,r.getItemAt(p))),o.col2=Math.max(o.col,r.getItemAt(p+f)))}return n.length<=n.frozen&&(o.row=o.row2=-1),r.length<=r.frozen&&(o.col=o.col2=-1),o},t.prototype._getFrozenPos=function(){var t=this._rows.frozen,e=this._cols.frozen,i=t>0?this._rows[t-1]:null,n=e>0?this._cols[e-1]:null,r=i?i.pos+i.renderSize:0,o=n?n.pos+n.renderSize:0;return new a.Point(o,r)},t._INDEX_KEY="wj-cell-index",t._HTML_CELL='<div class="wj-cell" tabindex="-1"></div>',t}(),x=function(t){function e(e,i,n){var r=t.call(this)||this;return r._p=(0,a.asType)(e,C,!0),r._rng=(0,a.asType)(i,y,!0),r._data=n,r}return c(e,t),Object.defineProperty(e.prototype,"panel",{get:function(){return this._p},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"range",{get:function(){return this._rng.clone()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"row",{get:function(){return this._rng.row},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"col",{get:function(){return this._rng.col},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return this._data},set:function(t){this._data=t},enumerable:!0,configurable:!0}),e.prototype.getRow=function(){return this._p&&this.row>-1?this._p.rows[this.row]:null},e.prototype.getColumn=function(t){var e=this._p,i=e&&this.col>-1?e.columns[this.col]:null;if(i&&t){var n=e.grid;i=e.cellType===g.ColumnHeader&&n._hasColumnGroups()?n._getColumnGroup(this.row,this.col):e.grid._getBindingColumn(e,this.row,i)}return i},e}(a.CancelEventArgs),S=function(t){function e(e,i,n,r){void 0===r&&(r=!0);var o=t.call(this,e,i)||this;return o._updateContent=!0,o._cell=(0,a.asType)(n,HTMLElement),o}return c(e,t),Object.defineProperty(e.prototype,"cell",{get:function(){return this._cell},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"updateContent",{get:function(){return this._updateContent},enumerable:!0,configurable:!0}),e}(x),E=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._stayInEditMode=!1,e._refresh=!0,e}return c(e,t),Object.defineProperty(e.prototype,"stayInEditMode",{get:function(){return this._stayInEditMode},set:function(t){this._stayInEditMode=(0,a.asBoolean)(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"refresh",{get:function(){return this._refresh},set:function(t){this._refresh=(0,a.asBoolean)(t)},enumerable:!0,configurable:!0}),e}(x);!function(t){t[t.None=0]="None",t[t.Cell=1]="Cell",t[t.CellRange=2]="CellRange",t[t.Row=3]="Row",t[t.RowRange=4]="RowRange",t[t.ListBox=5]="ListBox",t[t.MultiRange=6]="MultiRange"}(b||(b={})),function(t){t[t.None=0]="None",t[t.Selected=1]="Selected",t[t.Cursor=2]="Cursor",t[t.Active=3]="Active"}(v||(v={})),function(t){t[t.None=0]="None",t[t.Next=1]="Next",t[t.Prev=2]="Prev",t[t.NextPage=3]="NextPage",t[t.PrevPage=4]="PrevPage",t[t.Home=5]="Home",t[t.End=6]="End",t[t.NextCell=7]="NextCell",t[t.PrevCell=8]="PrevCell",t[t.NextEditableCell=9]="NextEditableCell",t[t.PrevEditableCell=10]="PrevEditableCell"}(w||(w={}));var P,T=function(){function t(t){this._sel=new y(0,0),this._xSel=new a.ObservableArray,this._mode=b.CellRange,this._g=t,this._e=new x(t.cells,new y(0,0)),this._xSel.collectionChanged.addHandler((function(){t.invalidate()}))}return Object.defineProperty(t.prototype,"selectionMode",{get:function(){return this._mode},set:function(t){t!=this._mode&&this._setSelectionMode(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selection",{get:function(){return this._sel},set:function(t){this.select(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"extendedSelection",{get:function(){return this._xSel},enumerable:!0,configurable:!0}),t.prototype.select=function(t,e,i){void 0===e&&(e=!0),void 0===i&&(i=!1);var n=this._g,r=this._e.range,o=this._sel,s=r,l=!1,h=b;if((0,a.isNumber)(t)&&(0,a.isString)(e)){var c=n.columns.indexOf(e);if(c<0)throw"Invalid column name or binding.";r.setRange(t,c),e=!0}else(0,a.isNumber)(t)&&(0,a.isNumber)(e)?(r.setRange(t,e),e=!0):t instanceof y?r.copy(t):(0,a.assert)(!1,"CellRange expected");switch(n.selectionMode){case h.Cell:s.row2=s.row,s.col2=s.col;break;case h.Row:s.row2=s.row;break;case h.ListBox:l=!0}var u=s.equals(o);if(u&&l)for(var d=0;d<n.rows.length;d++)if(n.rows[d].isSelected!==s.containsRow(d)){u=!1;break}if(u)return e&&n.isRangeValid(s)&&this._showSelection(),!0;var p=a.Control.getControl((0,a.closest)((0,a.getActiveElement)(),".wj-flexgrid"));if(p&&p.activeEditor&&!p.finishEditing())return!1;var f=this._e;if(f._rng=s,f.cancel=!1,!n.onSelectionChanging(f)&&!i)return!1;l&&n.rows.forEach((function(t,e){t._setFlag(P.Selected,s.containsRow(e),!0)})),s.row=Math.min(s.row,n.rows.length-1),s.row2=Math.min(s.row2,n.rows.length-1),this._sel.copy(s),n.refreshCells(!1,!0,!0),e&&this._showSelection();var _=n.collectionView;if(_){var g=n._getCvIndex(s.row);_.moveCurrentToPosition(g)}return n.onSelectionChanged(f),!0},t.prototype.moveSelection=function(t,e,i){var n=this._g,r=this._sel,o=i&&n.anchorCursor?new y(r.row2,r.col2):new y(r.row,r.col);this._adjustReferenceCell(o,t,e);var s=o.row,a=o.col,l=n.columns,h=Math.max(0,n._szClient.height-n.columnHeaders.height),c=w;switch(e){case c.NextCell:case c.NextEditableCell:(a=this._getNextColumnCell(s,a,e))==o.col&&(s=this._getNextRowCell(s,a,e))>o.row&&(a=this._getNextColumnCell(s,0,e),a=this._getNextColumnCell(s,a,e==c.NextCell?c.PrevCell:c.PrevEditableCell)),n.select(s,a);break;case c.PrevCell:case c.PrevEditableCell:(a=this._getNextColumnCell(s,o.col,e))==o.col&&(s=this._getNextRowCell(s,a,e))<o.row&&(a=this._getNextColumnCell(s,l.length-1,e),a=this._getNextColumnCell(s,a,e==c.PrevCell?c.NextCell:c.NextEditableCell)),n.select(s,a);break;default:s=this._getNextRowCell(s,a,t,h),a=this._getNextColumnCell(s,a,e,h),i?n.selection=n.anchorCursor?new y(r.row,r.col,s,a):new y(s,a,r.row2,r.col2):n.select(s,a)}},t.prototype._getNextColumnCell=function(t,e,i,n){return void 0===n&&(n=0),this._g.columns.getNextCell(e,i,n)},t.prototype._getNextRowCell=function(t,e,i,n){return void 0===n&&(n=0),this._g.rows.getNextCell(t,i,n)},t.prototype._setSelectionMode=function(t){var e=this._g,i=e.rows;this._mode=t,this._xSel.clear(),i.length&&(this._adjustSelection(this._sel,t,!0),e.invalidate())},t.prototype._adjustSelection=function(t,e,i){void 0===i&&(i=!1);for(var n=this._g.rows,r=b,o=0;o<n.length;o++)n[o]._setFlag(P.Selected,!1,!0);var s=t.clone();switch(e){case r.None:s=new y;break;case r.Cell:s=new y(t.row,t.col);break;case r.ListBox:for(o=0;o<n.length;o++)n[o]._setFlag(P.Selected,s.containsRow(o),!0)}this.select(s,!1,i)},t.prototype._expandSelection=function(){var t=this._g,e=t.selectionMode;if(t.expandSelectionOnCopyPaste&&e){var i=this.selection,n=b;switch(e){case n.Cell:case n.Row:break;case n.ListBox:this._expandSelectedRows();break;case n.RowRange:i=new y(i.topRow,0,i.bottomRow,t.columns.length-1);default:var r=this._expandSelectionRange(i);r&&this.select(r,!1)}}},t.prototype._deselectRange=function(t){var e=this.selection,i=this.extendedSelection;if(e.contains(t)){var n=i.length;return this._sel=n?i[n-1]:new y,n&&i.removeAt(n-1),!0}for(var r=0;r<i.length;r++)if(i[r].contains(t))return i.removeAt(r),!0;return!1},t.prototype._expandSelectedRows=function(){(0,a.assert)(this.selectionMode==b.ListBox,"ListBox mode expected");for(var t=this._g,e=t.selectedRows.map((function(t){return t.index})),i=[],n=0;n<e.length;n++)for(var r=new y(e[n],0,e[n],t.columns.length-1),o=this._expandSelectionRange(r)||r,s=o.topRow;s<=o.bottomRow;s++)-1===i.indexOf(s)&&i.push(s);i.sort(),this._selectRows(i)},t.prototype._expandSelectionRange=function(t){var e=this._g,i=e.cells,n=e.getMergedRange(i,t.topRow,t.leftCol,!1),r=e.getMergedRange(i,t.bottomRow,t.leftCol,!1),o=e.getMergedRange(i,t.topRow,t.rightCol,!1),s=e.getMergedRange(i,t.bottomRow,t.rightCol,!1);return n||r||o||s?(n=n||new y(t.topRow,t.leftCol),r=r||new y(t.bottomRow,t.leftCol),o=o||new y(t.topRow,t.rightCol),s=s||new y(t.bottomRow,t.rightCol),new y(Math.min(n.topRow,r.topRow,o.topRow,s.topRow),Math.min(n.leftCol,r.leftCol,o.leftCol,s.leftCol),Math.max(n.bottomRow,r.bottomRow,o.bottomRow,s.bottomRow),Math.max(n.rightCol,r.rightCol,o.rightCol,s.rightCol))):null},t.prototype._selectRows=function(t){(0,a.assert)(this.selectionMode==b.ListBox,"ListBox mode expected");for(var e=this._g,i=0,n=!0;i<e.rows.length;i++){var r=e.rows[i],o=t&&t.indexOf(r.index)>-1;o&&n&&(n=!1,this.select(i,this.selection.col)),r.isSelected=o}},t.prototype._showSelection=function(){var t=this._g,e=this._sel;t.anchorCursor?t.scrollIntoView(e.row2,e.col2):t.scrollIntoView(e.row,e.col)},t.prototype._adjustReferenceCell=function(t,e,i){var n=this._g,r=n.getMergedRange(n.cells,t.row,t.col);if(r&&!r.isSingleCell){var o=w;switch(e){case o.Next:case o.NextCell:case o.NextEditableCell:t.row=r.bottomRow;break;case o.Prev:case o.PrevCell:case o.PrevEditableCell:t.row=r.topRow}switch(i){case o.Next:case o.NextCell:case o.NextEditableCell:t.col=r.rightCol;break;case o.Prev:case o.PrevCell:case o.PrevEditableCell:t.col=r.leftCol}}},t}();!function(t){t[t.Visible=1]="Visible",t[t.AllowResizing=2]="AllowResizing",t[t.AllowDragging=4]="AllowDragging",t[t.AllowMerging=8]="AllowMerging",t[t.AllowSorting=16]="AllowSorting",t[t.AutoGenerated=32]="AutoGenerated",t[t.Collapsed=64]="Collapsed",t[t.ParentCollapsed=128]="ParentCollapsed",t[t.Selected=256]="Selected",t[t.ReadOnly=512]="ReadOnly",t[t.HtmlContent=1024]="HtmlContent",t[t.WordWrap=2048]="WordWrap",t[t.MultiLine=4096]="MultiLine",t[t.HasTemplate=8192]="HasTemplate",t[t.RowDefault=3]="RowDefault",t[t.ColumnDefault=23]="ColumnDefault"}(P||(P={}));var M,I,D,R,A=function(){function t(){this._type=null,this._align=null,this._inpType=null,this._mask=null,this._maxLen=null,this._required=null,this._fmt=null,this._map=null,this._ddCssClass=null,this._cssClass=null,this._cssClassAll=null,this._szMin=null,this._szMax=null,this._sz=null,this._pos=0,this._idx=-1,this._idxVis=-1,this._idxData=-1,this.gridChanged=new a.Event}return Object.defineProperty(t.prototype,"binding",{get:function(){return this._binding?this._binding.path:null},set:function(t){if(t!=this.binding){var e=(0,a.asString)(t);if(this._binding=e?new a.Binding(e):null,!this._type&&this.grid&&this._binding){var i=this.grid.collectionView;if(i&&i.sourceCollection&&i.sourceCollection.length){var n=i.sourceCollection[0];this._type=(0,a.getType)(this._binding.getValue(n))}}this.onPropertyChanged()}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sortMemberPath",{get:function(){return this._bindingSort?this._bindingSort.path:null},set:function(t){if(t!=this.sortMemberPath){var e=(0,a.asString)(t);this._bindingSort=e?new a.Binding(e):null,this.onPropertyChanged()}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dataType",{get:function(){return this._type},set:function(t){t=(0,a.asEnum)(t,a.DataType,!0),this._type!=t&&(this._type=t,this.grid&&this.grid.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputType",{get:function(){return this._inpType},set:function(t){this._inpType=(0,a.asString)(t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mask",{get:function(){return this._mask},set:function(t){this._mask=(0,a.asString)(t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxLength",{get:function(){return this._maxLen},set:function(t){this._maxLen=(0,a.asNumber)(t,!0,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"align",{get:function(){return this._align},set:function(t){this._align!=t&&(this._align=t,this.onPropertyChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"format",{get:function(){return this._fmt},set:function(t){this._fmt!=t&&(this._fmt=t,this.onPropertyChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dataMap",{get:function(){return this._map},set:function(t){this._map!=t&&(this._map&&this._map.mapChanged.removeHandler(this.onPropertyChanged,this),(0,a.isArray)(t)&&(t=new m(t,null,null)),this._map=(0,a.asType)(t,m,!0),this._map&&this._map.mapChanged.addHandler(this.onPropertyChanged,this),this.onPropertyChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dataMapEditor",{get:function(){return null!=this._mapEditor?this._mapEditor:o.DropDownList},set:function(t){t!=this._mapEditor&&(this._mapEditor=(0,a.asEnum)(t,o),this.grid&&this.grid.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showDropDown",{get:function(){return this.dataMapEditor==o.DropDownList},set:function(t){(0,a._deprecated)("showDropDown","dataMapEditor"),this.dataMapEditor=t?o.DropDownList:o.AutoComplete},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dropDownCssClass",{get:function(){return this._ddCssClass},set:function(t){this._ddCssClass=(0,a.asString)(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"visible",{get:function(){return this._getFlag(P.Visible)},set:function(t){this._setFlag(P.Visible,t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isVisible",{get:function(){return!!this._getFlag(P.Visible)&&(!this._getFlag(P.ParentCollapsed)||this instanceof W)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pos",{get:function(){return this._list&&this._list._dirty&&this._list._update(),this._pos},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"index",{get:function(){return this._list&&this._list._dirty&&this._list._update(),this._idx},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"visibleIndex",{get:function(){return this._list&&this._list._dirty&&this._list._update(),this.isVisible?this._idxVis:-1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._sz},set:function(t){t!=this._sz&&(this._sz=(0,a.asNumber)(t,!0),this.onPropertyChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"renderSize",{get:function(){var t=0,e=this._list;return this.isVisible&&((null==(t=this._sz)||t<0)&&(t=e?e.defaultSize:0),e&&null!=e.minSize&&t<e.minSize&&(t=e.minSize),e&&null!=e.maxSize&&t>e.maxSize&&(t=e.maxSize),null!=this._szMin&&t<this._szMin&&(t=this._szMin),null!=this._szMax&&t>this._szMax&&(t=this._szMax)),t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"allowResizing",{get:function(){return this._getFlag(P.AllowResizing)},set:function(t){this._setFlag(P.AllowResizing,t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"allowDragging",{get:function(){return this._getFlag(P.AllowDragging)},set:function(t){this._setFlag(P.AllowDragging,t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"allowMerging",{get:function(){return this._getFlag(P.AllowMerging)},set:function(t){this._setFlag(P.AllowMerging,t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isSelected",{get:function(){return this._getFlag(P.Selected)},set:function(t){if(!!t!=this.isSelected){var e=this.grid;if(e){var i=this instanceof O?new y(this.index,-1):new y(-1,this.index),n=new x(e?e.cells:null,i);e.onSelectionChanging(n)&&this._setFlag(P.Selected,t,!0)&&(e.refreshCells(!1,!0,!0),e.onSelectionChanged(n))}else this._setFlag(P.Selected,t)}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isReadOnly",{get:function(){return this._getFlag(P.ReadOnly)},set:function(t){this._setFlag(P.ReadOnly,t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isRequired",{get:function(){return this._required},set:function(t){this._required=(0,a.asBoolean)(t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isContentHtml",{get:function(){return this._getFlag(P.HtmlContent)},set:function(t){this.isContentHtml!=t&&(this._setFlag(P.HtmlContent,t),this.grid&&this.grid.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"wordWrap",{get:function(){return this._getFlag(P.WordWrap)},set:function(t){this._setFlag(P.WordWrap,t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"multiLine",{get:function(){return this._getFlag(P.MultiLine)},set:function(t){this._setFlag(P.MultiLine,t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cssClass",{get:function(){return this._cssClass},set:function(t){t!=this._cssClass&&(this._cssClass=(0,a.asString)(t),this.grid&&this.grid.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cssClassAll",{get:function(){return this._cssClassAll},set:function(t){t!=this._cssClassAll&&(this._cssClassAll=(0,a.asString)(t),this.grid&&this.grid.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"grid",{get:function(){return this._list?this._list._g:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"collectionView",{get:function(){return this.grid?this.grid.collectionView:null},enumerable:!0,configurable:!0}),t.prototype.onPropertyChanged=function(){this._list&&(this._list._dirty=!0,this.grid.invalidate())},t.prototype.onGridChanged=function(t){this.gridChanged.raise(this,t)},t.prototype._setList=function(t){t!=this._list&&(this._list=t,this.onGridChanged())},t.prototype._getFlag=function(t){return 0!=(this._f&t)},t.prototype._setFlag=function(t,e,i){return!!e!=this._getFlag(t)&&(this._f=e?this._f|t:this._f&~t,i||this.onPropertyChanged(),!0)},t}(),k=function(t){function e(i){var n=t.call(this)||this;return n._hdr=null,n._name=null,n._agg=null,n._quickSize=null,n._descById=null,n._tpl=null,n._f=P.ColumnDefault,n._hash=e._ctr.toString(36),e._ctr++,(0,a.copy)(n,i),n}return c(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return this._name},set:function(t){this._name=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return null!=this._szStar?this._szStar:this.size},set:function(t){null!=e._parseStarSize(t)?(this._szStar=t,this.onPropertyChanged()):(this._szStar=null,this.size=(0,a.asNumber)(t,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minWidth",{get:function(){return this._szMin},set:function(t){t!=this._szMin&&(this._szMin=(0,a.asNumber)(t,!0,!0),this.onPropertyChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxWidth",{get:function(){return this._szMax},set:function(t){t!=this._szMax&&(this._szMax=(0,a.asNumber)(t,!0,!0),this.onPropertyChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"quickAutoSize",{get:function(){return this._quickSize},set:function(t){this._quickSize=(0,a.asBoolean)(t,!0)},enumerable:!0,configurable:!0}),e.prototype._getQuickAutoSize=function(){return!!this.grid._getQuickAutoSize()&&((0,a.isBoolean)(this._quickSize)?this._quickSize:!(this.isContentHtml||this.wordWrap||this.multiLine||this._getFlag(P.HasTemplate)))},Object.defineProperty(e.prototype,"renderWidth",{get:function(){return this.renderSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"header",{get:function(){return this._hdr?this._hdr:this.binding},set:function(t){this._hdr!=t&&(this._hdr=t,this.onPropertyChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cellTemplate",{get:function(){return this._tpl},set:function(t){t!=this._tpl&&((0,a.assert)(null==t||(0,a.isString)(t)||(0,a.isFunction)(t),"cellTemplate should be a string or an ICellTemplateFunction."),this._tpl=t,this._setFlag(P.HasTemplate,null!=t&&""!=t),this.onPropertyChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"editor",{get:function(){var t=this._edt;return t?t.control:null},set:function(t){t!=this.editor&&(this._edt&&(this._edt.dispose(),this._edt=null),null!=t&&(t=(0,a.asType)(t,a.Control),this._edt=new st(this,t)))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"allowSorting",{get:function(){return this._getFlag(P.AllowSorting)},set:function(t){this._setFlag(P.AllowSorting,t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentSort",{get:function(){var t=this.currentSortIndex;return t>-1?this.grid.collectionView.sortDescriptions[t].ascending?"+":"-":null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentSortIndex",{get:function(){var t=this.grid?this.grid.collectionView:null,e=t?t.sortDescriptions:null,i=e&&e.length?this._getBindingSort():null;if(i)for(var n=0;n<e.length;n++)if(e[n].property==i)return n;return-1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"aggregate",{get:function(){return null!=this._agg?this._agg:a.Aggregate.None},set:function(t){(t=(0,a.asEnum)(t,a.Aggregate))!=this._agg&&(this._agg=t,this.onPropertyChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"describedById",{get:function(){return this._descById},set:function(t){t!=this._descById&&(this._descById=(0,a.asString)(t),this.grid&&this.grid.invalidate())},enumerable:!0,configurable:!0}),e.prototype.getIsRequired=function(t){return null!=this._required?this._required:t&&null!=t.isRequired?t.isRequired:this.dataType==a.DataType.String?null!=this.dataMap||null!=this._mask&&this._mask.length>0:!t||t.dataType!=a.DataType.String||null!=t.dataMap||null!=t.mask&&t.mask.length>0},e.prototype.getAlignment=function(t){if(null!=this._align)return this._align;if(t&&null!=t.align)return t.align;if(!this._map)switch(this.dataType){case a.DataType.Boolean:return"center";case a.DataType.Number:return"right"}if(t&&!t.dataMap)switch(t.dataType){case a.DataType.Boolean:return"center";case a.DataType.Number:return"right"}return""},e.prototype._getBindingSort=function(){return this.sortMemberPath?this.sortMemberPath:this.binding?this.binding:null},e._parseStarSize=function(t){if((0,a.isString)(t)){var e=t.length;if(e>0&&"*"==t[e-1]){var i=1==e?1:parseFloat(t);if(i>0&&!isNaN(i))return i}}return null},e._ctr=0,e}(A),O=function(t){function e(e){var i=t.call(this)||this;return i._f=P.ColumnDefault,i._data=e||null,i}return c(e,t),Object.defineProperty(e.prototype,"dataItem",{get:function(){return this._data},set:function(t){this._data=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dataIndex",{get:function(){return this._list&&this._list._dirty&&this._list._update(),this._idxData},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.size},set:function(t){this.size=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"renderHeight",{get:function(){return this.renderSize},enumerable:!0,configurable:!0}),e}(A),L=function(t){function e(e){var i=t.call(this,e)||this;return i._level=-1,i.level=e instanceof a.CollectionViewGroup?e.level:-1,i.isReadOnly=!0,i}return c(e,t),Object.defineProperty(e.prototype,"level",{get:function(){return this._level},set:function(t){(0,a.asInt)(t),t!=this._level&&(this._level=t,this.onPropertyChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasChildren",{get:function(){if(null!=this.grid&&null!=this._list){this._list._update();var t=this.index<this._list.length-1?this._list[this.index+1]:null,i=(0,a.tryCast)(t,e),n=(0,a.tryCast)(t,W);return null!=t&&null==n&&(null==i||i.level>this.level)}return!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isCollapsed",{get:function(){return this._getFlag(P.Collapsed)},set:function(t){!!t!=this.isCollapsed&&null!=this._list&&this._setCollapsed((0,a.asBoolean)(t))},enumerable:!0,configurable:!0}),e.prototype.getGroupHeader=function(){var t=this.grid,e=t.groupHeaderFormat||a.culture.FlexGrid.groupHeaderFormat,i=this.dataItem;if(i instanceof a.CollectionViewGroup&&e&&t.showGroups&&!t.childItemsPath){var n=i.groupDescription.propertyName,r=i.name,o=t.getColumn(n),s=this.isContentHtml;if(o){s=s||o.isContentHtml,o.header&&(n=o.header);var l=o.dataMap;l&&(r=l.getDisplayValue(r)),o.dataType==(0,a.getType)(r)&&(r=a.Globalize.format(r,o.format))}else n=(0,a.toHeaderCase)(n);var h=i.getAggregate(a.Aggregate.CntAll,null,t.collectionView);return(0,a.format)(e,{name:(0,a.escapeHtml)(n),value:s?r:(0,a.escapeHtml)(r),level:i.level,count:h})}return""},e.prototype._setCollapsed=function(t){var i=this,n=this.grid,r=n.rows,o=this.getCellRange(),s=new x(n.cells,new y(this.index,-1));n.onGroupCollapsedChanging(s)&&(n.deferUpdate((function(){r.deferUpdate((function(){i._setFlag(P.Collapsed,t,!0);for(var n=o.topRow+1;n<=o.bottomRow&&n>-1&&n<r.length;n++){r[n]._setFlag(P.ParentCollapsed,t,!0);var s=r[n];s instanceof e&&s.isCollapsed&&(n=s.getCellRange().bottomRow)}}))})),n.onGroupCollapsedChanged(s))},e.prototype.getCellRange=function(){for(var t=this._list,i=this.index,n=t.length-1,r=i+1;r<=n;r++){var o=t[r];if(o instanceof e&&o.level<=this.level){n=r-1;break}}return new y(i,0,n,this.grid.columns.length-1)},e}(O),j=function(t){function e(e,i){var n=t.call(this)||this;return n._frozen=0,n._lastFrozen=-1,n._firstVisible=-1,n._vlen=0,n._szDef=28,n._szTot=0,n._szCustom=!1,n._dirty=!1,n._g=(0,a.asType)(e,G),n._szDef=(0,a.asNumber)(i,!1,!0),n}return c(e,t),Object.defineProperty(e.prototype,"grid",{get:function(){return this._g},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defaultSize",{get:function(){return this._szDef},set:function(t){this._szCustom=!0,this._szDef!=t&&(this._szDef=(0,a.asNumber)(t,!1,!0),this._dirty=!0,this._g.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"frozen",{get:function(){return this._frozen},set:function(t){t!=this._frozen&&(this._frozen=(0,a.asNumber)(t,!1,!0),this._dirty=!0,this._g.invalidate())},enumerable:!0,configurable:!0}),e.prototype.isFrozen=function(t){return t<this.frozen},Object.defineProperty(e.prototype,"minSize",{get:function(){return this._szMin},set:function(t){t!=this._szMin&&(this._szMin=(0,a.asNumber)(t,!0,!0),this._dirty=!0,this._g.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxSize",{get:function(){return this._szMax},set:function(t){t!=this._szMax&&(this._szMax=(0,a.asNumber)(t,!0,!0),this._dirty=!0,this._g.invalidate())},enumerable:!0,configurable:!0}),e.prototype.getTotalSize=function(){return this._dirty&&this._update(),this._szTot},Object.defineProperty(e.prototype,"visibleLength",{get:function(){return this._dirty&&this._update(),this._vlen},enumerable:!0,configurable:!0}),e.prototype.getItemAt=function(t){if(this._dirty&&this._update(),t<=0&&this.length>0&&this[0].renderSize)return 0;for(var e,i,n=this.length,r=0,o=n-1;r<=o;)if((i=this[e=r+o>>>1])._pos>=t&&e>0)o=e-1;else{if(!(i._pos+i.renderSize<=t&&e<n-1)){for(;e>0&&!this[e].renderSize;)e--;for(;e<n-1&&!this[e].renderSize;)e++;return e}r=e+1}return o},e.prototype.getNextCell=function(t,e,i){void 0===i&&(i=0);var n,r=w;switch(e){case r.Next:case r.NextCell:for(n=t+1;n<this.length;n++)if(this[n].renderSize>0)return n;break;case r.NextEditableCell:for(n=t+1;n<this.length;n++)if(this[n].renderSize>0&&!this[n].isReadOnly)return n;break;case r.Prev:case r.PrevCell:for(n=t-1;n>=0;n--)if(this[n].renderSize>0)return n;break;case r.PrevEditableCell:for(n=t-1;n>=0;n--)if(this[n].renderSize>0&&!this[n].isReadOnly)return n;break;case r.End:for(n=this.length-1;n>=0;n--)if(this[n].renderSize>0)return n;break;case r.Home:for(n=0;n<this.length;n++)if(this[n].renderSize>0)return n;break;case r.NextPage:return(n=this.getItemAt(this[t].pos+this[t].renderSize+i))<0?this.getNextCell(t,w.End,i):n==t&&n<this.length-1&&this[n+1].renderSize?n+1:n;case r.PrevPage:return(n=this.getItemAt(this[t].pos-i))<0?this.getNextCell(t,w.Home,i):n==t&&n>0&&this[n-1].renderSize?n-1:n}return t},e.prototype.canMoveElement=function(t,e,i){if(void 0===i&&(i=!0),e==t)return!1;if(t<0||t>=this.length||e>=this.length)return!1;if(i){e<0&&(e=this.length-1);for(var n=Math.min(t,e),r=Math.max(t,e),o=n;o<=r;o++)if(!this[o].allowDragging)return!1}return!(this[e]instanceof W)},e.prototype.moveElement=function(t,e,i){if(void 0===i&&(i=!0),this.canMoveElement(t,e,i)){var n=this[t];if(this.removeAt(t),e<0&&(e=this.length),this.insert(e,n),i){var r=this.frozen;t<r&&e>=r?this.frozen--:t>=r&&e<r&&this.frozen++}return!0}return!1},e.prototype.onCollectionChanged=function(e){void 0===e&&(e=a.NotifyCollectionChangedEventArgs.reset),this._dirty=!0,this._g.invalidate(),t.prototype.onCollectionChanged.call(this,e)},e.prototype.push=function(e){return e._setList(this),t.prototype.push.call(this,e)},e.prototype.splice=function(e,i){for(var n=this,r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];for(var s=e;s<e+i&&s<this.length;s++){var a=this[s];a instanceof A&&a._setList(null)}return r.forEach((function(t){return t._setList(n)})),t.prototype.splice.apply(this,[e,i].concat(r))},e.prototype.beginUpdate=function(){this._update(),t.prototype.beginUpdate.call(this)},e.prototype._setDefaultSize=function(t){this._szCustom||(this.defaultSize=t,this._szCustom=!1)},e.prototype._update=function(){if(this._dirty&&!this.isUpdating){this._dirty=!1,this._lastFrozen=-1,this._firstVisible=-1;for(var t=0,e=0,i=void 0,n=void 0,r=0;r<this.length;r++)(n=this[r])._idx=r,n._idxVis=t,n._pos=e,n._setList(this),(i=n.renderSize)>0&&(e+=i,t++,r<this._frozen&&(this._lastFrozen=r)),this._firstVisible<0&&n.visible&&(this._firstVisible=r);return this._vlen=t,this._szTot=e,!0}return!1},e}(a.ObservableArray),N=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c(e,t),e.prototype.getColumn=function(t){var e=(0,a.isNumber)(t)?t:this.indexOf(t);return e>-1?this[e]:null},e.prototype.indexOf=function(e){if(e instanceof k)return t.prototype.indexOf.call(this,e);for(var i=0;i<this.length;i++)if(this[i].name==e)return i;for(i=0;i<this.length;i++)if(this[i].binding==e)return i;return-1},Object.defineProperty(e.prototype,"describedById",{get:function(){return this._descById},set:function(t){t!=this._descById&&(this._descById=(0,a.asString)(t),this._g&&this._g.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"firstVisibleIndex",{get:function(){return this._dirty&&this._update(),this._firstVisible},enumerable:!0,configurable:!0}),e.prototype._updateStarSizes=function(t){var e,i=!1,n=0;t-=.5;for(var r=0;r<this.length;r++)(s=this[r]).isVisible&&(s._szStar?(n+=k._parseStarSize(s._szStar),e=s):t-=s.renderWidth);if(e){var o=t;for(r=0;r<this.length;r++){var s;if((s=this[r]).isVisible&&s._szStar){var a=s._sz;s==e&&o>0?a=o:o-=a=Math.max(0,Math.round(k._parseStarSize(s._szStar)/n*t)),a!=s._sz&&(s._sz=a,i=!0)}}return i&&(this._dirty=!0,this._update()),i}return!1},e}(j),H=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._maxLevel=-1,e}return c(e,t),Object.defineProperty(e.prototype,"ariaLabel",{get:function(){return this._ariaLabel},set:function(t){t!=this.ariaLabel&&(this._ariaLabel=(0,a.asString)(t),this._g&&this._g.refresh())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxGroupLevel",{get:function(){return this._dirty&&this._update(),this._maxLevel},enumerable:!0,configurable:!0}),e.prototype._update=function(){var e=this;if(t.prototype._update.call(this)){var i=this.grid?this.grid.collectionView:null,n=i?i.items:null,r=0;return this._maxLevel=-1,this.forEach((function(t){t instanceof L&&t.level>e._maxLevel&&(e._maxLevel=t.level);var i=t.dataItem;i&&n?i===n[r]?t._idxData=r:i===n[r+1]?t._idxData=++r:i!==n[t._idxData]&&(t._idxData=-1):t._idxData=-1})),!0}return!1},e}(j),F=function(){function t(t){this._updatingCollection=0,this._initialized=!1,this._grid=t,this._initializeColumnGroups(),this._initialized=!0}return Object.defineProperty(t.prototype,"columnGroups",{get:function(){return this._colGroups},enumerable:!0,configurable:!0}),t.prototype.createColumnGroups=function(t){this._initialized=!1,this._createColumnGroups(t),this._initialized=!0},t.prototype.hasColumnGroups=function(){return null!=this._colGroups&&this._colGroups.length>0},t.prototype.getGroupDefinitions=function(){return this._groupDefs},t.prototype.getColumnGroup=function(t,e){return this._getColumnGroup(t,e)},t.prototype.canMoveColumnGroup=function(t,e,i,n){if(t==i&&e==n)return!1;var r=this._grid,o=r.columnHeaders.rows,s=r.columns;if(t<0||t>=o.length||e<0||e>=s.length||i<0||i>=o.length||n<0||n>=s.length)return!1;var a=this._getColumnGroup(t,e),l=this._getColumnGroup(i,n);if(!a||!l||a==l)return!1;if(a.level<l.level&&a._containsGroup(l))return!1;var h=a.parentGroup,c=l.parentGroup;return!h||h===c||!h._isCollapseTo(a)},t.prototype.moveColumnGroup=function(t,e,i,n,r){if(this.canMoveColumnGroup(t,e,i,n)){var o=this._getColumnGroup(t,e),s=this._getColumnGroup(i,n);if(!o||!s||o==s)return!1;if(r&&!s.isEmpty)return!1;var a=this._getCollection(o),l=r?s.columns:this._getCollection(s);if(!a||!l)return!1;var h=r?0:l.indexOf(s);return!(h<0||(!r&&a!=l&&n>e&&h++,this._deferCollectionUpdate((function(){if(!a.remove(o))return!1;l.insert(h,o)})),0))}return!1},t.prototype.handleCollectionChange=function(){this._initialized&&!this._updatingCollection&&(this._initialized=!1,this._buildColumnGroups(),this._initialized=!0)},t.prototype.handlePropertyChange=function(t){if(t&&this._initialized){var e=this._grid,i=t._rng,n=t.header;if(n!=t._curr_header)for(var r=i.topRow;r<=i.bottomRow;r++)for(var o=i.leftCol;o<=i.rightCol;o++)e.columnHeaders.setCellData(r,o,n),t._curr_header=n;t.columns.length>0&&e.invalidate()}},t.prototype._initializeColumnGroups=function(){var t=this._grid,e=new z;this._groupDefs=e,this._colGroups=e,this._colGroups._setOwner(t),this._colGroups._setChangeHandler(this)},t.prototype._createColumnGroups=function(t){this._grid,this._groupDefs=(0,a.asArray)(t),this._colGroups&&this._colGroups._setOwner(null),this._colGroups=z._parse(t),this._buildColumnGroups()},t.prototype._buildColumnGroups=function(){var t=this,e=this._grid;this._colGroups._removeChangeHandler(),this._assertColumnGroups(this._colGroups),e.autoGenerateColumns=!1,e.columns.clear(),this._colGroups._setOwner(e),this._colGroups.forEach((function(t){t._beginBuild()}));var i=0;this._colGroups.forEach((function(e){t._addColumnGroup(e),i=Math.max(i,e._getMaxLevel())})),this._colGroups.forEach((function(t){t._expandRange(i)}));var n=e.columnHeaders.rows;n.clear();for(var r=0;r<=i;r++){var o=new O;n.splice(r,0,o),r<i&&(o.cssClassAll="wj-colgroup")}for(r=0;r<n.length;r++)for(var s=0;s<e.columns.length;s++){var l=this._getColumnGroup(r,s);if(l){var h=l.header||(0,a.toHeaderCase)(l.binding);e.columnHeaders.setCellData(r,s,h),l._curr_header=l.header}}this._colGroups._setChangeHandler(this),this._colGroups.forEach((function(t){t._checkIfCollapsed()}))},t.prototype._getColumnGroup=function(t,e){var i=this._grid;if(t<i.columnHeaders.rows.length&&e<i.columns.length)for(var n=this._colGroups;n;){for(var r=n,o=0;o<n.length;o++){var s=n[o],a=s._rng;if(a.containsColumn(e)){if(a.containsRow(t)||0==s.columns.length)return s;n=s.columns;break}}if(n==r)break}return null},t.prototype._getCollection=function(t){var e=t.parentGroup;return e?e.columns:this._colGroups},t.prototype._assertColumnGroups=function(t){var e=this;(0,a.assert)(t instanceof z,"column groups contain items of invalid collection type"),t.forEach((function(t){(0,a.assert)(t instanceof B,"column groups contain items of invalid type"),e._assertColumnGroups(t.columns)}))},t.prototype._addColumnGroup=function(t){var e=this,i=this._grid;t._rng.col=i.columns.length,0==t.columns.length?i.columns.push(t):t.columns.forEach((function(t){e._addColumnGroup(t)})),t._rng.col2=i.columns.length-1},t.prototype._beginCollectionUpdate=function(){this._updatingCollection++},t.prototype._endCollectionUpdate=function(){this._updatingCollection--,this._updatingCollection<=0&&this.handleCollectionChange()},t.prototype._deferCollectionUpdate=function(t){try{this._beginCollectionUpdate(),t()}finally{this._endCollectionUpdate()}},t}(),B=function(t){function e(e,i){var n=t.call(this)||this;n._rng=new y(0,-1),n._lvl=0,n._collapsed=!1,n._cols=new z,(0,a.copy)(n,e);var r=i&&i.columns;return r&&r.indexOf(n)<0&&r.push(n),n}return c(e,t),e.prototype._copy=function(t,e){if("columns"==t){var i=(0,a.asArray)(e);return this._cols=z._parse(i),!0}return!1},Object.defineProperty(e.prototype,"columns",{get:function(){return this._cols},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"columnGroups",{get:function(){return this._cols},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isEmpty",{get:function(){return 0===this._cols.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parentGroup",{get:function(){var t=this._ownerList,i=t&&t.owner;return i instanceof e?i:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"level",{get:function(){for(var t=this,e=0;t.parentGroup;)t=t.parentGroup,e++;return e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"collapseTo",{get:function(){return this._collTo},set:function(t){var e=(0,a.asString)(t);this._collTo!=e&&(this._collTo=e,this._updateCollapsedState())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isCollapsed",{get:function(){return this._collapsed},set:function(t){var e=this.grid,i=null;t!=this._collapsed&&(e?(i=new x(e.columnHeaders,this._rng,this),e.onColumnGroupCollapsedChanging(i)?this._collapsed=(0,a.asBoolean)(t):i=null):this._collapsed=(0,a.asBoolean)(t)),this._updateCollapsedState(),e&&i&&e.onColumnGroupCollapsedChanged(i)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"grid",{get:function(){var t=this._ownerList,i=t&&t.owner;return i instanceof e?i.grid:i instanceof G?i:null},enumerable:!0,configurable:!0}),e.prototype._beginBuild=function(){this._lvl=0;for(var t=this.parentGroup;t;t=t.parentGroup)this._lvl++;this._rng=new y(0,-1),this._rng.row=this._rng.row2=this._lvl,this._cols.forEach((function(t){t._beginBuild()}))},e.prototype._setChangeHandler=function(t){this._changeHdl=t,this._cols._setChangeHandler(t)},e.prototype._removeChangeHandler=function(){this._changeHdl=null,this._cols._removeChangeHandler()},e.prototype._setOwnerList=function(t){t!=this._ownerList&&(this._ownerList=t)},e.prototype._checkIfCollapsed=function(){var t=this.grid;t&&t.columns&&(this._collapsed?this._updateCollapsedState():this._cols.forEach((function(t){t._checkIfCollapsed()})))},e.prototype._updateCollapsedState=function(){var t=this.grid,i=t?t.columns:null,n=this._rng,r=this._collapsed;if(i){this._cols.forEach((function(t){t instanceof e&&(t._collapsed=r,t._updateCollapsedState())}));var o=n.rightCol;if(this.collapseTo)switch(this.collapseTo){case"$first":o=n.leftCol;break;case"$last":o=n.rightCol;break;default:var s=i.getColumn(this.collapseTo),a=i.indexOf(s);s&&n.containsColumn(a)&&(o=a)}for(var l=n.leftCol;l<=n.rightCol;l++){var h=!r||l==o;i[l]._setFlag(P.ParentCollapsed,!h)}}},e.prototype._getMaxLevel=function(){var t=this._lvl;return this.columns.forEach((function(e){t=Math.max(t,e._getMaxLevel())})),t},e.prototype._expandRange=function(t){var e=t-this._getMaxLevel();e>0&&(this._rng.row2+=e,this._cols.forEach((function(t){t._shiftRange(e)})));for(var i=this.grid.columns,n=this._rng,r=n.col;r<=n.col2;r++)i[r]._rng.row2=t},e.prototype._shiftRange=function(t){this._rng.row+=t,this._rng.row2+=t,this._cols.forEach((function(e){e._shiftRange(t)}))},e.prototype._containsGroup=function(t){for(var e=0;e<this._cols.length;e++){var i=this._cols[e];if(i==t||i._containsGroup(t))return!0}return!1},e.prototype._isCollapseTo=function(t){var e=this.grid,i=e?e.columns:null;if(!t||!i)return!1;if(this.collapseTo)switch(this.collapseTo){case"$first":case"$last":return!1;default:return t===i.getColumn(this.collapseTo)}return!1},e.prototype.onPropertyChanged=function(){var e=this._changeHdl;e&&e.handlePropertyChange(this),t.prototype.onPropertyChanged.call(this)},e}(k),z=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c(e,t),e.prototype.getColumn=function(t){return(0,a.isNumber)(t)?this._getColByIdx(t):this._findColByProp("name",t)||this._findColByProp("binding",t)},Object.defineProperty(e.prototype,"owner",{get:function(){return this._owner},enumerable:!0,configurable:!0}),e.prototype.push=function(e){return e._setOwnerList(this),t.prototype.push.call(this,e)},e.prototype.splice=function(e,i){for(var n=this,r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];for(var s=e;s<e+i&&s<this.length;s++){var a=this[s];a instanceof B&&a._setOwnerList(null)}return r.forEach((function(t){return t._setOwnerList(n)})),t.prototype.splice.apply(this,[e,i].concat(r))},e._parse=function(t){var i=null;return t?t instanceof e?i=t:(i=new e,t.forEach((function(t){var e=t instanceof B?t:new B(t);i.indexOf(e)<0&&i.push(e)}))):i=new e,i},e.prototype._setChangeHandler=function(t){this._changeHdl=t,this.forEach((function(e){return e._setChangeHandler(t)}))},e.prototype._removeChangeHandler=function(){this._changeHdl=null,this.forEach((function(t){return t._removeChangeHandler()}))},e.prototype._setOwner=function(t){this._owner=t,this.forEach((function(t){return t.columns._setOwner(t)}))},e.prototype._getColByIdx=function(t){return t>-1&&t<this.length?this[t]:null},e.prototype._findColByProp=function(t,e){for(var i=0;i<this.length;i++){var n=this[i];if(n[t]===e)return n;if(null!==(n=n.columns._findColByProp(t,e)))return n}return null},e.prototype.onCollectionChanged=function(e){void 0===e&&(e=a.NotifyCollectionChangedEventArgs.reset);var i=this._changeHdl;i&&i.handleCollectionChange(),t.prototype.onCollectionChanged.call(this,e)},e}(a.ObservableArray);(0,a._addCultureInfo)("FlexGrid",{groupHeaderFormat:"{name}: <b>{value}</b> ({count:n0} items)",ariaLabels:{toggleDropDown:"Toggle Dropdown",toggleGroup:"Toggle Group"}}),function(t){t[t.None=0]="None",t[t.SingleColumn=1]="SingleColumn",t[t.MultiColumn=2]="MultiColumn"}(M||(M={})),function(t){t[t.None=0]="None",t[t.SingleColumn=1]="SingleColumn",t[t.ColumnRange=2]="ColumnRange",t[t.Both=3]="Both"}(I||(I={})),function(t){t[t.None=0]="None",t[t.Column=1]="Column",t[t.Row=2]="Row",t[t.All=3]="All"}(D||(D={})),function(t){t[t.Default=0]="Default",t[t.CSV=1]="CSV",t[t.QuoteAll=2]="QuoteAll",t[t.SkipMerged=4]="SkipMerged",t[t.Unformatted=8]="Unformatted",t[t.InvisibleRows=16]="InvisibleRows",t[t.InvisibleColumns=32]="InvisibleColumns",t[t.InvisibleCells=48]="InvisibleCells"}(R||(R={}));var V,G=function(t){function e(e,i){var n=t.call(this,e,null,!0)||this;n._activeCell=null,n._szClient=new a.Size(0,0),n._szClientSB=new a.Size(0,0),n._offsetY=0,n._cssPage=0,n._ptScrl=new a.Point(0,0),n._cellPadLeft=3,n._cellPadHorz=3,n._cellPadVert=0,n._clipToScreen=!1,n._autoGenCols=!0,n._autoClipboard=!0,n._xOnCopyPaste=!0,n._autoScroll=!0,n._autoSearch=!1,n._caseSensitive=!1,n._readOnly=!1,n._indent=14,n._autoSizeMode=lt.Both,n._autoHeights=!1,n._quickSize=null,n._hdrVis=D.All,n._alSorting=M.SingleColumn,n._alPinning=I.None,n._alAddNew=!1,n._alDelete=!1,n._alResizing=at.Columns,n._alDragging=ht.Columns,n._alMerging=V.None,n._ssHdr=D.None,n._shSort=!0,n._shGroups=!0,n._shMarquee=!1,n._shPlcHld=!1,n._altStep=1,n._shErr=!0,n._shDropDown=!0,n._valEdt=!0,n._gHdrFmt=null,n._childItemsPath=null,n._sortRowIndex=null,n._editColIndex=null,n._deferResizing=!1,n._pSel=!0,n._pOutline=!0,n._stickyHdr=!1,n._anchorCursor=!1,n._copyHeaders=D.None,n._bigChecks=!1,n._fzClone=null,n._vt=0,n._vtRows=0,n._vtCols=0,n._lazyRender=!0,n._refreshOnEdit=!0,n._reorderCells=!0,n._isISChanging=!1,n._touchEdit=!1,n.itemsSourceChanging=new a.Event,n.itemsSourceChanged=new a.Event,n.scrollPositionChanged=new a.Event,n.selectionChanging=new a.Event,n.selectionChanged=new a.Event,n.loadingRows=new a.Event,n.loadedRows=new a.Event,n.updatingLayout=new a.Event,n.updatedLayout=new a.Event,n.resizingColumn=new a.Event,n.resizedColumn=new a.Event,n.autoSizingColumn=new a.Event,n.autoSizedColumn=new a.Event,n.starSizedColumns=new a.Event,n.draggingColumn=new a.Event,n.draggingColumnOver=new a.Event,n.draggedColumn=new a.Event,n.pinningColumn=new a.Event,n.pinnedColumn=new a.Event,n.resizingRow=new a.Event,n.resizedRow=new a.Event,n.autoSizingRow=new a.Event,n.autoSizedRow=new a.Event,n.draggingRow=new a.Event,n.draggingRowOver=new a.Event,n.draggedRow=new a.Event,n.groupCollapsedChanging=new a.Event,n.groupCollapsedChanged=new a.Event,n.columnGroupCollapsedChanging=new a.Event,n.columnGroupCollapsedChanged=new a.Event,n.sortingColumn=new a.Event,n.sortedColumn=new a.Event,n.beginningEdit=new a.Event,n.prepareCellForEdit=new a.Event,n.cellEditEnding=new a.Event,n.cellEditEnded=new a.Event,n.rowEditStarting=new a.Event,n.rowEditStarted=new a.Event,n.rowEditEnding=new a.Event,n.rowEditEnded=new a.Event,n.rowAdded=new a.Event,n.deletingRow=new a.Event,n.deletedRow=new a.Event,n.copying=new a.Event,n.copied=new a.Event,n.pasting=new a.Event,n.pasted=new a.Event,n.pastingCell=new a.Event,n.pastedCell=new a.Event,n.formatItem=new a.Event((function(){n._clearCells()})),n.updatingView=new a.Event,n.updatedView=new a.Event,n._mappedColumns=null;var r=n.hostElement;(0,a.isIE)()&&(r.style.borderRadius="0");var o=n.getTemplate();if(n.applyTemplate("wj-control wj-content wj-flexgrid",o,{_root:"root",_eSz:"sz",_eCt:"cells",_fCt:"fcells",_eTL:"tl",_eBL:"bl",_eCHdr:"ch",_eRHdr:"rh",_eCFtr:"cf",_eTLCt:"tlcells",_eBLCt:"blcells",_eCHdrCt:"chcells",_eCFtrCt:"cfcells",_eRHdrCt:"rhcells",_eMarquee:"marquee",_eFocus:"focus"}),(0,a.setCss)(n._root.parentElement,{position:"relative",left:"0",top:"0",width:"100%",height:"100%",overflow:"hidden",minWidth:"inherit",minHeight:"inherit",maxWidth:"inherit",maxHeight:"inherit"}),(0,a.setCss)(n._root,{position:"absolute",left:"0",top:"0",width:"100%",height:"100%",minWidth:"inherit",minHeight:"inherit",maxWidth:"inherit",maxHeight:"inherit",overflow:"auto",webkitOverflowScrolling:"touch"}),(0,a.setCss)(n._eCt,{position:"absolute"}),(0,a.setCss)(n._eMarquee,{display:"none"}),(0,a.setCss)(n._eMarquee.firstChild,{width:"100%",height:"100%"}),(0,a.setCss)(n._fCt,{position:"absolute",left:"0",top:"0",overflow:"hidden",pointerEvents:"none"}),(0,a.setCss)(n._eFocus,{position:"fixed",left:"-32000px"}),(0,a.setCss)(n._eSz,{position:"relative",visibility:"hidden"}),[n._eRHdr,n._eCFtr,n._eCHdr,n._eBL,n._eTL].forEach((function(t){(0,a.setAttribute)(t,"aria-hidden",!0),(0,a.setCss)(t,{position:"absolute",overflow:"hidden",outline:"none"}),(0,a.setCss)(t.firstElementChild,{position:"relative"})})),[n._eFocus,n._eMarquee,n._fCt,n._eSz].forEach((function(t){(0,a.setAttribute)(t,"aria-hidden",!0)})),(0,a.isIE9)()||(0,a.isIE10)()){var s=n._eMarquee;["click","dblclick","mousedown","mouseup"].forEach((function(t){n.addEventListener(s,t,(function(e){var i=s.style.display;s.style.display="none";var n=document.elementFromPoint(e.clientX,e.clientY);s.style.display=i;var r=document.createEvent("Event");for(var o in r.initEvent(t,!0,!0),e)try{r[o]=e[o]}catch(t){}n.dispatchEvent(r)}))}))}return r.tabIndex=-1,n.deferUpdate((function(){var t=n._getDefaultRowHeight();n._rows=new H(n,t),n._cols=new N(n,4*t),n._hdrRows=new H(n,t),n._hdrCols=new N(n,Math.round(1.25*t)),n._ftrRows=new H(n,t);var e=g;n._gpTL=new C(n,e.TopLeft,n._hdrRows,n._hdrCols,n._eTLCt),n._gpCHdr=new C(n,e.ColumnHeader,n._hdrRows,n._cols,n._eCHdrCt),n._gpRHdr=new C(n,e.RowHeader,n._rows,n._hdrCols,n._eRHdrCt),n._gpCells=new C(n,e.Cell,n._rows,n._cols,n._eCt),n._gpBL=new C(n,e.BottomLeft,n._ftrRows,n._hdrCols,n._eBLCt),n._gpCFtr=new C(n,e.ColumnFooter,n._ftrRows,n._cols,n._eCFtrCt),n._hdrRows.push(new O),n._hdrCols.push(new k({align:"center"})),n._cf=new J,n._keyHdl=new ct(n),n._mouseHdl=new pt(n),n._edtHdl=new ot(n),n._selHdl=n._createSelHdl(),n._addHdl=new K(n),n._grpHdl=new F(n),n._mrgMgr=new U,n._bndSortConverter=n._sortConverter.bind(n),n._errorTip=new a.Tooltip({isContentHtml:!1,showDelay:0,cssClass:"wj-error-tip"}),(0,a.setAttribute)(n.cells.hostElement,"role","grid"),n.selectionMode=b.CellRange,n._root.tabIndex=-1,n.initialize(i)})),n.addEventListener(n._root,"scroll",(function(t){if(n._updateScrollPosition()||n._forceScrollUpdate){var e=n.activeEditor,i=n.activeCell,r=i?i.className:null;n._forceScrollUpdate||n.finishEditing(),n._forceScrollUpdate=!1,n._updateContent(!0);var o=n.activeEditor,s=n.activeCell;o&&s&&e&&r?(o.value=e.value,s.className=r,n._setFocusNoScroll(o)):o&&!s&&n.finishEditing(!0),n.frozenColumns&&setTimeout((function(){var t=n.columnHeaders.hostElement.style,e=parseInt(t.left),i=n._ptScrl.x;Math.abs(e-i)>1&&n.invalidate()}))}})),n.addEventListener(r,"focus",(function(t){if(r.tabIndex>-1){var e=t.target;e instanceof HTMLElement&&e.tabIndex<0&&n._setFocus(!0)}}),!0),n}return c(e,t),e.prototype._handleResize=function(){var e=this;this._rcBounds=null,this.activeEditor&&this.isTouching||this._touchEdit?setTimeout((function(){e.activeEditor||(e._touchEdit=!0,e.startEditing(!0))}),50):t.prototype._handleResize.call(this),this._touchEdit=!1},Object.defineProperty(e.prototype,"headersVisibility",{get:function(){return this._hdrVis},set:function(t){(t=(0,a.asEnum)(t,D))!=this._hdrVis&&(this._hdrVis=t,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stickyHeaders",{get:function(){return this._stickyHdr},set:function(t){t!=this._stickyHdr&&(this._stickyHdr=(0,a.asBoolean)(t),this._updateStickyHeaders(),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"preserveSelectedState",{get:function(){return this._pSel},set:function(t){this._pSel=(0,a.asBoolean)(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"preserveOutlineState",{get:function(){return this._pOutline},set:function(t){this._pOutline=(0,a.asBoolean)(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"anchorCursor",{get:function(){return this._anchorCursor},set:function(t){this._anchorCursor=(0,a.asBoolean)(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"copyHeaders",{get:function(){return this._copyHeaders},set:function(t){this._copyHeaders=(0,a.asEnum)(t,D)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lazyRender",{get:function(){return this._lazyRender},set:function(t){this._lazyRender=(0,a.asBoolean)(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"refreshOnEdit",{get:function(){return this._refreshOnEdit},set:function(t){this._refreshOnEdit=(0,a.asBoolean)(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"virtualizationThreshold",{get:function(){return this._vt},set:function(t){this._vt=t,(0,a.isNumber)(t)?this._vtRows=this._vtCols=(0,a.asNumber)(t):t?(0,a.isArray)(t)&&2==t.length?(this._vtRows=(0,a.asNumber)(t[0]),this._vtCols=(0,a.asNumber)(t[1])):(0,a.assert)(!1,"virtualizationThreshold should be a number or an array with two numbers."):this._vtRows=this._vtCols=0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"autoGenerateColumns",{get:function(){return this._autoGenCols},set:function(t){this._autoGenCols=(0,a.asBoolean)(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"autoClipboard",{get:function(){return this._autoClipboard},set:function(t){this._autoClipboard=(0,a.asBoolean)(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"expandSelectionOnCopyPaste",{get:function(){return this._xOnCopyPaste},set:function(t){this._xOnCopyPaste=(0,a.asBoolean)(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"autoScroll",{get:function(){return this._autoScroll},set:function(t){this._autoScroll=(0,a.asBoolean)(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"autoSearch",{get:function(){return this._autoSearch},set:function(t){this._autoSearch=(0,a.asBoolean)(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"caseSensitiveSearch",{get:function(){return this._caseSensitive},set:function(t){this._caseSensitive=(0,a.asBoolean)(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"columnLayout",{get:function(){var t,i=this._hasColumnGroups(),n=i?B:k,r=i?"columnGroups":"columns",o=e._getSerializableProperties(n),s=new n,l=i?this.getColumnGroups():this.columns,h=function(t){var e=[];return t.forEach((function(t){var n={};if(o.forEach((function(e){var i=t[e];i!=s[e]&&(0,a.isPrimitive)(i)&&"size"!=e&&(n[e]=i)})),i){var r=t.columns;r.length&&(n.columns=h(r))}e.push(n)})),e},c=h(l);return JSON.stringify(((t={})[r]=c,t))},set:function(t){var e=this,i=JSON.parse((0,a.asString)(t));(0,a.assert)(i,"Invalid columnLayout data."),this.columns.deferUpdate((function(){e.columns.clear(),e._hasColumnGroups()&&(e.columnGroups=new z),e.initialize(i)}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"columnGroups",{get:function(){return this._grpHdl.getGroupDefinitions()},set:function(t){this.columns.clear(),this._grpHdl.createColumnGroups((0,a.asArray)(t))},enumerable:!0,configurable:!0}),e.prototype.getColumnGroups=function(){return this._grpHdl.columnGroups},Object.defineProperty(e.prototype,"isReadOnly",{get:function(){return this._readOnly},set:function(t){t!=this._readOnly&&(this._readOnly=(0,a.asBoolean)(t),this.finishEditing(),this.invalidate(!0),this._addHdl.updateNewRowTemplate(),(0,a.toggleClass)(this.hostElement,"wj-state-readonly",this.isReadOnly),this._setAria("readonly",this.isReadOnly?"true":null))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bigCheckboxes",{get:function(){return this._bigChecks},set:function(t){this._bigChecks=(0,a.asBoolean)(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDisabled",{get:function(){return this._e&&null!=this._e.getAttribute("disabled")},set:function(t){if((t=(0,a.asBoolean)(t,!0))!=this.isDisabled){var e=this._e;e&&((0,a.enable)(e,!t),this._updateTabIndex(),this.invalidate())}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imeEnabled",{get:function(){return null!=this._imeHdl},set:function(t){if((0,a.asBoolean)(t)!=this.imeEnabled&&this.finishEditing()){var e=this.containsFocus();this._imeHdl&&(this._imeHdl.dispose(),this._imeHdl=null),t&&(this._imeHdl=new Y(this)),e&&this.focus()}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"allowResizing",{get:function(){return this._alResizing},set:function(t){this._alResizing=(0,a.asEnum)(t,at)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"deferResizing",{get:function(){return this._deferResizing},set:function(t){this._deferResizing=(0,a.asBoolean)(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"autoSizeMode",{get:function(){return this._autoSizeMode},set:function(t){this._autoSizeMode=(0,a.asEnum)(t,lt)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"autoRowHeights",{get:function(){return this._autoHeights},set:function(t){this._autoHeights=(0,a.asBoolean)(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"quickAutoSize",{get:function(){return this._quickSize},set:function(t){this._quickSize=(0,a.asBoolean)(t,!0)},enumerable:!0,configurable:!0}),e.prototype._getQuickAutoSize=function(){return(0,a.isBoolean)(this._quickSize)?this._quickSize:!this.formatItem.hasHandlers&&null==this.itemFormatter},Object.defineProperty(e.prototype,"allowSorting",{get:function(){return this._alSorting},set:function(t){(0,a.isBoolean)(t)&&(t=t?M.SingleColumn:M.None),this._alSorting=(0,a.asEnum)(t,M)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"allowPinning",{get:function(){return this._alPinning},set:function(t){t!=this._alPinning&&((0,a.isBoolean)(t)&&(t=t?I.SingleColumn:I.None),this._alPinning=(0,a.asEnum)(t,I),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"allowAddNew",{get:function(){return this._alAddNew},set:function(t){t!=this._alAddNew&&(this._alAddNew=(0,a.asBoolean)(t),this._addHdl.updateNewRowTemplate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"newRowAtTop",{get:function(){return this._addHdl.newRowAtTop},set:function(t){this._addHdl.newRowAtTop=(0,a.asBoolean)(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"allowDelete",{get:function(){return this._alDelete},set:function(t){t!=this._alDelete&&(this._alDelete=(0,a.asBoolean)(t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"allowMerging",{get:function(){return this._alMerging},set:function(t){(t=(0,a.asEnum)(t,V))!=this._alMerging&&(this._alMerging=t,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showSelectedHeaders",{get:function(){return this._ssHdr},set:function(t){(t=(0,a.asEnum)(t,D))!=this._ssHdr&&(this._ssHdr=t,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showMarquee",{get:function(){return this._shMarquee},set:function(t){t!=this._shMarquee&&(this._shMarquee=(0,a.asBoolean)(t),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showPlaceholders",{get:function(){return this._shPlcHld},set:function(t){this._shPlcHld=(0,a.asBoolean)(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showSort",{get:function(){return this._shSort},set:function(t){t!=this._shSort&&(this._shSort=(0,a.asBoolean)(t),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showGroups",{get:function(){return this._shGroups},set:function(t){t!=this._shGroups&&(this._shGroups=(0,a.asBoolean)(t),this._bindGrid(!1))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alternatingRowStep",{get:function(){return this._altStep},set:function(t){t!=this._altStep&&(this._altStep=(0,a.asInt)(t,!1,!0),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showAlternatingRows",{get:function(){return this._altStep>0},set:function(t){(0,a._deprecated)("showAlternatingRows","alternatingRowStep"),this.alternatingRowStep=t?1:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showErrors",{get:function(){return this._shErr},set:function(t){t!=this._shErr&&(this._clearCells(),this._shErr=(0,a.asBoolean)(t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"errorTip",{get:function(){return this._errorTip},set:function(t){t!=this._errorTip&&(this._clearCells(),this._errorTip=(0,a.asType)(t,a.Tooltip,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemValidator",{get:function(){return this._itemValidator},set:function(t){t!=this.itemValidator&&(this._itemValidator=(0,a.asFunction)(t),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"validateEdits",{get:function(){return this._valEdt},set:function(t){this._valEdt=(0,a.asBoolean)(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"groupHeaderFormat",{get:function(){return this._gHdrFmt},set:function(t){t!=this._gHdrFmt&&(this._gHdrFmt=(0,a.asString)(t),this._bindGrid(!1))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"allowDragging",{get:function(){return this._alDragging},set:function(t){(t=(0,a.asEnum)(t,ht))!=this._alDragging&&(this._alDragging=t,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemsSource",{get:function(){return this._items},set:function(t){var e=this;if(t!=this._items){var i,n=new a.CancelEventArgs;if(this.onItemsSourceChanging(n))this._cv&&((i=this._cv).currentChanged.removeHandler(null,this),i.collectionChanged.removeHandler(null,this),i instanceof a.CollectionView&&i.sortConverter==this._bndSortConverter&&(i.sortConverter=null),this._cv=null),this._items=t,this._cv=this._getCollectionView(t),this._lastCount=0,this._cv&&((i=this._cv).currentChanged.addHandler((function(t,i){return e._cvCurrentChanged(t,i)}),this),i.collectionChanged.addHandler((function(t,i){return e._cvCollectionChanged(t,i)}),this),i instanceof a.CollectionView&&!i.sortConverter&&(i.sortConverter=this._bndSortConverter)),this._isISChanging=!0,this._bindGrid(!0),this._isISChanging=!1,this.onItemsSourceChanged(n)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"collectionView",{get:function(){return this._cv},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"editableCollectionView",{get:function(){return(0,a.tryCast)(this._cv,"IEditableCollectionView")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"childItemsPath",{get:function(){return this._childItemsPath},set:function(t){t!=this._childItemsPath&&((0,a.assert)(null==t||(0,a.isArray)(t)||(0,a.isString)(t),"childItemsPath should be an array or a string."),this._childItemsPath=t,this._bindGrid(!0))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rowHeaderPath",{get:function(){return this._rowHdrPath?this._rowHdrPath.path:null},set:function(t){t!=this.rowHeaderPath&&(t=(0,a.asString)(t),this._rowHdrPath=t?new a.Binding(t):null,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cells",{get:function(){return this._gpCells},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"columnHeaders",{get:function(){return this._gpCHdr},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"columnFooters",{get:function(){return this._gpCFtr},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rowHeaders",{get:function(){return this._gpRHdr},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topLeftCells",{get:function(){return this._gpTL},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomLeftCells",{get:function(){return this._gpBL},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rows",{get:function(){return this._rows},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"columns",{get:function(){return this._cols},enumerable:!0,configurable:!0}),e.prototype.getColumn=function(t,e){if(this._hasColumnGroups()&&e){var i=this.getColumnGroups();return null!==i?i.getColumn(t):null}return this.columns.getColumn(t)},Object.defineProperty(e.prototype,"frozenRows",{get:function(){return this.rows.frozen},set:function(t){this.rows.frozen=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"frozenColumns",{get:function(){return this.columns.frozen},set:function(t){this.columns.frozen=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cloneFrozenCells",{get:function(){return this._fzClone},set:function(t){t!=this._fzClone&&((0,a.setText)(this._fCt,null),this._fzClone=(0,a.asBoolean)(t,!0),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sortRowIndex",{get:function(){return this._sortRowIndex},set:function(t){t!=this._sortRowIndex&&(this._sortRowIndex=(0,a.asNumber)(t,!0),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"editColumnIndex",{get:function(){return this._editColIndex},set:function(t){t!=this._editColIndex&&(this._editColIndex=(0,a.asNumber)(t,!0),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scrollPosition",{get:function(){return this._ptScrl.clone()},set:function(t){var i=this._root,n=-t.x;if(this.rightToLeft)switch(e._getRtlMode()){case"rev":n=i.scrollWidth-i.clientWidth+t.x;break;case"neg":n=t.x;break;default:n=-t.x}i.scrollLeft=n,i.scrollTop=-t.y,this._updateScrollPosition()&&(this._forceScrollUpdate=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"clientSize",{get:function(){return this._szClient},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"controlRect",{get:function(){return this._rcBounds||(this._rcBounds=(0,a.getElementRect)(this._root)),this._rcBounds},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scrollSize",{get:function(){return new a.Size(this._gpCells.width,this._heightBrowser)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"viewRange",{get:function(){return this._gpCells.viewRange},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cellFactory",{get:function(){return this._cf},set:function(t){t!=this._cf&&(this._clearCells(),this._cf=(0,a.asType)(t,J,!1))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemFormatter",{get:function(){return this._itemFormatter},set:function(t){t!=this._itemFormatter&&(this._clearCells(),this._itemFormatter=(0,a.asFunction)(t))},enumerable:!0,configurable:!0}),e.prototype.canEditCell=function(t,e){return this._edtHdl._allowEdit(t,e)},e.prototype.getCellData=function(t,e,i){return this.cells.getCellData(t,e,i)},e.prototype.getCellBoundingRect=function(t,e,i){return this.cells.getCellBoundingRect(t,e,i)},e.prototype.setCellData=function(t,e,i,n,r){return void 0===n&&(n=!0),void 0===r&&(r=!0),this.cells.setCellData(t,e,i,n,r)},e.prototype.hitTest=function(t,e){return(0,a.isNumber)(t)&&(0,a.isNumber)(e)&&(t=new a.Point(t,e)),(0,a.isBoolean)(e)&&e&&(this._rcBounds=null),new X(this,t)},e.prototype.getClipString=function(t,e,i,n){var r;return r=null==e||(0,a.isBoolean)(e)?e?R.CSV:R.Default:e,(0,a.assert)((0,a.isNumber)(r),"Unexpected value for ClipStringOptions parameter."),this._edtHdl.getClipString(t,r,i,n)},e.prototype.setClipString=function(t,e){this._edtHdl.setClipString(t,e)},e.prototype.focus=function(t){this.isDisabled||this._setFocus(t)},e.prototype.dispose=function(){this.finishEditing(!0),this.itemsSource=null,t.prototype.dispose.call(this)},e.prototype.refresh=function(e){void 0===e&&(e=!0),t.prototype.refresh.call(this,e),this.finishEditing(),e&&(this._updateColumnTypes(),this.scrollPosition=this._ptScrl,this._updateDefaultSizes(),clearTimeout(this._toInv),this._toInv=null),this.refreshCells(e);var i=this._e;i&&(this._szCtl=new a.Size(i.offsetWidth,i.offsetHeight))},e.prototype.refreshCells=function(t,e,i){this.isUpdating||(t?this._updateLayout():this._updateContent(e,i))},e.prototype.refreshRange=function(t){for(var e=t.topRow;e<=t.bottomRow;e++)for(var i=t.leftCol;i<=t.rightCol;i++){var n=this.cells.getCellElement(e,i);if(n){var r=n[C._INDEX_KEY];this.cellFactory.updateCell(this.cells,e,i,n,r.rng)}}},e.prototype.autoSizeColumn=function(t,e,i){void 0===e&&(e=!1),void 0===i&&(i=4),this.autoSizeColumns(t,t,e,i)},e.prototype.autoSizeColumns=function(t,i,n,r){var o=this;void 0===n&&(n=!1),void 0===r&&(r=4);var s=0,l=n?this.topLeftCells:this.columnHeaders,h=n?this.bottomLeftCells:this.columnFooters,c=n?this.rowHeaders:this.cells,u=this.viewRange;t=null==t?0:(0,a.asInt)(t),i=null==i?c.columns.length-1:(0,a.asInt)(i),u.row=Math.max(0,u.row-1e3),u.row2=Math.min(u.row2+1e3,this.rows.length-1),this.finishEditing()&&this.columns.deferUpdate((function(){(0,a.setCss)(o._eCt,{width:o._gpCells.width});for(var n=(0,a.createElement)("<div "+e._WJS_MEASURE+'="true"/>',c.hostElement,{visibility:"hidden"}),d=o._getCanvasContext(),p=t;p<=i&&p>-1&&p<c.columns.length;p++){var f=c.columns[p];if(f.isVisible){if(s=0,o.autoSizeMode&lt.Headers){for(var _=0;_<l.rows.length;_++)l.rows[_].isVisible&&(s=Math.max(o._getDesiredWidth(l,_,p,n),s));for(_=0;_<h.rows.length;_++)h.rows[_].isVisible&&(s=Math.max(o._getDesiredWidth(h,_,p,n),s))}if(o.autoSizeMode&lt.Cells&&u.row>-1&&u.row2>-1)if(f._getQuickAutoSize())_=o._getWidestRow(c,u,p,d),s=Math.max(o._getDesiredWidth(c,_,p,n),s);else for(_=u.row;_<=u.row2&&_<c.rows.length;_++)c.rows[_].isVisible&&(s=Math.max(o._getDesiredWidth(c,_,p,n),s));s>0&&(f.width=s+r+2)}}o.cellFactory.disposeCell(n),(0,a.removeChild)(n)}))},e.prototype.autoSizeRow=function(t,e,i){void 0===e&&(e=!1),void 0===i&&(i=0),this.autoSizeRows(t,t,e,i)},e.prototype.autoSizeRows=function(t,i,n,r){var o=this;void 0===n&&(n=!1),void 0===r&&(r=0);var s=0,l=1==n?this.topLeftCells:null==n?this.bottomLeftCells:this.rowHeaders,h=1==n?this.columnHeaders:null==n?this.columnFooters:this.cells;if(r=(0,a.asNumber)(r),t=null==t?0:(0,a.asInt)(t),(i=null==i?h.rows.length-1:(0,a.asInt)(i))>=t&&this.finishEditing()){(0,a.setCss)(this._eCt,{width:this._gpCells.width});var c=(0,a.createElement)("<div "+e._WJS_MEASURE+'="true"/>',h.hostElement,{visibility:"hidden"});this.rows.deferUpdate((function(){for(var e={},n=o._autoSizeMode,a=lt,u=t;u<=i&&u>-1&&u<h.rows.length;u++)h.rows[u].isVisible&&(s=0,n&a.Headers&&(s=o._getDesiredRowHeight(l,u,c,e)),n&a.Cells&&(s=Math.max(o._getDesiredRowHeight(h,u,c,e),s)),s>0&&(h.rows[u].height=s+r))})),this.cellFactory.disposeCell(c),(0,a.removeChild)(c)}},Object.defineProperty(e.prototype,"treeIndent",{get:function(){return this._indent},set:function(t){t!=this._indent&&(this._indent=(0,a.asNumber)(t,!1,!0),this.columns.onCollectionChanged())},enumerable:!0,configurable:!0}),e.prototype.collapseGroupsToLevel=function(t){var e=this;this.finishEditing()&&this.deferUpdate((function(){var i=e.rows;i.deferUpdate((function(){for(var e=0;e<i.length;e++){var n=i[e];n instanceof L&&(n.isCollapsed=n.level>=t)}}))}))},Object.defineProperty(e.prototype,"selectionMode",{get:function(){return this._selHdl.selectionMode},set:function(t){(t=(0,a.asEnum)(t,b))!=this.selectionMode&&(this._selHdl.selectionMode=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selection",{get:function(){return this._selHdl.selection.clone()},set:function(t){this._selHdl.selection=t},enumerable:!0,configurable:!0}),e.prototype.select=function(t,e){return void 0===e&&(e=!0),this._selHdl.select(t,e)},e.prototype.selectAll=function(){var t=this.rows.length,e=this.columns.length;return!(!t||!e)&&this.select(new y(0,0,t-1,e-1),!1)},e.prototype.getSelectedState=function(t,e){return this.cells.getSelectedState(t,e)},Object.defineProperty(e.prototype,"selectedRows",{get:function(){var t=this,e=this.selectionMode,i=this.rows.filter((function(t){return t.isSelected}));if(0==i.length&&e!=b.None){var n=[];this.selectedRanges.forEach((function(e){for(var i=e.topRow;i<=e.bottomRow&&i>-1&&i<t.rows.length;i++)n.indexOf(i)<0&&n.push(i)})),n.sort(),i=n.map((function(e){return t.rows[e]}))}return i},set:function(t){var e=this;(0,a.assert)(this.selectionMode==b.ListBox,"This property can be set only in ListBox mode."),t=(0,a.asArray)(t),this.deferUpdate((function(){for(var i=0,n=!0;i<e.rows.length;i++){var r=e.rows[i],o=t&&t.indexOf(r)>-1;o&&n&&(n=!1,e.select(i,e.selection.col)),r.isSelected=o}}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedItems",{get:function(){var t=[];return this.selectedRows.forEach((function(e){var i=e?e.dataItem:null;i&&t.indexOf(i)<0&&t.push(i)})),t},set:function(t){var e=this;(0,a.assert)(this.selectionMode==b.ListBox,"This property can be set only in ListBox mode."),t=(0,a.asArray)(t),this.deferUpdate((function(){for(var i=0,n=!0;i<e.rows.length;i++){var r=e.rows[i],o=t&&t.indexOf(r.dataItem)>-1;o&&n&&(n=!1,e.select(i,e.selection.col)),r.isSelected=o}}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedRanges",{get:function(){var t=[this.selection];return this._selHdl.extendedSelection.forEach((function(e){t.push(e)})),t},set:function(t){if((t=(0,a.asArray)(t))&&t.length>0&&(this.select(t[0]),this.selectionMode==b.MultiRange)){var e=this._selHdl.extendedSelection;e.deferUpdate((function(){e.clear();for(var i=1;i<t.length;i++)e.push(t[i])}))}},enumerable:!0,configurable:!0}),e.prototype.scrollIntoView=function(t,e,i){(null==this._maxOffsetY||this._rows._dirty||this._cols._dirty)&&this._updateLayout();var n=this.scrollPosition,r=this._szClient,o=r.width,s=r.height-this._gpCFtr.rows.getTotalSize(),l=this.cells._getFrozenPos();if((t=(0,a.asInt)(t))>-1&&t<this._rows.length&&t>=this._rows.frozen){var h=this._rows[t],c=this._getCssPage(h.pos);if(c!=this._cssPage){for(var u=this._maxOffsetY,d=Math.round(u*c);d>h.pos;c-=.1)d=Math.round(u*c);this._offsetY=d}var p=h.pos-this._offsetY,f=p+h.renderSize;f>s-n.y&&(n.y=Math.max(-p,s-f)),p-l.y<-n.y&&(n.y=-(p-l.y)),c!=this._cssPage&&(this._cssPage=this._getCssPage(-n.y))}if((0,a.isString)(e)&&(e=this.columns.indexOf(e)),(e=(0,a.asInt)(e))>-1&&e<this._cols.length&&e>=this._cols.frozen){var _=this._cols[e],g=_.pos+_.renderSize;g>-n.x+o&&(n.x=Math.max(-_.pos,o-g)),_.pos-l.x<-n.x&&(n.x=-(_.pos-l.x))}if(!n.equals(this._ptScrl))return this.scrollPosition=n,i&&(this._updateScrollPosition(),this._forceScrollUpdate=!1,this.refresh()),!0;if(this._activeCell&&t>-1&&e>-1){var m=this._root,y=m.scrollWidth==m.clientWidth,b=m.scrollHeight==m.clientHeight;if(y||b){var v=this._activeCell.getBoundingClientRect(),w=innerWidth,C=innerHeight,x=v.right<0||v.left>w,S=v.bottom<0||v.top>C;n.x=pageXOffset+(v.left<0?v.left:v.right>w?v.right-w:0),n.y=pageYOffset+(v.top<0?v.top:v.bottom>C?v.bottom-C:0),x&&y&&S&&b?scrollTo(n.x,n.y):x&&y?scrollTo(n.x,document.documentElement.scrollLeft):S&&b&&scrollTo(document.documentElement.scrollTop,n.y)}}return!1},e.prototype.isRangeValid=function(t){return t&&t.isValid&&t.bottomRow<this.rows.length&&t.rightCol<this.columns.length},e.prototype.startEditing=function(t,e,i,n,r){return void 0===t&&(t=!0),this._edtHdl.startEditing(t,e,i,n,r)},e.prototype.finishEditing=function(t){return this._edtHdl.finishEditing(t)},Object.defineProperty(e.prototype,"activeCell",{get:function(){return this._activeCell},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"activeEditor",{get:function(){var t=this._edtHdl;return t?t.activeEditor:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"editRange",{get:function(){var t=this._edtHdl.editRange;return t?t.clone():null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mergeManager",{get:function(){return this._mrgMgr},set:function(t){t!=this._mrgMgr&&(this._mrgMgr=(0,a.asType)(t,U,!0),this.invalidate())},enumerable:!0,configurable:!0}),e.prototype.getMergedRange=function(t,e,i,n){return void 0===n&&(n=!0),this._mrgMgr?this._mrgMgr.getMergedRange(t,e,i,n):null},Object.defineProperty(e.prototype,"keyActionTab",{get:function(){return this._keyHdl._kaTab},set:function(t){this._keyHdl._kaTab=(0,a.asEnum)(t,rt)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"keyActionEnter",{get:function(){return this._keyHdl._kaEnter},set:function(t){this._keyHdl._kaEnter=(0,a.asEnum)(t,rt)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"preserveWhiteSpace",{get:function(){return(0,a.hasClass)(this.hostElement,e._WJS_WSPRE)},set:function(t){(0,a.toggleClass)(this.hostElement,e._WJS_WSPRE,(0,a.asBoolean)(t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showDropDown",{get:function(){return this._shDropDown},set:function(t){t!=this._shDropDown&&(this._shDropDown=(0,a.asBoolean)(t,!0),this.invalidate())},enumerable:!0,configurable:!0}),e.prototype.toggleDropDownList=function(){return this._tglDropDown||(this._tglDropDown=!0,this._edtHdl._toggleListBox(null),this._tglDropDown=!1),null!=this._edtHdl._lbx},Object.defineProperty(e,"defaultTypeWidth",{get:function(){return e._defTypeWidth},enumerable:!0,configurable:!0}),e.prototype.onItemsSourceChanging=function(t){return this.itemsSourceChanging.raise(this,t),!t.cancel},e.prototype.onItemsSourceChanged=function(t){this.itemsSourceChanged.raise(this,t)},e.prototype.onScrollPositionChanged=function(t){this.scrollPositionChanged.raise(this,t)},e.prototype.onSelectionChanging=function(t){return this.selectionChanging.raise(this,t),!t.cancel},e.prototype.onSelectionChanged=function(t){this.selectionChanged.raise(this,t)},e.prototype.onLoadingRows=function(t){return this.loadingRows.raise(this,t),!t.cancel},e.prototype.onLoadedRows=function(t){this.loadedRows.raise(this,t),this._autoRowHeights()},e.prototype.onUpdatingLayout=function(t){return this.updatingLayout.raise(this,t),!t.cancel},e.prototype.onUpdatedLayout=function(t){this.updatedLayout.raise(this,t)},e.prototype.onResizingColumn=function(t){return this.resizingColumn.raise(this,t),!t.cancel},e.prototype.onResizedColumn=function(t){this.resizedColumn.raise(this,t),this._autoRowHeights()},e.prototype.onAutoSizingColumn=function(t){return this.autoSizingColumn.raise(this,t),!t.cancel},e.prototype.onAutoSizedColumn=function(t){this.autoSizedColumn.raise(this,t)},e.prototype.onStarSizedColumns=function(t){this.starSizedColumns.raise(this,t),this._autoRowHeights()},e.prototype.onDraggingColumn=function(t){return this.draggingColumn.raise(this,t),!t.cancel},e.prototype.onDraggingColumnOver=function(t){return this.draggingColumnOver.raise(this,t),!t.cancel},e.prototype.onDraggedColumn=function(t){this.draggedColumn.raise(this,t)},e.prototype.onPinningColumn=function(t){return this.pinningColumn.raise(this,t),!t.cancel},e.prototype.onPinnedColumn=function(t){this.pinnedColumn.raise(this,t)},e.prototype.onResizingRow=function(t){return this.resizingRow.raise(this,t),!t.cancel},e.prototype.onResizedRow=function(t){this.resizedRow.raise(this,t)},e.prototype.onAutoSizingRow=function(t){return this.autoSizingRow.raise(this,t),!t.cancel},e.prototype.onAutoSizedRow=function(t){this.autoSizedRow.raise(this,t)},e.prototype.onDraggingRow=function(t){return this.draggingRow.raise(this,t),!t.cancel},e.prototype.onDraggingRowOver=function(t){return this.draggingRowOver.raise(this,t),!t.cancel},e.prototype.onDraggedRow=function(t){this.draggedRow.raise(this,t)},e.prototype.onGroupCollapsedChanging=function(t){return this.groupCollapsedChanging.raise(this,t),!t.cancel},e.prototype.onGroupCollapsedChanged=function(t){this.groupCollapsedChanged.raise(this,t)},e.prototype.onColumnGroupCollapsedChanging=function(t){return this.columnGroupCollapsedChanging.raise(this,t),!t.cancel},e.prototype.onColumnGroupCollapsedChanged=function(t){this.columnGroupCollapsedChanged.raise(this,t)},e.prototype.onSortingColumn=function(t){return this.sortingColumn.raise(this,t),!t.cancel},e.prototype.onSortedColumn=function(t){this.sortedColumn.raise(this,t)},e.prototype.onBeginningEdit=function(t){return this._addHdl._beginningEdit(this,t),t.cancel||this.beginningEdit.raise(this,t),!t.cancel},e.prototype.onPrepareCellForEdit=function(t){this.prepareCellForEdit.raise(this,t)},e.prototype.onCellEditEnding=function(t){return this.cellEditEnding.raise(this,t),!t.cancel&&!t.stayInEditMode},e.prototype.onCellEditEnded=function(t){this.cellEditEnded.raise(this,t),this._autoRowHeights()},e.prototype.onRowEditStarting=function(t){return this._addHdl._rowEditStarting(this,t),t.cancel||this.rowEditStarting.raise(this,t),!t.cancel},e.prototype.onRowEditStarted=function(t){this.rowEditStarted.raise(this,t)},e.prototype.onRowEditEnding=function(t){this._addHdl._rowEditEnding(this,t),this.rowEditEnding.raise(this,t)},e.prototype.onRowEditEnded=function(t){this.rowEditEnded.raise(this,t),this._addHdl._rowEditEnded(this,t),this._autoRowHeights()},e.prototype.onRowAdded=function(t){return this.rowAdded.raise(this,t),!t.cancel},e.prototype.onDeletingRow=function(t){return this.deletingRow.raise(this,t),!t.cancel},e.prototype.onDeletedRow=function(t){this.deletedRow.raise(this,t)},e.prototype.onCopying=function(t){return this.copying.raise(this,t),!t.cancel},e.prototype.onCopied=function(t){this.copied.raise(this,t)},e.prototype.onPasting=function(t){return this.pasting.raise(this,t),!t.cancel},e.prototype.onPasted=function(t){this.pasted.raise(this,t)},e.prototype.onPastingCell=function(t){return this.pastingCell.raise(this,t),!t.cancel},e.prototype.onPastedCell=function(t){this.pastedCell.raise(this,t)},e.prototype.onFormatItem=function(t){this.formatItem.raise(this,t)},e.prototype.onUpdatingView=function(t){return this.updatingView.raise(this,t),!t.cancel},e.prototype.onUpdatedView=function(t){this.updatedView.raise(this,t)},e.prototype._createSelHdl=function(){return new T(this)},e.prototype._getTabIndex=function(){return this._orgTabIndex},e.prototype._setTabOrder=function(t){this._orgTabIndex=t,this._updateTabIndex()},e.prototype._updateTabIndex=function(){var t=this.isDisabled?-1:this._orgTabIndex,e=this._imeHdl;e&&e._updateImeFocus();var i=this._activeCell,n=this._eFocus;i?(i.tabIndex=t,n.tabIndex=-1):n.tabIndex=t},e.prototype._autoRowHeights=function(){var t=this;this._autoHeights&&(this.rows.length>100&&[this.columnHeaders,this.rowHeaders].forEach((function(t){t._updateContent(!0,!1,t._getOffsetY())})),clearTimeout(this._toAutoHeights),this._toAutoHeights=setTimeout((function(){if(t._toAutoHeights=null,!t.editRange){var e=t.autoSizeMode,i=lt;e&i.Headers&&(t._autoSizeMode=i.Both,t.autoSizeRows(0,t.columnHeaders.rows.length-1,!0),t._autoSizeMode=e),e&i.Cells&&t.autoSizeRows()}}),a.Control._REFRESH_INTERVAL))},e.prototype._getShowErrors=function(){return this.showErrors&&this._hasValidation},e.prototype._getHasValidation=function(){return this._hasValidation},e.prototype._getError=function(t,e,i,n){if((0,a.isFunction)(this.itemValidator)){if(t==this.cells)return this.itemValidator(e,i,n);if(t==this.rowHeaders)for(i=0;i<this.columns.length;i++)if(c=this.itemValidator(e,i,n))return c}var r=this._cv,o=r?r.getError:null;if((0,a.isFunction)(o)){var s=t.rows,l=this.columns,h=s[e].dataItem;if(h&&!(h instanceof a.CollectionViewGroup))if(t==this.cells)for(;e<s.length&&s[e].dataItem==h;e++)return o(h,this._getBindingColumn(this.cells,e,l[i]).binding,n);else if(t==this.rowHeaders){var c;if(!(c=o(h,null,!1))){for(var u=[];e<s.length&&s[e].dataItem==h;e++)for(i=0;i<l.length;i++)(c=o(h,this._getBindingColumn(this.cells,e,l[i]).binding,!1))&&u.indexOf(c)<0&&u.push(c);if(u.length){var d=this.errorTip,p=!!d&&d.isContentHtml;c=u.join(p?"<br/>":"\n")}}return c}}return null},e.prototype._setAria=function(t,e){(0,a.setAttribute)(this.cells.hostElement,"aria-"+t,e)},e.prototype._setFocus=function(t){if(this.hostElement&&(t||!this.containsFocus())){var e=(0,a.getActiveElement)(),i=this.activeEditor,n=this._activeCell,r=this._eFocus,o=this._root,s=this._getTabIndex();i?(0,a.contains)(i,e)||(i.focus(),r.tabIndex=-1):n?(0,a.contains)(n,e)||e==this._root||((0,a.isIE)()&&(0,a.hasClass)(n,"wj-group")&&(n=n.querySelector("."+J._WJC_COLLAPSE)||n),n.tabIndex=s,this._setFocusNoScroll(n),r.tabIndex=-1):(0,a.contains)(r,e)||e==o||(r.tabIndex=s,this._setFocusNoScroll(r)),this.containsFocus()||(r.tabIndex=s,this._setFocusNoScroll(r))}},e.prototype._setFocusNoScroll=function(t){if((0,a.getActiveElement)()!=t){if((0,a.supportsFocusOptions)())t.focus({preventScroll:!0});else{var e=this.scrollPosition,i=t.style,n=i.position;i.position="fixed",t.focus(),i.position=n,this.scrollPosition=e}this._fixScroll()}},e.prototype._updateDefaultSizes=function(){var t=this._getDefaultRowHeight();return this._rows._setDefaultSize(t),this._cols._setDefaultSize(4*t),this._hdrRows._setDefaultSize(t),this._hdrCols._setDefaultSize(Math.round(1.25*t)),this._ftrRows._setDefaultSize(t),t},e.prototype._getDefaultRowHeight=function(){var t=this.hostElement,e=this._eFocus,i=null;e.offsetHeight||(i=(0,a.createElement)('<div><div class="wj-cell">0</div></div>',document.body),t&&i.setAttribute("class",t.getAttribute("class")),e=i.children[0]);var n=e.offsetHeight;return(isNaN(n)||n<=6)&&(n=28),(0,a.removeChild)(i),n},e.prototype._getCollectionView=function(t){return(0,a.asCollectionView)(t)},e.prototype._getCanvasContext=function(){var t=document.createElement("canvas").getContext("2d"),e=getComputedStyle(this.hostElement);return t.font=e.fontSize+" "+e.fontFamily.split(",")[0],t},e.prototype._getWidestRow=function(t,e,i,n){for(var r=0,o=0,s=1===this._getRowsPerItem()&&t.columns[i].dataType==a.DataType.Boolean,l=e.row;l<=e.row2;l++)if(t.rows[l].isVisible){var h=t.getCellData(l,i,!0),c=n.measureText(h).width,u=this.getMergedRange(t,l,i,!1);if(u&&u.columnSpan>1&&(c/=u.columnSpan),c>o&&(o=c,r=l),s)break;l+=u?u.rowSpan-1:0}return r},e.prototype._getDesiredWidth=function(t,e,i,n){var r=this.getMergedRange(t,e,i,!1),o=n.style;return this.cellFactory.updateCell(t,e,i,n,r),o.width=o.top=o.left="",n.offsetWidth/(r&&r.columnSpan>1?r.columnSpan:1)},e.prototype._getDesiredHeight=function(t,e,i,n){var r=n.style,o=this.getMergedRange(t,e,i,!1),s=o?o.rowSpan:1;return this.cellFactory.updateCell(t,e,i,n,o),n.innerHTML.trim()||(n.innerHTML="&nbsp;"),r.height=r.top=r.left="",n.offsetHeight/s},e.prototype._getDesiredRowHeight=function(t,e,i,n){for(var r=0,o=(t.rows[e],this._getQuickAutoSize()),s=0;s<t.columns.length;s++)if(t.columns[s].isVisible){var a=this.getMergedRange(t,e,s,!1),l=void 0;if(o){var h={ct:t.cellType,col:s,spr:a&&a.rowSpan>1?a.rowSpan:1,spc:a&&a.columnSpan>1?a.columnSpan:1,data:t.getCellData(e,s,!0)||"1"},c=JSON.stringify(h);null==(l=n[c])&&(l=this._getDesiredHeight(t,e,s,i),n[c]=l)}else l=this._getDesiredHeight(t,e,s,i);r=Math.max(l,r),s+=a?a.columnSpan-1:0}return r},e.prototype._getSortRowIndex=function(){return null!=this._sortRowIndex?this._sortRowIndex:this.columnHeaders.rows.length-1},e.prototype._getDeleteColumnIndex=function(){return 0},e.prototype._getEditColumnIndex=function(){return null!=this._editColIndex?this._editColIndex:this.rowHeaders.columns.length-1},e.prototype._sortConverter=function(t,e,i,n){var r,o=this;if(n&&(this._mappedColumns=null,this._cv&&this._cv.sortDescriptions.forEach((function(t){(r=o.getColumn(t.property))&&r.dataMap&&(o._mappedColumns||(o._mappedColumns={}),o._mappedColumns[r.binding]=r.dataMap)})),this._mouseHdl._htDown&&this._mouseHdl._htDown.col>-1&&(r=this.columns[this._mouseHdl._htDown.col],this._mappedColumns&&r.dataMap&&(this._mappedColumns[r.binding]=r.dataMap))),this._mappedColumns){var s=this._mappedColumns[t.property];s&&s.sortByDisplayValues&&(i=s.getDisplayValue(i))}return i},e.prototype._bindGrid=function(t){var e=this;if(this.finishEditing(),this.deferUpdate((function(){var i,n;if(e.autoGenerateColumns&&0==e._lastCount&&(0,a.hasItems)(e._cv)&&(t=!0),e.preserveSelectedState&&(i=e._getMap())&&e.rows.forEach((function(t){t.isSelected&&t.dataItem&&i.set(t.dataItem,!0)})),e.preserveOutlineState&&e.rows.maxGroupLevel>-1&&(n=e._getMap()))for(var r=0;r<e.rows.length;r++){var o=e.rows[r];if(o instanceof L&&o.isCollapsed&&o.dataItem){var s=o.dataItem;s instanceof a.CollectionViewGroup&&(s=s._path),n.set(s,!0)}}t&&e.columns.deferUpdate((function(){e._bindColumns()}));var l=new a.CancelEventArgs;e.onLoadingRows(l)&&(e.rows.deferUpdate((function(){e._bindRows()})),e.onLoadedRows(l)),e._selHdl.extendedSelection.clear();var h=0;if(i&&i.size&&e.rows.forEach((function(t){var e=t.dataItem;e&&i.has(e)&&(t.isSelected=!0,h++)})),0==h&&e.selectionMode==b.ListBox){var c=e.selection;for(r=c.topRow;r<=c.bottomRow&&r>-1&&r<e.rows.length;r++)e.rows[r]._setFlag(P.Selected,!0,!0)}if(n&&n.size&&e.rows.deferUpdate((function(){e.rows.forEach((function(t){if(t instanceof L){var e=t.dataItem;e instanceof a.CollectionViewGroup&&(e=e._path),n.has(e)&&(t.isCollapsed=!0)}}))})),!e._lastCount){var u=e._cv;u&&u.items&&(e._lastCount=u.items.length)}})),this._cv){var i=t&&!this._toInv;this._syncSelection(i)}else{var n=this.selection,r=new y(-1,n.col,-1,n.col2);this._selHdl._adjustSelection(r,this.selectionMode)}},e.prototype._getMap=function(){return window.Map?new Map:null},e.prototype._cvCollectionChanged=function(t,e){if(this.autoGenerateColumns&&0==this.columns.length)this._bindGrid(!0);else{var i=a.NotifyCollectionChangedAction;if(this.childItemsPath&&e.action!=i.Change)this._bindGrid(!1);else{switch(e.action){case i.Change:return void this.invalidate();case i.Add:if(e.index==this._cv.items.length-1){var n=this.rows.length;return this.rows[n-1]instanceof W&&n--,void this.rows.insert(n,new O(e.item))}(0,a.assert)(!1,"added item should be the last one.");break;case i.Remove:var r=this._findRow(e.item);if(r>-1)return this.rows.removeAt(r),void this._syncSelection(!1);(0,a.assert)(!1,"removed item not found on grid.")}this._bindGrid(!1)}}},e.prototype._cvCurrentChanged=function(t,e){this._syncSelection(!1)},e.prototype._syncSelection=function(t){if(this._cv&&this.selectionMode!=b.None){var e=this._selHdl,i=e.selection,n=i.row>-1&&i.row<this.rows.length?this.rows[i.row]:null,r=n?n.dataItem:null,o=this._cv;if(o instanceof a.CollectionView&&o.isUpdating)return;if(this.newRowAtTop&&n instanceof W)return;r instanceof a.CollectionViewGroup&&(r=null);var s=this._isISChanging;if(t||r!=o.currentItem||i.row>=this.rows.length||s&&i.row!==i.row2){var l=this.editableCollectionView;if(!this.childItemsPath||!l||!l.currentAddItem){var h=this._getRowIndex(o.currentPosition);if(h!=i.row||!this.childItemsPath){var c=s?i.col:i.col2;i=new y(h,i.col,h,c),e._adjustSelection(i,this.selectionMode),this.selectionMode&&!this._updating&&this.scrollIntoView(i.row,-1)}}}}},e.prototype._getRowIndex=function(t){if(this._cv){var e=this.rows;if(t>-1){for(var i=this._cv.items[t];t<e.length;t++)if(e[t].dataItem===i)return t;return-1}if(1==e.length&&e[0]instanceof W)return 0;var n=this.selection.row,r=n>-1?e[n]:null;return r&&(r instanceof L||null==r.dataItem)?n:-1}return this.selection.row},e.prototype._getCvIndex=function(t){return t>-1&&t<this.rows.length?this.rows[t].dataIndex:-1},e.prototype._findRow=function(t){for(var e=0;e<this.rows.length;e++)if(this.rows[e].dataItem==t)return e;return-1},e.prototype._updateLayout=function(){var t=new a.CancelEventArgs;if(this.onUpdatingLayout(t)){var i=this._hdrVis&D.Row?this._hdrCols.getTotalSize():0,n=this._hdrVis&D.Column?this._hdrRows.getTotalSize():0,r=this._ftrRows.getTotalSize(),o=this._rows.getTotalSize()+r;o<1&&(o=1),this._heightReal=o,this._heightBrowser=Math.min(o,e._getMaxSupportedCssHeight()),this._maxOffsetY=Math.max(0,o-this._heightBrowser);var s=getComputedStyle(this._eFocus);this._cellPadVert=parseInt(s.paddingTop)+parseInt(s.paddingBottom),this._cellPadHorz=parseInt(s.paddingLeft)+parseInt(s.paddingRight),this._cellPadLeft=parseInt(this.rightToLeft?s.paddingRight:s.paddingLeft);var l=this._heightBrowser+n-r,h=this._gpCells.width,c=this._heightBrowser;!h&&this.rows.length&&(h=.1),!c&&this.columns.length&&(c=.1),this.rightToLeft?((0,a.setCss)(this._eTL,{right:0,top:0,width:i,height:n}),(0,a.setCss)(this._eCHdr,{right:i,top:0,height:n}),(0,a.setCss)(this._eRHdr,{right:0,top:n,width:i}),(0,a.setCss)(this._eCt,{right:i,top:n,width:h,height:c}),(0,a.setCss)(this._fCt,{right:i,top:n}),(0,a.setCss)(this._eBL,{right:0,top:l,width:i,height:r}),(0,a.setCss)(this._eCFtr,{right:i,top:l,height:r})):((0,a.setCss)(this._eTL,{left:0,top:0,width:i,height:n}),(0,a.setCss)(this._eCHdr,{left:i,top:0,height:n}),(0,a.setCss)(this._eRHdr,{left:0,top:n,width:i}),(0,a.setCss)(this._eCt,{left:i,top:n,width:h,height:c}),(0,a.setCss)(this._fCt,{left:i,top:n}),(0,a.setCss)(this._eBL,{left:0,top:l,width:i,height:r}),(0,a.setCss)(this._eCFtr,{left:i,top:l,height:r})),this._stickyHdr&&this._updateStickyHeaders();var u=this.frozenRows||this.frozenColumns?"3":"";(0,a.setCss)([this._eTL,this._eBL,this._eCHdr,this._eCFtr,this._eRHdr,this._eMarquee],{zIndex:u}),(0,a.isIE)()&&(this._fCt.style.zIndex=u?"2":"");var d=this._root,p=d.offsetWidth-d.clientWidth,f=d.offsetHeight-d.clientHeight;(0,a.setCss)(this._eSz,{width:i+p+this._gpCells.width,height:n+f+this._heightBrowser});var _=null;this.columns._updateStarSizes(d.clientWidth-i)&&(_=d.clientWidth,(0,a.setCss)(this._eCt,{width:this._gpCells.width}),this.onStarSizedColumns()),this._szClient=new a.Size(d.clientWidth-i,d.clientHeight-n),this._szClientSB=new a.Size(d.offsetWidth-i,d.offsetHeight-n),this._rcBounds=null,this._updateScrollHandler(),this._updateContent(!1),p=d.offsetWidth-d.clientWidth,f=d.offsetHeight-d.clientHeight,(0,a.setCss)(this._eSz,{width:i+p+this._gpCells.width,height:n+f+this._heightBrowser}),this._szClient=new a.Size(d.clientWidth-i,d.clientHeight-n),_&&_!=d.clientWidth&&this.columns._updateStarSizes(d.clientWidth-i)&&((0,a.setCss)(this._eCt,{width:this._gpCells.width}),this._updateContent(!1)),(0,a.setCss)([this._eCHdr,this._eCFtr,this._fCt],{width:this._szClient.width}),(0,a.setCss)([this._eRHdr,this._fCt],{height:this._szClient.height}),r&&(l=Math.min(l,this._szClient.height+n-r),(0,a.setCss)([this._eBL,this._eCFtr],{top:l})),this.onUpdatedLayout(t)}},e.prototype._updateStickyHeaders=function(){var t=!1,i=0;if(this._stickyHdr){for(var n=0,r=null,o=this.hostElement;o;o=o.parentElement)if("inline"!=getComputedStyle(o).display){var s=o.getBoundingClientRect();null==r&&(r=s.top),n=Math.max(n,s.top)}i=-(r=Math.max(0,n-r-1)),t=r>0,this._rcBounds=null}this._eTL.style.top=this._eCHdr.style.top=t?-i+"px":"",(0,a.toggleClass)(this._eTL,e._WJS_STICKY,t),(0,a.toggleClass)(this._eCHdr,e._WJS_STICKY,t)},e.prototype._updateScrollHandler=function(){this._clipToScreen=this._getClipToScreen();var t=this._stickyHdr||this._clipToScreen;t!=this._scrollHandlerAttached&&(this._scrollHandlerAttached=t,t?this.addEventListener(window,"scroll",this._scroll.bind(this),!0):this.removeEventListener(window,"scroll"))},e.prototype._getClipToScreen=function(){if(this.rows.length<=e._MIN_VIRT_ROWS)return!1;if(this._root.scrollHeight>this._root.clientHeight)return!1;for(var t=this.hostElement;t&&t!=document.documentElement;t=t.parentElement)if("auto"==getComputedStyle(t).overflow)return!1;return!0},e.prototype._scroll=function(t){var e=this;(0,a.contains)(t.target,this.hostElement)&&(this._clipToScreen&&(this._afClip&&cancelAnimationFrame(this._afClip),this._afClip=requestAnimationFrame((function(){e._afClip=null,e.finishEditing(),e._updateContent(!0)}))),this._stickyHdr&&(this._afSticky&&cancelAnimationFrame(this._afSticky),this._afSticky=requestAnimationFrame((function(){e._afSticky=null;var t=new a.CancelEventArgs;e.onUpdatingLayout(t)&&(e._updateStickyHeaders(),e.onUpdatedLayout(t))}))))},e.prototype._getCssPage=function(t){if(this._heightReal>this._heightBrowser){var e=this._szClient.height-this._gpCFtr.rows.getTotalSize();if(this._heightBrowser>e)return(0,a.clamp)(Math.round(t/(this._heightBrowser-e)*10)/10,0,1)}return 0},e.prototype._updateScrollPosition=function(){var t=this._root,i=t.scrollTop,n=t.scrollLeft;this.rightToLeft&&"rev"==e._getRtlMode()&&(n=t.scrollWidth-t.clientWidth-n);var r=new a.Point(-Math.abs(n),-i);return!this._ptScrl.equals(r)&&(this._ptScrl=r,this.onScrollPositionChanged(),!0)},e.prototype._updateContent=function(t,e){var i=this,n=this._root,r=this.hostElement,o=this.cells.hostElement,s=this._activeCell,l=(0,a.getActiveElement)(),h=(0,a.contains)(r,l),c=(0,a.closest)(l,".wj-flexgrid")==r?l:null,u=new a.CancelEventArgs;if(this.onUpdatingView(u)){(0,a.setAttribute)(o,"role",this.rows.maxGroupLevel<0?"grid":"treegrid"),this._hasValidation=(0,a.isFunction)(this._itemValidator)||this._cv&&(0,a.isFunction)(this._cv.getError);var d=!e&&this._errorTip&&this._errorTip._tips.length,p=this._getCssPage(-this._ptScrl.y);p!=this._cssPage&&(this._cssPage=p,this._offsetY=Math.round(this._maxOffsetY*p)),this._updateScrollPosition(),this._updateMarquee();var f=this._gpCells._updateContent(t,e,this._offsetY),_=this._hdrVis;if(_&D.Column&&(!e||this._ssHdr&_)&&(this._gpCHdr._updateContent(t,e,0),this.rightToLeft||(this._eCHdr.scrollLeft=0)),_&D.Row&&(!e||this._ssHdr&_)&&(this._gpRHdr._updateContent(t,e,this._offsetY),this._eRHdr.scrollTop=0),_&&!e&&this._gpTL._updateContent(t,e,0),this._gpCFtr.rows.length&&(this._gpBL._updateContent(t,e,0),this._gpCFtr._updateContent(t,e,0)),d&&this._errorTip&&this._errorTip._tips.length&&(clearTimeout(this._toErrorTips),this._toErrorTips=setTimeout((function(){var t=i._errorTip;if(t){t.hide();for(var e=t._tips,n=0;n<e.length;n++){var r=e[n].element;r.offsetHeight&&(0,a.hasClass)(r,"wj-state-invalid")||(t.setTooltip(r,null),n--)}}}),250)),this._useFrozenDiv()&&(this._updateFrozenCells(e),f&&(0,a.hasClass)(f,"wj-frozen")&&(f=null)),this._fCt.style.display=this._fCt.childElementCount?"":"none",this._activeCell=f,c)if(c!=n&&c!=this._eFocus&&(0,a.contains)(r,c)&&!(0,a.contains)(o,c)){if((0,a.getActiveElement)()!==c&&c.focus(),(0,a.isIE)()&&c instanceof HTMLInputElement&&!c.type.match(/checkbox|radio|range/i)){var g=c.selectionStart,m=c.selectionEnd;c.setSelectionRange(g,m)}}else{var y=f!==s;this._setFocus(y)}!c&&f&&(f.tabIndex=this.isDisabled?-1:this._orgTabIndex),s&&s!=f&&(s.tabIndex=-1),this._eFocus.tabIndex=null!=f||this.isDisabled?-1:this._orgTabIndex,h&&this.focus(),this._fixScroll(),this._rcBounds=null,this.onUpdatedView(u)}},e.prototype._fixScroll=function(){var t=this._root;if(!this._updating){var e=this.hostElement,i=t?t.parentElement:null,n=this.rightToLeft;e&&(e.scrollTop&&(e.scrollTop=0),e.scrollLeft&&!n&&(e.scrollLeft=0)),i&&(i.scrollTop&&(i.scrollTop=0),i.scrollLeft&&!n&&(i.scrollLeft=0))}var r=d();t&&r&&14==r.major&&r.minor>=1&&(t.style.transform="",t.style.transform="translateZ(0)")},e.prototype._clearCells=function(){for(var t in this)if("_"==t[0]){var e=this[t];e instanceof C&&e._clearCells()}this.invalidate()},e.prototype._useFrozenDiv=function(){return(0,a.isBoolean)(this._fzClone)?this._fzClone:(0,a.isIE)()||(0,a.isFirefox)()||(0,a.isSafari)()||(0,a.isMobile)()},e.prototype._updateFrozenCells=function(t){var e=this._fCt;if(this.frozenRows||this.frozenColumns){var i=this._eCt.querySelectorAll(".wj-frozen");if(t&&e.children.length==i.length){for(var n=0;n<i.length;n++)e.children[n].className=i[n].className;return}if((0,a.setText)(e,null),!this.activeEditor){var r=this._errorTip,o=navigator.userAgent.indexOf("MSIE")>=0;for(n=0;n<i.length;n++){var s=i[n];if((0,a.closest)(s,".wj-flexgrid")==this.hostElement){var l=s[C._INDEX_KEY],h=s.firstElementChild,c=null;if(l&&h){var u=l.panel,d=this._getBindingColumn(u,l.row,u.columns[l.col]);c=(0,a.isFunction)(d.cellTemplate)?h.onclick:null}if(o){var p="input[type=checkbox]",f=s.querySelector(p);s=s.cloneNode(!0),f&&(s.querySelector(p).checked=f.checked)}else s=s.cloneNode(!0);if(h=s.firstElementChild,c&&h&&(h.onclick=c),s[C._INDEX_KEY]=l,r){var _=r.getTooltip(i[n]);_&&r.setTooltip(s,_)}e.appendChild(s)}}}}else(0,a.setText)(e,null)},e.prototype._updateMarquee=function(){var t=this._eMarquee,e=this._getMarqueeRect();if(e&&e.width&&e.height){var i=t.firstChild,n=t.offsetWidth-i.offsetWidth,r=t.offsetHeight-i.offsetHeight,o=this.cells.hostElement;(0,a.setCss)(t,{left:e.left+o.offsetLeft-n/2,top:e.top+o.offsetTop-r/2,width:e.width+n,height:e.height+r,display:""})}else t.style.display="none"},e.prototype._getMarqueeRect=function(){if(!this._shMarquee||!this.selectionMode)return null;var t=this._selHdl.selection;if(!this.isRangeValid(t))return null;t=(t=(t=this.cells._getAdjustedSelection(t)).combine(this.getMergedRange(this.cells,t.topRow,t.leftCol,!1))).combine(this.getMergedRange(this.cells,t.bottomRow,t.rightCol,!1));var e=this.cells.getCellBoundingRect(t.topRow,t.leftCol,!0),i=this.cells.getCellBoundingRect(t.bottomRow,t.rightCol,!0);if(this.rows.frozen){var n=Math.min(this.rows.length,this.rows.frozen),r=this.cells.getCellBoundingRect(n-1,0,!0);t.topRow>=n&&e.top<r.bottom&&(e.top=r.bottom),t.bottomRow>=n&&i.bottom<r.bottom&&(i.height=r.bottom-i.top)}if(this.columns.frozen){var o=Math.min(this.columns.length,this.columns.frozen);r=this.cells.getCellBoundingRect(0,o-1,!0),this.rightToLeft?(t.leftCol>=o&&e.right>r.left&&(e.left=r.left-e.width),t.rightCol>=o&&i.left>r.left&&(i.left=r.left)):(t.leftCol>=o&&e.left<r.right&&(e.left=r.right),t.rightCol>=o&&i.right<r.right&&(i.width=r.right-i.left))}return this.rightToLeft?new a.Rect(i.left,e.top,e.right-i.left,i.bottom-e.top):new a.Rect(e.left,e.top,i.right-e.left,i.bottom-e.top)},e.prototype._bindColumns=function(){for(var t=this.columns,i=0;i<t.length;i++)t[i]._getFlag(P.AutoGenerated)&&(t.removeAt(i),i--);var n=this._cv,r=n?n.items:null;r&&r.length&&this.autoGenerateColumns&&this._getColumnTypes(r).forEach((function(i){var n=new k(i);n._setFlag(P.AutoGenerated,!0),n.name=n.binding,n.header=(0,a.toHeaderCase)(n.binding);var r=e._defTypeWidth[n.dataType];if(null!=r){if((0,a.isString)(r)){var o=Math.round(parseFloat(r));r=r.indexOf("*")>-1?o*t.defaultSize:o}(0,a.isNumber)(r)&&r>0&&(n.width=r)}t.push(n)})),this._updateColumnTypes()},e.prototype._getColumnTypes=function(t){return(0,a.getTypes)(t)},e.prototype._updateColumnTypes=function(){var t=this._cv;if((0,a.hasItems)(t)){var e=t.items[0];this.columns.forEach((function(t){null==t.dataType&&t._binding&&(t.dataType=(0,a.getType)(t._binding.getValue(e)))}))}},e.prototype._getMapEditor=function(t,e){return e.editor?null!=e.editor.isDroppedDown?e.dataMapEditor:null:!t.dataMap||t instanceof L?e.dataMap?e.dataMapEditor:null:t.dataMapEditor},e.prototype._getBindingColumn=function(t,e,i){return i},e.prototype._getBindingColumns=function(){return this.columns},e.prototype._getRowsPerItem=function(){return 1},e.prototype._isTransposed=function(){return!1},e.prototype._getRowHeaderPath=function(){return this._rowHdrPath},e.prototype._bindRows=function(){this.rows.clear();var t=this._cv;if(t&&t.items){var e=t.items,i=t.groups;if(this.childItemsPath)for(var n=0;n<e.length;n++)this._addNode(e,n,0);else if(null!=i&&i.length>0&&this.showGroups)for(n=0;n<i.length;n++)this._addGroup(i[n]);else for(n=0;n<e.length;n++)this._addBoundRow(e,n)}},e.prototype._addBoundRow=function(t,e){var i=new O(t[e]),n=this.rows;i._list=n,n[n.length++]=i},e.prototype._addGroupRow=function(t){this.rows.push(new L(t))},e.prototype._addNode=function(t,e,i){var n=t[e],r=this.childItemsPath,o=n[(0,a.isArray)(r)?r[i]:r],s=new L(n);if(s.level=i,this.rows.push(s),(0,a.isArray)(o))for(var l=0;l<o.length;l++)this._addNode(o,l,i+1)},e.prototype._addGroup=function(t){if(this._addGroupRow(t),t.isBottomLevel)for(var e=t.items,i=0;i<e.length;i++)this._addBoundRow(e,i);else for(i=0;i<t.groups.length;i++)this._addGroup(t.groups[i])},e._getSerializableProperties=function(t){var e=[];for(t=t.prototype;t!=Object.prototype;t=Object.getPrototypeOf(t))for(var i=Object.getOwnPropertyNames(t),n=0;n<i.length;n++){var r=i[n],o=Object.getOwnPropertyDescriptor(t,r);o&&o.set&&o.get&&"_"!=r[0]&&!r.match(/^(disabled|required|showDropDown)$/)&&e.push(r)}return e},e.prototype._hasColumnGroups=function(){return this._grpHdl.hasColumnGroups()},e.prototype._getColumnGroup=function(t,e){return this._grpHdl.getColumnGroup(t,e)},e.prototype._canMoveColumnGroup=function(t,e,i,n){return this._grpHdl.canMoveColumnGroup(t,e,i,n)},e.prototype._moveColumnGroup=function(t,e,i,n,r){return this._grpHdl.moveColumnGroup(t,e,i,n,r)},e.prototype._copy=function(t,e){var i=this;if("columns"==t){var n=(0,a.asArray)(e);return n.some((function(t){return null!=t.columns}))?this.columnGroups=n:(this.columns.clear(),n.forEach((function(t){var e=new k(t);i.columns.push(e)}))),!0}return!1},e.prototype._isInputElement=function(t){return t instanceof HTMLElement&&!(0,a.hasClass)(t,"wj-btn-glyph")&&("true"==t.contentEditable||null!=t.tagName.match(/^(INPUT|TEXTAREA|BUTTON|A|SELECT|OPTION)$/i))},e.prototype._isNativeCheckbox=function(t){return t instanceof HTMLInputElement&&"checkbox"==t.type&&!t.disabled&&!t.readOnly&&(0,a.hasClass)(t,J._WJC_CHECKBOX)&&(0,a.closest)(t,".wj-flexgrid")==this.hostElement},e.prototype._wantsInput=function(t){return this._isInputElement(t)&&!this.activeEditor&&!this._isNativeCheckbox(t)&&!(0,a.hasClass)(t,"wj-grid-ime")&&(0,a.contains)(document.body,t)},e._getMaxSupportedCssHeight=function(){if(!e._maxCssHeight){var t=265e5;(0,a.isIE)()?t=15e5:(0,a.isFirefox)()&&(t=175e5),e._maxCssHeight=t}return e._maxCssHeight},e._getRtlMode=function(){if(!e._rtlMode){var t=(0,a.createElement)('<div dir="rtl"><div></div></div>');(0,a.setCss)(t,{visibility:"hidden",width:100,height:100,overflow:"auto"}),(0,a.setCss)(t.firstChild,{width:2e3,height:2e3}),document.body.appendChild(t);var i=t.scrollLeft;t.scrollLeft=-1e3;var n=t.scrollLeft;(0,a.removeChild)(t),e._rtlMode=n<0?"neg":i>0?"rev":"std"}return e._rtlMode},e._WJS_STICKY="wj-state-sticky",e._WJS_MEASURE="wj-state-measuring",e._WJS_UPDATING="wj-state-updating",e._WJS_WSPRE="wj-whitespace-pre",e._MIN_VIRT_ROWS=200,e._defTypeWidth=((n={})[a.DataType.Number]="0.714285714*",n),e.controlTemplate='<div><div wj-part="root"><div wj-part="cells" class="wj-cells"></div><div wj-part="marquee" class="wj-marquee"><div></div></div></div><div wj-part="fcells" aria-hidden="true" class="wj-cells wj-frozen-clone"></div><div wj-part="rh"><div wj-part="rhcells" class="wj-rowheaders"></div></div><div wj-part="cf"><div wj-part="cfcells" class="wj-colfooters"></div></div><div wj-part="ch"><div wj-part="chcells" class="wj-colheaders"></div></div><div wj-part="bl"><div wj-part="blcells" class="wj-bottomleft"></div></div><div wj-part="tl"><div wj-part="tlcells" class="wj-topleft"></div></div><div wj-part="focus" class="wj-cell">0</div><div wj-part="sz"></div></div>',e}(a.Control),Y=function(){function t(e){this._updateImeFocusAsyncBnd=this._updateImeFocusAsync.bind(this),this._cmpstartBnd=this._compositionstart.bind(this),this._keypressBnd=this._keypress.bind(this),this._g=e;var i=(0,a.createElement)('<textarea class="wj-grid-editor wj-form-control wj-grid-ime" aria-hidden="true"/>');(0,a.setCss)(i,t._cssHidden),(0,a.disableAutoComplete)(i),i.tabIndex=-1,this._tbx=i,this._maskProvider=new a._MaskProvider(i),e._root.appendChild(i),this._updateImeFocus();var n=e.hostElement,r=e.addEventListener.bind(e),o=this._updateImeFocusAsyncBnd;r(n,"blur",o,!0),r(n,"focus",o,!0),r(i,"compositionstart",this._cmpstartBnd),(0,a.isiOS)()&&r(n,"keypress",this._keypressBnd),e.selectionChanged.addHandler(o,this),e.cellEditEnded.addHandler(this._cellEditEnded,this),e.cellEditEnding.addHandler(this._cellEditEnding,this)}return t.prototype.dispose=function(){var t=this._g,e=t.hostElement,i=this._tbx,n=t.removeEventListener.bind(t),r=this._updateImeFocusAsyncBnd;n(e,"blur",r),n(e,"focus",r),n(e,"keypress",this._keypressBnd),n(i,"compositionstart",this._cmpstartBnd),t.selectionChanged.removeHandler(r),t.cellEditEnded.removeHandler(this._cellEditEnded),t.cellEditEnding.removeHandler(this._cellEditEnding),(0,a.removeChild)(i)},t.prototype._compositionstart=function(t){var e=this._g;if(!e.activeEditor){var i=e._selHdl.selection;if(e.startEditing(!1,i.row,i.col,!1,t)&&e.activeEditor&&"checkbox"!=e.activeEditor.type){i=e.editRange;var n=e._getBindingColumn(e.cells,i.row,e.columns[i.col]),r=n&&n._edt,o=e.activeEditor,s=this._tbx,l=e.cells.hostElement,h=e.columns[i.col].pos+l.offsetLeft,c=e.rows[i.row].pos+l.offsetTop,u=e.getCellBoundingRect(i.row,i.col),d=(0,a.closest)(o,".wj-cell");u.width=d.offsetWidth,u.height=d.offsetHeight,i.row<e.frozenRows&&(c+=e._root.scrollTop),i.col<e.frozenColumns&&(h+=e._root.scrollLeft);var p=d.querySelector(".wj-btn.wj-right");p&&(u.width-=p.offsetWidth),"minLength,maxLength,pattern".split(",").forEach((function(t){(0,a.setAttribute)(s,t,o.getAttribute(t))}));var f=o instanceof HTMLTextAreaElement;(0,a.setAttribute)(s,"wrap",f?"soft":"off");var _=getComputedStyle(d),g=_.paddingTop;if(i.rowSpan>1&&!f){var m=parseFloat(_.lineHeight);isNaN(m)&&(m=1.2*parseFloat(_.fontSize)),g=Math.max(0,(u.height-m)/2)+"px"}var y={position:"absolute",left:h,top:c,width:u.width-1,height:u.height-1,paddingTop:g,paddingLeft:_.paddingLeft,paddingRight:_.paddingRight,textAlign:_.textAlign,zIndex:d.style.zIndex};if(e.rightToLeft&&(y.right=parseInt(d.style.right)+parseInt(e.cells.hostElement.style.right),y.left=""),(0,a.setCss)(s,y),r){var b=r._tbx.getBoundingClientRect(),v=s.getBoundingClientRect(),w=window.getComputedStyle(s),C=parseFloat(w.left),x=parseFloat(w.top);(0,a.setCss)(s,{left:C+b.left-v.left+"px",top:x+b.top-v.top+"px",width:b.width+"px",height:b.height+"px"})}e._edtHdl._edt=s,s.select();var S=o.value;setTimeout((function(){""!=s.value&&" "!=s.value||(s.value=S),(0,a.setSelectionRange)(s,s.value.length)}),20),s.placeholder=o.placeholder,o.placeholder="",o.value=""}}},t.prototype._cellEditEnding=function(){var t=this._maskProvider;t&&t.mask&&t._valueChanged()},t.prototype._cellEditEnded=function(){var e=this._tbx;e.value="",(0,a.setCss)(e,t._cssHidden),this._updateImeFocus()},t.prototype._keypress=function(t){t.defaultPrevented||t.target!=this._tbx||t.ctrlKey||t.altKey||t.metaKey||27==t.keyCode||this._g.activeEditor||(this._tbx.value="",this._compositionstart(t),t.stopPropagation())},t.prototype._updateImeFocus=function(){var t=this._g,e=this._tbx,i=(0,a.getActiveElement)(),n=t._getTabIndex();if(t.activeEditor||(0,a.closest)(i,".wj-flexgrid")!=t.hostElement)(t.isDisabled||n<0)&&e.tabIndex>=0&&(e.tabIndex=-1);else if(this._enableIme()&&!t._wantsInput(i)){i!=e&&(t.activeCell&&(t.activeCell.tabIndex=-1),e.tabIndex=n,e.disabled=!1,e.value="",(0,a.setSelectionRange)(e,0),e.focus());var r=t._selHdl.selection,o=r.isValid?t._getBindingColumn(t.cells,r.row,t.columns[r.col]):null;this._maskProvider.mask=o?o.mask:null}else if(e.tabIndex=-1,e.disabled=!0,e.value="",i==e){e.blur();var s=t.activeCell;s?(s.tabIndex=n,s.focus()):t.focus()}},t.prototype._updateImeFocusAsync=function(){var t=this;this._toFocus&&clearTimeout(this._toFocus),this._toFocus=setTimeout((function(){t._toFocus=null,t._updateImeFocus()}),100)},t.prototype._enableIme=function(){var t=this._g,e=t._selHdl.selection;if(!t.canEditCell(e.row,e.col))return!1;var i=e.isValid?t._getBindingColumn(t.cells,e.row,t.columns[e.col]):null;return!(!i||i.dataType==a.DataType.Boolean||i&&i.dataMap&&i.dataMapEditor==o.RadioButtons)},t._cssHidden={position:"fixed",width:"1px",left:-32e3,top:-32e3,overflow:"hidden"},t}(),K=function(){function t(t){this._nrt=new W,this._top=!1,this._keydownBnd=this._keydown.bind(this),this._committing=!1,this._pasting=!1,this._g=t,this._attach()}return Object.defineProperty(t.prototype,"newRowAtTop",{get:function(){return this._top},set:function(t){if(t!=this.newRowAtTop){this._top=(0,a.asBoolean)(t),this.updateNewRowTemplate();var e=this._g;this._top&&e.selectionMode==b.ListBox&&(e.rows.forEach((function(t,e){t._setFlag(P.Selected,0==e,!0)})),e.select(0,e.selection.col))}},enumerable:!0,configurable:!0}),t.prototype.updateNewRowTemplate=function(){var t=this._g,e=t.editableCollectionView,i=t.rows,n=this._nrt,r=e&&e.canAddNew&&t.allowAddNew&&!t.isReadOnly,o=i.indexOf(n),s=this._top?0:i.length-1,a=!1;if(!r&&o>-1){var l=t.selection;l.row==o&&t.select(l.row-1,l.col),i.removeAt(o)}else r&&(o<0?a=!0:o!=s&&(i.removeAt(o),a=!0),a&&(this._top?i.insert(0,n):i.push(n)),n&&(n._ubv=null,n._setFlag(P.ParentCollapsed,!1),this._top&&t.selectionMode==b.ListBox||n._setFlag(P.Selected,!1)))},t.prototype._attach=function(){var t=this._g;t&&(t.pasting.addHandler(this._pastingData,this),t.pasted.addHandler(this._pastedData,this),t.loadedRows.addHandler(this.updateNewRowTemplate,this),t.hostElement.addEventListener("keydown",this._keydownBnd,!0))},t.prototype._detach=function(){var t=this._g;t&&(t.pasting.removeHandler(this._pastingData,this),t.pasted.removeHandler(this._pastedData,this),t.loadedRows.removeHandler(this.updateNewRowTemplate),t.hostElement.removeEventListener("keydown",this._keydownBnd,!0))},t.prototype._keydown=function(t){!t.defaultPrevented&&t.keyCode==a.Key.Escape&&null==this._g.activeEditor&&this._top&&this._nrt.dataItem&&(this._nrt.dataItem=null,this._g.invalidate())},t.prototype._beginningEdit=function(t,e){if(!e.cancel){var i=t.rows[e.row];i instanceof W&&this._handleEditStarting(t,e,i)}},t.prototype._pastingData=function(t,e){e.cancel||(this._pasting=!0)},t.prototype._pastedData=function(t,e){this._pasting=!1},t.prototype._rowEditStarting=function(t,e){if(this._pasting){var i=t.rows[e.row];i instanceof W&&this._handleEditStarting(t,e,i)}},t.prototype._rowEditEnding=function(t,e){var i=t.editableCollectionView,n=this._nrt.dataItem;if(i&&this._top&&n&&!e.cancel){var r=i.currentAddItem;if(!r||r!=n)for(var o in r=i.addNew(),n)r[o]=n[o]}},t.prototype._rowEditEnded=function(t,e){var i=this,n=t.editableCollectionView;if(n&&!this._committing)if(this._top){if(e.cancel)return;var r=this._nrt.dataItem;if(r){this._committing=!0,this._nrt.dataItem=null;var o=this._g.rows,s=n.items.indexOf(r)+1;s<o.length&&e._rng.setRange(s,-1),t.onRowAdded(e)?n.commitNew():n.cancelNew(),this._committing=!1}var a=t.rows[e.row];setTimeout((function(){a instanceof W&&t.select(0,t.columns.firstVisibleIndex),i.updateNewRowTemplate()}),20)}else n.isAddingNew&&n.commitNew()},t.prototype._handleEditStarting=function(t,e,i){var n=t.editableCollectionView;if(n&&n.canAddNew)if(this._top)if(null==this._nrt.dataItem){var r=null,o=n.sourceCollection,s=n.newItemCreator;r=(0,a.isFunction)(s)?s():o&&o.length?new o[0].constructor:{},this._nrt.dataItem=r}else n.currentAddItem&&(t.onRowAdded(e)||n.cancelNew());else{r=n.currentAddItem&&n.currentAddItem==i.dataItem?n.currentAddItem:n.addNew(),n.moveCurrentTo(r);var l=this._nrt.isSelected;this.updateNewRowTemplate(),l&&e.row>-1&&(t.rows[e.row].isSelected=!0),t.isUpdating||t.refresh(!0),t.onRowAdded(e)||n.cancelNew()}},t}(),W=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c(e,t),e}(O);!function(t){t[t.None=0]="None",t[t.Cells=1]="Cells",t[t.ColumnHeaders=2]="ColumnHeaders",t[t.RowHeaders=4]="RowHeaders",t[t.AllHeaders=6]="AllHeaders",t[t.All=7]="All"}(V||(V={}));var U=function(){function t(t){null!=t&&console.error('** WARNING: the "grid" parameter has been deprecated. Please remove it.')}return t.prototype.getMergedRange=function(t,e,i,n){void 0===n&&(n=!0);var r=t.grid,o=t.cellType,s=t.columns,l=t.rows,h=l[e],c=s[i];if(h instanceof W)return null;if(!(h instanceof O&&c instanceof k))return null;if(t==r.columnHeaders){var u=r._getColumnGroup(e,i);if(u){var d=u._rng,p=t.columns;return p.isFrozen(d.col)!=p.isFrozen(d.col2)&&(d=d.clone(),p.isFrozen(i)?d.col2=p.frozen-1:d.col=p.frozen),d}}if(r.showGroups&&!r.childItemsPath&&h instanceof L&&h.dataItem instanceof a.CollectionViewGroup&&o==g.Cell){if(d=new y(e,i),c.aggregate==a.Aggregate.None){for(;d.col>0&&s[d.col-1].aggregate==a.Aggregate.None&&d.col!=s.frozen;)d.col--;for(;d.col2<s.length-1&&s[d.col2+1].aggregate==a.Aggregate.None&&d.col2+1!=s.frozen;)d.col2++}for(;d.col<i&&!s[d.col].visible;)d.col++;return d.isSingleCell?null:d}var f=!1,_=V,m=g;switch(r.allowMerging){case _.None:f=!0;break;case _.Cells:f=o!=m.Cell;break;case _.ColumnHeaders:f=o!=m.ColumnHeader&&o!=m.TopLeft;break;case _.RowHeaders:f=o!=m.RowHeader&&o!=m.TopLeft;break;case _.AllHeaders:f=o==m.Cell}if(f)return null;if(o==m.Cell){var b=r.editableCollectionView,v=b?b.currentAddItem:null;if(v&&h.dataItem==v)return null}if(s[i].allowMerging){d=new y(e,i);var w=t._vrb,C=0,x=l.length-1;e>=l.frozen?n&&(o==g.Cell||o==g.RowHeader)&&r._vtRows<l.length&&w&&(C=w.topRow,x=w.bottomRow):l.length>l.frozen&&(x=l.frozen-1);for(var S=e-1;S>=C&&this._mergeCell(t,S,i,e,i);S--)d.row=S;for(var E=e+1;E<=x&&this._mergeCell(t,e,i,E,i);E++)d.row2=E;for(;d.row<e&&!l[d.row].visible;)d.row++;if(!d.isSingleCell)return d}if(l[e].allowMerging){d=new y(e,i),w=t._vrb;var P=0,T=s.length-1;i>=s.frozen?n&&(o==g.Cell||o==g.ColumnHeader)&&r._vtCols<s.length&&w&&(P=w.leftCol,T=w.rightCol):T=s.frozen-1;for(var M=i-1;M>=P&&this._mergeCell(t,e,M,e,i);M--)d.col=M;for(var I=i+1;I<=T&&this._mergeCell(t,e,i,e,I);I++)d.col2=I;for(;d.col<i&&!s[d.col].visible;)d.col++;if(!d.isSingleCell)return d}return null},t.prototype._mergeCell=function(t,e,i,n,r){var o=t.rows[e],s=t.rows[n];if(!o||!s)return!1;if(o instanceof L||o instanceof W||s instanceof L||s instanceof W)return!1;var a=t.grid.editableCollectionView,l=a?a.currentAddItem:null;if(l&&(o.dataItem==l||s.dataItem==l))return!1;if(e!=n&&t.rows.isFrozen(e)!=t.rows.isFrozen(n))return!1;if(i!=r&&t.columns.isFrozen(i)!=t.columns.isFrozen(r))return!1;if(e!=n){if(i>0&&(o.allowMerging&&this._mergeCell(t,e,i-1,e,i)||s.allowMerging&&this._mergeCell(t,n,i-1,n,i)))return!1;if(r<t.columns.length-1&&(o.allowMerging&&this._mergeCell(t,e,r,e,r+1)||s.allowMerging&&this._mergeCell(t,n,r,n,r+1)))return!1}return t.getCellData(e,i,!0)==t.getCellData(n,r,!0)},t}(),X=function(){function t(e,i){var n;if(this._row=-1,this._col=-1,this._edge=0,i instanceof Element){if((0,a.closest)(i,".wj-flexgrid")!=e.hostElement)return;e=i,this._target=i}if(!(e instanceof Element)||e instanceof G){if(e instanceof G)this._target=e.hostElement,n=this._g=e;else{if(!(e instanceof C))throw"First parameter should be a FlexGrid or GridPanel.";this._target=e.hostElement,this._p=e,n=this._g=this._p.grid}i instanceof MouseEvent&&(this._target=i.target,"mousedown"==i.type&&(n._rcBounds=null)),i=(0,a.mouseToPage)(i),this._pt=i.clone();var r=n.controlRect,o=n._szClient,s=n.topLeftCells,l=n._eTL,h=n.headersVisibility,c=D,u=h&c.Row?s.columns.getTotalSize():0,d=h&c.Column?s.rows.getTotalSize():0,p=h&c.Column?d+l.offsetTop:0,f=n._eBL,_=f.offsetHeight;if(i.x-=r.left,i.y-=r.top,n.rightToLeft&&(i.x=r.width-i.x),this._p||i.x>=0&&i.y>=l.offsetTop&&o&&i.x<=o.width+u&&i.y<=o.height+d&&(i.y<p?this._p=i.x<u?n.topLeftCells:n.columnHeaders:i.y<f.offsetTop?this._p=i.x<u?n.rowHeaders:n.cells:this._p=i.x<u?n.bottomLeftCells:n.columnFooters),null!=this._p){var m=this._p.rows,y=this._p.columns,b=this._p.cellType,v=g,w=this._p._getFrozenPos(),x=b==v.TopLeft||b==v.ColumnHeader?d:b==v.BottomLeft||b==v.ColumnFooter?_:m.getTotalSize(),S=b==v.TopLeft||b==v.BottomLeft||b==v.RowHeader?u:y.getTotalSize();b==v.RowHeader||b==v.Cell?(i.y-=d,(i.y>w.y||w.y<=0)&&(i.y-=n._ptScrl.y,i.y+=this._p._getOffsetY())):b!=v.BottomLeft&&b!=v.ColumnFooter||(i.y-=f.offsetTop),b!=v.ColumnHeader&&b!=v.Cell&&b!=v.ColumnFooter||(i.x-=u,(i.x>w.x||w.x<=0)&&(i.x-=n._ptScrl.x)),b!=v.ColumnHeader&&b!=v.TopLeft||(i.y-=p-d),this._edge=0;var E=t._SZEDGE[this._g.isTouching?1:0];if(this._g.isTouching&&(E=t._SZEDGE[1],i.x-=E/2),this._row=i.y>x?-1:m.getItemAt(i.y),this._col=i.x>S?-1:y.getItemAt(i.x),this._row<0||this._col<0)return void(this._p=null);if(this._col>-1){var P=y[this._col];i.x-P.pos<=E&&(this._edge|=1);var T=P.pos+P.renderSize-i.x;T<=E&&(this._edge|=4,T<=E/2&&(this._edge|=16))}if(this._row>-1){var M=m[this._row];i.y-M.pos<=E&&(this._edge|=2);var I=M.pos+M.renderSize-i.y;I<=E&&(this._edge|=8,I<=E/2&&(this._edge|=32))}}}else{var R=(0,a.closest)(e,".wj-cell"),A=R?R[C._INDEX_KEY]:null;A&&(this._target=e,this._row=A.row,this._col=A.col,this._rng=A.rng,this._p=A.panel,this._g=A.panel.grid)}}return Object.defineProperty(t.prototype,"point",{get:function(){return this._pt},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cellType",{get:function(){return this._p?this._p.cellType:g.None},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"panel",{get:function(){return this._p},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"grid",{get:function(){return this._p?this._p.grid:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"row",{get:function(){return this._row},enumerable:!0,configurable:!0}),t.prototype.getRow=function(){return this._p&&this._row>-1?this._p.rows[this._row]:null},Object.defineProperty(t.prototype,"col",{get:function(){return this._col},enumerable:!0,configurable:!0}),t.prototype.getColumn=function(t){var e=this._p,i=e&&this._col>-1?e.columns[this._col]:null;if(i&&t){var n=e.grid;i=e.cellType===g.ColumnHeader&&n._hasColumnGroups()?n._getColumnGroup(this._row,this._col):n._getBindingColumn(e,this._row,i)}return i},Object.defineProperty(t.prototype,"range",{get:function(){return this._rng||(this._rng=new y(this._row,this._col)),this._rng},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"edgeLeft",{get:function(){return 0!=(1&this._edge)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"edgeTop",{get:function(){return 0!=(2&this._edge)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"edgeRight",{get:function(){return 0!=(4&this._edge)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"edgeFarRight",{get:function(){return 0!=(16&this._edge)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"edgeBottom",{get:function(){return 0!=(8&this._edge)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"edgeFarBottom",{get:function(){return 0!=(32&this._edge)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"target",{get:function(){return this._target},enumerable:!0,configurable:!0}),t._SZEDGE=[6,30],t}();function q(){return(0,a._getModule)("wijmo.input")}var J=function(){function t(){}return t.prototype.updateCell=function(e,i,n,r,s,l){var h=e.grid,c=h.rightToLeft,u=e.rows,d=e.columns,p=u[i],f=d[n],_=i,m=n,b=p instanceof L?p:null,w=p instanceof W?p:null,C=f.renderWidth,x=p.renderHeight,E=e.cellType,P="wj-cell",T="",M={display:""},I=g;0!=l&&r.firstElementChild&&(1==r.childNodes.length&&"checkbox"==r.firstElementChild.type||(r.textContent="")),s&&!s.isSingleCell&&(i=s.row,n=s.col,_=s.row2,m=s.col2,p=u[i],f=d[n],b=p instanceof L?p:null,x=(V=s.getRenderSize(e)).height,C=V.width);var D=h._getBindingColumn(e,i,f),R=D.dataType||p.dataType,A=D.dataMap||p.dataMap,k=E==I.Cell?h._getMapEditor(p,D):null,O=E==I.RowHeader||E==I.Cell&&(!b||h.childItemsPath),j=O&&k==o.RadioButtons,N=R==a.DataType.Boolean&&!A,H=D.isContentHtml||p.isContentHtml,F=f.pos,B=p.pos,z=h._ptScrl;if(h._useFrozenDiv()&&E==I.Cell&&!h.editRange)n<d.frozen&&_>=u.frozen?B+=z.y:i<u.frozen&&m>=d.frozen&&(F+=z.x);else{var V=h._szClient;_<u.frozen&&(B=Math.min(B,V.height),x=Math.min(x,Math.max(0,V.height-B)),B-=z.y),m<d.frozen&&(F=Math.min(F,V.width),C=Math.min(C,Math.max(0,V.width-F)),F-=z.x)}c?M.right=F+"px":M.left=F+"px",_>=u.frozen&&(B-=e._getOffsetY()),M.top=B+"px",M.width=C+"px",M.height=x+"px",M.zIndex="",(i<u.frozen||n<d.frozen)&&(M.zIndex=i<u.frozen&&n<d.frozen?2:1);var Y=!1,K=h.alternatingRowStep;if(!K||s&&s.row!=s.row2||(Y=p.visibleIndex%(K+1)==0,1==K&&(Y=!Y)),E==I.Cell)b&&(P+=" wj-group"),Y&&(P+=" wj-alt"),(i<u.frozen||n<d.frozen)&&(P+=" wj-frozen"),w&&(P+=" wj-new"),p.cssClass&&(P+=" "+p.cssClass),D.cssClass&&(P+=" "+D.cssClass);else{P+=" wj-header",Y&&(P+=" wj-header-alt"),p.cssClass&&E==I.ColumnHeader&&(P+=" "+p.cssClass),D.cssClass&&E==I.RowHeader&&(P+=" "+D.cssClass);var U=!1;E!=I.ColumnHeader&&E!=I.TopLeft||h.allowResizing&at.Columns&&(U=null!=h._mouseHdl._getResizeCol(e,m)),U||E!=I.RowHeader||h.allowResizing&at.Rows&&(U=null!=h._mouseHdl._getResizeRow(e,_)),U&&(P+=" wj-big-header")}p.cssClassAll&&(P+=" "+p.cssClassAll),D.cssClassAll&&(P+=" "+D.cssClassAll);var X=v,J=e.getSelectedState(i,n,s);switch(J!=X.None&&E==I.Cell&&!N&&h.editRange&&h.editRange.contains(i,n)&&(J=X.None),J){case X.Active:P+=" wj-state-active";break;case X.Cursor:P+=" wj-state-selected wj-state-active";break;case X.Selected:P+=" wj-state-multi-selected"}_==u._lastFrozen&&(P+=" wj-frozen-row"),m==d._lastFrozen&&(P+=" wj-frozen-col"),(D.wordWrap||p.wordWrap)&&(P+=" wj-wrap"),(D.multiLine||p.multiLine)&&(P+=" wj-multiline");var nt=D.getAlignment(p);nt&&(T=" wj-align-"+nt);var rt=E,ot=h._isTransposed(),st=(rt==I.ColumnHeader&&!ot||rt==I.RowHeader&&ot)&&h._hasColumnGroups()?h._getColumnGroup(i,n):null;if(st&&st.align&&(T=" wj-align-"+st.align),M.paddingLeft=M.paddingRight=M.paddingTop=M.paddingBottom="",E==I.Cell&&h.rows.maxGroupLevel>-1&&n==d.firstVisibleIndex&&h.treeIndent){var lt=b?Math.max(0,b.level):u.maxGroupLevel+1,ct=Math.min(h.treeIndent*lt+h._cellPadLeft,C-h._cellPadHorz)+"px";c?M.paddingRight=ct:M.paddingLeft=ct}C<=h._cellPadHorz&&null==r.getAttribute(G._WJS_MEASURE)&&(M.paddingLeft=M.paddingRight=0);var ut=E==I.Cell&&n==d.firstVisibleIndex&&b&&b.hasChildren&&!$(h,i,n);if(ut&&(T=""),0!=l){var dt=e.getCellData(i,n,!1),pt=e.getCellData(i,n,!0);if(ut){var ft=et(b);pt=b.getGroupHeader()||(0,a.escapeHtml)(pt),r.innerHTML=ft.outerHTML+" "+pt}else if(E!=I.ColumnHeader||_!=h._getSortRowIndex()&&D==f)if(E==I.RowHeader&&!pt&&function(){var t=!1;if(n==h._getEditColumnIndex()){var e=h.editableCollectionView,i=e?e.currentEditItem:null;pt=r.innerHTML=i&&p.dataItem==i?it("pencil"):p instanceof W?it("asterisk"):"",t=!0}var o=D._tpl;return o&&(Z(o,r,dt,pt,p,D),t=!0),t}());else if(E!=I.Cell||R!=a.DataType.Boolean||A||b&&!(0,a.isBoolean)(dt))if(E==I.Cell&&!j&&$(h,i,n)){var _t=D.inputType||p.inputType;if(_t||(_t=R!=a.DataType.Number||A?"text":"tel"),!A&&!D.mask&&!p.mask){var gt=e.getCellData(i,n,!1);(0,a.isNumber)(gt)&&(pt=function(t,e){e=e||"n";var i=a.Globalize._parseNumericFormat(e);switch(i.spec){case"d":case"x":break;case"e":e=e.replace(/[0-9]/g,"");break;default:e="p"==i.spec?"P15":"r",i.scale&&(e+=Array(i.scale/3+1).join(","))}return a.Globalize.formatNumber(t,e,!0)}(gt,D.format||p.format))}r.innerHTML=(D.multiLine||p.multiLine)&&"checkbox"!=_t?'<textarea wrap="soft"></textarea>':'<input type="'+_t+'"/>';var mt=r.children[0];(0,a.addClass)(mt,"wj-grid-editor wj-form-control"),(0,a.disableAutoComplete)(mt),H&&A&&!A.isEditable&&(pt=(0,a.toPlainText)(pt)),mt.value=pt,mt.tabIndex=-1,mt.required=D.getIsRequired(p),(0,a.setAttribute)(mt,"aria-required",mt.required);var yt=D.maxLength||p.maxLength;yt&&(mt.maxLength=yt),mt.style.textAlign=D.getAlignment(p);var bt=D.mask||p.mask;bt&&(mt["$WJ-MSKP"]=new a._MaskProvider(mt,bt)),h.showPlaceholders&&(mt.placeholder=D.header),h._edtHdl._edt=mt}else{if(j){var vt=[],wt=e.getCellData(i,n,!1);A.getDisplayValues(p.dataItem).forEach((function(t){var e=A.getKeyValue(t)==wt?" checked":"",i=h.isReadOnly||p.isReadOnly||f.isReadOnly?" disabled":"",n=(0,a.escapeHtml)(t);vt.push('<label><input type="radio" tabindex="-1"'+e+i+' value="'+n+'"><span>'+n+"</span></label>")})),r.innerHTML=vt.join(" "),P+=" "+t._WJC_RADIOMAP}var Ct=O?D._tpl:null;if(Ct?Z(Ct,r,dt,pt,p,D):j||(E==I.Cell&&H?r.innerHTML=pt:r.textContent=pt||""),st&&st.collapseTo){var xt=st._rng;if(xt&&(E==I.ColumnHeader&&xt.columnSpan>1||E==I.RowHeader&&xt.rowSpan>1)){var St=st.isCollapsed;r.innerHTML='<div role="button" class="'+t._WJC_COLLAPSE+'">'+it(St?"plus":"minus")+"</div>&nbsp;"+r.innerHTML,St&&(0,a.addClass)(r,"wj-state-collapsed")}}}else{var Et=r.firstChild;h._isNativeCheckbox(Et)||(r.innerHTML='<label><input type="checkbox" class="'+t._WJC_CHECKBOX+'" tabindex="-1"/><span></span></label>',Et=r.querySelector("input")),(0,a.setChecked)(Et,dt),Et.disabled=!h.canEditCell(i,n),Et.disabled&&(Et.style.cursor="default"),h.editRange&&h.editRange.contains(i,n)&&(h._edtHdl._edt=Et)}else{r.innerHTML=(0,a.escapeHtml)(pt);var Pt=D.currentSort;Pt&&h.showSort&&(P+=" wj-sort-"+("+"==Pt?"asc":"desc"),r.innerHTML+="&nbsp;"+function(t){var e=it("+"==t.currentSort?"up":"down"),i=t.grid.collectionView;if(i&&i.sortDescriptions.length>1){var n=t.currentSortIndex;n>-1&&(e+='<span class="wj-sort-index">'+(n+1)+"</span>")}return e}(D)),h.allowPinning&&(0,a.contains)(h.hostElement,r)&&tt(r,n<h.frozenColumns)}if(k==o.DropDownList&&h.showDropDown&&h.canEditCell(i,n)&&q()){var Tt=Q();r.insertBefore(Tt,r.firstChild),$(h,i,n)&&(P+=" wj-hasdropdown")}}if(E==I.RowHeader||E==I.ColumnHeader){var Mt=E==I.RowHeader?!b&&!w&&p.allowDragging&&0!=(h.allowDragging&ht.Rows):(st||f).allowDragging&&0!=(h.allowDragging&ht.Columns);(0,a.setAttribute)(r,"draggable",Mt?"true":null)}P+=T,r.className!=P&&(r.className=P);var It=r.style;for(var Dt in M)It[Dt]!==M[Dt]&&(It[Dt]=M[Dt]);if(h._edtHdl._edt&&h._edtHdl._edt.parentElement==r){var Rt=h._root,At=Rt.getBoundingClientRect(),kt=r.getBoundingClientRect(),Ot=At.top+Rt.clientHeight-kt.top,Lt=At.left+Rt.clientWidth-kt.left;kt.height>Ot&&(r.style.height=Ot+"px"),kt.width>Lt&&(r.style.width=Lt+"px")}if((E==I.Cell||E==I.RowHeader)&&h._getShowErrors()){var jt=h._getError(e,i,n,!1);h._edtHdl._setCellError(r,jt)}if(h.itemFormatter&&h.itemFormatter(e,i,n,r),h.formatItem.hasHandlers){var Nt=t._fmtItemArgs;Nt?(Nt._p=e,Nt._rng.setRange(i,n,_,m),Nt._cell=r):Nt=t._fmtItemArgs=new S(e,new y(i,n,_,m),r),Nt._updateContent=!1!==l,h.onFormatItem(Nt)}},t.prototype.disposeCell=function(t){},t.prototype.getEditorValue=function(t){var e=t._edtHdl._edt;if(e instanceof HTMLInputElement)switch(e.type){case"checkbox":return e.checked;case"radio":return e.value}if(e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement){var i=e["$WJ-MSKP"],n=i?i._applyMask():e.value,r=e.maxLength;if((0,a.isNumber)(r)&&r>-1&&n.length>r){var o=a.culture.Globalize.numberFormat["%"]||"%",s=n.length&&n[n.length-1]==o;n=n.substr(0,r),s&&n.indexOf(o)<0&&(n+=o)}return n}return null},t._WJC_RADIOMAP="wj-radio-map",t._WJC_CHECKBOX="wj-cell-check",t._WJC_COLLAPSE="wj-elem-collapse",t._WJC_DROPDOWN="wj-elem-dropdown",t._WJC_PIN="wj-elem-pin",t._tplDdBtn=nt(t._WJC_DROPDOWN,"down"),t._tplCtx={row:null,col:null,value:null,text:null,item:null},t}();function Z(t,e,i,n,r,o){var s=J._tplCtx;s.value=i,s.text=n,s.item=r.dataItem,s.row=r,s.col=o;var l=(0,a.isString)(t)?(0,a.evalTemplate)(t,s):t(s,e);null!=l&&(e.innerHTML=l)}function $(t,e,i){return t.editRange&&t.editRange.contains(e,i)}function Q(){var t=J._ddBtn;return t||(t=J._ddBtn=(0,a.createElement)(J._tplDdBtn),(0,a.setAriaLabel)(t,a.culture.FlexGrid.ariaLabels.toggleDropDown),(0,a.setAttribute)(t,"aria-expanded",!1)),t.cloneNode(!0)}function tt(t,e){var i=nt(J._WJC_PIN,"pin"),n=(0,a.createElement)(i);(0,a.toggleClass)(n,"wj-state-pinned",e),(0,a.setAttribute)(n,"aria-pressed",e),t.insertBefore(n,t.firstChild)}function et(t){var e=J._WJC_COLLAPSE,i=(t.isCollapsed?"":"down-")+(t.grid.rightToLeft?"left":"right"),n=(0,a.createElement)('<button class="wj-btn wj-btn-glyph '+e+'" type="button" tabindex="-1">'+it(i)+"</button>");return(0,a.setAriaLabel)(n,a.culture.FlexGrid.ariaLabels.toggleGroup),(0,a.setAttribute)(n,"aria-expanded",!t.isCollapsed),n}function it(t){return'<span class="wj-glyph-'+t+'"></span>'}function nt(t,e){return'<button class="wj-btn wj-btn-glyph wj-right {cls}" type="button" tabindex="-1">{glyph}</button>'.replace("{cls}",t).replace("{glyph}",it(e))}var rt,ot=function(){function t(t){var e=this;this._rng=null,this._edt=null,this._edItem=null,this._edtCanceled=!1,this._list=null,this._fullEdit=!1,this._evtInput=null,this._evtChange=null,this._cstEdtValue=null,this._validating=!1,this._g=t,this._evtInput=document.createEvent("HTMLEvents"),this._evtInput.initEvent("input",!0,!1),this._evtChange=document.createEvent("HTMLEvents"),this._evtChange.initEvent("change",!0,!1),t.selectionChanging.addHandler((function(i,n){if(e.finishEditing()){var r=t._selHdl.selection.row;if(r!=n.row){var o=t.rows.length;(r>-1&&r<o?t.rows[r].dataItem:null)!=(n.row>-1&&n.row<o?t.rows[n.row].dataItem:null)&&e._commitRowEdits()}}else n.cancel=!0})),t.lostFocus.addHandler((function(){var t=(0,a.getActiveElement)();t&&"fixed"==getComputedStyle(t).position?e.finishEditing():e._commitRowEdits()}));var i=t.hostElement;t.addEventListener(i,"mousedown",(function(i){if(!i.defaultPrevented&&0==i.button&&!t._mouseHdl._szRowCol){var n=t.hitTest(i);n.cellType!=g.Cell&&n.cellType!=g.None&&(e.finishEditing()||e.finishEditing(!0))}}),!0),t.addEventListener(i,"compositionend",this._keypress.bind(this))}return t.prototype.startEditing=function(t,e,i,n,r){void 0===t&&(t=!0);var s=this._g,l=s._selHdl.selection;if(e=(0,a.asNumber)(e,!0,!0),i=(0,a.isString)(i)?s.columns.indexOf(i):(0,a.asNumber)(i,!0,!0),null==e&&(e=l.row),null==i&&(i=l.col),null==n&&(n=!0),!this._allowEdit(e,i))return!1;var h=s.getMergedRange(s.cells,e,i,!1);h||(h=new y(e,i));var c=s.rows[e].dataItem;if(s.scrollIntoView(h.row,h.col,!0),!s.select(h,!0))return!1;if(!s.rows[e]||c!=s.rows[e].dataItem)return!1;if(this.activeEditor){if(h.equals(this._rng))return!0;if(!this.finishEditing())return!1}var u=new x(s.cells,h,r);if(!s.onBeginningEdit(u))return!1;var d=s.editableCollectionView,p=!1;d&&((p=(c=s.rows[e].dataItem)!=d.currentEditItem)&&s.onRowEditStarting(u),d.editItem(c),p&&(s.onRowEditStarted(u),this._edItem=c));var f=s.rows[e],_=s._getBindingColumn(s.cells,e,s.columns[i]),g=_.dataMap||f.dataMap,m=o.RadioButtons,b=f.dataMap&&f.dataMapEditor==m||_.dataMap&&_.dataMapEditor==m;if(this._fullEdit=(0,a.asBoolean)(t),this._rng=h,this._list=null,g&&!b&&!_.editor){var v=g.getDisplayValues(c);(_.isContentHtml||f.isContentHtml)&&(v=v.map((function(t){return(0,a.toPlainText)(t)}))),this._list=v}if(b){var w=s._activeCell||s.hostElement.querySelector(".wj-cell.wj-state-active");if(w){var C=r?r.target:null;C instanceof HTMLSpanElement&&(C=(0,a.closest)(C,"label")),C instanceof HTMLLabelElement&&(C=C.querySelector("input")),this._edt=C instanceof HTMLInputElement?C:w.querySelector("input"),this._updateRowHeaderCell(e)}}else h.isSingleCell?this._updateEditorCell(e,i,p):s.refresh(!1);var S=this._edt;if(S){if("checkbox"==S.type||"radio"==S.type)this._fullEdit=!1;else if(n){var E=0,P=S.value.length,T=!1,M=a.culture.Globalize.numberFormat["%"]||"%",I=s.getCellData(e,i,!1);if((0,a.isNumber)(I)?T=S.value.indexOf(M)>-1:null==I&&(T=/^p/i.test(_.format))&&S.value.indexOf(M)<0&&(S.value+=M),T){var D=S.value;for(E=0,P=D.length;P>0&&(D[P-1]==M||" "==D[P-1]);)P--;for(;E<P&&D[E]==M;)E++}r&&"keydown"==r.type&&r.keyCode==a.Key.Space&&(E=P),(0,a.setSelectionRange)(S,E,P),(0,a.isIE)()&&"right"==S.style.textAlign&&(S.style.paddingRight="1px")}s.onPrepareCellForEdit(u)}return n&&!s.containsFocus()&&s.focus(),null!=S&&!S.disabled&&!S.readOnly},t.prototype.finishEditing=function(t){var e=this._edt;if(!e)return this._removeListBox(),!0;var i=this._g,n=this._rng,r=new E(i.cells,n),o=i.containsFocus();if(!t){var s=i.hostElement.querySelector(".wj-control.wj-state-focused");if(s){var l=a.Control.getControl(s);l&&(l.containsFocus()||l._focus)&&l.onLostFocus(r)}}if(r.cancel=t,!t&&i.validateEdits&&(f=this._getValidationError())){r.cancel=!0;var h=i.cells.getCellElement(n.row,n.col);h&&(this._setCellError(h,f),r.stayInEditMode=!0)}if(this._cstEdtValue=null,r.data=i.cells.getCellData(n.topRow,n.leftCol,!1),!i.onCellEditEnding(r)&&r.stayInEditMode)return o?setTimeout((function(){e.select()})):e.select(),this._fullEdit=!0,!1;if(!r.cancel){for(var c=this._cstEdtValue,u=c&&!(0,a.isUndefined)(c.value)?c.value:i.cellFactory.getEditorValue(i),d=n.topRow;d<=n.bottomRow&&d<i.rows.length;d++)for(var p=n.leftCol;p<=n.rightCol&&p<i.columns.length;p++){var f,_=i._getBindingColumn(i.cells,d,i.columns[p]),g=i.rows[d],m=_&&_.dataMap||g&&g.dataMap,y=!m||m.serializeKeys;if(!i.cells.setCellData(d,p,u,y,!1)&&i.validateEdits&&(f=this._getValidationError(!0))){r.cancel=!0;var b=i.cells.getCellElement(n.row,n.col);return b&&(this._setCellError(b,f),r.stayInEditMode=!0),!1}}e.value==this._edtValue&&e.dispatchEvent(this._evtChange)}this._edt=null,this._rng=null,this._list=null,this._edtValue=null,this._edtCanceled=r.cancel,this._removeListBox();var v=(0,a.closest)(e,".wj-cell");return(0,a.contains)(v,(0,a.getActiveElement)())&&i._setFocusNoScroll(v),!r.cancel&&r.refresh&&i._refreshOnEdit?i.refresh(!1):this._updateEditorCell(n.row,n.col,!1),o&&i.focus(),i.onCellEditEnded(r),!0},t.prototype._setCustomEditorValue=function(t){this._cstEdtValue={value:t}},t.prototype._setCellError=function(t,e){var i=this._g;""==e&&(e=null),(0,a.toggleClass)(t,"wj-state-invalid",null!=e);var n=i.errorTip,r=i.activeEditor;n?(n.setTooltip(t,e),r&&(0,a.contains)(t,r)&&(0,a.setAttribute)(r,"title","")):(0,a.setAttribute)(t,"title",e),r&&t==i.activeCell&&!(0,a.contains)(t,r)&&n&&n.setTooltip(r,e)},Object.defineProperty(t.prototype,"activeEditor",{get:function(){return this._edt},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"editRange",{get:function(){return this._rng},enumerable:!0,configurable:!0}),t.prototype.getClipString=function(t,e,i,n){var r,o=this,s=this._g,l=s.selectionMode,h=[],c=0!=(e&R.CSV),u=c?"\r\n":"\n",d=c?",":"\t",p=0!=(e&R.InvisibleRows),f=b,_=null!=t;if(!t&&l!=f.ListBox)for(var g=s.rows,m=0;m<g.length;m++)if(g[m].isSelected){l=f.ListBox;break}if(!t)switch(s._selHdl._expandSelection(),t=s.selection,l){case f.Row:case f.RowRange:case f.ListBox:t.col=0,t.col2=s.columns.length-1;break;case f.MultiRange:var y=s.selectedRanges;if(y.length>1){var v=this._sameCols(y),w=this._sameRows(y);if(v||w){(y=y.slice()).sort((function(t,e){return t.topRow-e.topRow||t.leftCol-e.leftCol}));for(var C=0;C<y.length;C++)for(var x=y[C],S=C+1;S<y.length;S++)x.contains(y[S])&&(y.splice(S,1),S--);if(v){var E=[];return y.forEach((function(t){E.push(o.getClipString(t,e,i,n)),i=!1})),E.join(u)}var P;if(w)return y.forEach((function(t){var r=o.getClipString(t,e,i,n).split(u);null==P?(P=r,n=!1):r.forEach((function(t,e){P[e]+=d+t}))})),P.join(u)}}}var T=t.col>-1&&t.col2>-1;if(i&&T&&(r=s.columnHeaders).rows.forEach((function(i,s){if(p||i.isVisible){var a=o._getRowClipString(r,s,t,e,n);h.push(a)}})),t.row>-1&&t.row2>-1)if(r=s.cells,l!=f.ListBox||_){for((0,a.assert)(t.bottomRow<r.rows.length,"Row index must be less than the number of rows."),C=t.topRow;C<=t.bottomRow;C++)if(p||r.rows[C].isVisible){var M=this._getRowClipString(r,C,t,e,n);h.push(M)}}else r.rows.forEach((function(i,s){if(i.isSelected&&(p||i.isVisible)){var a=o._getRowClipString(r,s,t,e,n);h.push(a)}}));return h.join(u)},t.prototype._getRowClipString=function(t,e,i,n,r){var o=[],s=t.rows[e],l=R,h=0!=(n&l.CSV),c=0!=(n&l.InvisibleColumns),u=0==(n&l.Unformatted),d=0!=(n&l.SkipMerged);if(s.isVisible){if(r)for(var p=t.cellType==g.ColumnHeader?t.grid.topLeftCells:t.grid.rowHeaders,f=0;f<p.columns.length;f++)if(c||p.columns[f].isVisible){var _=p.getCellData(e,f,!0);d&&this._skipMergedCell(t,null,e,f)&&(_=""),o.push(this._getCellClipString(_,n))}if(i.col>-1&&i.col2>-1)for((0,a.assert)(i.rightCol<t.columns.length,"Column index must be less than the number of columns."),f=i.leftCol;f<=i.rightCol;f++)(c||t.columns[f].isVisible)&&(!(_=t.getCellData(e,f,u))&&s instanceof L&&f==t.columns.firstVisibleIndex&&(_=(0,a.toPlainText)(s.getGroupHeader())),d&&this._skipMergedCell(t,null,e,f)&&(_=""),o.push(this._getCellClipString(_,n)))}return o.join(h?",":"\t")},t.prototype._skipMergedCell=function(t,e,i,n){var r=t.grid.getMergedRange(t,i,n,!1);return!(!r||(e&&(r.row=Math.max(e.topRow,r.row),r.col=Math.max(e.leftCol,r.col)),r.row==i&&r.col==n))},t.prototype._getCellClipString=function(t,e){(0,a.isString)(t)||(t=(0,a.isDate)(t)?t.toJSON():null!=t?t.toString():""),t=t.replace(/\t/g," ");var i=0!=(e&R.QuoteAll);return(i=i||/\n|^"|"$/.test(t))||0==(e&R.CSV)||(i=t.indexOf(",")>-1),i&&(t='"'+(t=t.replace(/"/g,'""'))+'"'),t},t.prototype._sameRows=function(t){for(var e=t[0],i=1;i<t.length;i++)if(t[i].topRow!=e.topRow||t[i].bottomRow!=e.bottomRow)return!1;return!0},t.prototype._sameCols=function(t){for(var e=t[0],i=1;i<t.length;i++)if(t[i].leftCol!=e.leftCol||t[i].rightCol!=e.rightCol)return!1;return!0},t.prototype.setClipString=function(t,e){var i=this,n=this._g,r=n.editableCollectionView,o=null==e,s=b;if(o)switch(n._selHdl._expandSelection(),e=n.selection,n.selectionMode){case s.Row:case s.RowRange:case s.ListBox:e.col=0,e.col2=n.columns.length-1;break;case s.MultiRange:var l=n.selectedRanges;if(l.length>1)return r&&r.beginUpdate(),l.forEach((function(e){n.setClipString(t,e)})),r&&r.endUpdate(),void(n.selectedRanges=l)}e=(0,a.asType)(e,y);var h=this._parseClipString((0,a.asString)(t));!o&&h.length>e.rowSpan&&(h=h.slice(0,e.rowSpan)),this._expandClipRows(h,e);var c=o?new y(e.topRow,e.leftCol,e.topRow+h.length-1,e.leftCol+h[0].length-1):e,u=new x(n.cells,c,t);if(!n.onPasting(u))return!1;c=new y(e.topRow,e.leftCol);var d=new x(n.cells,new y(e.topRow,-1)),p=!1,f=0,_=e.topRow,g=n.rows,m=n.columns,v=n._getRowsPerItem(),w=h.length>v,C=this._deferPaste(e,h.length);if((0,a.assert)(v>=1,"Invalid RPI value = "+v),n.deferUpdate((function(){var t=-1;r&&C&&(t=r.currentPosition,r.beginUpdate());for(var o=0;o<h.length&&_<g.length;o++,_++){var s=g[_];if(s.isVisible){var l=s.dataItem,u=r?r.currentEditItem:null;if(u&&l!=u&&(n.onRowEditEnding(d),n.onRowEditEnded(d)),s instanceof W&&r){if(C){if(s.dataItem=r.addNew(),d._rng.setRange(n.newRowAtTop?0:_,-1),!n.onRowEditStarting(d)){_--,r.cancelNew();continue}n.onRowEditStarted(d)}else if(1==v||(_+1)%v==1){if(d._rng.setRange(n.newRowAtTop?_%v:_,-1),!n.onRowEditStarting(d)){_--;continue}n.onRowEditStarted(d)}}else l!=u&&(d._rng.setRange(_,-1),n.onRowEditStarting(d),n.onRowEditStarted(d));for(var b=h[o],S=e.leftCol,E=0;E<b.length&&S<m.length;E++,S++){var P=m[S];if(P.isVisible){if(i._allowEdit(_,S)){var T=b[E],M=T.length;M>1&&'"'==T[0]&&'"'==T[M-1]&&T.indexOf("\n")>-1&&(T=T.substr(1,M-2));var I=P.maxLength||s.maxLength;I&&(T=T.substr(0,I));var D=new x(n.cells,new y(_+f,S),T);if(n.onPastingCell(D)){r&&(r.editItem(l),i._edItem=r.currentEditItem);var R=n.getCellData(_,S,!1),A=D.data,k=q();if(k){var O=n._getBindingColumn(n.cells,_,n.columns[S]),L=O.editor,j=null,N=null;L instanceof k.InputNumber?(j=L.clamp.bind(L),N=a.DataType.Number):(L instanceof k.InputDate||L instanceof k.InputTime)&&(j=L._clamp.bind(L),N=a.DataType.Date),j&&(A=(0,a.changeType)(A,N,O.format,R),(0,a.getType)(A)==N&&(A=j(A)))}n.setCellData(_,S,A)&&(D.data=R,n.onPastedCell(D),p=!0)}c.row2=Math.max(c.row2,_+f),c.col2=Math.max(c.col2,S)}}else E--}if(i._edItem&&r instanceof a.CollectionView){var H=new a.NotifyCollectionChangedEventArgs(a.NotifyCollectionChangedAction.Change,i._edItem,_);r.onCollectionChanged(H)}s instanceof W&&r&&(C?(s.dataItem=null,p?(d._rng.setRange(n.newRowAtTop?0:_,-1),n.onRowEditEnding(d),n.onRowEditEnded(d),_--,f++,r.commitNew()):r.cancelNew()):w&&v>1&&(_+1)%v==0&&p&&(d._rng.setRange(n.newRowAtTop?_%v:_,-1),n.onRowEditEnding(d),n.onRowEditEnded(d),_-=v,f++))}else o--}if(r)if(C)r.currentEditItem&&(r.commitEdit(),n.onRowEditEnding(d),n.onRowEditEnded(d)),r.moveCurrentToPosition(t),r.endUpdate(!0);else{var F=r.currentAddItem;!F&&0==e.row&&n.newRowAtTop&&g[0]instanceof W&&(F=g[0].dataItem),F&&(r.editItem(F),i._edItem=F)}c.rowSpan>1&&0==c.topRow&&g[0]instanceof W&&(c.row=c.row2=0),n.select(c)})),n.onPasted(u),p&&(0,a.closest)(n.hostElement,"form")){var S=document.createEvent("HTMLEvents"),E=(0,a.createElement)("<input>",n.hostElement);S.initEvent("change",!0,!1),E.dispatchEvent(S),(0,a.removeChild)(E)}},t.prototype._deferPaste=function(t,e){var i=this._g.rows,n=i.length;if(e>1){if(n>1&&i[0].dataItem!=i[1].dataItem)return!0;if(1==n&&i[0]instanceof W)return!0}return!1},t.prototype._parseClipString=function(t){var e=[],i=(t=(t=t.replace(/\r\n/g,"\n").replace(/\r/g,"\n")).replace(/\n$/,"")).length,n=function(t){return"\n"===t||"\t"===t},r=0,o=0;for(r=0;r<i;r++){var s=!1,a=!1,l=!1;if('"'===t[r]){for(var h=!1,c=!1,u=r+1;u<i;u++){var d=t[u];if('"'===d){var p=u+1;p<i?n(t[p])&&(c=!0):c=!0}else!h&&n(d)&&(h=!0);if(c)break}c&&h&&(s=!0)}for(o=r;o<i&&!l;o++){var f=t[o];'"'===f?s&&(a=!a):n(f)&&!a&&(this._parseClipCell(e,t,r,o,"\n"==f),r=o,o==i-1&&(r=o+1),l=!0)}if(o==i){this._parseClipCell(e,t,r,o,!1);break}}return 0==e.length&&e.push([""]),e},t.prototype._parseClipCell=function(t,e,i,n,r){t.length||t.push([]);var o=e.substr(i,n-i),s=o.length;if(s>2&&'"'==o[0]&&'"'==o[s-1]){var a=o.substr(1,s-2),l=function(t){return a.indexOf(t)>-1};(l('""')||l("\t")||l("\n"))&&(o=a.replace(/""/g,'"'))}else"\t"==o&&(o="");t[t.length-1].push(o),r&&t.push([])},t.prototype._expandClipRows=function(t,e){for(var i=t.length,n=0,r=0;r<i;r++)n=Math.max(n,t[r].length);for(var o=this._g,s=0,a=0,l=e.topRow;l<=e.bottomRow;l++)o.rows[l].isVisible&&s++;for(var h=e.leftCol;h<=e.rightCol;h++)o.columns[h].isVisible&&a++;if((s>1||a>1)&&(1==s&&(s=i),1==a&&(a=n),a%n==0&&s%i==0)){for(h=n;h<a;h++)for(l=0;l<i;l++)t[l].push(t[l%i][h%n]);for(l=i;l<s;l++)t.push(t[l%i])}},t.prototype._updateEditorCell=function(t,e,i){var n=this._g,r=n.cells.getCellElement(t,e),o=n._useFrozenDiv()&&(t<n.frozenRows||e<n.frozenColumns);!r||o||n._hasPendingUpdates()?n.refresh(!1):n.onUpdatingView(new a.CancelEventArgs)&&(this._updateCell(r),(i||n._getHasValidation())&&this._updateRowHeaderCell(t),n.onUpdatedView())},t.prototype._updateRowHeaderCell=function(t){var e=this._g;if(e.headersVisibility&D.Row){var i=e.rowHeaders,n=e._getEditColumnIndex(),r=i.getCellElement(t,n);r&&this._updateCell(r)}},t.prototype._updateCell=function(t){var e=new X(t,null),i=G._WJS_UPDATING;e.panel&&((0,a.addClass)(t,i),e.grid.cellFactory.updateCell(e.panel,e.row,e.col,t,e.range),(0,a.removeClass)(t,i))},t.prototype._getValidationError=function(t){var e=this,i=this._g,n="";if(i&&this._rng&&!this._validating){var r=this._rng.row,o=this._rng.col,s=i.activeEditor,l=i.cellFactory.getEditorValue(i),h=i.getCellData(r,o,!1);if(t&&(n=i._getError(i.cells,r,o,!0)),!n&&i._getHasValidation()){if(s&&(n=s.validationMessage),!n){var c=i.columns[o],u=i.rows[r];!i._getBindingColumn(i.cells,r,c).getIsRequired(u)||null!=l&&""!==l||(n=this._getRequiredMsg())}!n&&i.setCellData(r,o,l,!0,!1)&&(n=i._getError(i.cells,r,o,!1),i.setCellData(r,o,h,!1,!1))}if(!n){var d=a.Control.getControl((0,a.closest)(s,".wj-control"));if(d&&d!=i&&d.invalidInput.hasHandlers){var p=function(t,s){s.cancel&&(n=i._getError(i.cells,r,o,!0)||e._getBadInputMsg(),s.cancel=!1)};this._validating=!0;var f=s.value;if(d.invalidInput.addHandler(p),d._containsFocus()){var _=(0,a.closest)(d.hostElement,".wj-cell");_&&_.focus()}d.onLostFocus(),d.invalidInput.removeHandler(p),s.value=f,s.select(),this._validating=!1}}}return n},t.prototype._getRequiredMsg=function(){if(!t._msgRequired){var e=document.createElement("input");e.required=!0,t._msgRequired=e.validationMessage}return t._msgRequired},t.prototype._getBadInputMsg=function(){if(!t._msgBadInput){var e=document.createElement("input");e.pattern="x",e.value="a",t._msgBadInput=e.validationMessage||"Bad Input"}return t._msgBadInput},t.prototype._allowEdit=function(t,e){var i=this._g;if(i.isReadOnly||i.selectionMode==b.None)return!1;if(i.collectionView&&!i.editableCollectionView)return!1;if(null!=t){if(t<0||t>=i.rows.length)return!1;var n=i.rows[t];if(!n||n.isReadOnly||!n.isVisible)return!1}if(null!=e){if(e<0||e>=i.columns.length)return!1;var r=i._getBindingColumn(i.cells,t,i.columns[e]);if(!r||r.isReadOnly||!r.isVisible)return!1}return!0},t.prototype._commitRowEdits=function(){var t=this._g;if(this.finishEditing()&&this._edItem){var e=t.editableCollectionView;if(e&&(e.currentEditItem||e.currentAddItem)){var i=new x(t.cells,t.selection);t.onRowEditEnding(i),e.commitEdit(),t.onRowEditEnded(i)}this._edItem=null}},t.prototype._keydown=function(t){var e=this._edt;switch(t.keyCode){case a.Key.F2:return this._fullEdit=!this._fullEdit,t.preventDefault(),!0;case a.Key.F4:return this._toggleListBox(t),t.preventDefault(),!0;case a.Key.Space:return!e||"checkbox"!=e.type||e.disabled||e.readOnly||((0,a.setChecked)(e,e.indeterminate||!e.checked),this.finishEditing(),t.preventDefault()),!0;case a.Key.Enter:if(t.preventDefault(),e&&t.altKey){var i=t.target;if(i instanceof HTMLTextAreaElement&&"soft"==i.wrap){i.style.setProperty("ime-mode","auto","important");var n=i.value,r=i.selectionStart,o=i.selectionEnd;i.value=n.substr(0,r)+"\n"+n.substr(o),(0,a.setSelectionRange)(i,r+1),i.style.imeMode=""}return!0}return e&&this._lbx?(this._toggleListBox(t),!0):!this.finishEditing();case a.Key.Tab:return t.preventDefault(),!this.finishEditing();case a.Key.Escape:return t.preventDefault(),this.finishEditing(!0),!0;case a.Key.Up:case a.Key.Down:case a.Key.Left:case a.Key.Right:case a.Key.PageUp:case a.Key.PageDown:case a.Key.Home:case a.Key.End:if(this._lbx)return this._keydownListBox(t);if(t.altKey)switch(t.keyCode){case a.Key.Up:case a.Key.Down:return this._toggleListBox(t),t.preventDefault(),!0}if(this._fullEdit)switch(t.keyCode){case a.Key.PageUp:case a.Key.PageDown:t.preventDefault()}else if(this.finishEditing())return!1}return!0},t.prototype._keydownListBox=function(t){var e=!0;if(this._lbx)switch(t.keyCode){case a.Key.Up:t.altKey?this._toggleListBox(t):this._lbx.selectedIndex>0&&this._lbx.selectedIndex--;break;case a.Key.Down:t.altKey?this._toggleListBox(t):this._lbx.selectedIndex++;break;case a.Key.Home:case a.Key.PageUp:this._lbx.selectedIndex=0;break;case a.Key.End:case a.Key.PageDown:this._lbx.selectedIndex=this._lbx.collectionView.items.length-1;break;default:e=!1}return!!e&&(t.preventDefault(),!0)},t.prototype._keypress=function(t){if("AltLeft"!=t.code&&"AltRight"!=t.code){var e=this._edt,i=t.charCode||32,n=this._list;if(e&&"checkbox"!=e.type&&(0,a.getActiveElement)()==e&&n&&n.length>0&&i>=32){var r=e.selectionStart,o=e.value.substr(0,r);t.target==e&&t.charCode&&(o+=String.fromCharCode(t.charCode),r++);var s=this._findString(n,o,!0);if(s<0&&!this._g.caseSensitiveSearch&&(s=this._findString(n,o,!1)),s>-1){var l=this._lbx;l&&(l.selectedIndex=s),e.value=n[s],(0,a.setSelectionRange)(e,r,e.value.length),e.dispatchEvent(this._evtInput),t.preventDefault&&t.preventDefault()}}}else t.preventDefault()},t.prototype._findString=function(t,e,i){i||(e=e.toLowerCase());for(var n=0;n<t.length;n++){var r=t[n];if(null!=r&&(r=r.toString(),i||(r=r.toLowerCase()),0==r.indexOf(e)))return n}return-1},t.prototype._toggleListBox=function(t,e){var i=this._g,n=i._selHdl.selection,r=i.isTouching;if(e||(e=n),this._lbx&&(this._removeListBox(),n.intersects(e)))return i.activeEditor?i.activeEditor.focus():i.containsFocus()||i.focus(),!0;if(!e.isValid)return!1;var s=i.rows[e.row],a=i._getBindingColumn(i.cells,e.row,i.columns[e.col]),l=s.dataMap||a.dataMap,h=i._getMapEditor(s,a);if(!l||h!=o.DropDownList||!q())return!1;if(null!=a.editor)return!1;if(!e.intersects(i.editRange)&&!this.startEditing(!0,e.row,e.col,!r,t))return!1;var c=this._lbx=this._createListBox();return requestAnimationFrame((function(){return c.showSelection()})),r&&c.focus(),!0},t.prototype._createListBox=function(){var t=this,e=this._g,i=e.activeEditor,n=this._rng,r=e.rows[n.row],o=e._getBindingColumn(e.cells,n.row,e.columns[n.col]),s=o.isContentHtml||r.isContentHtml,h=o.dataMap||r.dataMap,c=o.dropDownCssClass||r.dropDownCssClass,u=document.createElement("div");this._removeListBox(),(0,a.addClass)(u,"wj-dropdown-panel wj-grid-listbox"),(0,a.addClass)(u,c);var d=i?i.value:e.getCellData(n.row,n.col,!0),p=new l.ListBox(u,{maxHeight:4*r.renderHeight,isContentHtml:s,itemsSource:h.getDisplayValues(r.dataItem),selectedValue:d});p.addEventListener(u,"keydown",(function(i){switch(i.keyCode){case a.Key.Enter:case a.Key.Escape:t._removeListBox(),e.focus()}})),p.addEventListener(u,"click",(function(){t._removeListBox(),e.focus(),t.finishEditing()})),p.gotFocus.addHandler((function(){p.containsFocus()&&i&&i.focus()})),p.selectedIndexChanged.addHandler((function(){var i=e.activeEditor;i&&(i.value=t._list[p.selectedIndex],i.dispatchEvent(t._evtInput),(0,a.setSelectionRange)(i,0,i.value.length))}));var f=e.cells.getCellElement(n.row,n.col);if(f){(0,a.showPopup)(u,f,!1,!1,!1);var _=f.querySelector("."+J._WJC_DROPDOWN);(0,a.setAttribute)(_,"aria-expanded",!0)}else(0,a.showPopup)(u,e.getCellBoundingRect(n.row,n.col)),u[a.Control._OWNR_KEY]=e.hostElement;return p},t.prototype._removeListBox=function(){var t=this._lbx;t&&(this._lbx=null,(0,a.hidePopup)(t.hostElement,(function(){t.dispose()})))},t._msgRequired="",t._msgBadInput="",t}(),st=function(){function t(t,e){this._col=(0,a.asType)(t,k),this._ctl=e,this._tbx=e.hostElement.querySelector("input"),(0,a.assert)(this._col instanceof k,"Invalid Column"),(0,a.assert)(this._ctl instanceof a.Control,"Invalid edit control"),(0,a.assert)(this._tbx instanceof HTMLInputElement,"Input element not found in editor");var i=this._ctl;this._prop=(0,a.isUndefined)(i.value)?(0,a.isUndefined)(i.checkedItems)?(0,a.isUndefined)(i.text)?null:"text":"checkedItems":"value",(0,a.assert)(null!=this._prop,"value, text properties not found in editor");var n=q();n&&(this._isDropDown=i instanceof n.DropDown,this._isComboBox=i instanceof n.ComboBox,this._isAutoComplete=i instanceof n.AutoComplete,this._isInputDateTime=i instanceof n.InputDateTime,this._isInputMask=i instanceof n.InputMask),this._updateFocusBnd=this._updateFocus.bind(this),this._keydownBnd=this._keydown.bind(this),this._cmpstartBnd=this._cmpstart.bind(this),this._mousedownBnd=this._mousedown.bind(this),this._connect(),this._col.gridChanged.addHandler(this._connect,this),this._hideEditor(),this._updateFocus()}return Object.defineProperty(t.prototype,"grid",{get:function(){return this._g},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"column",{get:function(){return this._col},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"control",{get:function(){return this._ctl},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this._disconnect(),this._isDropDown&&(this._isDropDown=!1),this._g=this._col=this._ctl=this._tbx=null},t.prototype._connect=function(){var t=this._col?this._col.grid:null;if(t!=this._g&&(this._disconnect(),t)){var e=t.hostElement,i=t.addEventListener.bind(t),n=this._updateFocusBnd;this._g=t,this._hideEditor(),this._updateFocus(),i(e,"keydown",this._keydownBnd,!0),i(e,"mousedown",this._mousedownBnd,!0),i(e,"mouseup",n,!0),i(e,"blur",n,!0),i(e,"focus",n),i(this._tbx,"compositionstart",this._cmpstartBnd),t.gotFocus.addHandler(n,this),t.selectionChanged.addHandler(n,this),t.prepareCellForEdit.addHandler(this._prepareCellForEdit,this),t.cellEditEnding.addHandler(this._cellEditEnding,this),t.cellEditEnded.addHandler(this._cellEditEnded,this)}},t.prototype._disconnect=function(){var t=this._g;if(t){var e=t.hostElement,i=t.removeEventListener.bind(t),n=this._updateFocusBnd;i(e,"keydown",this._keydownBnd),i(e,"mousedown",this._mousedownBnd),i(e,"mouseup",n),i(e,"blur",n),i(e,"focus",n),i(this._tbx,"compositionstart",this._cmpstartBnd),t.gotFocus.removeHandler(n,this),t.selectionChanged.removeHandler(n,this),t.prepareCellForEdit.removeHandler(this._prepareCellForEdit,this),t.cellEditEnding.removeHandler(this._cellEditEnding,this),t.cellEditEnded.removeHandler(this._cellEditEnded,this),this._g=null}},t.prototype._prepareCellForEdit=function(t,e){if(!e.cancel&&e.getColumn(!0)==this._col){var i=this.grid,n=this._ctl,r=this._tbx,o=this._prop,s=e.range,l=e.data,h=l?l.type:"",c=i.getCellData(s.row,s.col,"text"==o||this._isInputMask),u=!1;switch(this._isComboBox&&(this._isAutoComplete&&(n._oldText=""),n.isRequired||(n.selectedIndex=-1,r.value=""),this._isInputDateTime&&n._setDropdown(n._ddDate)),"checkedItems"==o&&(n.showFilterInput&&(n.showFilterInput=!1,n.showFilterInput=!0),null!=c&&0!=c.length||(n[o]=[],n.selectedIndex=0)),null==c&&n.isRequired||(n[o]=c,this._isAutoComplete&&(clearTimeout(n._toSearch),(d=n.collectionView)&&(d.filter||n._rxHighlight)&&(n._rxHighlight=null,d.filter=null),c&&(n.selectedIndex=n._findNext(c,1,-1)))),h){case"keydown":case"mousedown":var d;((0,a.isUndefined)(l.keyCode)||l.keyCode==a.Key.F4||l.altKey)&&(u=this._isDropDown,this._isAutoComplete&&(null==c||(0,a.isString)(c))&&(d=n.collectionView)&&((d.filter||n._rxHighlight)&&(n._rxHighlight=null,d.filter=null),n.selectedIndex=c?n._findNext(c,1,-1):-1))}if(i.showPlaceholders&&!n.placeholder&&(r.placeholder=this._col.header),this._showEditor(),i._edtHdl._fullEdit=!0,0==h.indexOf("key")&&32==l.keyCode&&((0,a.setSelectionRange)(r,r.value.length),l.preventDefault()),(0,a.isIE)()&&!i.imeEnabled)if("keypress"==h&&l.key)setTimeout((function(){r.value=l.key,(0,a.setSelectionRange)(r,1);var t=document.createEvent("HTMLEvents");t.initEvent("input",!0,!1),r.dispatchEvent(t)})),l.preventDefault();else if("compositionstart"==h){var p=r.value.length;(0,a.setSelectionRange)(r,p)}this._isDropDown&&(n.isDroppedDown=u)}},t.prototype._cellEditEnding=function(t,e){if(!e.cancel&&e.getColumn(!0)==this._col){var i=this.grid,n=this._ctl,r=this._prop;if(this._isAutoComplete){var o=n.selectedIndex;if((0,a.isNumber)(o)&&o<0){var s=n.collectionView;s&&1==s.items.length?n.selectedIndex=0:this._col.isRequired&&(e.cancel=!0)}}!e.cancel&&r&&i._edtHdl._setCustomEditorValue(n[r])}},t.prototype._cellEditEnded=function(t,e){this._hideEditor(),this._updateFocus()},t.prototype._cmpstart=function(t){var e=this;(0,a.isIE)()?setTimeout((function(){e._activateEditor(t)})):this._activateEditor(t)},t.prototype._keydown=function(t){if(!t.defaultPrevented&&this._checkColumn(t.target))if(this.grid.activeEditor){if(t.keyCode==a.Key.Enter&&this._isDropDown){var e=this._ctl;e.isDroppedDown&&(e.isDroppedDown=!1,t.preventDefault(),t.stopImmediatePropagation())}}else if(this._isDropDown){var i=t.keyCode;switch(i){case a.Key.F4:case a.Key.Up:case a.Key.Down:(i==a.Key.F4||t.altKey)&&(this._activateEditor(t),t.preventDefault())}}},t.prototype._checkColumn=function(t){var e=this._g;if((0,a.contains)(t,this._tbx)||null!=t&&this._imeEditor()===t){var i=e._selHdl.selection;return e._getBindingColumn(e.cells,i.row,e.columns[i.col])==this._col}return!1},t.prototype._mousedown=function(t){if(!t.defaultPrevented&&0==t.button&&!t.shiftKey&&!t.ctrlKey&&!t.metaKey&&this._isDropDown&&(0,a.closestClass)(t.target,J._WJC_DROPDOWN)){var e=this.grid,i=e.hitTest(t);i.getColumn(!0)==this._col&&(e.select(i.range),e.refresh(),this._activateEditor(t),t.preventDefault())}},t.prototype._activateEditor=function(t){var e=this.grid;if(!e.activeEditor){var i=e._selHdl.selection;if(i.isValid)return e.startEditing(!0,i.row,i.col,!0,t)}return!1},t.prototype._showEditor=function(){var e=this.grid,i=e.activeEditor,n=(0,a.closest)(i,".wj-cell");if(n){var r=this._tbx,o=this._ctl.hostElement;(0,a.setCss)(o,t._cssVisible),(0,a.toggleClass)(r,"wj-grid-ime",!1),n.innerHTML="",n.appendChild(o),e._edtHdl._edt=r,this._imeEditor()?this._initImeEditInput():(r.select(),r.focus(),i.value="")}},t.prototype._hideEditor=function(){var e=this.grid,i=this._ctl.hostElement,n=this._tbx;this._isDropDown&&(this._ctl.isDroppedDown=!1),n.setCustomValidity("");var r=n.value;n.value=r+" ",n.value=r,(0,a.setCss)(i,t._cssHidden),(0,a.toggleClass)(n,"wj-grid-ime",!0),e&&i.parentElement!=e._root&&e._root.appendChild(i)},t.prototype._updateFocus=function(){var t=this.grid;if(t&&!t.activeEditor){var e=t.hostElement,i=".wj-flexgrid",n=this._tbx,r=(0,a.getActiveElement)(),o=t._getTabIndex();if((0,a.closest)(r,i)==e)if((0,a.closest)(n,i)!=e)this._hideEditor();else if(!t.imeEnabled){var s=t._selHdl.selection,l=t._getBindingColumn(t.cells,s.row,t.columns[s.col]);l&&l==this._col&&t.canEditCell(s.row,s.col)?r!==n&&(n.tabIndex=o,n.select(),n.focus()):n.tabIndex>-1&&(n.tabIndex=-1,r==n&&t.focus(!0))}}},t.prototype._initImeEditInput=function(){var e=this,i=this._imeEditor();if(i){var n=this._tbx,r=n&&n.style.color,o=this._ctl,s=function(){if(i.removeEventListener("compositionend",s),(0,a.setCss)(i,Y._cssHidden),n){n.style.color=r;var l=function(){o.gotFocus.removeHandler(l),e._g._edtHdl._edt=n;var r=i.value;if(r){n.value=r,t._setSelectionRange(n,r.length,r.length);var s=document.createEvent("HTMLEvents");s.initEvent("input",!0,!1),n.dispatchEvent(s)}};o.gotFocus.addHandler(l),n.focus()}};i.addEventListener("compositionend",s),n&&(n.style.color="transparent")}},t._setSelectionRange=function(t,e,i){if(void 0===i&&(i=e),(0,a.contains)(document.body,t)&&!t.disabled&&"none"!=t.style.display)try{t.setSelectionRange((0,a.asNumber)(e),(0,a.asNumber)(i),(0,a.isIE)()?null:"backward"),t.focus()}catch(t){}},t.prototype._imeEditor=function(){var t=this.grid;if(t&&t.imeEnabled){var e=(0,a.getActiveElement)();if(e&&(e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement)&&(0,a.hasClass)(e,"wj-grid-ime"))return e}return null},t._cssHidden={position:"fixed",left:-32e3,top:-32e3,width:"1px",height:"1px",overflow:"hidden",border:"none"},t._cssVisible={position:"absolute",left:0,top:0,width:"100%",height:"100%"},t}();!function(t){t[t.None=0]="None",t[t.MoveDown=1]="MoveDown",t[t.MoveAcross=2]="MoveAcross",t[t.Cycle=3]="Cycle",t[t.CycleOut=4]="CycleOut",t[t.CycleEditable=5]="CycleEditable"}(rt||(rt={}));var at,lt,ht,ct=function(){function t(t){this._kaTab=rt.None,this._kaEnter=rt.MoveDown,this._g=t;var e=t.hostElement;t.addEventListener(e,"keypress",this._keypress.bind(this)),t.addEventListener(e,"keydown",this._keydown.bind(this))}return t.prototype._keydown=function(t){var e=this._g,i=e._edtHdl,n=e.selection,r=t.ctrlKey||t.metaKey,o=t.shiftKey,s=t.altKey,l=t.target,h=t.char||t.key,c=!0;if(!r&&!s&&h&&1==h.length&&(0,a.closest)(l,".wj-cell")&&l.firstElementChild&&(" "!=h||!o)){var u=l.querySelectorAll("."+J._WJC_RADIOMAP+" label input");if(u&&u.length){for(var d=-1,p=0;p<u.length;p++)if(u[p].checked){d=p;break}for(h=h.toLowerCase(),p=0;p<u.length;p++){var f=u[(d+p+1)%u.length];if(" "==h||f.value.toLowerCase()[0]==h){f.click();break}}return void t.preventDefault()}}if(!e._wantsInput(l)){var _=(0,a.tryCast)(e.rows[n.row],L),g=e.editableCollectionView,m=e._getKeyCode(t),v=w,C=b,S=t.defaultPrevented&&!(l instanceof HTMLInputElement);if((e.isRangeValid(n)&&!S||r&&65==m)&&(!e.activeEditor||!i._keydown(t)||e._isNativeCheckbox(e.activeEditor))){if(e.autoClipboard){if(r&&(67==m||45==m)){var E=new x(e.cells,n);if(e.onCopying(E)){var P=D,T=0!=(e.copyHeaders&P.Column),M=0!=(e.copyHeaders&P.Row),I=e.getClipString(null,!1,T,M)+"\r\n";e._eFocus.focus(),a.Clipboard.copy(I),e.onCopied(E)}return void t.stopPropagation()}if(r&&86==m||o&&45==m)return e.isReadOnly||a.Clipboard.paste((function(t){e.setClipString(t)})),void t.stopPropagation()}switch((o||r)&&"Space"==t.code&&(m=a.Key.Space),m){case a.Key.Space:if(o&&n.isValid)switch(e.selectionMode){case C.CellRange:case C.MultiRange:case C.Row:case C.RowRange:case C.ListBox:e.select(new y(n.row,0,n.row,e.columns.length-1),!1)}else if(r&&n.isValid)switch(e.selectionMode){case C.CellRange:case C.MultiRange:e.select(new y(0,n.col,e.rows.length-1,n.col),!1)}else(c=this._startEditing(!0,t))&&setTimeout((function(){var t=e.activeEditor;t&&(t.disabled||t.readOnly&&!(0,a.closest)(t,".wj-control")?e.finishEditing():"checkbox"==t.type&&((0,a.setChecked)(t,t.indeterminate||!t.checked),e.finishEditing()))})),c=!0;break;case 65:if(r)switch(e.selectionMode){case C.None:case C.Cell:break;default:e.selectAll()}else c=!1;break;case a.Key.Left:r||s?c=!1:n.isValid&&0==n.leftCol&&_&&!_.isCollapsed&&_.hasChildren?_.isCollapsed=!0:this._moveSel(v.None,r?v.Home:v.Prev,o);break;case a.Key.Right:r||t.altKey?c=!1:n.isValid&&0==n.leftCol&&_&&_.isCollapsed?_.isCollapsed=!1:this._moveSel(v.None,r?v.End:v.Next,o);break;case a.Key.Up:r?c=!1:t.altKey&&i._toggleListBox(t)?c=!0:this._moveSel(v.Prev,v.None,o);break;case a.Key.Down:r?c=!1:t.altKey&&i._toggleListBox(t)?c=!0:this._moveSel(v.Next,v.None,o);break;case a.Key.PageUp:if(this._moveSel(t.altKey?v.Home:v.PrevPage,v.None,o),e.rows.frozen&&e.selection.row<e.rows.frozen){var R=e.scrollPosition;R.y&&(e.scrollPosition=new a.Point(R.x,0))}break;case a.Key.PageDown:this._moveSel(t.altKey?v.End:v.NextPage,v.None,o);break;case a.Key.Home:this._moveSel(r?v.Home:v.None,v.Home,o);break;case a.Key.End:this._moveSel(r?v.End:v.None,v.End,o);break;case a.Key.Tab:c=this._performKeyAction(e.keyActionTab,o);break;case a.Key.Enter:c=this._performKeyAction(e.keyActionEnter,o),!o&&g&&null!=g.currentEditItem&&i._commitRowEdits();break;case a.Key.Escape:if(c=!1,g&&(g.currentAddItem||g.currentEditItem)){var A=new x(e.cells,e.selection);A.cancel=!0,e.onRowEditEnding(A),g.currentAddItem&&g.cancelNew(),g.currentEditItem&&g.cancelEdit(),e.onRowEditEnded(A),c=!0}e._mouseHdl.resetMouseState();break;case a.Key.Delete:case a.Key.Back:c=this._deleteSel(t);break;case a.Key.F2:c=this._startEditing(!0,t);break;case a.Key.F4:c=i._toggleListBox(t);break;default:c=!1}c&&(e.containsFocus()||e.focus(),t.preventDefault(),t.stopPropagation())}}},t.prototype._performKeyAction=function(t,e){var i=rt,n=w;switch(t){case i.MoveDown:return this._moveSel(e?n.Prev:n.Next,n.None,!1),!0;case i.MoveAcross:return this._moveSel(n.None,e?n.Prev:n.Next,!1),!0;case i.Cycle:return this._moveSel(n.None,e?n.PrevCell:n.NextCell,!1),!0;case i.CycleEditable:return this._moveSel(n.None,e?n.PrevEditableCell:n.NextEditableCell,!1),!0;case i.CycleOut:var r=this._g.selection;return this._moveSel(n.None,e?n.PrevCell:n.NextCell,!1),!r.equals(this._g.selection)}return!1},t.prototype._keypress=function(t){var e=this,i=this._g;if(!i._wantsInput(t.target)&&!t.defaultPrevented){var n=i._edtHdl;if(i.activeEditor)n._keypress(t);else if(t.charCode>a.Key.Space&&"AltLeft"!=t.code&&"AltRight"!=t.code)if(this._startEditing(!1,t)&&i.activeEditor){var r=(0,a.getActiveElement)();if(r instanceof HTMLInputElement&&"checkbox"!=r.type||r instanceof HTMLTextAreaElement){var o=i._selHdl.selection,s=i.getCellData(o.row,o.col,!0),l=i.getCellData(o.row,o.col,!1),h=a.culture.Globalize.numberFormat["%"]||"%",c=String.fromCharCode(t.charCode),u=(0,a.isNumber)(l)&&s.indexOf(h)>-1||""==s&&r.value==h,d=!0,p=function(){r.value=u?c+h:c,(0,a.setSelectionRange)(r,1),r.dispatchEvent(n._evtInput),n._keypress(t),n._edtValue=r.value!=s?r.value:null};if(i.imeEnabled){var f=i._getBindingColumn(i.cells,o.row,i.columns[o.col]),_=f&&f._edt,g=_&&_.control;if(g&&!g._focus){var m=function(){g.gotFocus.removeHandler(m),d=!1,p()};g.gotFocus.addHandler(m)}}d&&p(),t.preventDefault()}}else if(i.autoSearch){var y=!1;if(o=i._selHdl.selection,t.charCode>32||32==t.charCode&&this._search){t.preventDefault(),this._search+=String.fromCharCode(t.charCode),this._toSearch&&clearTimeout(this._toSearch),this._toSearch=setTimeout((function(){e._toSearch=null,e._search=""}),a.Control._SEARCH_DELAY);var b=this._findNext(o.row,o.col);b<0&&this._search.length>1&&(this._search=this._search[this._search.length-1],b=this._findNext(o.row,o.col)),b>-1&&(y=!0,i.select(b,o.col))}y||(this._search="")}}},t.prototype._findNext=function(t,e){var i=this._g,n=i.rows.length;(t<0||1==this._search.length)&&t++;var r=this._search,o=i.caseSensitiveSearch;o||(r=r.toLowerCase());for(var s=i.columns[e].isContentHtml,l=0;l<n;l++){var h=(t+l)%n,c=i.getCellData(h,e,!0).trim();if(s&&(c=(0,a.toPlainText)(c)),o||(c=c.toLowerCase()),0==c.indexOf(r))return h}return-1},t.prototype._moveSel=function(t,e,i){var n=this._g,r=n.selectionMode,o=n._selHdl;r!=b.None&&(r==b.MultiRange&&o.extendedSelection.clear(),o.moveSelection(t,e,i))},t.prototype._deleteSel=function(t){var e=this,i=this._g,n=i.rows,r=i.editableCollectionView,o=i.selection,s=[],a=new y,l=new E(i.cells,a,t),h=b;if(!i._edtHdl._allowEdit())return!1;if(i.allowDelete&&(null==r||r.canRemove&&!r.isAddingNew&&!r.isEditingItem)&&0==(s=n.filter((function(t){return t.isSelected}))).length)switch(i.selectionMode){case h.CellRange:case h.MultiRange:var c=i._getDeleteColumnIndex();i.selectedRanges.forEach((function(t){if(t.leftCol==c&&t.rightCol==i.columns.length-1)for(var e=t.topRow;e>-1&&e<=t.bottomRow;e++){var r=n[e];s.indexOf(r)<0&&s.push(r)}}));break;case h.Row:o.topRow>-1&&s.push(n[o.topRow]);break;case h.RowRange:for(var u=o.topRow;u>-1&&u<=o.bottomRow;u++)s.push(n[u])}if(s.length>0){var d=0;if(i.deferUpdate((function(){r&&r.beginUpdate();for(var t=s.length-1;t>=0;t--){var e=s[t];e instanceof W||(a.setRange(e.index,-1),i.onDeletingRow(l)&&(r&&e.dataItem?r.remove(e.dataItem):i.rows.removeAt(e.index),d++,i.onDeletedRow(l)))}r&&r.endUpdate(!1)})),d>0){var p=o.topRow;for(p=Math.min(p,i.rows.length-1);p>0&&i.rows[p]instanceof W;)p--;o.row=o.row2=p,i.select(o,!1),i.childItemsPath&&r&&r.refresh()}return!0}return 0==s.length&&(i.deferUpdate((function(){var a=i.scrollPosition,l=-1;s=n.filter((function(t){return t.isSelected}));var c=i.selectedRanges.length>1||s.length>1||o.isValid&&n[o.row].dataItem!=n[o.row2].dataItem;if(r&&r.beginUpdate(),s.length){var u=new y(0,0,0,i.columns.length-1);s.forEach((function(i){u.row=u.row2=i.index,e._deleteRange(t,u),l=u.bottomRow}))}else e._deleteRange(t,o),l=o.bottomRow,i.selectionMode==h.MultiRange&&i._selHdl.extendedSelection.forEach((function(i){e._deleteRange(t,i),l=i.bottomRow}));if(i.select(o,!1),i.scrollPosition=a,r){if(c&&r.currentEditItem){r.commitEdit();var d=new x(i.cells,new y(l,-1));i.onRowEditEnding(d),i.onRowEditEnded(d)}r.endUpdate(!1)}})),!0)},t.prototype._deleteRange=function(t,e){for(var i=this._g,n=i.editableCollectionView,r=new y,o=new E(i.cells,r,t),s=new x(i.cells,new y(e.topRow,-1)),a=e.topRow;a<=e.bottomRow;a++){var l=i.rows[a];if(!l.isReadOnly)for(var h=e.leftCol;h<=e.rightCol;h++){var c=i._getBindingColumn(i.cells,a,i.columns[h]);if(!c.getIsRequired(l)&&!c.isReadOnly&&i.getCellData(a,h,!0)&&(r.setRange(a,h),o.cancel=!1,i.onBeginningEdit(o))){var u=l.dataItem,d=n?n.currentEditItem:null;d&&u!=d&&(i.onRowEditEnding(s),i.onRowEditEnded(s)),u!=d&&(s._rng.setRange(a,-1),i.onRowEditStarting(s),i.onRowEditStarted(s)),n&&(n.editItem(u),i._edtHdl._edItem=u),i.setCellData(a,h,"",!0,!1),i.onCellEditEnding(o),i.onCellEditEnded(o)}}}},t.prototype._startEditing=function(t,e,i,n){return this._g._edtHdl.startEditing(t,i,n,!0,e)},t}(),ut="wj-state-dragsrc",dt="wj-flexgrid";!function(t){t[t.None=0]="None",t[t.Columns=1]="Columns",t[t.Rows=2]="Rows",t[t.Both=3]="Both",t[t.ColumnsAllCells=4|t.Columns]="ColumnsAllCells",t[t.RowsAllCells=4|t.Rows]="RowsAllCells",t[t.BothAllCells=4|t.Both]="BothAllCells"}(at||(at={})),function(t){t[t.None=0]="None",t[t.Headers=1]="Headers",t[t.Cells=2]="Cells",t[t.Both=3]="Both"}(lt||(lt={})),function(t){t[t.None=0]="None",t[t.Columns=1]="Columns",t[t.Rows=2]="Rows",t[t.Both=3]="Both"}(ht||(ht={}));var pt=function(){function t(t){var e=this,i=t.hostElement,n=t.addEventListener.bind(t),r=t.removeEventListener.bind(t);this._g=t,this._dvMarker=(0,a.createElement)('<div class="wj-marker">&nbsp;</div>'),n(i,"mousedown",(function(i){if(t._rcBounds=null,!i.defaultPrevented&&0==i.button){var l=i.target;if(!t.containsFocus()){var h=l instanceof HTMLElement&&l.tabIndex>-1?l:t._eFocus;t._setFocusNoScroll(h)}setTimeout((function(){i.defaultPrevented||t.focus()}));var c=(0,a.closestClass)(l,dt);if(c&&c!=t.hostElement||!t.activeEditor&&t._isInputElement(l)&&!e._hasRadioMap(i)&&!t._isNativeCheckbox(l)){var u=t.hitTest(i),d=g;switch(u.cellType){case d.Cell:t.select(u.range,!1),l instanceof HTMLElement&&"root"!=l.getAttribute("wj-part")&&l.focus();break;case d.ColumnHeader:case d.ColumnFooter:t.scrollIntoView(-1,u.col);break;case d.RowHeader:t.scrollIntoView(u.row,-1)}return void((0,a.isIE)()&&u.cellType!=d.Cell&&t._isInputElement(l)&&l.focus())}var p=document;r(p,"mousemove"),r(p,"mouseup"),n(p,"mousemove",o),n(p,"mouseup",s),e._isDown=!0,e._mousedown(i)}}));var o=function(t){e._mousemove(t)},s=function(t){e._isDown=!1,r(document,"mousemove"),r(document,"mouseup"),e._mouseup(t)};n(i,"mouseenter",(function(e){t._rcBounds=null})),n(i,"mousemove",this._hover.bind(this)),n(i,"dblclick",this._dblclick.bind(this)),n(i,"click",this._click.bind(this)),n(i,"selectstart",(function(e){t._isInputElement(e.target)||e.preventDefault()})),n(i,"wheel",(function(e){if(!e.defaultPrevented&&e.deltaY&&!e.ctrlKey&&!e.metaKey){var i=t._root,n=e.deltaY;if((e.shiftKey?i.scrollWidth>i.clientWidth:i.scrollHeight>i.clientHeight)&&(0,a.closestClass)(e.target,dt)==t.hostElement){switch(e.deltaMode){case 1:n=t.rows.defaultSize*(n<0?-1:1);break;case 2:n=(e.shiftKey?i.clientWidth:i.clientHeight)*(n<0?-1:1);break;default:(0,a.isSafari)()&&(n=(0,a.clamp)(n,-150,150))}t.containsFocus()||t._eFocus.focus(),t.finishEditing(!1)&&(e.shiftKey?i.scrollLeft+=n:i.scrollTop+=n),e.preventDefault(),e.stopImmediatePropagation()}}})),n(i,"dragstart",this._dragstart.bind(this)),n(i,"dragover",this._dragover.bind(this)),n(i,"dragleave",this._dragover.bind(this)),n(i,"drop",this._drop.bind(this)),n(i,"dragend",this._dragend.bind(this))}return t.prototype.resetMouseState=function(){var t=this._g,e=t.hostElement;this._updating&&(this._updating=!1,t.endUpdate()),this._dragSrc&&(0,a.removeClass)(this._dragSrc,ut),this._showDragMarker(null),e&&(e.style.cursor=""),(0,a.isSafari)()&&this._szRowCol&&t.invalidate(),t.removeEventListener(document,"mousemove"),t.removeEventListener(document,"mouseup"),this._eMouse=null,this._isDown=null,this._htDown=null,this._lbSelState=null,this._szRowCol=null,this._szArgs=null,t._rcBounds=null},t.prototype._mousedown=function(t){var e=this._g,i=t.target,n=e.hitTest(t),r=n.cellType,o=g,s=t.ctrlKey||t.metaKey;if(this._selDown=e.selection,this._ignoreClick=!1,n.panel==e.cells){if((0,a.closestClass)(i,J._WJC_DROPDOWN)){var l=e.hitTest(i);return e._edtHdl._toggleListBox(t,l.range),t.preventDefault(),void(this._ignoreClick=!0)}var h=e.editRange;if(h&&h.contains(n.range))return}var c=(0,a.getActiveElement)();if(i!=c||!e._isInputElement(i))if(r!=o.None)if(this._htDown=n,this._eMouse=t,null==this._szRowCol){var u=e.allowResizing,d=at;if((r==o.RowHeader||r==o.TopLeft)&&n.edgeBottom&&u&d.Rows&&this._getResizeRowHt(n))this._ignoreClick=!0;else if((r==o.ColumnHeader||r==o.TopLeft)&&n.edgeRight&&u&d.Columns&&this._getResizeColHt(n))this._ignoreClick=!0;else{var p=e.allowDragging,f=ht;switch(r){case o.Cell:case o.RowHeader:s&&e.selectionMode==b.ListBox&&(this._lbSelState=e.rows[n.row].isSelected,(0,a.closest)(i,".wj-elem-collapse")&&(this._lbSelState=!1)),this._mouseSelect(t,t.shiftKey),r!=o.RowHeader||p&f.Rows||(t.preventDefault(),e.focus());break;case o.ColumnHeader:e.allowSorting||p&f.Columns||(0,a.closest)(i,"button")||this._mouseSelect(t,t.shiftKey)}}}else{var _=e._eFocus;c!=_&&(_.tabIndex=0,_.focus()),this._ignoreClick=!0,this._handleResizing(t)}else e.finishEditing(),i!=e._root&&i!=e._fCt&&e._edtHdl._commitRowEdits()},t.prototype._mousemove=function(t){if(this._htDown&&!t.defaultPrevented){if(0==t.buttons&&this._eMouse&&t.timeStamp-this._eMouse.timeStamp>600)return void this.resetMouseState();if(this._eMouse=t,this._szRowCol)this._handleResizing(t);else{var e=this._g,i=e.allowDragging,n=ht,r=g;switch(this._htDown.cellType){case r.Cell:this._mouseSelect(t,!0);break;case r.RowHeader:i&n.Rows||this._mouseSelect(t,!0);break;case r.ColumnHeader:i&n.Columns||e.allowSorting||this._mouseSelect(t,!0)}}}},t.prototype._mouseup=function(t){var e=this._g;if(!e.isTouching||!(this._dragSrc||t.target instanceof HTMLHtmlElement)){var i=e.hitTest(t),n=this._htDown;if(n&&!t.defaultPrevented&&(this._szArgs&&this._finishResizing(t),!this._szArgs&&i.panel==n.panel&&i.row==n.row&&i.col==n.col)){var r=i.getColumn();if(r&&(!r._getFlag(P.HasTemplate)||r.cellTemplate)){var o=i.target;if(o!=n.target&&o instanceof HTMLElement){if(n.target instanceof HTMLInputElement){var s=i.point,a=n.point;Math.abs(s.x-a.x)+Math.abs(s.y-a.y)<10&&(o=o.querySelector("input")||o)}var l=document.createEvent("Event");for(var h in l.initEvent("click",!0,!0),t)/Key$|X$|Y$|^button|^(x|y|which)$/.test(h)&&(l[h]=t[h]);o.dispatchEvent(l)}}}this.resetMouseState()}},t.prototype._click=function(t){if(this._ignoreClick&&(this._ignoreClick=!1,t.preventDefault()),!t.defaultPrevented){var e=this._g,i=t.target,n=e.hitTest(i),r=(0,a.tryCast)(i,HTMLInputElement),o="input."+J._WJC_CHECKBOX;if(!r){var s=(0,a.closest)(i,"label");s&&(r=s.querySelector(o))}if(!r&&e.bigCheckboxes&&(r=i.querySelector(o)),r!=e.activeEditor&&e._isNativeCheckbox(r)){if(n.panel==e.cells){var l=e.getCellData(n.row,n.col,!1);e.startEditing(!1,n.row,n.col,!1,t)?(e.activeEditor.checked=!l,e.finishEditing(),e.focus()):r.checked=l}return}if(this._hasRadioMap(t))return void this._handleClick(t);var h=t.ctrlKey||t.metaKey;if(e.rows.maxGroupLevel>-1&&(0,a.closestClass)(i,J._WJC_COLLAPSE)){var c=e.rows[n.row];if(n.panel==e.cells&&c instanceof L)return void(h?e.collapseGroupsToLevel(c.isCollapsed?c.level+1:c.level):c.isCollapsed=!c.isCollapsed)}if(!h&&!t.shiftKey&&!e.activeEditor&&n.panel==e.cells){var u=e._selHdl.selection;if(u.equals(this._selDown)&&n.range.contains(u))return void e.startEditing(!0,null,null,!0,t)}this._handleClick(t)}},t.prototype._handleClick=function(t){var e=this._g,i=t.target,n=e.hitTest(i),r=t.ctrlKey||t.metaKey,o=n.panel;if(!t.defaultPrevented&&n.grid==e){if(o==e.cells&&this._hasRadioMap(t)){var s=(0,a.closest)(i,"label"),l=s&&s.querySelector("input");return void(l&&!l.disabled&&e.startEditing(!1,n.row,n.col,!1,t)&&e.finishEditing()&&(e._edtHdl._edtCanceled?t.preventDefault():e.setCellData(n.row,n.col,s.textContent,!0,e.refreshOnEdit)))}if(!e._isInputElement(i)){if(o==e.topLeftCells){var h=b;switch(e.selectionMode){case h.None:case h.Cell:break;default:e.selectAll()}return}if(o==e.columnHeaders){if(e.allowPinning&&(0,a.closestClass)(i,J._WJC_PIN))this._clickPin(t,n);else if(!e._isTransposed()&&(0,a.closestClass)(t.target,J._WJC_COLLAPSE)){if(f=e._getColumnGroup(n.row,n.col))if(r)for(var c=f.isCollapsed,u=f.level,d=[],p=0;p<e.columns.length;p++)(f=e._getColumnGroup(n.row,p))&&f.collapseTo&&f.level==u&&d.indexOf(f)<0&&(d.push(f),f.isCollapsed=!c);else f.isCollapsed=!f.isCollapsed}else i instanceof HTMLSpanElement&&i.parentElement instanceof HTMLLabelElement&&(i=i.parentElement.querySelector("input")),i instanceof HTMLInputElement||this._clickSort(t,n),e.focus();return}if(o==e.rowHeaders){var f;if(e._isTransposed()&&(0,a.closestClass)(t.target,J._WJC_COLLAPSE)&&(f=e._getColumnGroup(n.row,n.col)))if(r){c=f.isCollapsed,u=f.level,d=[];for(var _=0;_<e.rows.length;_++)(f=e._getColumnGroup(_,n.col))&&f.collapseTo&&f.level==u&&d.indexOf(f)<0&&(d.push(f),f.isCollapsed=!c)}else f.isCollapsed=!f.isCollapsed;return}if(o==e.cells){if(n.row<0)return void this._clickSort(t,n);if((0,a.closestClass)(i,J._WJC_COLLAPSE)){var g=e.rows[n.row];return void(g instanceof L&&(r?e.collapseGroupsToLevel(g.isCollapsed?g.level+1:g.level):g.isCollapsed=!g.isCollapsed))}(0,a.closestClass)(i,J._WJC_DROPDOWN)&&e._edtHdl._toggleListBox(t,n.range)}}}},t.prototype._hasRadioMap=function(t){var e=t.target;if((0,a.closest)(e,"label")){var i=(0,a.closestClass)(e,J._WJC_RADIOMAP);return(0,a.closestClass)(i,dt)==this._g.hostElement}return!1},t.prototype._clickSort=function(t,e){var i=this._g,n=i.allowSorting,r=i.collectionView,o=r?r.sortDescriptions:null,s=t.ctrlKey||t.metaKey,l=t.shiftKey;if(r&&r.canSort&&n!=M.None){var h=e.panel.columns[e.col],c=i._getBindingColumn(e.panel,e.row,h),u=c?c._getBindingSort():null;if(c.allowSorting&&u){if(h==c){var d=i.getMergedRange(e.panel,e.row,e.col,!1);if(d&&d.columnSpan>1)return}var p=new x(e.panel,e.range,t);if(i.onSortingColumn(p)){i._edtHdl._commitRowEdits();for(var f=-1,_=null,g=0;g<o.length;g++)if(o[g].property==u){f=g,_=o[g];break}o.deferUpdate((function(){if(s&&l)o.clear();else if(_){var t=s;!t&&i.isTouching&&(t=0==_.ascending),t?o.removeAt(f):o[f]=new a.SortDescription(u,!_.ascending)}else{n!=M.MultiColumn&&o.clear();var e=new a.SortDescription(u,!0);o.push(e)}})),i.onSortedColumn(p)}}}},t.prototype._clickPin=function(t,e){var i=this._g,n=i.columns,r=n.frozen,o=i.allowPinning;o==I.Both&&(o=t.shiftKey?I.ColumnRange:I.SingleColumn);var s=new x(i.cells,e.range);i.onPinningColumn(s)&&(o==I.SingleColumn&&(e.col>=r?(n.moveElement(e.col,r,!1),n.frozen++):(n.moveElement(e.col,r-1,!1),n.frozen--)),o==I.ColumnRange&&(e.col+1!=r?n.frozen=e.col+1:n.frozen=0),i.onPinnedColumn(s))},t.prototype._dblclick=function(t){if(!t.defaultPrevented){var e,i=this._g,n=i.hitTest(t),r=t.ctrlKey||t.metaKey,o=n.range,s=n.cellType,a=g,l=i.selection,h=i.allowResizing,c=at;if(n.edgeRight&&h&c.Columns){if(s==a.TopLeft)n.panel.columns[n.col].allowResizing&&(e=new x(n.panel,new y(-1,n.col)),i.onAutoSizingColumn(e)&&i.onResizingColumn(e)&&(this._ignoreClick=!0,i.autoSizeColumn(n.col,!0),i.onAutoSizedColumn(e),i.onResizedColumn(e),t.preventDefault()));else if(s==a.ColumnHeader||4&h){s==a.ColumnHeader&&r&&l.containsColumn(n.col)&&(o=l);for(var u=s==a.RowHeader||s==a.BottomLeft,d=o.leftCol;d<=o.rightCol;d++)n.panel.columns[d].allowResizing&&(e=new x(n.panel,new y(-1,d)),i.onAutoSizingColumn(e)&&i.onResizingColumn(e)&&(this._ignoreClick=!0,i.autoSizeColumn(d,u),i.onResizedColumn(e),i.onAutoSizedColumn(e),t.preventDefault()))}this.resetMouseState()}else if(n.edgeBottom&&h&c.Rows){if(s==a.TopLeft||s==a.BottomLeft)n.getRow().allowResizing&&(u=s==a.TopLeft||null,e=new x(n.panel,new y(n.row,-1)),i.onAutoSizingRow(e)&&i.onResizingRow(e)&&(this._ignoreClick=!0,i.autoSizeRow(n.row,u),i.onResizedRow(e),i.onAutoSizedRow(e),t.preventDefault()));else if(s==a.RowHeader||4&h){var p=n.panel;u=p==i.columnHeaders||p==i.columnFooters&&null,r&&l.containsRow(n.row)&&p==i.cells&&(o=l);for(var f=o.topRow;f<=o.bottomRow;f++)p.rows[f].allowResizing&&(e=new x(p,new y(f,-1)),i.onAutoSizingRow(e)&&i.onResizingRow(e)&&(this._ignoreClick=!0,i.autoSizeRow(f,u),i.onResizedRow(e),i.onAutoSizedRow(e),t.preventDefault()))}this.resetMouseState()}}},t.prototype._hover=function(t){if(!this._isDown){var e=this._g,i=e.hitTest(t),n="";return this._szRowCol=this._getResizeColHt(i)||this._getResizeRowHt(i),this._szRowCol instanceof k?n="col-resize":this._szRowCol instanceof O&&(n="row-resize"),this._szStart=this._szRowCol?this._szRowCol.renderSize:0,e.hostElement.style.cursor=n,i}return null},t.prototype._getResizeColHt=function(t){var e,i=this._g.allowResizing,n=t.cellType,r=g;return i&at.Columns&&(n==r.ColumnHeader||n==r.TopLeft||4&i)&&(t.edgeRight&&(e=t.getColumn()),t.edgeFarRight&&(e=this._getResizeCol(t.panel,t.col)||t.getColumn()),t.edgeLeft&&(e=this._getResizeCol(t.panel,t.col,!0)||e)),e&&e.allowResizing?e:null},t.prototype._getResizeRowHt=function(t){var e,i=this._g.allowResizing,n=at,r=t.cellType,o=g;return i&n.Rows&&(r==o.RowHeader||r==o.TopLeft||4&i)&&(t.edgeBottom&&(e=t.getRow()),t.edgeFarBottom&&(e=this._getResizeRow(t.panel,t.row)||t.getRow()),t.edgeTop&&(e=this._getResizeRow(t.panel,t.row,!0)||e)),e&&e.allowResizing?e:null},t.prototype._getResizeCol=function(t,e,i){void 0===i&&(i=!1);var n=this._g,r=t.columns;if(i){for(var o=e-1;o>=0;o--)if((s=r[o]).isVisible)return this._asResizable(s);if(r==n.columns&&0!=(n.headersVisibility&D.Row))for(o=(r=n.rowHeaders.columns).length-1;o>=0;o--)if((s=r[o]).isVisible)return this._asResizable(s);return null}for(o=e+1;o<r.length;o++)if((s=r[o]).isVisible)return this._asResizable(s);if(e==r.length-1&&r==n.rowHeaders.columns)for(r=n.columns,o=0;o<r.length;o++){var s;if((s=r[o]).isVisible)return this._asResizable(s)}return null},t.prototype._getResizeRow=function(t,e,i){void 0===i&&(i=!1);var n=this._g,r=t.rows;if(i){for(var o=e-1;o>=0;o--)if((s=r[o]).isVisible)return this._asResizable(s);if(r==n.rows&&0!=(n.headersVisibility&D.Column))for(o=(r=n.columnHeaders.rows).length-1;o>=0;o--)if((s=r[o]).isVisible)return this._asResizable(s);return null}for(o=e+1;o<r.length;o++)if((s=r[o]).isVisible)return this._asResizable(s);if(e==r.length-1&&r==n.columnHeaders.rows)for(r=n.rows,o=0;o<r.length;o++){var s;if((s=r[o]).isVisible)return this._asResizable(s)}return null},t.prototype._asResizable=function(t){return 0==t.renderSize&&t.allowResizing?t:null},t.prototype._mouseSelect=function(t,e){var i=this,n=this._g;if(t&&this._htDown&&this._htDown.panel&&n.selectionMode!=b.None){var r=new X(this._htDown.panel,t);this._handleSelection(r,e),!(0,a.isIE9)()&&t.button>=0&&t.target!=n._root&&((r=new X(n,t)).panel||setTimeout((function(){i._isDown&&i._eMouse&&i._mouseSelect(i._eMouse,e)}),100))}},t.prototype._handleResizing=function(e){"mousedown"==e.type&&((0,a.isSafari)()?(0,a.setAttribute)(e.target,"draggable",null):e.preventDefault());var i=this._szRowCol;if(i instanceof k){var n=this._g,r=(0,a.mouseToPage)(e).x,o=Math.round(Math.max(t._SZ_MIN,this._szStart+(r-this._htDown.point.x)*(n.rightToLeft?-1:1)));if(i.renderSize!=o){if(null==this._szArgs){var s=n.rowHeaders.columns.indexOf(i)>-1?n.rowHeaders:n.cells;this._szArgs=new x(s,new y(-1,i.index))}this._szArgs.cancel=!1,n.onResizingColumn(this._szArgs)&&(n.deferResizing?this._showResizeMarker(o):i.width=o)}}var l=this._szRowCol;if(l instanceof O){n=this._g;var h=(0,a.mouseToPage)(e).y;o=Math.round(Math.max(t._SZ_MIN,this._szStart+(h-this._htDown.point.y))),l.renderSize!=o&&(null==this._szArgs&&(s=n.columnHeaders.rows.indexOf(l)>-1?n.columnHeaders:n.columnFooters.rows.indexOf(l)>-1?n.columnFooters:n.cells,this._szArgs=new x(s,new y(l.index,-1))),this._szArgs.cancel=!1,n.onResizingRow(this._szArgs)&&(n.deferResizing?this._showResizeMarker(o):l.height=o))}this._szArgs&&e.preventDefault()},t.prototype._dragstart=function(t){var e=this._g,i=this._htDown,n=ht,r=g;if(i){if(this._dragSrc=null,this._htDrag=null,this._chldColGrpMarker=!1,!this._szRowCol){var o=new x(i.panel,i.range),s=e.allowDragging,l=i.cellType,h=i.panel.rows,c=i.getColumn(!0);if(c&&c.allowDragging&&(l==r.ColumnHeader||l==r.TopLeft)&&s&n.Columns&&(e.onDraggingColumn(o)?this._dragSrc=t.target:t.preventDefault()),!this._dragSrc&&i.row>-1&&h[i.row].allowDragging){var u=h[i.row];u instanceof L||u instanceof W||l==r.RowHeader&&s&n.Rows&&(e.onDraggingRow(o)?this._dragSrc=t.target:t.preventDefault())}}this._dragSrc&&t.dataTransfer&&!t.defaultPrevented&&(this._htDrag=i,(0,a._startDrag)(t.dataTransfer,"move"),t.stopPropagation(),(0,a.addClass)(this._dragSrc,ut),e.beginUpdate(),this._updating=!0)}},t.prototype._dragend=function(t){this._dragSrc=null,this._htDrag=null,this.resetMouseState()},t.prototype._dragover=function(t){var e=this._g,i=this._hitTest(t),n=this._dragSrc?this._htDrag:null,r=g,o=!1;if(n&&i.cellType==n.cellType){var s=new x(i.panel,i.range,n);i.cellType==r.ColumnHeader&&e._hasColumnGroups()?(s.cancel=!e._canMoveColumnGroup(n.row,n.col,i.row,i.col),o=e.onDraggingColumnOver(s)):i.cellType==r.ColumnHeader?(s.cancel=!e.columns.canMoveElement(n.col,i.col),o=e.onDraggingColumnOver(s)):i.cellType==r.RowHeader?(s.cancel=!e.rows.canMoveElement(n.row,i.row),o=e.onDraggingRowOver(s)):i.cellType==r.TopLeft&&(s.cancel=!e.topLeftCells.columns.canMoveElement(n.col,i.col),o=e.onDraggingColumnOver(s))}if(o?(t.dataTransfer.dropEffect="move",t.preventDefault(),t.stopPropagation(),this._showDragMarker(i)):this._showDragMarker(null),n&&e.autoScroll){var l=e.controlRect,h=e.scrollPosition,c=a.Control._DRAG_SCROLL_EDGE,u=a.Control._DRAG_SCROLL_STEP;n.panel==e.columnHeaders?(t.pageX-l.left<c&&(h.x+=u),l.right-t.pageX<c&&(h.x-=u)):n.panel==e.rowHeaders&&(t.pageY-l.top<c&&(h.y+=u),l.bottom-t.pageY<c&&(h.y-=u)),h.equals(e._ptScrl)||(e.scrollPosition=h,e._rcBounds=null)}},t.prototype._drop=function(t){var e=this._g,i=this._hitTest(t),n=this._dragSrc?this._htDrag:null,r=g;if(n&&i.cellType==n.cellType){var o=e.selection,s=new x(i.panel,i.range,n);i.cellType==r.ColumnHeader&&e._hasColumnGroups()?(e._moveColumnGroup(n.row,n.col,i.row,i.col,this._chldColGrpMarker),e.select(o.row,i.col),e.onDraggedColumn(s)):i.cellType==r.ColumnHeader?(e.columns.moveElement(n.col,i.col),e.select(o.row,i.col),e.onDraggedColumn(s)):i.cellType==r.RowHeader?(e.rows.moveElement(n.row,i.row),e.select(i.row,o.col),e.onDraggedRow(s)):i.cellType==r.TopLeft&&(e.topLeftCells.columns.moveElement(n.col,i.col),e.onDraggedColumn(s))}this.resetMouseState()},t.prototype._hitTest=function(t){var e=this._g;return e._rcBounds=null,e.hitTest(t)},t.prototype._showResizeMarker=function(t){var e,i=this._g,n=i._ptScrl,r=this._szArgs.panel.cellType,o=g,s=this._dvMarker,l=i.cells.hostElement;s.parentElement!=l&&l.appendChild(s),this._szRowCol instanceof k?(e={left:this._szRowCol.pos+t-1,top:-1e3,right:"",bottom:0,width:3,height:""},r!=o.TopLeft&&r!=o.RowHeader||(e.left-=i._eTL.offsetWidth+n.x),r==o.Cell&&this._szRowCol.index<i.frozenColumns&&(e.left-=n.x),i.rightToLeft&&(e.left=l.clientWidth-e.left-e.width)):(e={left:-1e3,top:this._szRowCol.pos+t-1,right:0,bottom:"",width:"",height:3},r!=o.TopLeft&&r!=o.ColumnHeader||(e.top-=i._eTL.offsetHeight+n.y),r==o.Cell&&this._szRowCol.index<i.frozenRows&&(e.top-=n.y)),(0,a.setCss)(s,e)},t.prototype._showDragMarker=function(e){var i=this._dvMarker;if(e&&e.panel){if(!e.range.equals(this._rngTarget)){this._rngTarget=e.range;var n=e.panel.hostElement;i.parentElement!=n&&n.appendChild(i);var r=this._g,o=r._ptScrl,s=g,l={left:0,top:0,width:6,height:6,right:"",bottom:""};switch(e.cellType){case s.ColumnHeader:var h=r._getColumnGroup(e.row,e.col);if(h){var c=h._rng,u=e.panel.rows,d=e.panel.columns;if(h.isEmpty&&null===h.binding){var p=u[c.bottomRow],f=d[c.leftCol],_=r.rightToLeft,m=_?i.parentElement.clientWidth-e.point.x:e.point.x,y=Math.max(f.renderWidth/5,t._SZ_MAX_COLGRP_EDGE),b=f.pos+y,v=f.pos+f.renderWidth-y,w=this._htDown&&e.col>this._htDown.col;if(!w&&m>b||w&&m<v){l.top=p.pos-l.height/2+p.renderHeight,l.left=_?i.parentElement.clientWidth-f.pos-f.renderWidth:f.pos,l.width=f.renderWidth,this._chldColGrpMarker=!0;break}}this._chldColGrpMarker=!1,l.top=0,l.height=0;for(var C=0;C<c.topRow;C++)l.top+=u[C].renderHeight;for(C=c.topRow;C<=c.bottomRow;C++)l.height+=u[C].renderHeight;if(l.left=0,this._htDown&&e.col>this._htDown.col){var x=d[c.rightCol];l.left=x.pos-l.width/2+x.renderWidth}else{var S=d[c.leftCol];l.left=S.pos-l.width/2}r.rightToLeft&&(l.left=i.parentElement.clientWidth-l.left-l.width);break}case s.TopLeft:case s.ColumnHeader:var E=e.panel.columns[e.col];l.left=E.pos-l.width/2,l.height=e.panel.height,this._htDown&&e.col>this._htDown.col&&(l.left+=E.renderWidth),e.cellType==s.ColumnHeader&&e.col<r.frozenColumns&&(l.left-=o.x),r.rightToLeft&&(l.left=i.parentElement.clientWidth-l.left-l.width);break;case s.RowHeader:var P=e.getRow();l.top=P.pos-l.height/2,l.width=e.panel.width,e.row>this._htDown.row&&(l.top+=P.renderHeight),e.row<r.frozenRows&&(l.top-=o.y)}(0,a.setCss)(i,l)}}else(0,a.removeChild)(i),this._rngTarget=null},t.prototype._finishResizing=function(e){var i=this._g,n=i.selection,r=this._szArgs,o=this._eMouse,s=o&&(o.ctrlKey||o.metaKey),l=g;if(r&&!r.cancel){if(r.col>-1){var h=r.col,c=(0,a.mouseToPage)(e).x,u=Math.round(Math.max(t._SZ_MIN,this._szStart+(c-this._htDown.point.x)*(this._g.rightToLeft?-1:1)));if(r.panel.columns[h].width=Math.round(u),i.onResizedColumn(r),s&&this._htDown.cellType==l.ColumnHeader&&n.containsColumn(h))for(var d=n.leftCol;d<=n.rightCol;d++)i.columns[d].allowResizing&&d!=h&&(r=new x(i.cells,new y(-1,d)),i.onResizingColumn(r)&&(i.columns[d].size=i.columns[h].size,i.onResizedColumn(r)));e.preventDefault()}if(r.row>-1){var p=r.row,f=(0,a.mouseToPage)(e).y;if(u=Math.round(Math.max(t._SZ_MIN,this._szStart+(f-this._htDown.point.y))),r.getRow().height=Math.round(u),i.onResizedRow(r),s&&this._htDown.cellType==l.RowHeader&&n.containsRow(p))for(var _=n.topRow;_<=n.bottomRow;_++)i.rows[_].allowResizing&&_!=p&&(r=new x(i.cells,new y(_,-1)),i.onResizingRow(r)&&(i.rows[_].size=i.rows[p].size,i.onResizedRow(r)));e.preventDefault()}}},t.prototype._handleSelection=function(t,e){var i=this._g,n=i._selHdl.selection,r=new y(t.row,t.col),o=g,s=b;if(r.isValid)if(null==this._lbSelState){switch(t.cellType){case o.RowHeader:r.col=0,r.col2=i.columns.length-1;break;case o.ColumnHeader:switch(i.selectionMode){case s.Row:case s.Cell:r.row=r.row2=n.row,e=!1;break;default:r.row=0,r.row2=i.rows.length-1}}if(e&&(i.anchorCursor?(r.row=n.row,r.col=n.col):(r.row2=n.row2,r.col2=n.col2),!r.isValid)){var l=this._htDown;l&&(r=new y(l.row,l.col))}if(i.selectionMode==b.MultiRange){var h=i._mouseHdl._eMouse,c=h&&(h.ctrlKey||h.metaKey),u=i._selHdl,d=u.selection,p=u.extendedSelection,f=t.panel!=i.cells;(0,a.closest)(h.target,".wj-elem-collapse")&&(c=!1),c?!e&&u._deselectRange(r)?u.selection.isValid&&(r=null):!d.isValid||!f&&d.intersects(r)||(f?this._splitRange(d):[d.clone()]).forEach((function(t){for(var e=!1,i=0;i<p.length&&!e;i++)p[i].equals(t)&&(e=!0);e||p.push(t)})):p.clear()}if(r)switch(i.select(r,!1),t.cellType){case o.RowHeader:i.scrollIntoView(t.row,-1);break;case o.ColumnHeader:i.scrollIntoView(-1,t.col);break;default:i.scrollIntoView(t.row,t.col)}else{var _=new x(i.cells,new y(t.row,t.col));i.onSelectionChanging(_),i.onSelectionChanged(_),i.invalidate()}}else i.rows[t.row].isSelected=!this._lbSelState,i.scrollIntoView(t.row,t.col)},t.prototype._splitRange=function(t){var e=this._g,i=e.columns.length,n=e.rows.length,r=[];if(t.columnSpan==i)for(var o=t.topRow;o<=t.bottomRow;o++)r.push(new y(o,0,o,i-1));else if(t.rowSpan==n)for(var s=t.leftCol;s<=t.rightCol;s++)r.push(new y(0,s,n-1,s));else r.push(t.clone());return r},t._SZ_MIN=0,t._SZ_MAX_COLGRP_EDGE=50,t}();(0,a._registerModule)("wijmo.grid",h)},913:(t,e,i)=>{i.r(e),i.d(e,{AutoComplete:()=>A,Calendar:()=>y,ClickAction:()=>m,CollectionViewNavigator:()=>c,ColorPicker:()=>h,ComboBox:()=>T,DateSelectionMode:()=>p,DropDown:()=>w,FormatItemEventArgs:()=>d,InputColor:()=>P,InputDate:()=>S,InputDateRange:()=>E,InputDateTime:()=>R,InputMask:()=>l,InputNumber:()=>a,InputTime:()=>D,ListBox:()=>u,Menu:()=>I,MultiAutoComplete:()=>k,MultiSelect:()=>M,MultiSelectListBox:()=>g,Popup:()=>C,PopupBoundsChangingEventArgs:()=>x,PopupTrigger:()=>v,ShowMonthPicker:()=>_});var n,r=i(664),o=i(913),s=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});(0,r._addCultureInfo)("InputNumber",{ariaLabels:{incVal:"Increase Value",decVal:"Decrease Value"}});var a=function(t){function e(e,i){var n=t.call(this,e)||this;n._value=null,n._min=null,n._max=null,n._format="",n._step=null,n._showBtn=!0,n._readOnly=!1,n._handleWheel=!0,n._oldText="",n._fromKb=!0,n.textChanged=new r.Event,n.valueChanged=new r.Event;var o=n.hostElement;(0,r.setAttribute)(o,"role","spinbutton",!0);var s=n.getTemplate();n.applyTemplate("wj-control wj-content wj-inputnumber",s,{_tbx:"input",_btnUp:"btn-inc",_btnDn:"btn-dec"},"input");var a=r.culture.InputNumber.ariaLabels;(0,r.setAriaLabel)(n._btnUp.querySelector("button"),a.incVal),(0,r.setAriaLabel)(n._btnDn.querySelector("button"),a.decVal),n._tbx.type.match(/number/i)&&(n.inputType="");var l=n._tbx;l.autocomplete="off",l.spellcheck=!1,n._updateSymbols();var h=n.addEventListener.bind(n);h(l,"keypress",n._keypress.bind(n)),h(l,"keydown",n._keydown.bind(n)),h(l,"input",n._input.bind(n)),h(l,"blur",(function(){n.text!=n._oldText&&n._setText(n.text)})),h(l,"paste",(function(){n._fromKb=!1})),h(l,"compositionstart",(function(){n._composing=!0})),h(l,"compositionend",(function(){n._composing=!1,setTimeout((function(){var t=n.text,e=n._oldText,i=n._chrPct;e&&e.indexOf(i)>-1&&t.indexOf(i)<0&&(t+=i),n._setText(t)}))}));var c=n._clickSpinner.bind(n);return h(n._btnUp,"click",c),h(n._btnDn,"click",c),n._rptUp=new r._ClickRepeater(n._btnUp.querySelector("button")),n._rptDn=new r._ClickRepeater(n._btnDn.querySelector("button")),h(l,"wheel",(function(t){if(n.handleWheel&&!t.defaultPrevented&&!t.ctrlKey&&n._isEditable()&&n.containsFocus()){var e=(0,r.clamp)(-t.deltaY,-1,1);n._increment((n.step||1)*e),setTimeout((function(){return n.selectAll()})),t.preventDefault()}})),n.value=0,n.isRequired=!0,n.initialize(i),n}return s(e,t),Object.defineProperty(e.prototype,"inputElement",{get:function(){return this._tbx},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputType",{get:function(){return this._tbx.type},set:function(t){this._tbx.type=(0,r.asString)(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(t){if(t!=this._value)if(null==(t=(0,r.asNumber)(t,!this.isRequired||null==t&&null==this._value)))this._setText("");else if(!isNaN(t)){var e=r.Globalize.format(t,this.format);this._setText(e)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isRequired",{get:function(){return this._tbx.required},set:function(t){this._tbx.required=(0,r.asBoolean)(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isReadOnly",{get:function(){return this._readOnly},set:function(t){this._readOnly=(0,r.asBoolean)(t),this.inputElement.readOnly=this._readOnly,(0,r.toggleClass)(this.hostElement,"wj-state-readonly",this.isReadOnly)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"handleWheel",{get:function(){return this._handleWheel},set:function(t){this._handleWheel=(0,r.asBoolean)(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"min",{get:function(){return this._min},set:function(t){t!=this._min&&(this._min=(0,r.asNumber)(t,!0),this._updateAria())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"max",{get:function(){return this._max},set:function(t){t!=this._max&&(this._max=(0,r.asNumber)(t,!0),this._updateAria())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"step",{get:function(){return this._step},set:function(t){this._step=(0,r.asNumber)(t,!0),this._updateBtn()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"format",{get:function(){return this._format},set:function(t){t!=this.format&&(this._format=(0,r.asString)(t),this.refresh())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._tbx.value},set:function(t){t!=this.text&&(this._oldText=null,this._setText(t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"placeholder",{get:function(){return this._tbx.placeholder},set:function(t){this._tbx.placeholder=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showSpinner",{get:function(){return this._showBtn},set:function(t){this._showBtn=(0,r.asBoolean)(t),this._updateBtn()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"repeatButtons",{get:function(){return!this._rptUp.disabled},set:function(t){this._rptUp.disabled=this._rptDn.disabled=!(0,r.asBoolean)(t)},enumerable:!0,configurable:!0}),e.prototype.selectAll=function(){var t=this._tbx;(0,r.setSelectionRange)(t,0,t.value.length)},e.prototype.clamp=function(t){return(0,r.clamp)(t,this.min,this.max)},e.prototype.onTextChanged=function(t){this.textChanged.raise(this,t),this._updateState()},e.prototype.onValueChanged=function(t){this._updateAria(),this.valueChanged.raise(this,t)},e.prototype.dispose=function(){this._rptUp.element=null,this._rptDn.element=null,t.prototype.dispose.call(this)},e.prototype.onGotFocus=function(e){this._oldValue=this.value,this.isTouching||(this._tbx.focus(),this.selectAll()),t.prototype.onGotFocus.call(this,e)},e.prototype.onLostFocus=function(e){if(this._composing&&(this._composing=!1,this._setText(this.text)),this._isEditable()){var i=this.clamp(this.value);if(i==this.value||this.onInvalidInput(new r.CancelEventArgs)){var n=r.Globalize.format(i,this.format);this._setText(n)}}t.prototype.onLostFocus.call(this,e)},e.prototype.refresh=function(e){if(void 0===e&&(e=!0),t.prototype.refresh.call(this,e),this.hostElement){this._updateSymbols();var i=r.Globalize.format(this.value,this.format);this._setText(i)}},e.prototype._isEditable=function(){return!this.isReadOnly&&!this.isDisabled},e.prototype._updateSymbols=function(){var t=r.culture.Globalize.numberFormat,e=r.Globalize._parseNumericFormat(this.format);this._chrDec=t["."]||".",this._chrTho=t[","]||",",this._chrNeg=t["-"]||"-",this._chrPls=t["+"]||"+",this._chrPct=t["%"]||"%",this._chrCur=e.curr||t.currency.symbol||"$",this._fmtSpc=e.spec,this._fmtPrc=e.prec,this._rxSym=new RegExp("^[%+\\-() \\"+this._chrDec+"\\"+this._chrCur+"\\"+this._chrNeg+"\\"+this._chrPls+"\\"+this._chrPct+"]*$"),this._rxNeg=new RegExp("^\\s*(\\-|\\"+this._chrNeg+")|([^e](\\-|\\"+this._chrNeg+")|\\()")},e.prototype._isNumeric=function(t,e){var i=t==this._chrDec||t>="0"&&t<="9",n="x"==this._fmtSpc;return!i&&n&&(i=t>="a"&&t<="f"||t>="A"&&t<="F"),i||e||n||(i=t==this._chrPls||t==this._chrNeg||"("==t||")"==t),i},e.prototype._getInputRange=function(t){for(var e=[0,0],i=this.text,n=!1,r=0;r<i.length;r++)this._isNumeric(i[r],t)&&(n||(e[0]=r,n=!0),e[1]=r+1);return e},e.prototype._flipSign=function(){var t=this._getSelStartDigits();this.value*=-1,this._setSelStartDigits(t)},e.prototype._getSelStartDigits=function(){for(var t=0,e=this._tbx.selectionStart,i=this._tbx.value,n=0;n<i.length&&n<e;n++)this._isNumeric(i[n],!0)&&t++;return t},e.prototype._setSelStartDigits=function(t){for(var e=this._tbx.value,i=0;i<e.length&&t>=0;i++)if(this._isNumeric(e[i],!0)){if(!t){(0,r.setSelectionRange)(this._tbx,i);break}t--}else if(!t){(0,r.setSelectionRange)(this._tbx,i);break}},e.prototype._increment=function(t){if(t){var e=this.clamp((0,r.isNumber)(this.value)?this.value+t:0),i=r.Globalize.format(e,this.format,!1,!1);this._setText(i)}},e.prototype._updateBtn=function(){var t=this.showSpinner&&!!this.step,e=t;(0,r.setCss)([this._btnUp,this._btnDn],{display:t?"":"none"}),(0,r.toggleClass)(this.hostElement,"wj-input-show-spinner",t),(0,r.enable)(this._btnUp,e),(0,r.enable)(this._btnDn,e),this._updateAria()},e.prototype._setText=function(t,e){if(void 0===e&&(e=!1),!this._composing){var i=this._tbx,n=this._chrDec,o=this._rxNeg.test(t),s=this._delKey,a=this.containsFocus();if(t&&this._rxSym.test(t)&&a&&(t=this.isRequired||!s?(o?"-0":"0")+(t.indexOf(n)>-1?n:""):""),this._delKey=!1,s&&0==this.value&&!this.isRequired&&(t=""),!t){if(!this.isRequired)return i.value="",null!=this._value&&(this._value=null,this.onValueChanged()),this._oldText&&(this._oldText=t,this.onTextChanged()),void this._updateBtn();t="0"}var l=t.indexOf(n),h=this._format||(l>-1?"n2":"n0"),c=r.Globalize.parseFloat(t,h);if(isFinite(c)||(c=this.clamp(c)),isNaN(c))this.onInvalidInput(new r.CancelEventArgs)?i.value=this._oldText:this.focus();else{var u=a&&l>-1?2:null,d=r.Globalize.format(c,h,!1,e,u);o&&c>=0&&!s&&(d=this._chrNeg+d),a&&l>-1&&"g"==this._fmtSpc&&0!=this._fmtPrc&&(d=t).indexOf(n)<0&&(d+=n),i.value!=d&&(i.value=d,c=r.Globalize.parseFloat(d,h)),c!=this._value&&(this._value=c,this.onValueChanged()),this.text!=this._oldText&&(this._oldText=this.text,this.onTextChanged()),this._updateBtn(),this._updateState()}}},e.prototype._keypress=function(t){if(!t.defaultPrevented&&!this._composing&&this._isEditable()&&t.charCode&&!t.ctrlKey&&!t.metaKey&&t.keyCode!=r.Key.Enter){var e=this._tbx,i=String.fromCharCode(t.charCode);if(this._isNumeric(i,!1)){var n=e.maxLength;if(n>-1&&e.value.length>=n&&e.selectionEnd==e.selectionStart)return void t.preventDefault();var o=this._getInputRange(!0),s=e.selectionStart,a=e.selectionEnd;if(s<o[0]&&a<e.value.length&&(a=Math.max(a,o[0]),(0,r.setSelectionRange)(e,o[0],a)),s>=o[1]){var l=null!=this._fmtPrc?this._fmtPrc:2,h=e.value.indexOf(this._chrDec);h>-1&&s-h>l&&t.preventDefault()}}else t.preventDefault();switch(i){case"-":case this._chrNeg:this.clamp(-1)>=0?this.value<0&&this._flipSign():this.value&&e.selectionStart==e.selectionEnd?this._flipSign():this.clamp(-1)<0&&(e.value=this._chrNeg,(0,r.setSelectionRange)(e,1)),t.preventDefault();break;case"+":case this._chrPls:this.value<0&&this._flipSign(),t.preventDefault();break;case".":case this._chrDec:if(0==this._fmtPrc)t.preventDefault();else{var c=e.value.indexOf(this._chrDec);c>-1&&(e.selectionStart<=c&&c++,(0,r.setSelectionRange)(e,c),t.preventDefault())}}if(!t.defaultPrevented&&(0,r.isIE)()){var u=e.value;(s=e.selectionStart)==(a=e.selectionEnd)&&(e.value=u.substr(0,s)+i+u.substr(a),(0,r.setSelectionRange)(e,s+1),t.preventDefault(),this._input())}}},e.prototype._keydown=function(t){var e=this;if(this._delKey=!1,!t.defaultPrevented&&!this._composing&&!(0,r.hasClass)(this._tbx,"wj-grid-ime")){var i=this._tbx,n=i.value,o=i.selectionStart,s=i.selectionEnd;switch(t.keyCode){case 65:t.ctrlKey&&(setTimeout((function(){e.selectAll()})),t.preventDefault());break;case r.Key.Up:case r.Key.Down:this.step&&this._isEditable()&&(this._increment(this.step*(t.keyCode==r.Key.Up?1:-1)),setTimeout((function(){e.selectAll()})),t.preventDefault());break;case r.Key.Back:if(this._delKey=!0,s-o<2&&this._isEditable()){var a=n[s-1];a!=this._chrDec&&a!=this._chrPct&&a!=this._chrTho&&")"!=a||(setTimeout((function(){s=a==e._chrPct?e._getInputRange(!0)[1]:s-1,(0,r.setSelectionRange)(i,s)})),t.preventDefault())}break;case r.Key.Delete:if(this._delKey=!0,s-o<2&&this._isEditable())if("0"==n&&1==o)(0,r.setSelectionRange)(i,0);else{var l=n[o];l!=this._chrDec&&l!=this._chrPct||(setTimeout((function(){(0,r.setSelectionRange)(i,o+1)})),t.preventDefault())}break;case r.Key.Escape:this.value=this._oldValue,this.selectAll()}}},e.prototype._input=function(){var t=this;this._composing?this._fromKb=!0:setTimeout((function(){var e=t._tbx,i=e.value,n=i.indexOf(t._chrDec),o=e.selectionStart,s=t._getSelStartDigits();if("p"==t._fmtSpc&&i.length&&i.indexOf(t._chrPct)<0&&(i+=t._chrPct),t._setText(i,t._fromKb),t._fromKb=!0,t.containsFocus()){var a=e.value,l=a.indexOf(t._chrDec),h=t._getInputRange(!0);if(i==t._chrNeg+t._chrDec&&l>-1)return void(0,r.setSelectionRange)(e,l+1);if(i[0]==t._chrNeg&&a[0]!=t._chrNeg)return void(1==a.length?(0,r.setSelectionRange)(e,1):t._setSelStartDigits(s));i?i==t._chrDec&&l>-1?o=l+1:o<=n&&l>-1||n<0&&l<0?o+=a.length-i.length:n<0&&l>-1&&(o=l):o=l>-1?l:h[1],o=(0,r.clamp)(o,h[0],h[1]),(0,r.setSelectionRange)(e,o)}}))},e.prototype._clickSpinner=function(t){var e=this;!t.defaultPrevented&&this._isEditable()&&this.step&&(this._increment(this.step*((0,r.contains)(this._btnUp,t.target)?1:-1)),this.isTouching||setTimeout((function(){return e.selectAll()})))},e.prototype._updateAria=function(){var t=this.hostElement;t&&((0,r.setAttribute)(t,"aria-valuemin",this.min),(0,r.setAttribute)(t,"aria-valuemax",this.max),(0,r.setAttribute)(t,"aria-valuenow",this.value),(0,r.enable)(this._btnDn,null==this.min||this.value>this.min),(0,r.enable)(this._btnUp,null==this.max||this.value<this.max))},e.controlTemplate='<div class="wj-template"><div class="wj-input"><div class="wj-input-group"><span wj-part="btn-dec" class="wj-input-group-btn" tabindex="-1"><button class="wj-btn wj-btn-default" tabindex="-1">-</button></span><input type="tel" wj-part="input" class="wj-form-control wj-numeric"/><span wj-part="btn-inc" class="wj-input-group-btn" tabindex="-1"><button class="wj-btn wj-btn-default" tabindex="-1">+</button></span></div></div></div>',e}(r.Control),l=function(t){function e(e,i){var n=t.call(this,e)||this;n.valueChanged=new r.Event;var o=n.getTemplate();if(n.applyTemplate("wj-control wj-content wj-inputmask",o,{_tbx:"input"},"input"),"INPUT"==n._orgTag){var s=n._tbx.getAttribute("value");s&&(n.value=s)}return n._msk=new r._MaskProvider(n._tbx),n.isRequired=!0,n.initialize(i),n.addEventListener(n._tbx,"input",(function(){n.onValueChanged()})),n.addEventListener(n._tbx,"blur",n._commitText.bind(n)),n.addEventListener(n._tbx,"keydown",(function(t){t.keyCode==r.Key.Enter&&n._commitText()})),n}return s(e,t),Object.defineProperty(e.prototype,"inputElement",{get:function(){return this._tbx},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputType",{get:function(){return this._tbx.type},set:function(t){this._tbx.type=(0,r.asString)(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this._tbx.value},set:function(t){t!=this.value&&(this._tbx.value=(0,r.asString)(t),t=this._msk._applyMask(),this._tbx.value=t,this.onValueChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rawValue",{get:function(){return this._msk.getRawValue()},set:function(t){t!=this.rawValue&&(this.value=(0,r.asString)(t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mask",{get:function(){return this._msk.mask||""},set:function(t){var e=this.value;this._msk.mask=(0,r.asString)(t),this.value!=e&&this.onValueChanged()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"promptChar",{get:function(){return this._msk.promptChar},set:function(t){var e=this.value;this._msk.promptChar=t,this.value!=e&&this.onValueChanged()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"overwriteMode",{get:function(){return this._msk.overwriteMode},set:function(t){this._msk.overwriteMode=(0,r.asBoolean)(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"placeholder",{get:function(){return this._tbx.placeholder},set:function(t){this._tbx.placeholder=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maskFull",{get:function(){return this._msk.maskFull},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isRequired",{get:function(){return this._tbx.required},set:function(t){this._tbx.required=(0,r.asBoolean)(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isReadOnly",{get:function(){return this._tbx.readOnly},set:function(t){this._tbx.readOnly=(0,r.asBoolean)(t),(0,r.toggleClass)(this.hostElement,"wj-state-readonly",this.isReadOnly)},enumerable:!0,configurable:!0}),e.prototype.selectAll=function(){var t=this._msk.getMaskRange();(0,r.setSelectionRange)(this._tbx,t[0],t[1]+1)},e.prototype.onValueChanged=function(t){this.value!=this._oldValue&&(this._oldValue=this.value,this.valueChanged.raise(this,t)),this._updateState()},e.prototype._commitText=function(){if((this.value||this.isRequired)&&!this.maskFull&&!this.onInvalidInput(new r.CancelEventArgs)){var t=this._tbx,e=t.value,i=e.indexOf(this.promptChar);i>-1&&(0,r.setSelectionRange)(t,i,e.length)}this._updateState()},e.prototype.dispose=function(){this._msk.input=null,t.prototype.dispose.call(this)},e.prototype.refresh=function(e){void 0===e&&(e=!0),t.prototype.refresh.call(this,e),this.hostElement&&this._msk.refresh()},e.prototype.onGotFocus=function(e){t.prototype.onGotFocus.call(this,e),this.selectAll()},e.controlTemplate='<div class="wj-input"><div class="wj-input-group"><input wj-part="input" class="wj-form-control"/></div></div>',e}(r.Control),h=function(t){function e(i,n){var o=t.call(this,i)||this;o._hsb=[.5,1,1],o._alpha=1,o.valueChanged=new r.Event;var s=o.getTemplate();o.applyTemplate("wj-control wj-content wj-colorpicker",s,{_eSB:"div-sb",_eHue:"div-hue",_eAlpha:"div-alpha",_ePreview:"div-pv",_ePal:"div-pal",_eText:"div-text"}),o._palette="#FFF,#000,#F00,#FFC000,#FFFF00,#92D050,#00B050,#00B0F0,#0070C0,#7030A0".split(","),o._updatePalette(),o._eHue.style.backgroundImage="url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAD4CAIAAACi6hsPAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAYdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjAuM4zml1AAAAGvSURBVDhPXdBPaM9xHMfxz4pWaxcmtoOhpdXSVpiyHWxqmVpDjaU5rK34XfypjTJ/p+ZPay6jhsOsRrKwaJElf9IQq03WIkv4FeMwMq221tfje1ByeFzfvd7PEKWGEKWTQRZLySWfVRRTQjmVbKWGOhLsZT+HaeY0bbTTQSfdXOcWffTzmAFeMcwoYyT5ygS/mA5hNgphip98J8kHRnnNSwZ4yH1uc4OrdHGR87RximYO0cgedlLLdqqoYAPrWMtKVrCcJSxiPmnMJUQp/Bsyk2xyyKOAQooopYwKtlDNDur5G7SBJo7RQiv/B+2hl3s84CkvGGKEOOYnxolj/mYmhBmDJ5ngCx95xxsGecYj4pB3iENeoZMO2mmlhaMcpIE4ZII6aqhmM3HMMkooopB88sghm0wySCeVlCjMCVFIYx4LWUwOeRSwhmLWU84mqqihll3sppEmjnOSs5zjEl1c4yZ99POE5wwxwns+840fTDFLFKaZZIJxkozxlmEGGSC+GF++Sy89dHOZC8Rr4lVnOMERDrCPBPXEX22jko2UEn+/mnxyWUYWC0gnNUQh/AEc0HJs6cex0gAAAABJRU5ErkJggg==)",o._eHue.style.backgroundSize="contain",navigator.appVersion.indexOf("MSIE 9")>-1&&(o._eSB.children[0].style.filter="progid:DXImageTransform.Microsoft.gradient(startColorstr=#ffffffff,endColorstr=#00ffffff,GradientType=1)",o._eSB.children[1].style.filter="progid:DXImageTransform.Microsoft.gradient(startColorstr=#00000000,endColorstr=#ff000000,GradientType=0)"),s=e._tplCursor,o._cSB=(0,r.createElement)(s),o._cHue=(0,r.createElement)(s),o._cHue.style.width="100%",o._cAlpha=(0,r.createElement)(s),o._cAlpha.style.height="100%",o._eSB.appendChild(o._cSB),o._eHue.appendChild(o._cHue),o._eAlpha.appendChild(o._cAlpha);var a=o.addEventListener.bind(o),l=o.removeEventListener.bind(o),h=document;a(o.hostElement,"mousedown",(function(t){a(h,"mousemove",c),a(h,"mouseup",u),o._mouseDown(t)})),a(o.hostElement,"touchstart",(function(t){a(h,"touchmove",c),a(h,"touchend",u),o._mouseDown(t)}));var c=function(t){o._mouseMove(t)},u=function(t){l(h,"mousemove",c),l(h,"mouseup",u),l(h,"touchmove",c),l(h,"touchend",u),o._mouseUp(t)};return a(o.hostElement,"click",(function(t){var e=t.target;if(e&&"DIV"==e.tagName&&(0,r.contains)(o._ePal,e)){var i=e.style.backgroundColor;i&&(o.value=new r.Color(i).toString())}})),o.value="#ffffff",o.initialize(n),o._updatePanels(),o}return s(e,t),Object.defineProperty(e.prototype,"showAlphaChannel",{get:function(){return"none"!=this._eAlpha.parentElement.style.display},set:function(t){this._eAlpha.parentElement.style.display=(0,r.asBoolean)(t)?"":"none"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showColorString",{get:function(){return"none"!=this._eText.style.display},set:function(t){this._eText.style.display=(0,r.asBoolean)(t)?"":"none"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(t){if(t!=this.value){t=(0,r.asString)(t);var e=r.Color.fromString(t);if(e){this._value=t,this._eText.innerText=t;var i=e.getHsb();this._hsb[0]==i[0]&&this._hsb[1]==i[1]&&this._hsb[2]==i[2]&&this._alpha==e.a||(0==i[2]?(i[0]=this._hsb[0],i[1]=this._hsb[1]):0==i[1]&&(i[0]=this._hsb[0]),this._hsb=i,this._alpha=e.a,this._updatePanels(),this.onValueChanged())}}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"palette",{get:function(){return this._palette},set:function(t){(t=(t=(0,r.asArray)(t)).slice(0,10)).every((function(t){return null!=r.Color.fromString(t)}))&&(this._palette=t,this._updatePalette())},enumerable:!0,configurable:!0}),e.prototype.onValueChanged=function(t){this._updatePanels(),this.valueChanged.raise(this,t)},e.prototype._mouseDown=function(t){this._htDown=this._getTargetPanel(t),this._htDown&&(t.preventDefault(),this.focus(),this._mouseMove(t))},e.prototype._mouseMove=function(t){var e=t.touches?t.touches[0]:t,i=this._htDown;if(i){var n=i.getBoundingClientRect(),o=this._hsb;i==this._eHue?o[0]=(0,r.clamp)((e.clientY-n.top)/n.height,0,.99):i==this._eSB?(o[1]=(0,r.clamp)((e.clientX-n.left)/n.width,0,1),o[2]=(0,r.clamp)(1-(e.clientY-n.top)/n.height,0,1)):i==this._eAlpha&&(this._alpha=(0,r.clamp)((e.clientX-n.left)/n.width,0,1)),this._updateColor()}},e.prototype._mouseUp=function(t){this._htDown=null},e.prototype._updateColor=function(){var t=r.Color.fromHsb(this._hsb[0],this._hsb[1],this._hsb[2],this._alpha);this.value=t.toString(),this._updatePanels()},e.prototype._updatePalette=function(){var t=new r.Color("#fff"),e=new r.Color("#000");this._ePal.innerHTML="";for(var i=0;i<this._palette.length;i++){var n=(0,r.createElement)('<div style="float:left;width:10%;box-sizing:border-box;padding:1px">'),o=new r.Color(this._palette[i]),s=o.getHsb();n.appendChild(this._makePalEntry(o,4));for(var a=0;a<5;a++){if(0==s[1]){var l=.1*a+(s[2]>.5?.05:.55);o=r.Color.interpolate(t,e,l)}else o=r.Color.fromHsb(s[0],.1+.2*a,1-.1*a);n.appendChild(this._makePalEntry(o,0))}this._ePal.appendChild(n)}},e.prototype._makePalEntry=function(t,e){var i=document.createElement("div");return(0,r.setCss)(i,{cursor:"pointer",backgroundColor:t.toString(),marginBottom:e||""}),i.innerHTML="&nbsp",i},e.prototype._updatePanels=function(){var t=r.Color.fromHsb(this._hsb[0],1,1,1),e=r.Color.fromHsb(this._hsb[0],this._hsb[1],this._hsb[2],1);this._eSB.style.backgroundColor=t.toString(),this._eAlpha.style.background="linear-gradient(to right, transparent 0%, "+e.toString()+" 100%)",navigator.appVersion.indexOf("MSIE 9")>-1&&(this._eAlpha.style.filter="progid:DXImageTransform.Microsoft.gradient(startColorstr=#00000000,endColorstr="+e.toString()+", GradientType = 1)"),this._ePreview.style.backgroundColor=this.value,this._cHue.style.top=(100*this._hsb[0]).toFixed(0)+"%",this._cSB.style.left=(100*this._hsb[1]).toFixed(0)+"%",this._cSB.style.top=(100-100*this._hsb[2]).toFixed(0)+"%",this._cAlpha.style.left=(100*this._alpha).toFixed(0)+"%"},e.prototype._getTargetPanel=function(t){var e=t.target;return(0,r.contains)(this._eSB,e)?this._eSB:(0,r.contains)(this._eHue,e)?this._eHue:(0,r.contains)(this._eAlpha,e)?this._eAlpha:null},e.controlTemplate='<div style="position:relative;width:100%;height:100%"><div style="float:left;width:50%;height:100%;box-sizing:border-box;padding:2px"><div wj-part="div-pal"><div style="float:left;width:10%;box-sizing:border-box;padding:2px"><div style="background-color:black;width:100%">&nbsp;</div><div style="height:6px"></div></div></div><div wj-part="div-text" style="position:absolute;bottom:0px;display:none"></div></div><div style="float:left;width:50%;height:100%;box-sizing:border-box;padding:2px"><div wj-part="div-sb" class="wj-colorbox" style="float:left;width:89%;height:89%"><div style="position:absolute;width:100%;height:100%;background:linear-gradient(to right, white 0%,transparent 100%)"></div><div style="position:absolute;width:100%;height:100%;background:linear-gradient(to top, black 0%,transparent 100%)"></div></div><div style="float:left;width:1%;height:89%"></div><div style="float:left;width:10%;height:89%"><div wj-part="div-hue" class="wj-colorbox"></div></div><div style="float:left;width:89%;height:1%"></div><div style="float:left;width:89%;height:10%"><div style="width:100%;height:100%;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAIAAABLbSncAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAYdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjAuM4zml1AAAAAcSURBVBhXY/iPBBYgAWpKQGkwgMqDAdUk/v8HAM7Mm6GatDUYAAAAAElFTkSuQmCC)"><div wj-part="div-alpha" class="wj-colorbox"></div></div></div><div style="float:left;width:1%;height:10%"></div><div style="float:left;width:10%;height:10%"><div wj-part="div-pv" class="wj-colorbox" style="position:static"></div></div></div></div>',e._tplCursor='<div style="position:absolute;left:50%;top:50%;width:7px;height:7px;transform:translate(-50%,-50%);border:2px solid #f0f0f0;border-radius:50px;box-shadow:0px 0px 4px 2px #0f0f0f"></div>',e}(r.Control),c=function(t){function e(e,i){var n=t.call(this,e)||this;n._view=null,n._byPage=!1,n._fmt="{current:n0} / {count:n0}";var o=n.getTemplate();return n.applyTemplate("wj-control wj-content wj-pager wj-collectionview-navigator",o,{_btnFirst:"btn-first",_btnPrev:"btn-prev",_txtCurr:"txt-curr",_btnNext:"btn-next",_btnLast:"btn-last"},"input"),n._rptNext=new r._ClickRepeater(n._btnNext.querySelector("button")),n._rptPrev=new r._ClickRepeater(n._btnPrev.querySelector("button")),n.addEventListener(n.hostElement,"click",n._click.bind(n)),n.initialize(i),n._update(),n}return s(e,t),Object.defineProperty(e.prototype,"cv",{get:function(){return this._view},set:function(t){if(t!=this._view){var e=this._view;e&&(e.collectionChanged.removeHandler(this._collectionChanged),e.currentChanged.removeHandler(this._currentChanged)),e=this._view=(0,r.asType)(t,"ICollectionView",!0),this._update(),e&&(e.collectionChanged.addHandler(this._collectionChanged,this),e.currentChanged.addHandler(this._currentChanged,this))}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"byPage",{get:function(){return this._byPage},set:function(t){t!=this._byPage&&(this._byPage=(0,r.asBoolean)(t),this._update())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"headerFormat",{get:function(){return this._fmt},set:function(t){t!=this._fmt&&(this._fmt=(0,r.asString)(t),this._update())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"repeatButtons",{get:function(){return!this._rptNext.disabled},set:function(t){this._rptNext.disabled=this._rptPrev.disabled=!(0,r.asBoolean)(t)},enumerable:!0,configurable:!0}),e.prototype._update=function(){var t=this._view,e=this._byPage,i=t?e?t.pageIndex:t.currentPosition:0,n=t?e?t.pageCount:t.itemCount:0;(0,r.enable)(this._btnFirst,t&&i>0),(0,r.enable)(this._btnPrev,t&&i>0),(0,r.enable)(this._txtCurr,null!=t),(0,r.enable)(this._btnNext,t&&i<n-1),(0,r.enable)(this._btnLast,t&&i<n-1),this._txtCurr.value=(0,r.format)(this._fmt,{current:t?i+1:0,count:t?n:0,currentItem:t?t.currentPosition+1:0,itemCount:t?t.itemCount:0,currentPage:t?t.pageIndex+1:0,pageCount:t?t.pageCount:0})},e.prototype._currentChanged=function(){this._update()},e.prototype._collectionChanged=function(){this._update()},e.prototype._click=function(t){var e=t.target,i=this._view,n=this._byPage;i&&((0,r.contains)(this._btnFirst,e)?n?i.moveToFirstPage():i.moveCurrentToFirst():(0,r.contains)(this._btnPrev,e)?n?i.moveToPreviousPage():i.moveCurrentToPrevious():(0,r.contains)(this._btnNext,e)?n?i.moveToNextPage():i.moveCurrentToNext():(0,r.contains)(this._btnLast,e)&&(n?i.moveToLastPage():i.moveCurrentToLast()),t.preventDefault())},e.controlTemplate='<div class="wj-input-group"><span wj-part="btn-first" class="wj-input-group-btn"><button class="wj-btn wj-btn-default" tabindex="-1"><span class="wj-glyph-step-backward"></span></button></span><span wj-part="btn-prev" class="wj-input-group-btn"> <button class="wj-btn wj-btn-default" tabindex="-1"><span class="wj-glyph-left"></span> </button></span><input wj-part="txt-curr" class="wj-form-control" readonly><span wj-part="btn-next" class="wj-input-group-btn"><button class="wj-btn wj-btn-default" tabindex="-1"><span class="wj-glyph-right"></span></button></span><span wj-part="btn-last" class="wj-input-group-btn"><button class="wj-btn wj-btn-default" tabindex="-1"><span class="wj-glyph-step-forward"></span></button></span></div>',e}(r.Control),u=function(t){function e(i,n){var o=t.call(this,i,null,!0)||this;o._cv=null,o._itemFormatter=null,o._pathDisplay=new r.Binding(""),o._pathValue=new r.Binding(""),o._pathChecked=new r.Binding(""),o._html=!1,o._shGroups=!1,o._checkedItems=[],o._itemRole="option",o._caseSensitive=!1,o._vThreshold=e._VTHRESH,o._isVirtual=!1,o._children=[],o._clientHeight=-1,o._itemHeight=30,o._itemsAbove=-1,o._itemsBelow=-1,o._eSizer=document.createElement("div"),o._ePadTop=document.createElement("div"),o._ePadBot=document.createElement("div"),o._checking=!1,o._search="",o._fmtItemHandlers=0,o._itemCount=0,o._oldSel=null,o.selectedIndexChanged=new r.Event,o.itemsChanged=new r.Event,o.loadingItems=new r.Event,o.loadedItems=new r.Event,o.itemChecked=new r.Event,o.checkedItemsChanged=new r.Event,o.formatItem=new r.Event((function(){o.invalidate()})),o.applyTemplate("wj-control wj-content wj-listbox",null,null);var s=o.hostElement;return(0,r.setAttribute)(s,"role","listbox",!0),"SELECT"==o._orgTag&&o._initFromSelect(o.hostElement),o.addEventListener(s,"click",o._click.bind(o)),o.addEventListener(s,"keydown",o._keydown.bind(o)),o.addEventListener(s,"keypress",o._keypress.bind(o)),o.addEventListener(s,"wheel",(function(t){s.scrollHeight>s.offsetHeight&&(t.deltaY<0&&0==s.scrollTop||t.deltaY>0&&s.scrollTop+s.offsetHeight>=s.scrollHeight)&&(t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation())})),[o._eSizer,o._ePadTop,o._ePadBot].forEach((function(t){t.tabIndex=-1,(0,r.setAttribute)(t,"aria-hidden",!0),(0,r.setCss)(t,{pointerEvents:"none",opacity:"0"})})),o.initialize(n),o._updateViewRange(),o.hostElement.addEventListener("scroll",(function(t){o._updateViewRange()})),o}return s(e,t),Object.defineProperty(e.prototype,"itemsSource",{get:function(){return this._items},set:function(t){this._items!=t&&(this._cv&&(this._cv.currentChanged.removeHandler(this._cvCurrentChanged,this),this._cv.collectionChanged.removeHandler(this._cvCollectionChanged,this),this._cv=null),this._items=t,this._cv=(0,r.asCollectionView)(t),null!=this._cv&&(this._cv.currentChanged.addHandler(this._cvCurrentChanged,this),this._cv.collectionChanged.addHandler(this._cvCollectionChanged,this)),this._populateList(),this.onItemsChanged(),this.onSelectedIndexChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"collectionView",{get:function(){return this._cv},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"virtualizationThreshold",{get:function(){return this._vThreshold},set:function(t){if(t!=this._vThreshold){var e=this._getVirtual();this._vThreshold=(0,r.asNumber)(t,!1,!0),e!=this._getVirtual()&&this._populateList()}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showGroups",{get:function(){return this._shGroups},set:function(t){t!=this._shGroups&&(this._shGroups=(0,r.asBoolean)(t),this._populateList())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isContentHtml",{get:function(){return this._html},set:function(t){t!=this._html&&(this._html=(0,r.asBoolean)(t),this._populateList())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemFormatter",{get:function(){return this._itemFormatter},set:function(t){t!=this._itemFormatter&&(this._itemFormatter=(0,r.asFunction)(t),this._populateList())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayMemberPath",{get:function(){return this._pathDisplay.path},set:function(t){t!=this.displayMemberPath&&(this._pathDisplay.path=(0,r.asString)(t),this._populateList())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedValuePath",{get:function(){return this._pathValue.path},set:function(t){this._pathValue.path=(0,r.asString)(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"checkedMemberPath",{get:function(){return this._pathChecked.path},set:function(t){t!=this.checkedMemberPath&&(this._pathChecked.path=(0,r.asString)(t),this._populateList())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"caseSensitiveSearch",{get:function(){return this._caseSensitive},set:function(t){this._caseSensitive=(0,r.asBoolean)(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemRole",{get:function(){return this._itemRole},set:function(t){t!=this.itemRole&&(this._itemRole=(0,r.asString)(t),this._populateList())},enumerable:!0,configurable:!0}),e.prototype.getDisplayValue=function(t){var e=null;t>-1&&(0,r.hasItems)(this._cv)&&(e=this._cv.items[t],this.displayMemberPath&&(e=this._pathDisplay.getValue(e)));var i=null!=e?e.toString():"";return this._itemFormatter&&(i=this._itemFormatter(t,i)),i},e.prototype.getDisplayText=function(t){var e=this._getChild(t);return null!=e?e.textContent:""},e.prototype.isItemEnabled=function(t){var e=this._getChild(t);return null!=e&&!e.hasAttribute("disabled")&&!(0,r.hasClass)(e,"wj-state-disabled")&&!(0,r.hasClass)(e,"wj-separator")},Object.defineProperty(e.prototype,"selectedIndex",{get:function(){return this._cv?this._cv.currentPosition:-1},set:function(t){this._cv&&this._cv.moveCurrentToPosition((0,r.asNumber)(t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedItem",{get:function(){return this._cv?this._cv.currentItem:null},set:function(t){this._cv&&this._cv.moveCurrentTo(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedValue",{get:function(){var t=this.selectedItem;return t&&this.selectedValuePath&&(t=this._pathValue.getValue(t)),t},set:function(t){var e=this._cv,i=e?e.items:null,n=this.selectedValuePath,o=-1;if(i){for(var s=0;s<i.length;s++){var a=i[s],l=n?this._pathValue.getValue(a):a;if(l===t||r.DateTime.equals(l,t)){o=s;break}if(this.isContentHtml&&(0,r.isString)(l)&&l.indexOf("<")>-1&&(0,r.toPlainText)(l)===t){o=s;break}}this.selectedIndex=o}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxHeight",{get:function(){var t=this.hostElement,e=t?parseFloat(t.style.maxHeight):null;return isNaN(e)?null:e},set:function(t){var e=this.hostElement;e&&(t=(0,r.asNumber)(t,!0),e.style.maxHeight=null==t?"":t+"px")},enumerable:!0,configurable:!0}),e.prototype.showSelection=function(t){void 0===t&&(t=this.containsFocus());var e=this.hostElement,i=this._children,n=this._getSelectedElement(!1),o=new r.Rect(0,0,0,0);n!=this._oldSel&&(this._updateItemAttributes(n,!0),this._updateItemAttributes(this._oldSel,!1),this._oldSel=n),n instanceof HTMLElement?o=this._getBoundingClientRect(n):this._children.length>0&&(o=this._getBoundingClientRect(this._getChild(0)));var s=this._getBoundingClientRect(e),a=0;if(this._shGroups&&(a=this._itemHeight,!this._isVirtual)){var l=i[0];l.offsetHeight&&(0,r.hasClass)(l,"wj-header")&&(a=l.offsetHeight)}o.bottom>s.bottom?e.scrollTop+=o.bottom-s.bottom:o.top<s.top+a&&(e.scrollTop-=s.top+a-o.top),this._updateViewRange(),n=this._getSelectedElement(!0),t&&(n&&!(0,r.contains)(n,(0,r.getActiveElement)())?n:e).focus(),e.tabIndex=n?-1:this._orgTabIndex},e.prototype.loadList=function(){this._populateList()},e.prototype.getItemChecked=function(t){var e=this._cv.items[t],i=this._pathChecked;if((0,r.isObject)(e)&&i.path)return i.getValue(e);var n=this._getCheckbox(t);return!!n&&n.checked},e.prototype.setItemChecked=function(t,e){this._setItemChecked(t,e,!0)},e.prototype.toggleItemChecked=function(t){this.setItemChecked(t,!this.getItemChecked(t))},Object.defineProperty(e.prototype,"checkedItems",{get:function(){return this._checkedItems},set:function(t){var e=this,i=(0,r.asArray)(t,!1);if(!this._arrayEquals(i,this._checkedItems)){var n=this._cv,o=this._pathChecked,s=new Map;if(o&&n){var a=n.sourceCollection;if(a&&a.length){(0,r.isObject)(a[0])||(o=null),i.forEach((function(t){return s.set(t,!0)})),this._checking=!0;var l=[];a.forEach((function(t){var e=s.has(t);e&&l.push(t),o&&o.setValue(t,e)})),this._checking=!1,i=l}n.items.forEach((function(t,i){e._setItemChecked(i,s.has(t),!1)}))}this._arrayEquals(i,this._checkedItems)||(this._checkedItems=i,this.onCheckedItemsChanged())}},enumerable:!0,configurable:!0}),e.prototype.indexOf=function(t){return(t=(0,r.closest)(t,".wj-listbox-item"))?t[e._DIDX_KEY]:-1},e.prototype.onSelectedIndexChanged=function(t){this.selectedIndexChanged.raise(this,t)},e.prototype.onItemsChanged=function(t){this.itemsChanged.raise(this,t)},e.prototype.onLoadingItems=function(t){this.loadingItems.raise(this,t)},e.prototype.onLoadedItems=function(t){this.loadedItems.raise(this,t)},e.prototype.onItemChecked=function(t){this.itemChecked.raise(this,t)},e.prototype.onCheckedItemsChanged=function(t){this.checkedItemsChanged.raise(this,t)},e.prototype.onFormatItem=function(t){this.formatItem.raise(this,t)},e.prototype.refresh=function(e){if(void 0===e&&(e=!0),t.prototype.refresh.call(this,e),this.hostElement){var i=this._cv?this._cv.items.length:0,n=this.formatItem.handlerCount;i!=this._itemCount||n!=this._fmtItemHandlers?(this._fmtItemHandlers=n,this._populateList()):this._updateViewRange()}},e.prototype._getBoundingClientRect=function(t){if(!t.offsetHeight){var e=this.indexOf(t),i=this.hostElement;if(e>-1&&i){e=this._getElementIndex(e);var n=i.getBoundingClientRect();return new r.Rect(0,n.top-i.scrollTop+e*this._itemHeight,n.width,this._itemHeight)}}return r.Rect.fromBoundingRect(t.getBoundingClientRect())},e.prototype._updateItemAttributes=function(t,e){if(t){var i=this.checkedMemberPath?this._getCheckbox(this.indexOf(t)):null,n=i?i.checked:null;(0,r.toggleClass)(t,"wj-state-selected",e),(0,r.setAttribute)(t,"aria-selected",this._getAriaSelected(e,n)),t.tabIndex=e?this._orgTabIndex:-1}},e.prototype._getCheckedItems=function(){var t=this,e=this._cv,i=this._pathChecked,n=[];return e&&i&&i.path&&(n=e.sourceCollection.filter((function(n,o){if(e.filter&&!e.filter(n))return!1;if((0,r.isObject)(n))return i.getValue(n);var s=e.items[o]==n?o:e.items.indexOf(n);return t.getItemChecked(s)}))),n},e.prototype._arrayEquals=function(t,e){if(t==e)return!0;if(!t||!e||t.length!=e.length)return!1;for(var i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0},e.prototype._getChild=function(t){return t=this._getElementIndex(t),this._children[t]},e.prototype._getElementIndex=function(t){if(this._shGroups)for(var e=this._children,i=0;i<=t&&i<e.length;i++){var n=e[i];(0,r.hasClass)(n,"wj-header")&&t++}return t},e.prototype._setItemChecked=function(t,e,i){void 0===i&&(i=!0);var n=this._cv.items[t],o=this._pathChecked,s=!1,a=this.selectedIndex,l=this._checking;if((0,r.isObject)(n)&&o.path){if(!!o.getValue(n)!=e){var h=(0,r.tryCast)(this._cv,"IEditableCollectionView");s=!0,this._checking=!0,h?(h.editItem(n),o.setValue(n,e),h.commitEdit()):(o.setValue(n,e),h.refresh()),this._checking=l}}else if(i){var c=this._checkedItems.indexOf(n);(e&&c<0||!e&&c>=0)&&(s=!0)}var u=this._getCheckbox(t);if(u){u.checked=e;var d=(0,r.closest)(u,".wj-listbox-item");d&&((0,r.toggleClass)(d,"wj-state-checked",e),(0,r.setAttribute)(d,"aria-selected",!!e||null))}return i&&(s&&(this._checkedItems=this._checkedItemsUpdate(n,e),this.onItemChecked(),this.onCheckedItemsChanged()),a!=this.selectedIndex&&this.onSelectedIndexChanged()),s},e.prototype._checkedItemsUpdate=function(t,e){var i=this._cv.sourceCollection,n=this._checkedItems,r=0,o=0;if(!e){var s=n.indexOf(t);return n.slice(0,s).concat(n.slice(s+1))}for(;;r++){var a=i[r];if(a===n[o])o++;else if(a===t)return n.slice(0,o).concat([t]).concat(n.slice(o))}},e.prototype._cvCollectionChanged=function(){this._checking||(this._populateList(),this.onItemsChanged())},e.prototype._cvCurrentChanged=function(){this._checking||(this.showSelection(),this.onSelectedIndexChanged())},e.prototype._populateList=function(){var t=this.hostElement,i=this._cv;if(this._itemCount=i?i.items.length:0,this._isVirtual=this._getVirtual(),this._oldSel=null,this._itemsAbove=-1,this._itemsBelow=-1,t){var n=this.containsFocus(),o=void 0;this.onLoadingItems();var s=this._children=[];if(t.textContent="",i){var a=0,l=void 0,h=[];if(this._shGroups&&i.groups&&i.groups.length){o={};for(var c=0;c<i.groups.length;c++){var u=i.groups[c];o[a]=u,l=this._createHeaderItem(u),h.push(l);for(var p=0;p<u.items.length;p++,a++)l=this._createItem(a),h.push(l)}}else for(p=0;p<i.items.length;p++,a++)l=this._createItem(a),h.push(l);var f=this._isVirtual?document.createElement("div"):t,_=0;for(f.innerHTML=h.join(""),p=0;p<f.children.length;p++){var g=f.children[p];_==i.currentPosition&&(this._oldSel=g),g[e._DIDX_KEY]=g.className.indexOf("wj-header")<0?_++:-1,s.push(g)}}if(this.formatItem.hasHandlers&&i){a=0;var m=i.items;for(g=new d(0,null,null),p=0;p<s.length;p++)g._item=s[p],this._shGroups&&(0,r.hasClass)(g._item,"wj-header")?(g._index=-1,g._data=o[a]):(g._index=a,g._data=m[a++]),this.onFormatItem(g)}if(this._isVirtual){var y=this._getCanvasContext(),b=null,v=0;for(p=0;p<s.length;p++){l=s[p];var w=y.measureText(l.textContent);w.width>v&&(b=l,v=w.width)}if(b){var C=!1,x=t.style.display,S=t.style.position;t.parentElement||(C=!0,document.body.appendChild(t),(0,r.setCss)(t,{display:"",position:"absolute"})),t.appendChild(b);var E=b.style.whiteSpace;b.style.whiteSpace="nowrap",this._ePadTop.style.width=b.offsetWidth+"px",this._itemHeight=b.offsetHeight||this._itemHeight,b.style.whiteSpace=E,this._eSizer.style.height=s.length*this._itemHeight+"px",t.appendChild(this._eSizer),this._clientHeight=t.clientHeight,(0,r.removeChild)(this._eSizer),C&&((0,r.removeChild)(t),(0,r.setCss)(t,{display:x,position:S})),(0,r.removeChild)(b)}else this._ePadTop.style.width="";this._updateViewRange()}this.checkedItems=this._getCheckedItems();var P=this._getSelectedElement(!0);n?(P||t).focus():P&&this.showSelection(),t.tabIndex=P?-1:this._orgTabIndex,this.onLoadedItems()}},e.prototype._getCanvasContext=function(){var t=document.createElement("canvas").getContext("2d"),e=getComputedStyle(this.hostElement);return e.fontSize&&e.fontFamily&&(t.font=e.fontSize+" "+e.fontFamily.split(",")[0]),t},e.prototype._getVirtual=function(){if(this._itemCount<=this._vThreshold)return!1;var t=this.hostElement;if(t){var e=getComputedStyle(t);if(parseInt(e.columnCount)>1||e.display.indexOf("flex")>-1||e.display.indexOf("grid")>-1)return!1}return!0},e.prototype._getMaxSupportedCssHeight=function(){var t=265e5;return(0,r.isIE)()?t=15e5:(0,r.isFirefox)()&&(t=175e5),t},e.prototype._updateViewRange=function(){var t=this.hostElement,e=this._itemHeight,i=this._children;if(!(t&&t.parentElement&&this._isVirtual&&i))return!1;var n=t.scrollTop;(0,r.assert)(e*i.length<this._getMaxSupportedCssHeight(),"The number of items ("+i.length+") exceeds the maximum number of items ("+Math.floor(this._getMaxSupportedCssHeight()/e)+") allowed for this browser.");var o=Math.max(t.clientHeight,this._clientHeight),s=Math.floor(n/e),a=Math.min(i.length,Math.ceil((n+o)/e)-s),l=Math.max(0,i.length-s-a);if(s==this._itemsAbove&&l==this._itemsBelow)return!1;this._itemsAbove=s,this._itemsBelow=l;var h=document.createDocumentFragment(),c=this.containsFocus();if(this._ePadTop.style.height=s*e+"px",h.appendChild(this._ePadTop),this.showGroups&&!(0,r.hasClass)(i[s],"wj-header"))for(var u=s;u>=0;u--)if((0,r.hasClass)(i[u],"wj-header")){h.appendChild(i[u]);break}for(u=s;u<=s+a&&u<i.length;u++)h.appendChild(i[u]);this._ePadBot.style.height=l*e+"px",h.appendChild(this._ePadBot),t.textContent="",t.appendChild(h);var d=(s+a+l)*e-t.scrollHeight;this._ePadBot.style.height=this._ePadBot.offsetHeight-d+"px";var p=this._getSelectedElement(!0);return c&&(p||t).focus({preventScroll:!0}),t.tabIndex=p?-1:this._orgTabIndex,!0},e.prototype._getSelectedElement=function(t){var e=this.selectedIndex,i=this._getElementIndex(e),n=i>-1?this._children[i]:null;return t&&n&&!n.offsetHeight&&(n=null),n},e.prototype._handleResize=function(){this._updateViewRange()},e.prototype._createItem=function(t){var e=this._cv.items[t],i=t==this._cv.currentPosition,n=this.getDisplayValue(t);1!=this._html&&(n=(0,r.escapeHtml)(n));var o=null;this.checkedMemberPath&&(o=!1,(0,r.isObject)(e)?o=!!this._pathChecked.getValue(e):this._checkedItems&&(o=this._checkedItems.indexOf(e)>-1),n='<label><input type="checkbox" tabindex="-1"'+(o?" checked":"")+"><span></span> "+n+"</label>");var s="wj-listbox-item";if(i&&(s+=" wj-state-selected"),o&&(s+=" wj-state-checked"),this._html){var a=["wj-separator","wj-state-disabled"];if(n.indexOf(a[0])>-1||n.indexOf(a[1])>-1){var l=(0,r.createElement)(n);a.forEach((function(t){(0,r.hasClass)(l,t)&&(s+=" "+t)}))}}return'<div class="'+s+'" role="'+this.itemRole+'" '+(this._getAriaSelected(i,o)?'aria-selected="true" ':"")+'tabindex="'+(i&&!this.isDisabled?this._orgTabIndex:-1)+'">'+n+"</div>"},e.prototype._getAriaSelected=function(t,e){return!!(null!=e?e:t)||null},e.prototype._createHeaderItem=function(t){return'<div class="wj-listbox-item wj-header wj-state-disabled" role="presentation" tabindex="-1">'+(0,r.escapeHtml)(t.name)+"</div>"},e.prototype._click=function(t){if(0==t.button&&!t.defaultPrevented){var e=this.indexOf(t.target);if(e>-1)if(this.selectedIndex=e,this.checkedMemberPath){var i=this._getCheckbox(e),n=(0,r.closest)(i,".wj-listbox-item");t.target!=i&&t.target!=n||(n.focus({preventScroll:!0}),this.setItemChecked(e,i.checked))}else(n=(0,r.closest)(t.target,".wj-listbox-item")).focus({preventScroll:!0})}},e.prototype._keydown=function(t){var e=this.selectedIndex;if(!t.defaultPrevented){if(65==t.keyCode&&(t.ctrlKey||t.metaKey)){var i=this.collectionView;if(this.checkedMemberPath&&(0,r.hasItems)(i))return this.checkedItems=this.checkedItems.length!=i.items.length?i.items:[],void t.preventDefault()}if(!(t.ctrlKey||t.shiftKey||t.altKey||t.metaKey))switch(t.keyCode){case r.Key.Down:t.preventDefault(),this._selectNext();break;case r.Key.Up:t.preventDefault(),this._selectPrev();break;case r.Key.Home:t.preventDefault(),this._selectFirst();break;case r.Key.End:t.preventDefault(),this._selectLast();break;case r.Key.PageDown:t.preventDefault(),this._selectNextPage();break;case r.Key.PageUp:t.preventDefault(),this._selectPrevPage();break;case r.Key.Space:if(this.checkedMemberPath&&e>-1){var n=this._getCheckbox(e);n&&this.isItemEnabled(e)&&(this.setItemChecked(e,!n.checked),t.preventDefault())}}}},e.prototype._keypress=function(t){var e=this;if(!t.defaultPrevented&&!(t.target instanceof HTMLInputElement)&&(t.charCode>32||32==t.charCode&&this._search)){t.preventDefault(),this._search+=String.fromCharCode(t.charCode),this._toSearch&&clearTimeout(this._toSearch),this._toSearch=setTimeout((function(){e._toSearch=null,e._search=""}),r.Control._SEARCH_DELAY);var i=this._findNext();i<0&&this._search.length>1&&(this._search=this._search[this._search.length-1],i=this._findNext()),i>-1&&(this.selectedIndex=i)}},e.prototype._selectNext=function(){for(var t=this.selectedIndex+1;t<this._children.length;t++)if(this.isItemEnabled(t))return this.selectedIndex=t,!0;return!1},e.prototype._selectPrev=function(){for(var t=this.selectedIndex-1;t>=0;t--)if(this.isItemEnabled(t))return this.selectedIndex=t,!0;return!1},e.prototype._selectFirst=function(){for(var t=0;t<this._children.length;t++)if(this.isItemEnabled(t))return this.selectedIndex=t,!0;return!1},e.prototype._selectLast=function(){for(var t=this._children.length-1;t>=0;t--)if(this.isItemEnabled(t))return this.selectedIndex=t,!0;return!1},e.prototype._selectNextPage=function(){var t=this.hostElement.offsetHeight,e=this._children,i=this._cv?this._cv.items.length:0,n=0;if(t>0)for(var r=this.selectedIndex+1;r<i;r++){var o=e[r].scrollHeight||this._itemHeight;if(n+o>t&&this.isItemEnabled(r))return this.selectedIndex=r,!0;n+=o}return this._selectLast()},e.prototype._selectPrevPage=function(){var t=this.hostElement.offsetHeight,e=this._children,i=0;if(t>0)for(var n=this.selectedIndex-1;n>0;n--){var r=e[n].scrollHeight||this._itemHeight;if(i+r>t&&this.isItemEnabled(n))return this.selectedIndex=n,!0;i+=r}return this._selectFirst()},e.prototype._findNext=function(){if(this.hostElement){var t=this._children.length,e=this.selectedIndex;(e<0||1==this._search.length)&&e++;var i=this._search,n=this.caseSensitiveSearch;n||(i=i.toLowerCase());for(var r=0;r<t;r++){var o=(e+r)%t;if(this.isItemEnabled(o)){var s=this.getDisplayText(o).trim();if(n||(s=s.toLowerCase()),0==s.indexOf(i))return o}}}return-1},e.prototype._getCheckbox=function(t){var e=this._children;return t=this._getElementIndex(t),this.hostElement&&t>-1&&t<e.length?e[t].querySelector("input[type=checkbox]"):null},e.prototype._initFromSelect=function(t){for(var e=t.children,i=[],n=-1,r=0;r<e.length;r++){var o=e[r];"OPTION"==o.tagName&&(o.hasAttribute("selected")&&(n=i.length),o.innerHTML?i.push({hdr:o.innerHTML,val:o.getAttribute("value"),cmdParam:o.getAttribute("cmd-param")}):i.push({hdr:'<div class="wj-separator"></div>'}),t.removeChild(o),r--)}i&&(this.displayMemberPath="hdr",this.selectedValuePath="val",this.itemsSource=i,this.selectedIndex=n)},e.prototype._setIsDisabled=function(e){t.prototype._setIsDisabled.call(this,e),this._updateTabIndex()},e.prototype._setTabOrder=function(e){t.prototype._setTabOrder.call(this,e),this.isDisabled||this._updateTabIndex()},e.prototype._updateTabIndex=function(){var t=this.hostElement,e=this._getSelectedElement(!0);e?(e.tabIndex=this.isDisabled?-1:this._orgTabIndex,t.tabIndex=-1):t.tabIndex=this.isDisabled?-1:this._orgTabIndex},e._DIDX_KEY="$WJ-DIDX",e._VTHRESH=Number.MAX_VALUE/2,e}(r.Control),d=function(t){function e(e,i,n){var o=t.call(this)||this;return o._index=(0,r.asNumber)(e),o._data=i,o._item=(0,r.asType)(n,HTMLElement,!0),o}return s(e,t),Object.defineProperty(e.prototype,"index",{get:function(){return this._index},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return this._data},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"item",{get:function(){return this._item},enumerable:!0,configurable:!0}),e}(r.EventArgs);(0,r._addCultureInfo)("MultiSelectListBox",{filterPlaceholder:"Filter",selectAll:"Select All"});var p,f,_,g=function(t){function e(i,n){var o=t.call(this,i)||this;o._selectAllLabel=null,o._filterPlaceholder=null,o._filterText="",o._checkOnFilter=!0,o._delay=r.Control._SEARCH_DELAY,o.checkedItemsChanged=new r.Event,o.selectedIndexChanged=new r.Event;var s=o.getTemplate();o.applyTemplate("wj-control wj-content wj-multiselectlistbox",s,{_selectAll:"select-all",_filter:"filter",_lbHost:"list-box"}),o._selectAll.style.display="none",o._filter.style.display="none",o._lbx=new u(o._lbHost,{checkedMemberPath:e._DEF_CHECKED_PATH,loadedItems:function(){return o._updateCheckAllCheckbox()},checkedItemsChanged:function(){return o.onCheckedItemsChanged()},selectedIndexChanged:function(){return o.onSelectedIndexChanged()}}),o._cbSelectAll=o._selectAll.querySelector("input[type=checkbox]"),o._spSelectAll=o._selectAll.querySelector("label>span");var a=r.culture.MultiSelectListBox;return(0,r.setText)(o._spSelectAll,a.selectAll),o._filter.placeholder=a.filterPlaceholder,o.initialize(n),o.addEventListener(o._filter,"input",(function(){o._filter.value!=o._filterText&&(o._filterText=o._filter.value,o._toSearch&&clearTimeout(o._toSearch),o._toSearch=setTimeout((function(){o._toSearch=null,o._applyFilter()}),o.delay))})),o.addEventListener(o._cbSelectAll,"click",(function(t){var e=o._lbx.collectionView;(0,r.hasItems)(e)&&(o.checkedItems=t.target.checked?e.items:[])})),o.addEventListener(o.hostElement,"keydown",(function(t){var e=o.showFilterInput?o._filter:null,i=o._lbx;if(e&&t.keyCode==r.Key.F3&&((0,r.setSelectionRange)(e,0,e.value.length),t.preventDefault()),(0,r.getActiveElement)()==e){var n=!t.altKey;switch(t.keyCode){case r.Key.Escape:case r.Key.F4:n=!1}n&&t.stopPropagation()}if(!i.containsFocus())switch(t.keyCode){case r.Key.Up:case r.Key.Down:o._lbx.focus();var s=i.selectedIndex+(t.keyCode==r.Key.Up?-1:1);i.selectedIndex=Math.max(0,s),t.preventDefault()}}),!0),o.hostElement.tabIndex=-1,o._lbx.tabOrder=o._orgTabIndex,o}return s(e,t),Object.defineProperty(e.prototype,"itemsSource",{get:function(){return this._lbx.itemsSource},set:function(t){this._lbx.itemsSource=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"collectionView",{get:function(){return this._lbx.collectionView},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"virtualizationThreshold",{get:function(){return this._lbx.virtualizationThreshold},set:function(t){this._lbx.virtualizationThreshold=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayMemberPath",{get:function(){return this._lbx.displayMemberPath},set:function(t){this._lbx.displayMemberPath=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isContentHtml",{get:function(){return this._lbx.isContentHtml},set:function(t){this._lbx.isContentHtml=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"caseSensitiveSearch",{get:function(){return this._lbx.caseSensitiveSearch},set:function(t){this._lbx.caseSensitiveSearch=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"delay",{get:function(){return this._delay},set:function(t){this._delay=(0,r.asNumber)(t,!1,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showGroups",{get:function(){return this._lbx.showGroups},set:function(t){this._lbx.showGroups=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"checkOnFilter",{get:function(){return this._checkOnFilter},set:function(t){t!=this.checkOnFilter&&(this._checkOnFilter=(0,r.asBoolean)(t),this.checkedItems=[])},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedIndex",{get:function(){return this._lbx.selectedIndex},set:function(t){this._lbx.selectedIndex=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"listBox",{get:function(){return this._lbx},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showFilterInput",{get:function(){return""==this._filter.style.display},set:function(t){t!=this.showFilterInput&&(this._filter.style.display=(0,r.asBoolean)(t)?"":"none",this.showFilterInput||(this._filter.value="",this._applyFilter()))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"filterInputPlaceholder",{get:function(){return this._filterPlaceholder},set:function(t){t!=this._filterPlaceholder&&(this._filterPlaceholder=(0,r.asString)(t),this.refresh())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showSelectAllCheckbox",{get:function(){return""==this._selectAll.style.display},set:function(t){this._selectAll.style.display=(0,r.asBoolean)(t)?"":"none"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectAllLabel",{get:function(){return this._selectAllLabel},set:function(t){t!=this._selectAllLabel&&(this._selectAllLabel=(0,r.asString)(t),this.refresh())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"checkedMemberPath",{get:function(){var t=this.listBox.checkedMemberPath;return t!=e._DEF_CHECKED_PATH?t:null},set:function(t){t=(0,r.asString)(t),this.listBox.checkedMemberPath=t||e._DEF_CHECKED_PATH},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"checkedItems",{get:function(){return this.listBox.checkedItems},set:function(t){this.listBox.checkedItems=(0,r.asArray)(t)},enumerable:!0,configurable:!0}),e.prototype.onCheckedItemsChanged=function(t){this._updateCheckAllCheckbox(),this.checkedItemsChanged.raise(this,t)},e.prototype.onSelectedIndexChanged=function(t){this.selectedIndexChanged.raise(this,t)},e.prototype.refresh=function(e){if(void 0===e&&(e=!0),t.prototype.refresh.call(this,e),this.hostElement){var i=r.culture.MultiSelectListBox;this._filter.placeholder=null!=this._filterPlaceholder?this._filterPlaceholder:i.filterPlaceholder,this._spSelectAll&&(0,r.setText)(this._spSelectAll,null!=this._selectAllLabel?this._selectAllLabel:i.selectAll),this._updateCheckAllCheckbox()}},e.prototype.dispose=function(){this.listBox.dispose(),t.prototype.dispose.call(this)},e.prototype._applyFilter=function(){var t=this,e=this._lbx,i=e.collectionView,n=this._filter.value,o=n?new RegExp((0,r.escapeRegExp)(n),e.caseSensitiveSearch?"":"i"):null,s=this.displayMemberPath,a=s?new r.Binding(s):null,l=this.checkOnFilter?null:this.checkedItems;i.filter=function(e){return null==o||!!(l&&l.indexOf(e)>-1)||(a&&(e=a.getValue(e)),t.isContentHtml&&(e=(0,r.toPlainText)(e)),null!=e&&o.test(e.toString()))},e.selectedIndex=Math.max(0,e.selectedIndex),this._checkOnFilter&&(this.checkedItems=o?i.items:[])},e.prototype._updateCheckAllCheckbox=function(){var t=this._lbx.collectionView,e=this._cbSelectAll;if((0,r.hasItems)(t)){var i=t.items.length,n=this.checkedItems.length;(0,r.setChecked)(e,n==i||0!=n&&null),e.disabled=!1}else(0,r.setChecked)(e,!1),e.checked=!1,e.disabled=!0},e.prototype._setIsDisabled=function(e){t.prototype._setIsDisabled.call(this,e),this.hostElement.tabIndex=-1,this.isDisabled?this._lbx.tabOrder=-1:this._lbx.tabOrder=this._orgTabIndex},e.prototype._setTabOrder=function(t){this._orgTabIndex=t,this._lbx.tabOrder=t},e._DEF_CHECKED_PATH="$checked",e.controlTemplate='<div class="wj-template wj-listbox"><input wj-part="filter" class="wj-form-control" tabindex="-1"><div wj-part="select-all" class="wj-header wj-select-all wj-listbox-item"><label><input type="checkbox" tabindex="-1"> <span></span></label></div><div wj-part="list-box"/></div>',e}(r.Control);(0,r._addCultureInfo)("Calendar",{ariaLabels:{calendar:"Calendar",monthView:"Month View",yearView:"Year View",prvMo:"Previous Month",today:"Today",nxtMo:"Next Month",prvYr:"Previous Year",currMo:"Current Month",nxtYr:"Next Year"}}),(f=p||(p={}))[f.None=0]="None",f[f.Day=1]="Day",f[f.Month=2]="Month",f[f.Range=3]="Range",function(t){t[t.None=0]="None",t[t.FirstMonth=1]="FirstMonth",t[t.LastMonth=2]="LastMonth",t[t.FirstAndLastMonths=3]="FirstAndLastMonths",t[t.AllMonths=4]="AllMonths",t[t.Outside=5]="Outside"}(_||(_={}));var m,y=function(t){function e(e,i){var n=t.call(this,e)||this;n._yrPicker=!0,n._mtPicker=_.FirstMonth,n._wksBefore=0,n._wksAfter=0,n._rngMin=0,n._rngMax=0,n._min=null,n._max=null,n._readOnly=!1,n._handleWheel=!0,n._fdw=null,n._selMode=p.Day,n._tmYrHidden=0,n._fmtYrMo="y",n._fmtYr="yyyy",n._fmtDayHdr="ddd",n._fmtDay="d ",n._fmtMonths="MMM",n.valueChanged=new r.Event,n.rangeEndChanged=new r.Event,n.rangeChanged=new r.Event,n.displayMonthChanged=new r.Event,n.formatItem=new r.Event((function(){n.invalidate()})),n._value=n._rngEnd=r.DateTime.newDate(),n._month=n._getMonth(n._value),n._cals=[n],n._createChildren(),n._createYearPicker();var o=n.hostElement,s=n.addEventListener.bind(n);return s(o,"keydown",n._keydown.bind(n)),s(o,"click",n._click.bind(n)),n._rptUp=new r._ClickRepeater(n._btnPrv),n._rptDn=new r._ClickRepeater(n._btnNxt),n.addEventListener(o,"wheel",(function(t){n.handleWheel&&!t.defaultPrevented&&!n.isReadOnly&&n.containsFocus()&&(t.deltaY<0?n._btnPrv.click():n._btnNxt.click(),t.preventDefault())})),n.initialize(i),n.refresh(!0),n}return s(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(t){if(t!==this._value&&(this._clearingRangeEnd=!r.DateTime.equals(this._value,t),this.rangeEnd=null,this._clearingRangeEnd=!1,t=(0,r.asDate)(t,!0),t=this._clamp(t),(this._valid(t)||null==t)&&(this.ensureVisible(t||new Date),r.DateTime.equals(this._value,t)||(this._value=t,this.invalidate(!1),this.onValueChanged())),!this.value)){var e=this.min,i=this.max,n=this.displayMonth;i&&i<n?this.ensureVisible(i):e&&e>n&&this.ensureVisible(e)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rangeEnd",{get:function(){return this._rngEnd},set:function(t){if(t=(0,r.asDate)(t,!0),(t=this._clamp(t))&&this._value&&this._rngMode()){t<this._value&&(t=this._value);var e=this._rngMin,i=this._rngMax;if(e&&e>0||i&&i>0){var n=this._value,o=Math.ceil((t.getTime()-n.getTime())/864e5)+1;e&&e>0&&o<e&&(t=r.DateTime.addDays(n,e-1)),i&&i>0&&o>i&&(t=r.DateTime.addDays(n,i-1))}}!this._valid(t)&&null!=t||r.DateTime.equals(this._rngEnd,t)||(this._rngEnd=t,this.ensureVisible(t),this.invalidate(!1),this.onRangeEndChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rangeMin",{get:function(){return this._rngMin},set:function(t){(t=(0,r.asNumber)(t,!0,!0))!=this._rngMin&&(this._rngMin=t,this._syncProp(this,"rangeMin"),this._rngMode()&&this._rngEnd&&(this.rangeEnd=this._rngEnd))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rangeMax",{get:function(){return this._rngMax},set:function(t){(t=(0,r.asNumber)(t,!0,!0))!=this._rngMax&&(this._rngMax=t,this._syncProp(this,"rangeMax"),this._rngMode()&&this._rngEnd&&(this.rangeEnd=this._rngEnd))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"min",{get:function(){return this._min},set:function(t){(t=(0,r.asDate)(t,!0))!=this.min&&(this._min=t,this._syncProp(this,"min"),this.refresh(),!this.value&&t&&t>this.displayMonth&&this.ensureVisible(t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"max",{get:function(){return this._max},set:function(t){(t=(0,r.asDate)(t,!0))!=this.max&&(this._max=t,this._syncProp(this,"max"),this.refresh(),!this.value&&t&&t<this.displayMonth&&this.ensureVisible(t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectionMode",{get:function(){return this._selMode},set:function(t){var e=p;(t=(0,r.asEnum)(t,e))!=this._selMode&&(this._selMode=t,this._mthMode()&&(this.monthView=!1),this._rngEnd=t==e.Range?this._value:null,this.refresh(),this._syncProp(this,"selectionMode"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isReadOnly",{get:function(){return this._readOnly},set:function(t){this._readOnly=(0,r.asBoolean)(t),(0,r.toggleClass)(this.hostElement,"wj-state-readonly",this.isReadOnly),this._syncProp(this,"isReadOnly")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"handleWheel",{get:function(){return this._handleWheel},set:function(t){this._handleWheel=(0,r.asBoolean)(t),this._syncProp(this,"handleWheel")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"repeatButtons",{get:function(){return!this._rptUp.disabled},set:function(t){this._rptUp.disabled=this._rptDn.disabled=!(0,r.asBoolean)(t),this._syncProp(this,"repeatButtons")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showYearPicker",{get:function(){return this._yrPicker},set:function(t){t!=this._yrPicker&&(this._yrPicker=(0,r.asBoolean)(t),this._syncProp(this,"showYearPicker"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showMonthPicker",{get:function(){return this._mtPicker},set:function(t){if(t!=this._mtPicker){var e=_;(0,r.isBoolean)(t)&&(t=t?e.FirstMonth:e.None),this._mtPicker=(0,r.asEnum)(t,e),(0,r.toggleClass)(this.hostElement,"wj-btns-outside",this._getShowMonthPicker()==e.Outside),this.refresh(),this._syncProp(this,"showMonthPicker")}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"firstDayOfWeek",{get:function(){return this._fdw},set:function(t){if(t!=this._fdw){if((t=(0,r.asNumber)(t,!0))&&(t>6||t<0))throw"firstDayOfWeek must be between 0 and 6 (Sunday to Saturday).";this._fdw=t,this.refresh(),this._syncProp(this,"firstDayOfWeek")}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayMonth",{get:function(){return this._month},set:function(t){t=(0,r.asDate)(t),t=this._getMonth(t);var e=this._getDisplayMonthRange();e.to&&t>e.to&&(t=e.to),e.from&&t<e.from&&(t=e.from),r.DateTime.equals(this.displayMonth,t)||(this._month=t,this.invalidate(!0),this.onDisplayMonthChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"monthCount",{get:function(){var t=this.hostElement;return t?t.querySelectorAll(".wj-calendar").length+1:0},set:function(t){var i=this,n=this.hostElement;if(t!=this.monthCount&&n){var o=n.querySelectorAll(".wj-calendar");t=(0,r.asInt)(t,!1),(0,r.assert)(t>0,"monthCount must be >= 1."),(0,r.assert)(1==t||!(0,r.closest)(n.parentElement,".wj-calendar"),"Only top-level calendars can set monthCount.");for(var s=0;s<o.length;s++){var a=o[s];(0,r.removeChild)(a),this._getCalendar(a).dispose()}for(this._cals=[this],s=1;s<t;s++){for(var l in(a=new e(document.createElement("div"),{itemFormatter:this.itemFormatter,itemValidator:this.itemValidator,formatItem:function(t,e){return i.onFormatItem(e)}}))._selMode=this._selMode,a._value=this._value,a._rngEnd=this._rngEnd,this)if(!/^(_.*|constructor|displayMonth|monthCount|hostElement|rightToLeft|isUpdating|isTouching)$/.test(l)){var h=this[l];(0,r.isFunction)(h)||h instanceof r.Event||(a[l]=h)}this._cals.push(a),n.appendChild(a.hostElement)}(0,r.toggleClass)(n,"wj-calendar-multimonth",t>1),this._syncProp(this,"displayMonth")}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"formatYearMonth",{get:function(){return this._fmtYrMo},set:function(t){t!=this._fmtYrMo&&(this._fmtYrMo=(0,r.asString)(t),this._syncProp(this,"formatYearMonth"),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"formatDayHeaders",{get:function(){return this._fmtDayHdr},set:function(t){t!=this._fmtDayHdr&&(this._fmtDayHdr=(0,r.asString)(t),this._syncProp(this,"formatDayHeaders"),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"formatDays",{get:function(){return this._fmtDay},set:function(t){t!=this._fmtDay&&(this._fmtDay=(0,r.asString)(t),this._syncProp(this,"formatDays"),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"formatYear",{get:function(){return this._fmtYr},set:function(t){t!=this._fmtYr&&(this._fmtYr=(0,r.asString)(t),this._syncProp(this,"formatYear"),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"formatMonths",{get:function(){return this._fmtMonths},set:function(t){t!=this._fmtMonths&&(this._fmtMonths=(0,r.asString)(t),this._syncProp(this,"formatMonths"),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showHeader",{get:function(){return"none"!=this._tbHdr.style.display},set:function(t){t!=this.showHeader&&(this._tbHdr.style.display=(0,r.asBoolean)(t)?"":"none",this._syncProp(this,"showHeader"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"monthView",{get:function(){return"none"!=this._tbMth.style.display},set:function(t){if(t!=this.monthView){this._tbMth.style.display=t?"":"none",this._tbYr.style.display=t?"none":"",this.refresh();var e=r.culture.Calendar.ariaLabels;(0,r.setAriaLabel)(this._btnPrv,t?e.prvMo:e.prvYr),(0,r.setAriaLabel)(this._btnTdy,t?e.today:e.currMo),(0,r.setAriaLabel)(this._btnNxt,t?e.nxtMo:e.nxtYr),(0,r.setAriaLabel)(this._btnMth,t?e.monthView:e.yearView),this._syncProp(this,"monthView")}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"weeksBefore",{get:function(){return this._wksBefore},set:function(t){t!=this._wksBefore&&(this._wksBefore=Math.floor((0,r.asNumber)(t,!1,!0)),this._syncProp(this,"weeksBefore"),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"weeksAfter",{get:function(){return this._wksAfter},set:function(t){t!=this._wksAfter&&(this._wksAfter=Math.floor((0,r.asNumber)(t,!1,!0)),this._syncProp(this,"weeksAfter"),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemFormatter",{get:function(){return this._itemFormatter},set:function(t){t!=this._itemFormatter&&(this._itemFormatter=(0,r.asFunction)(t),this._syncProp(this,"itemFormatter"),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemValidator",{get:function(){return this._itemValidator},set:function(t){t!=this._itemValidator&&(this._itemValidator=(0,r.asFunction)(t),this._syncProp(this,"itemValidator"),this.invalidate())},enumerable:!0,configurable:!0}),e.prototype.hitTest=function(t){var i=t instanceof MouseEvent?t.target:t instanceof Element?t:null;return(0,r.assert)(null!=i,"MouseEvent or Element expected"),i?i[e._DATE_KEY]:null},e.prototype.ensureVisible=function(t){if(null!=t){var e=this._getCalendars(),i=e.indexOf(this),n=e[0],o=e[e.length-1];t<n.displayMonth?this.displayMonth=r.DateTime.addMonths(this._getMonth(t),i):t>o.displayMonth&&(this.displayMonth=r.DateTime.addMonths(this._getMonth(t),i-e.length+1))}},e.prototype.onValueChanged=function(t){this.valueChanged.raise(this,t),this._syncProp(this,"value")},e.prototype.onRangeEndChanged=function(t){this.rangeEndChanged.raise(this,t),this._syncProp(this,"rangeEnd"),this._value&&this._rngEnd&&this.onRangeChanged(t)},e.prototype.onRangeChanged=function(t){this.rangeChanged.raise(this,t)},e.prototype.onDisplayMonthChanged=function(t){this.displayMonthChanged.raise(this,t),this._syncProp(this,"displayMonth")},e.prototype.onFormatItem=function(t){this.formatItem.raise(this,t)},e.prototype._containsFocusImpl=function(e){return t.prototype._containsFocusImpl.call(this,e)||this._lbYears._containsFocusImpl(e)},e.prototype.dispose=function(){this._rptUp.element=null,this._rptDn.element=null,this._lbYears.dispose(),t.prototype.dispose.call(this)},e.prototype.refresh=function(e){void 0===e&&(e=!0);var i=this.hostElement,n=this.containsFocus();if(i){t.prototype.refresh.call(this,e),e&&this._updateContent(),this._updateSelection();var o=this._getDisplayMonthRange(),s=this.displayMonth;if((0,r.enable)(this._btnPrv,null==o.from||s>o.from),(0,r.enable)(this._btnNxt,null==o.to||s<o.to),n){var a=(this.monthView?this._tbMth:this._tbYr).querySelector("td.wj-state-selected")||i;a&&a.focus()}var l=this._getCalendars();l.length>1&&this==l[0]&&l.forEach((function(t,i){i>0&&t.refresh(e)}))}},e.prototype._getShowMonthPicker=function(){var t=_,e=this._getCalendars(),i=e.indexOf(this),n=this.showMonthPicker;switch(n){case t.FirstMonth:case t.Outside:return 0==i?n:0;case t.LastMonth:return i==e.length-1?n:0;case t.FirstAndLastMonths:return 0==i||i==e.length-1?n:0;case t.AllMonths:return n}return 0},e.prototype._getDisplayMonthRange=function(){var t={from:null,to:null};if(this.min||this.max){var e=this._getCalendars(),i=e.indexOf(this),n=this._mthMode()?r.DateTime.addYears:r.DateTime.addMonths;this.min&&(t.from=n(this._getMonth(this.min),i)),this.max&&(t.to=n(this._getMonth(this.max),i-e.length+1))}return t},e.prototype._getCalendar=function(t){return r.Control.getControl(t)},e.prototype._getCalendars=function(){var t=(0,r.closest)(this.hostElement,".wj-calendar-multimonth");return(t?this._getCalendar(t):this)._cals},e.prototype._syncProp=function(t,e){var i=this;if(!this._syncing){var n=this._getCalendars();if(n&&n.length>1){var o=t[e],s=this._mthMode()?r.DateTime.addYears:r.DateTime.addMonths;"displayMonth"==e&&(o=s(o,-n.indexOf(t))),n[0].deferUpdate((function(){i._syncing=!0,n.forEach((function(n,r){if(n!=t){var a=n.displayMonth;n[e]="displayMonth"==e?s(o,r):o,"value"==e&&(n.displayMonth=a,i._rngMode()&&(n.rangeEnd=null))}})),i._syncing=!1}))}}},e.prototype._updateContent=function(){var t=this.displayMonth,i=r.Globalize.format,n=r.DateTime,o=this._getShowMonthPicker();(0,r.setText)(this._spMth,i(t,this._fmtYrMo));var s=this._btnMth.querySelector(".wj-glyph-down");s&&(s.style.display=this._mthMode()||!o?"none":"");var a=(0,r.closest)(this._btnTdy,".wj-btn-group");a&&(a.style.display=o?"":"none");for(var l=null!=this._fdw?this._fdw:r.Globalize.getFirstDayOfWeek(),h=n.addDays(t,-(t.getDay()-l+7)%7),c=n.monthLast(t),u=this._tbMth.querySelectorAll("td"),d=0;d<7&&d<u.length;d++){var p=n.addDays(h,d);(0,r.setText)(u[d],i(p,this._fmtDayHdr))}var f=this._tbMth.querySelectorAll("tr");for(d=1;d<f.length;d++)(0,r.removeChild)(f[d]);var _=n.addDays(h,-7*this._wksBefore);for(d=0;d<this._wksBefore;d++)_=this._addWeek(_,"wj-week-before");for(;_<=c;)_=this._addWeek(_);for(d=0;d<this._wksAfter;d++)_=this._addWeek(_,"wj-week-after");for((u=this._tbYr.querySelectorAll("td")).length&&(0,r.setText)(u[0],i(t,this._fmtYr)),d=1;d<u.length;d++){_=n.newDate(t.getFullYear(),d-1,1);var g=u[d],m=!this._monthInValidRange(_);g[e._DATE_KEY]=_,(0,r.setText)(g,i(_,this._fmtMonths)),(0,r.toggleClass)(g,"wj-state-disabled",m),(0,r.setAriaLabel)(g,r.Globalize.format(_,"MMMM yyyy"))}},e.prototype._updateSelection=function(){for(var t=e._DATE_KEY,i=r.DateTime,n=this._tbMth.querySelectorAll("td"),o=7;o<n.length;o++){var s=(d=n[o])[t],a=this.value,l=this.rangeEnd,h=this._selMode&&null!=a&&i.sameDate(s,a),c=this._selMode&&null!=a&&i.sameDate(s,l),u=this._selMode&&null!=a&&s>a&&null!=l&&s<=l;(0,r.toggleClass)(d,"wj-state-selected",h),(0,r.toggleClass)(d,"wj-state-multi-selected",u),(0,r.toggleClass)(d,"wj-state-last-selected",c),(0,r.setAttribute)(d,"aria-selected",!!h||null),this._customizeCell(o,s,d)}for(n=this._tbYr.querySelectorAll("td"),o=0;o<n.length;o++){var d;s=(d=n[o])[t],h=this._sameMonth(s,this.value),(0,r.toggleClass)(d,"wj-state-selected",h),(0,r.setAttribute)(d,"aria-selected",!!h||null)}},e.prototype._addWeek=function(t,i){for(var n=this._createElement("tr",this._tbMth,i),o=r.DateTime,s=0;s<7;s++){var a=this._createElement("td",n),l=o.addDays(t,s);a[e._DATE_KEY]=l,(0,r.setText)(a,r.Globalize.format(l,this._fmtDay)),(0,r.setAriaLabel)(a,r.Globalize.format(l,"D"));var h=!this._valid(l),c=l.getDay(),u=l.getMonth()!=this.displayMonth.getMonth();(0,r.toggleClass)(a,"wj-day-today",o.sameDate(l,o.newDate())),(0,r.toggleClass)(a,"wj-day-weekend",0==c||6==c),(0,r.toggleClass)(a,"wj-day-othermonth",u||!this._inValidRange(l)||h),(0,r.toggleClass)(a,"wj-state-invalid",h)}return o.addDays(t,7)},e.prototype._customizeCell=function(t,e,i){if((0,r.isFunction)(this.itemFormatter)&&this.itemFormatter(e,i),this.formatItem.hasHandlers){var n=new d(t,e,i);this.onFormatItem(n)}},e.prototype._canChangeValue=function(){return!this._readOnly&&this._selMode!=p.None},e.prototype._valid=function(t){return!(!(0,r.isDate)(t)||!r.DateTime.sameDate(t,this._clamp(t)))&&(!(0,r.isFunction)(this.itemValidator)||this.itemValidator(t))},e.prototype._inValidRange=function(t){var e=r.DateTime.fromDateTime;return!(this.min&&t<e(this.min,t)||this.max&&t>e(this.max,t))},e.prototype._monthInValidRange=function(t){if(this.min||this.max){var e=t.getFullYear(),i=t.getMonth(),n=r.DateTime,o=n.newDate(e,i,1),s=n.newDate(e,i+1,0);if(this.min&&this.min>s)return!1;if(this.max&&this.max<o)return!1}return!0},e.prototype._sameMonth=function(t,e){return(0,r.isDate)(t)&&(0,r.isDate)(e)&&t.getMonth()==e.getMonth()&&t.getFullYear()==e.getFullYear()},e.prototype._getValidDate=function(t,e){if((0,r.isDate)(t))for(var i=t.getFullYear(),n=t.getMonth()+(e?0:1),o=e?1:0,s=r.DateTime,a=s.newDate(i,n,o),l=e?1:-1,h=0;h<31;h++){if(this._valid(a))return a;a=s.addDays(a,l)}return null},e.prototype._clamp=function(t){if(t){var e=r.DateTime.fromDateTime;if(this.min){var i=e(this.min,t);t<i&&(t=i)}if(this.max){var n=e(this.max,t);t>n&&(t=n)}}return t},e.prototype._createChildren=function(){var t=this.getTemplate();this.applyTemplate("wj-control wj-calendar",t,{_tbHdr:"tbl-header",_btnMth:"btn-month",_spMth:"span-month",_btnPrv:"btn-prev",_btnTdy:"btn-today",_btnNxt:"btn-next",_tbMth:"tbl-month",_tbYr:"tbl-year"}),this._tbYr.style.display="none";var e=r.culture.Calendar.ariaLabels;(0,r.setAriaLabel)(this._tbMth,e.calendar),(0,r.setAriaLabel)(this._tbYr,e.calendar),(0,r.setAriaLabel)(this._btnPrv,e.calendar),(0,r.setAriaLabel)(this._btnMth,e.monthView),(0,r.setAriaLabel)(this._btnPrv,e.prvMo),(0,r.setAriaLabel)(this._btnTdy,e.today),(0,r.setAriaLabel)(this._btnNxt,e.nxtMo);for(var i=this._createElement("tr",this._tbMth,"wj-header"),n=0;n<7;n++)this._createElement("td",i);i=this._createElement("tr",this._tbYr,"wj-header"),this._createElement("td",i).setAttribute("colspan","4");for(var o=0;o<3;o++){i=this._createElement("tr",this._tbYr);for(var s=0;s<4;s++)this._createElement("td",i)}},e.prototype._createYearPicker=function(){var t=this,e=this.hostElement,i=this._createElement("div",null,"wj-dropdown-panel wj-yearpicker");i.tabIndex=this._orgTabIndex,this._lbYears=new u(i,{lostFocus:function(e){if((0,r.hidePopup)(i),t._tmYrHidden=Date.now(),t.removeEventListener(window,"touchstart"),e.selectedIndex>-1){var n=r.DateTime.clone(t.displayMonth);n.setFullYear(e.selectedIndex+e.itemsSource[0]),t.displayMonth=n}}}),this.addEventListener(i,"keydown",(function(i){switch(i.keyCode){case r.Key.Enter:e.focus();break;case r.Key.Escape:t._lbYears.selectedIndex=-1,e.focus()}i.defaultPrevented&&i.stopPropagation()})),this.addEventListener(i,"click",(function(t){e.focus()}))},e.prototype._createElement=function(t,e,i){var n=document.createElement(t);return i&&(0,r.addClass)(n,i),e&&e.appendChild(n),n},e.prototype._click=function(t){var e=this;if(!t.defaultPrevented&&0==t.button){var i=!1,n=t.target;if((0,r.contains)(this._btnMth,n)&&!this._mthMode()&&this._getShowMonthPicker()?(this.monthView=!this.monthView,i=!0):(0,r.contains)(this._btnPrv,n)?(this._navigate(-1),i=!0):(0,r.contains)(this._btnNxt,n)?(this._navigate(1),i=!0):(0,r.contains)(this._btnTdy,n)&&(this._navigate(0),i=!0),n&&!i&&this._yrPicker&&(0,r.contains)(this._tbYr,n)&&(0,r.closest)(n,".wj-header")){if(Date.now()-this._tmYrHidden<600)return void t.preventDefault();for(var o=this.displayMonth.getFullYear(),s=this.min?this.min.getFullYear():o-100,a=this.max?this.max.getFullYear():o+100,l=[],h=s;h<=a;h++)l.push(h);var c=this._lbYears,u=c.hostElement,d=(0,r.closest)(n,".wj-header"),p=this.hostElement,f=(0,r.closest)(p,".wj-inputdate-dropdown")||p;return c.itemsSource=l,c.selectedIndex=o-l[0],(0,r.setAttribute)(u,"dir",this.rightToLeft?"rtl":null),(0,r.setCss)(u,{minWidth:"",width:d.offsetWidth}),(0,r.showPopup)(u,d,!1,!1,f),requestAnimationFrame((function(){c.showSelection(!0)})),this.addEventListener(window,"touchstart",(function(t){(0,r.contains)(u,t.target)||((0,r.hidePopup)(u),e._tmYrHidden=Date.now(),e.removeEventListener(window,"touchstart"))})),void t.preventDefault()}if(n&&!i){var _=(0,r.closest)(n,"td");if(_){var g=this.hitTest(_),m=r.DateTime.fromDateTime;if(this.monthView){if(g&&this._canChangeValue()){var y=m(g,this._value);this._inValidRange(y)&&this._valid(y)&&(this._rngMode()&&this.value&&!this.rangeEnd&&y>=this.value?this.rangeEnd=y:this.value=y),i=!0}}else g&&(this.displayMonth=g,this._mthMode()?this._canChangeValue()&&(y=m(this.displayMonth,this.value),this._inValidRange(y)&&(this.value=y)):this.monthView=!0,i=!0)}}i&&(t.preventDefault(),this.focus())}},e.prototype._keydown=function(t){if(!t.defaultPrevented){if(t.altKey)switch(t.keyCode){case r.Key.Up:case r.Key.Down:return;case r.Key.End:return this._navigate(0),void t.preventDefault()}if(!(t.ctrlKey||t.metaKey||t.shiftKey&&!this._rngMode())){var e=this._getKeyCode(t),i=0,n=0,o=!0;if(this.monthView)switch(e){case r.Key.Left:i=-1;break;case r.Key.Right:i=1;break;case r.Key.Up:i=-7;break;case r.Key.Down:i=7;break;case r.Key.PageDown:n=t.altKey?12:1;break;case r.Key.PageUp:n=t.altKey?-12:-1;break;case r.Key.Home:case r.Key.End:if(this._canChangeValue()&&!t.shiftKey){var s=this.value||this.displayMonth;(l=this._getValidDate(s,e==r.Key.Home))&&(this.value=r.DateTime.fromDateTime(l,this.value),this._rngEnd=null)}break;default:o=!1}else switch(e){case r.Key.Left:n=-1;break;case r.Key.Right:n=1;break;case r.Key.Up:n=-4;break;case r.Key.Down:n=4;break;case r.Key.PageDown:n=t.altKey?120:12;break;case r.Key.PageUp:n=t.altKey?-120:-12;break;case r.Key.Home:n=this.value?-this.value.getMonth():0;break;case r.Key.End:n=this.value?11-this.value.getMonth():0;break;case r.Key.Enter:this._mthMode()?o=!1:this.monthView=!0;break;default:o=!1}if(this._canChangeValue()&&(i||n)){var a=t.shiftKey&&null!=this.rangeEnd?this.rangeEnd:this.value,l=r.DateTime;if(a?(a=l.addDays(a,i),a=l.addMonths(a,n)):a=this._getValidDate(new Date,!0),n&&!this._valid(a)){s=a.getMonth();for(var h=1;h<31&&!this._valid(a);h++){var c=l.addDays(a,+h),u=l.addDays(a,-h);this._valid(c)&&c.getMonth()==s?a=c:this._valid(u)&&u.getMonth()==s&&(a=u)}}for(h=0;h<31&&!this._valid(a);h++)a=l.addDays(a,i>0||n>0?1:-1);t.shiftKey&&a>this.value?this.rangeEnd=a:this.value=a}o&&t.preventDefault()}}},e.prototype._getMonth=function(t){var e=r.DateTime;return t=t||e.newDate(),e.newDate(t.getFullYear(),t.getMonth(),1)},e.prototype._mthMode=function(){return this.selectionMode==p.Month},e.prototype._rngMode=function(){return this.selectionMode==p.Range},e.prototype._navigate=function(t){var e=this.monthView,i=this.displayMonth,n=r.DateTime;switch(t){case 0:var o=n.newDate();this._canChangeValue()&&(this.value=e?n.fromDateTime(o,this.value):this._getMonth(o)),i=this._getMonth(o);break;case 1:i=n.addMonths(i,e?1:12);break;case-1:i=n.addMonths(i,e?-1:-12)}this.displayMonth=i},e.prototype._setTabOrder=function(e){t.prototype._setTabOrder.call(this,e),this._lbYears.tabOrder=this._orgTabIndex},e._DATE_KEY="$WJ-DATE",e.controlTemplate='<div class="wj-content wj-calendar-outer"><div wj-part="tbl-header" class="wj-calendar-header"><div wj-part="btn-month" class="wj-month-select" role="button"><span wj-part="span-month"></span> <span class="wj-glyph-down"></span></div><div class="wj-btn-group"><button wj-part="btn-prev" class="wj-btn wj-btn-default" tabindex="-1"><span class="wj-glyph-left"></span></button><button wj-part="btn-today" class="wj-btn wj-btn-default" tabindex="-1"><span class="wj-glyph-circle"></span></button><button wj-part="btn-next" class="wj-btn wj-btn-default" tabindex="-1"><span class="wj-glyph-right"></span></button></div></div><table wj-part="tbl-month" class="wj-calendar-month" role="grid"></table><table wj-part="tbl-year" class="wj-calendar-year" role="grid"></table></div>',e}(r.Control);(0,r._addCultureInfo)("DropDown",{ariaLabels:{tgl:"Toggle Dropdown"}}),function(t){t[t.Select=0]="Select",t[t.Open=1]="Open",t[t.Toggle=2]="Toggle"}(m||(m={}));var b,v,w=function(t){function e(e,i){var n=t.call(this,e)||this;n._clickAction=m.Select,n._showBtn=!0,n._autoExpand=!0,n._animate=!1,n._oldText="",n.textChanged=new r.Event,n.isDroppedDownChanging=new r.Event,n.isDroppedDownChanged=new r.Event;var o=n.getTemplate();n.applyTemplate("wj-control wj-content wj-dropdown",o,{_tbx:"input",_btn:"btn",_dropDown:"dropdown"},"input"),n._dropDown.style.display="none";var s=r.culture.DropDown.ariaLabels;(0,r.setAriaLabel)(n._btn.querySelector("button"),s.tgl);var a=n._elRef=n._tbx;(0,r.disableAutoComplete)(a),n._createDropDown(),n._updateBtn();var l=n.hostElement;(0,r.addClass)(l,"wj-state-collapsed"),n.addEventListener(window,"resize",(function(){n.isDroppedDown&&n.invalidate()}));var h=n.dropDown,c=n.addEventListener.bind(n),u=n._updateFocusState.bind(n);c(h,"blur",u,!0),c(h,"focus",u);var d=n._keydown.bind(n);c(l,"keydown",d),c(h,"keydown",d);var p=n._keypress.bind(n);return c(l,"keypress",p,!0),c(h,"keypress",p,!0),c(a,"input",(function(){n._setText(n.text,!1)})),c(a,"blur",(function(){n._commitText(!0)}),!0),c(a,"click",(function(){n._autoExpand&&n._expandSelection()})),c(a,"mousedown",(function(t){switch(n._clickAction){case m.Open:n.isDroppedDown||(t.preventDefault(),n.focus(),n.isDroppedDown=!0);break;case m.Toggle:t.preventDefault(),n.focus(),n.isDroppedDown=!n.isDroppedDown}})),c(n._btn,"mousedown",(function(t){n._btnclick(t)})),(0,r.removeChild)(h),(0,r.isIE)()&&n._elRef==n._tbx&&c(l,"mouseup",(function(t){if(!t.defaultPrevented&&0==t.button&&(0,r.hasClass)(t.target,"wj-btn")){var e=(0,r.getActiveElement)();e&&e!=t.target&&setTimeout((function(){e.focus()}))}})),(0,r.isIE9)()&&c(a,"keyup",(function(){n._setText(n.text,!1)})),c(h,"click",n._dropDownClick.bind(n)),n}return s(e,t),Object.defineProperty(e.prototype,"text",{get:function(){return this._tbx.value},set:function(t){t!=this.text&&(this._setText(t,!0),this._commitText())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputElement",{get:function(){return this._tbx},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputType",{get:function(){return this._tbx.type},set:function(t){this._tbx.type=(0,r.asString)(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isReadOnly",{get:function(){return this._tbx.readOnly},set:function(t){this._tbx.readOnly=(0,r.asBoolean)(t),(0,r.toggleClass)(this.hostElement,"wj-state-readonly",this.isReadOnly)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isRequired",{get:function(){return this._tbx.required},set:function(t){this._tbx.required=(0,r.asBoolean)(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"placeholder",{get:function(){return this._tbx.placeholder},set:function(t){this._tbx.placeholder=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"clickAction",{get:function(){return this._clickAction},set:function(t){this._clickAction=(0,r.asEnum)(t,m)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDroppedDown",{get:function(){var t=this._dropDown;return t&&"none"!=t.style.display},set:function(t){var e=this,i=this.hostElement,n=this._dropDown,o=this.containsFocus();i&&n&&(t=(0,r.asBoolean)(t)&&!this.isDisabled&&!this.isReadOnly&&i.offsetWidth>0)!=this.isDroppedDown&&this.onIsDroppedDownChanging(new r.CancelEventArgs)&&(t?(this._minWidthDropdown=n.style.minWidth,n.style.display="",this._updateDropDown(),this.addEventListener(window,"touchstart",(function(t){for(var n=t.target;n;){if(n==i)return;n=n[r.Control._OWNR_KEY]||n.parentNode}r.Control._touching=!0,e.isDroppedDown=!1,r.Control._touching=!1}))):(this.removeEventListener(window,"touchstart"),(0,r.hidePopup)(n),n.style.minWidth=this._minWidthDropdown),o&&(this.isTouching&&this.showDropDownButton?i.focus():this.selectAll()),this._updateFocusState(),(0,r.toggleClass)(i,"wj-state-collapsed",!this.isDroppedDown),this.onIsDroppedDownChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dropDown",{get:function(){return this._dropDown},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dropDownCssClass",{get:function(){return this._cssClass},set:function(t){t!=this._cssClass&&((0,r.removeClass)(this._dropDown,this._cssClass),this._cssClass=(0,r.asString)(t),(0,r.addClass)(this._dropDown,this._cssClass))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showDropDownButton",{get:function(){return this._showBtn},set:function(t){this._showBtn=(0,r.asBoolean)(t),this._updateBtn()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"autoExpandSelection",{get:function(){return this._autoExpand},set:function(t){this._autoExpand=(0,r.asBoolean)(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isAnimated",{get:function(){return this._animate},set:function(t){this._animate=(0,r.asBoolean)(t)},enumerable:!0,configurable:!0}),e.prototype.selectAll=function(){var t=this._tbx;this._elRef==t&&(0,r.setSelectionRange)(t,0,this.text.length),this.containsFocus()||this.focus()},e.prototype.onTextChanged=function(t){this.textChanged.raise(this,t),this._updateState()},e.prototype.onIsDroppedDownChanging=function(t){return this.isDroppedDownChanging.raise(this,t),!t.cancel},e.prototype.onIsDroppedDownChanged=function(t){this.isDroppedDownChanged.raise(this,t)},e.prototype.onGotFocus=function(e){this.isTouching||(0,r.contains)(this._dropDown,(0,r.getActiveElement)())||this.selectAll(),t.prototype.onGotFocus.call(this,e)},e.prototype.onLostFocus=function(e){this._commitText(),this.isDroppedDown=!1,t.prototype.onLostFocus.call(this,e)},e.prototype._containsFocusImpl=function(e){return t.prototype._containsFocusImpl.call(this,e)||this.isDroppedDown&&(0,r.contains)(this._dropDown,e)},e.prototype.dispose=function(){this.isDroppedDown=!1;var e=this._dropDown;if(e){this._dropDown=null,(0,r.removeChild)(e);var i=r.Control.getControl(e);i&&i.dispose()}t.prototype.dispose.call(this)},e.prototype.refresh=function(e){void 0===e&&(e=!0),t.prototype.refresh.call(this,e);var i=this.hostElement;if(i&&i.offsetHeight&&this.isDroppedDown){var n=(0,r.getActiveElement)();this.isAnimated&&""!=this._dropDown.style.opacity||(0,r.showPopup)(this._dropDown,i,!1,!1,null==this.dropDownCssClass),n instanceof HTMLElement&&n!=(0,r.getActiveElement)()&&n.focus()}},e.prototype._handleResize=function(){this.isDroppedDown&&this.refresh()},e.prototype._dropDownClick=function(t){t.stopPropagation()},e.prototype._expandSelection=function(){var t=this._tbx,e=t.value,i=t.selectionStart,n=t.selectionEnd;if(e&&i==n){var o=this._getCharType(e,i);if(o>-1){for(;n<e.length&&this._getCharType(e,n)==o;n++);for(;i>0&&this._getCharType(e,i-1)==o;i--);i!=n&&(0,r.setSelectionRange)(t,i,n)}}},e.prototype._getCharType=function(t,e){var i=t[e];return i>="0"&&i<="9"?0:i>="a"&&i<="z"||i>="A"&&i<="Z"?1:-1},e.prototype._keydown=function(t){if(!t.defaultPrevented&&!this._isHiddenEditor()){switch(t.keyCode){case r.Key.Tab:case r.Key.Escape:case r.Key.Enter:this.isDroppedDown&&(this.isDroppedDown=!1,t.keyCode==r.Key.Tab||this.containsFocus()||this.focus(),t.preventDefault());break;case r.Key.F4:case r.Key.Up:case r.Key.Down:if(t.keyCode==r.Key.F4||t.altKey){var e=this.hostElement;e&&e.offsetHeight&&(this.isDroppedDown=!this.isDroppedDown,t.preventDefault())}}if(!t.defaultPrevented&&t.keyCode==r.Key.Escape&&(0,r.isIE)()){var i=this._tbx;if(t.target==i){var n=i.value;i.value=n+" ",i.value=n}}}},e.prototype._isHiddenEditor=function(){return(0,r.hasClass)(this._tbx,"wj-grid-ime")},e.prototype._keypress=function(t){"AltLeft"!=t.code&&"AltRight"!=t.code||t.preventDefault()},e.prototype._btnclick=function(t){t.defaultPrevented||0!=t.button||(t.preventDefault(),this.isTouching?this._containsFocus()||this.hostElement.focus():this.focus(),this.isDroppedDown=!this.isDroppedDown)},e.prototype._setText=function(t,e){(t=(t||"").toString())!=this._tbx.value&&(this._tbx.value=t),t!=this._oldText&&(this._oldText=t,this.onTextChanged()),this._updateState()},e.prototype._updateBtn=function(){this._btn.style.display=this._showBtn?"":"none"},e.prototype._createDropDown=function(){},e.prototype._commitText=function(t){},e.prototype._updateDropDown=function(){if(this.isDroppedDown){this._commitText();var t=this.dropDown;(0,r.setAttribute)(t,"dir",this.rightToLeft?"rtl":null),(0,r.showPopup)(t,this.hostElement,!1,this._animate,null==this.dropDownCssClass)}},e.controlTemplate='<div class="wj-template"><div class="wj-input"><div class="wj-input-group wj-input-btn-visible"><input wj-part="input" type="text" class="wj-form-control"><span wj-part="btn" class="wj-input-group-btn"><button class="wj-btn wj-btn-default" tabindex="-1"><span class="wj-glyph-down"></span></button></span></div></div><div wj-part="dropdown" class="wj-content wj-dropdown-panel"></div></div>',e}(r.Control);!function(t){t[t.None=0]="None",t[t.ClickOwner=1]="ClickOwner",t[t.ClickPopup=2]="ClickPopup",t[t.Click=3]="Click",t[t.BlurOwner=4]="BlurOwner",t[t.BlurPopup=8]="BlurPopup",t[t.Blur=12]="Blur",t[t.ClickOrBlur=15]="ClickOrBlur",t[t.DownOwner=16]="DownOwner",t[t.DownPopup=32]="DownPopup",t[t.Down=48]="Down",t[t.EnterOwner=64]="EnterOwner",t[t.EnterPopup=128]="EnterPopup",t[t.Enter=192]="Enter",t[t.LeaveOwner=256]="LeaveOwner",t[t.LeavePopup=512]="LeavePopup",t[t.Leave=768]="Leave"}(v||(v={})),function(t){t[t.None=0]="None",t[t.Left=1]="Left",t[t.Top=2]="Top",t[t.Right=4]="Right",t[t.Bottom=8]="Bottom",t[t.LeftTop=3]="LeftTop",t[t.RightTop=6]="RightTop",t[t.RightBottom=12]="RightBottom",t[t.LeftBottom=9]="LeftBottom"}(b||(b={}));var C=function(t){function e(e,i){var n=t.call(this,e)||this;n._owner=null,n._modal=!1,n._position=r.PopupPosition.BelowLeft,n._showTrigger=v.ClickOwner,n._hideTrigger=v.Blur,n._hideAnim=[],n._fadeIn=!0,n._fadeOut=!0,n._removeOnHide=!0,n._draggable=!1,n._resizable=!1,n._result=null,n._resultEnter=null,n._resultSubmit=null,n._callback=null,n._visible=!1,n._ownerClickBnd=n._ownerClick.bind(n),n._ownerDownBnd=n._ownerDown.bind(n),n._ownerBlurBnd=n._ownerBlur.bind(n),n._ownerEnterBnd=n._ownerEnter.bind(n),n._ownerLeaveBnd=n._ownerLeave.bind(n),n._mousedownBnd=n._mousedown.bind(n),n._mousemoveBnd=n._mousemove.bind(n),n._mousedragBnd=n._mousedrag.bind(n),n._mouseupBnd=n._mouseup.bind(n),n._hideBnd=n.hide.bind(n),n._lastShow=0,n.showing=new r.Event,n.shown=new r.Event,n.hiding=new r.Event,n.hidden=new r.Event,n.resizing=new r.Event,n.resized=new r.Event,n.dragging=new r.Event,n.dragged=new r.Event,n.sizeChanging=new r.Event,n.sizeChanged=new r.Event,n.positionChanging=new r.Event,n.positionChanged=new r.Event;var o=n.hostElement;(0,r.addClass)(o,"wj-control wj-content wj-popup"),o.getAttribute("tabindex")||(o.tabIndex=0),(0,r.hidePopup)(o,!1);var s=n.addEventListener.bind(n);s(o,"compositionstart",(function(){n._composing=!0})),s(o,"compositionend",(function(){n._composing=!1})),s(window,"resize",(function(){!n.isVisible||n._dragged||n.isTouching||n.invalidate()})),s(o,"keydown",(function(t){if(!t.defaultPrevented){if(t.keyCode!=r.Key.Escape||n._composing||(t.preventDefault(),n.hide()),t.keyCode==r.Key.Enter&&!n._composing){var e=n.dialogResultEnter;e&&(t.preventDefault(),n._validateAndHide(e))}t.keyCode==r.Key.Tab&&n.modal&&(t.preventDefault(),(0,r.moveFocus)(o,t.shiftKey?-1:1))}})),s(o,"click",(function(t){var e=t.target;if(e instanceof HTMLElement){if(e instanceof HTMLButtonElement&&"submit"==e.type){var i=n.hostElement,r=n.dialogResultSubmit;i instanceof HTMLFormElement&&r&&i.reportValidity()&&(t.preventDefault(),n.hide(r))}var o=e.className.match(/\bwj-hide[\S]*\b/);o&&o.length>0&&(t.preventDefault(),t.stopPropagation(),n.hide(o[0]))}}));var a=n._toggle.bind(n),l=v;return n.addEventListener(o,"click",(function(t){n._ignoreClick||a(t,l.ClickPopup)}),!0),n.addEventListener(o,"mousedown",(function(t){n._ignoreClick=!1,a(t,l.DownPopup)}),!0),n.addEventListener(o,"mouseenter",(function(t){t.target==o&&a(t,l.EnterPopup)}),!0),n.addEventListener(o,"mouseleave",(function(t){t.target==o&&a(t,l.LeavePopup)}),!0),n.addEventListener(o,"blur",(function(t){n.containsFocus()||a(t,l.BlurPopup)}),!0),s(document,"wheel",(function(t){if(n.isVisible&&n._modal){for(var e=t.target;e&&e!=document.body;e=e.parentElement)if(e.scrollHeight>e.clientHeight)return;t.preventDefault()}})),n.initialize(i),n}return s(e,t),Object.defineProperty(e.prototype,"owner",{get:function(){return this._owner},set:function(t){var e=this._owner;e&&(this.removeEventListener(e,"click"),this.removeEventListener(e,"mousedown"),this.removeEventListener(e,"mouseenter"),this.removeEventListener(e,"mouseleave"),this.removeEventListener(e,"blur")),(e=this._owner=null!=t?(0,r.getElement)(t):null)&&(this.addEventListener(e,"click",this._ownerClickBnd,!0),this.addEventListener(e,"mousedown",this._ownerDownBnd,!0),this.addEventListener(e,"mouseenter",this._ownerEnterBnd,!0),this.addEventListener(e,"mouseleave",this._ownerLeaveBnd,!0),this.addEventListener(e,"blur",this._ownerBlurBnd,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this._position},set:function(t){this._position=(0,r.asEnum)(t,r.PopupPosition)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"content",{get:function(){return this.hostElement.firstElementChild},set:function(t){t!=this.content&&(this.hostElement.innerHTML="",t instanceof HTMLElement&&this.hostElement.appendChild(t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showTrigger",{get:function(){return this._showTrigger},set:function(t){this._showTrigger=(0,r.asEnum)(t,v)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hideTrigger",{get:function(){return this._hideTrigger},set:function(t){this._hideTrigger=(0,r.asEnum)(t,v)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fadeIn",{get:function(){return this._fadeIn},set:function(t){this._fadeIn=(0,r.asBoolean)(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fadeOut",{get:function(){return this._fadeOut},set:function(t){this._fadeOut=(0,r.asBoolean)(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"removeOnHide",{get:function(){return this._removeOnHide},set:function(t){if((t=(0,r.asBoolean)(t))!=this.removeOnHide&&(this._removeOnHide=t,!this.isVisible)){var e=this.hostElement;t?(0,r.removeChild)(e):e&&document.body&&(e.style.display="none",document.body.appendChild(e))}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"modal",{get:function(){return this._modal},set:function(t){this._modal=(0,r.asBoolean)(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDraggable",{get:function(){return this._draggable},set:function(t){this._draggable=(0,r.asBoolean)(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isResizable",{get:function(){return this._resizable},set:function(t){this._resizable=(0,r.asBoolean)(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dialogResult",{get:function(){return this._result},set:function(t){this._result=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dialogResultEnter",{get:function(){return this._resultEnter},set:function(t){this._resultEnter=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dialogResultSubmit",{get:function(){return this._resultSubmit},set:function(t){this._resultSubmit=(0,r.asString)(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isVisible",{get:function(){var t=this.hostElement;return this._visible&&null!=t&&t.offsetHeight>0},enumerable:!0,configurable:!0}),e.prototype.show=function(t,e){var i=this;if(this._lastShow=Date.now(),!this.isVisible){var n=this.hostElement;this.dialogResult=null,this._callback=null,this._oldFocus=null,this._myFocus=null,this._hideAnim.forEach((function(t){clearInterval(t)})),this._hideAnim.length=0;var o=new r.CancelEventArgs;this.onShowing(o)&&(null!=t&&(this.modal=(0,r.asBoolean)(t)),null!=e&&(this._callback=(0,r.asFunction)(e)),this._oldFocus=(0,r.getActiveElement)(),(0,r.showPopup)(n,this._owner,this._position,this._fadeIn,!1,this._hideBnd),this._modal&&this._showBackdrop(),this._composing=!1,this._visible=!0,this.onShown(o),this._clearTimeouts(),this.modal&&(this.addEventListener(window,"focus",(function(){if(!i.containsFocus()){var t=i._myFocus;t&&t.offsetHeight?t.focus():(0,r.moveFocus)(n,0)}})),this.addEventListener(n,"focusin",(function(){var t=(0,r.getActiveElement)();t&&(0,r.contains)(n,t)&&(t.tabIndex>-1||!i._myFocus)&&(i._myFocus=t)}))),this._resized=this._dragged=this._ignoreClick=!1,this._handleDragResize(!0),this.addEventListener(window,"touchstart",(function(t){i._hideTrigger&v.Blur&&!(0,r.contains)(n,t.target,!0)&&i.hide()})),setTimeout((function(){i.addEventListener(window,"click",(function(t){i._hideTrigger&v.BlurPopup&&i.isDisabled&&!(0,r.contains)(n,t.target,!0)&&i.hide()}))})),setTimeout((function(){if(!i.isDisabled&&!i.containsFocus()&&!i.isTouching){var t=n.querySelector("[autofocus]");t&&t.clientHeight>0&&!t.disabled&&t.tabIndex>-1&&!(0,r.closest)(t,"[disabled],.wj-state-disabled")?(t.focus(),(0,r.isFunction)(t.select)&&t.select()):(0,r.moveFocus)(n,0)}i.isDisabled||i.containsFocus()||(n.tabIndex=0,n.focus())}),100))}},e.prototype.hide=function(t){var i=this;if(this._handleDragResize(!1),this.removeEventListener(window,"touchstart"),this.removeEventListener(window,"click"),this.isVisible){(0,r.isUndefined)(t)||(this.dialogResult=t);var n=new r.CancelEventArgs,o=this.hostElement;if(this.onHiding(n)){for(var s=this.containsFocus()?this._oldFocus:null,a=o.querySelectorAll(".wj-control.wj-dropdown"),l=0;l<a.length;l++){var h=r.Control.getControl(a[l]);h instanceof w&&(h.isDroppedDown=!1)}var c=this.removeOnHide,u=this.fadeOut;this._bkDrop&&this._hideAnim.push((0,r.hidePopup)(this._bkDrop,c,u)),this._hideAnim.push((0,r.hidePopup)(o,c,u)),this._visible=!1,this._oldFocus=null,this._myFocus=null,this.removeEventListener(window,"focus"),this.removeEventListener(o,"focusin"),this.containsFocus()&&(0,r.getActiveElement)().blur(),setTimeout((function(){if(i._updateState(),i.onHidden(n),i._callback&&i._callback(i),i.hideTrigger&v.LeavePopup){var t=r.Control.getControl((0,r.closest)(i.owner,".wj-popup"));if(t instanceof e&&0!=(t.hideTrigger&v.Leave)){var o=e._evtHover,s=o?document.elementFromPoint(o.clientX,o.clientY):null,a=r.Control.getControl((0,r.closest)(s,".wj-popup"));a instanceof e&&!a.isVisible&&(s=null),s&&(0,r.contains)(t.hostElement,s,!0)||t.hide()}}})),this._clearTimeouts(),!this.isVisible&&s&&s.offsetHeight&&s.focus()}}},e.prototype.onShowing=function(t){return this.showing.raise(this,t),!t.cancel},e.prototype.onShown=function(t){this.shown.raise(this,t)},e.prototype.onHiding=function(t){return this.hiding.raise(this,t),!t.cancel},e.prototype.onHidden=function(t){this._wasVisible=!1,this.hidden.raise(this,t)},e.prototype.onResizing=function(t){return this.resizing.raise(this,t),!t.cancel},e.prototype.onResized=function(t){this.resized.raise(this,t)},e.prototype.onDragging=function(t){return this.dragging.raise(this,t),!t.cancel},e.prototype.onDragged=function(t){this.dragged.raise(this,t)},e.prototype.onSizeChanging=function(t){return this.sizeChanging.raise(this,t),!t.cancel},e.prototype.onSizeChanged=function(t){this.sizeChanged.raise(this,t)},e.prototype.onPositionChanging=function(t){return this.positionChanging.raise(this,t),!t.cancel},e.prototype.onPositionChanged=function(t){this.positionChanged.raise(this,t)},e.prototype.onLostFocus=function(e){if(t.prototype.onLostFocus.call(this,e),this._hideTrigger&v.BlurPopup&&!this.containsFocus()){var i=document.createEvent("Event");i.initEvent("blur",!0,!0),this._toggle(i,v.BlurPopup)}},e.prototype.dispose=function(){this.owner=null,t.prototype.dispose.call(this)},e.prototype.refresh=function(e){void 0===e&&(e=!0);var i=this.hostElement;if(t.prototype.refresh.call(this,e),this.isVisible&&!this._refreshing&&i){this._refreshing=!0;for(var n=(0,r.getActiveElement)(),o=this._owner?this._owner.getBoundingClientRect():null,s=[],a=i.querySelectorAll(".wj-dropdown"),l=0;l<a.length;l++){var h=r.Control.getControl(a[l]);h instanceof w&&h.isDroppedDown&&(s.push(h),h.dropDown.style.display="none")}(0,r.showPopup)(i,o,this._position),s.forEach((function(t){t.dropDown.style.display="",t._updateDropDown()})),this._modal&&n instanceof HTMLElement&&n!=(0,r.getActiveElement)()&&n.focus(),this._refreshing=!1}},e.prototype._clearTimeouts=function(){this._toShow&&(clearTimeout(this._toShow),this._toShow=null),this._toHideLeave&&(clearTimeout(this._toHideLeave),this._toHideLeave=null),this._toHideBlur&&(clearTimeout(this._toHideBlur),this._toHideBlur=null)},e.prototype._handleDragResize=function(t){var e=this.hostElement,i=this._draggable?this._getHeaderElement():null,n=this.addEventListener.bind(this),r=this.removeEventListener.bind(this),o=this._mousemoveBnd,s=this._mousedownBnd;t?(n(e,"mousemove",o),n(e,"mousedown",s),n(e,"touchstart",s),i&&(i.style.touchAction="none")):(this._mousedownEvt=null,this._rcBounds=null,r(e,"mousemove",o),r(e,"mousedown",s),r(e,"touchstart",s),r(document,"mousemove",this._mousedragBnd),r(document,"mouseup",this._mouseupBnd),i&&(i.style.touchAction=""))},e.prototype._mousemove=function(t){if(!this._mousedownEvt){var e=this.hostElement,i=this._getEdges(e,t),n="",r=b;this._edges=i,this._resizable&&(i==r.LeftTop||i==r.RightBottom?n="nwse-resize":i==r.LeftBottom||i==r.RightTop?n="nesw-resize":i==r.Left||i==r.Right?n="ew-resize":i!=r.Top&&i!=r.Bottom||(n="ns-resize")),this._draggable&&!n&&this._getClosestHeader(t.target)&&(n="move"),e.style.cursor=n}},e.prototype._mousedown=function(t){if(!t.defaultPrevented){var e=t.touches&&t.touches.length>0?t.touches[0]:t;if(this._edges=this._getEdges(this.hostElement,e),this._edges||this._draggable&&this._getClosestHeader(t.target)){var i=new r.CancelEventArgs;if(this._edges?this.onResizing(i):this.onDragging(i)){this._mousedownEvt=e,this._rcBounds=this.hostElement.getBoundingClientRect();var n=this.addEventListener.bind(this),o=document,s=this._mousedragBnd,a=this._mouseupBnd;n(o,"mousemove",s),n(o,"touchmove",s),n(o,"mouseup",a),n(o,"touchend",a)}}this._ignoreClick=!1}},e.prototype._mouseup=function(){this._mousedownEvt=null,this._rcBounds=null;var t=this.removeEventListener.bind(this),e=document,i=this._mousedragBnd,n=this._mouseupBnd;t(e,"mousemove",i),t(e,"touchmove",i),t(e,"mouseup",n),t(e,"touchend",n),this._resized?this.onResized():this._dragged&&this.onDragged(),this._resized=this._dragged=this._ignoreClick=!1},e.prototype._mousedrag=function(t){if(!t.defaultPrevented){var i=this.hostElement,n=this._mousedownEvt,o=t.touches&&t.touches.length>0?t.touches[0]:t,s=o.clientX-n.clientX,a=o.clientY-n.clientY,l=this._rcBounds,h=this._edges,c=e._SZ_MIN,u=r.Rect.fromBoundingRect(l);if(h){if(h&b.Left?(u.left=l.left+s+(o.pageX-o.clientX),u.width=Math.max(l.width-s,c)):h&b.Right&&(u.left=l.left,u.width=Math.max(l.width+s,c)),h&b.Top?(u.top=l.top+a+(o.pageY-o.clientY),u.height=Math.max(l.height-a,c)):h&b.Bottom&&(u.top=l.top,u.height=Math.max(l.height+a,c)),this.onSizeChanging(new x(u))&&((0,r.setCss)(i,{left:u.left,top:u.top,width:u.width,height:u.height}),this._resized=this._dragged=this._ignoreClick=!0,this.onSizeChanged()),!window.ResizeObserver)for(var d=this.hostElement.children,p=0;p<d.length;p++)r.Control.invalidateAll(d[p])}else this._draggable&&(this._dragged||Math.abs(s)+Math.abs(a)>e._DRAG_THRESHOLD)&&(u.left=Math.max(l.left+s+(o.pageX-o.clientX),50-l.width),u.top=Math.max(l.top+a+(o.pageY-o.clientY),0),this.onPositionChanging(new x(u))&&((0,r.setCss)(i,{left:u.left,top:u.top}),this._dragged=this._ignoreClick=!0,this.onPositionChanged()))}},e.prototype._getEdges=function(t,i){var n=0;if(this._resizable){var r=t.getBoundingClientRect(),o=e._SZ_EDGE;i.clientX-r.left<o&&(n|=b.Left),i.clientY-r.top<o&&(n|=b.Top),r.right-i.clientX<o&&(n|=b.Right),r.bottom-i.clientY<o&&(n|=b.Bottom)}return n},e.prototype._ownerClick=function(t){this._toggle(t,v.ClickOwner)},e.prototype._ownerDown=function(t){this._wasVisible=this.isVisible,this._toggle(t,v.DownOwner)},e.prototype._ownerBlur=function(t){(0,r.contains)(this._owner,(0,r.getActiveElement)())||this._toggle(t,v.BlurOwner)},e.prototype._ownerEnter=function(t){t.target==this._owner&&this._toggle(t,v.EnterOwner)},e.prototype._ownerLeave=function(t){t.target==this._owner&&this._toggle(t,v.LeaveOwner)},e.prototype._toggle=function(t,i){var n=this;if(t instanceof MouseEvent&&(e._evtHover=t),!("mouseenter"==t.type&&Date.now()-this._lastShow<300||t.defaultPrevented)){var o=0!=(this._hideTrigger&i),s=0!=(this._showTrigger&i),a=v;(o||s)&&this._clearTimeouts(),o&&this.isVisible&&(i&a.Leave?this._toHideLeave=setTimeout((function(){var t=e._evtHover,i=t?document.elementFromPoint(t.clientX,t.clientY):null;i&&(0,r.contains)(n.hostElement,i,!0)||n.hide()}),r.Control._LEAVE_DELAY):i&a.Blur?this._toHideBlur=setTimeout((function(){n.containsFocus()||(0,r.contains)(n._owner,(0,r.getActiveElement)())||n.hide()}),r.Control._FOCUS_INTERVAL+50):this.hide()),s&&i!=a.ClickPopup&&(this._wasVisible||(i&a.Enter?this._toShow=setTimeout((function(){n.show()}),r.Control._HOVER_DELAY):this.show()))}},e.prototype._getHeaderElement=function(){var t=this.hostElement;return t.querySelector(".wj-dialog-header")||t.querySelector(".modal-header")},e.prototype._getClosestHeader=function(t){return(0,r.closest)(t,".wj-dialog-header")||(0,r.closest)(t,".modal-header")},e.prototype._showBackdrop=function(){var t=this;this._bkDrop||(this._bkDrop=document.createElement("div"),this._bkDrop.tabIndex=-1,(0,r.addClass)(this._bkDrop,"wj-popup-backdrop"),this.addEventListener(this._bkDrop,"mousedown",(function(e){e.preventDefault(),e.stopPropagation(),t.hostElement.focus(),t.hideTrigger&v.Blur&&t.hide()}))),(0,r.setCss)(this._bkDrop,{zIndex:r.Control._POPUP_ZINDEX,display:""});var e=this.hostElement;e.parentElement.insertBefore(this._bkDrop,e)},e.prototype._validateAndHide=function(t){var e=this.hostElement;if(e instanceof HTMLFormElement)e.reportValidity()&&this.hide(t);else{var i=this.hostElement.querySelector(":invalid");i?i.focus():this.hide(t)}},e._DRAG_THRESHOLD=6,e._SZ_EDGE=10,e._SZ_MIN=40,e}(r.Control),x=function(t){function e(e){var i=t.call(this)||this;return i._rc=e,i}return s(e,t),Object.defineProperty(e.prototype,"bounds",{get:function(){return this._rc},enumerable:!0,configurable:!0}),e}(r.CancelEventArgs),S=function(t){function e(e,i){var n=t.call(this,e)||this;n._fmt="d",n._sep=" - ",n._rngs=null,n._showCal=!1,n._clsOnSel=!0,n._handleWheel=!0,n._clicked=!1,n._rangeChanged=!1,n.valueChanged=new r.Event,n.rangeEndChanged=new r.Event,n.rangeChanged=new r.Event,(0,r.addClass)(n.hostElement,"wj-inputdate"),n._msk=new r._MaskProvider(n._tbx),(0,r.isIE9)()||(n.inputType="tel"),n._tbx.type.match(/^(tel|text|)$/i)||(n.inputType="text"),n.addEventListener(n.hostElement,"wheel",(function(t){if(n.handleWheel&&!t.defaultPrevented&&!n.isDroppedDown&&n.containsFocus()&&null!=n.value&&n._canChangeValue()){var e=(0,r.clamp)(-t.deltaY,-1,1),i=n.value;n.value=n.selectionMode==p.Month?r.DateTime.addMonths(i,e):r.DateTime.addDays(i,e),n.selectAll(),t.preventDefault()}}));var o=n._lbx=new u(document.createElement("div"),{displayMemberPath:"name",selectedIndexChanged:function(t){var e=t.selectedItem,i=r.DateTime.fromDateTime;if(e&&e.from&&e.to){var o=n.value;n.value=i(e.from,o),n.rangeEnd=i(e.to,o),n._selectAll()}else n._cal.hostElement.style.display=""}}),s=n._cal=new y(document.createElement("div")),a=n._dropDown;if((0,r.addClass)(a,"wj-inputdate-dropdown"),a.appendChild(o.hostElement),a.appendChild(s.hostElement),n.addEventListener(a,"click",(function(){n._clicked=!0,setTimeout((function(){n._clicked=!1}),50)}),!0),"INPUT"==n._orgTag){var l=n._tbx.getAttribute("value");l&&(s.value=s.rangeEnd=r.Globalize.parseDate(l,"yyyy-MM-dd"))}return n.isRequired=!0,n.initialize(i),n._tbx.value=n._oldText=n._getText(),n._updateState(),s.valueChanged.addHandler((function(t,e){n._refreshText(),n.onValueChanged(e),n._closeOnChange()})),s.rangeEndChanged.addHandler((function(t,e){s._rngMode()&&(n.onRangeEndChanged(e),n._closeOnChange(),s._clearingRangeEnd||n._refreshText())})),s.hostElement.addEventListener("click",(function(t){if(s.selectionMode&&!s._rngMode()){var e=t.target,i=s.hitTest(e);(r.DateTime.sameDate(n.value,i)||(0,r.closest)(e,"[wj-part=btn-today]"))&&n._closeOnChange()}})),n}return s(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this._cal.value},set:function(t){this._cal.value=t,this._refreshText()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rangeEnd",{get:function(){return this._cal.rangeEnd},set:function(t){this._cal.rangeEnd=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rangeMin",{get:function(){return this._cal.rangeMin},set:function(t){this._cal.rangeMin=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rangeMax",{get:function(){return this._cal.rangeMax},set:function(t){this._cal.rangeMax=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._tbx.value},set:function(t){if(t!=this.text){var e=t;(e=(e||"").toString())!=this._tbx.value&&(this._tbx.value=e),e!=this._oldText&&(this._oldText=e),this._commitText(),this.onTextChanged()}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"format",{get:function(){return this._fmt},set:function(t){t!=this.format&&(this._fmt=(0,r.asString)(t),this._refreshText())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"separator",{get:function(){return this._sep},set:function(t){t!=this._sep&&(this._sep=(0,r.asString)(t,!1),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mask",{get:function(){return this._msk.mask},set:function(t){this._msk.mask=(0,r.asString)(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"closeOnSelection",{get:function(){return this._clsOnSel},set:function(t){this._clsOnSel=(0,r.asBoolean)(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"handleWheel",{get:function(){return this._handleWheel},set:function(t){t=(0,r.asBoolean)(t),this._handleWheel=t,t||(this.calendar.handleWheel=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"predefinedRanges",{get:function(){return this._rngs},set:function(t){this._rngs!=t&&((0,r.assert)(null==t||(0,r.isObject)(t),"Object expected"),this._rngs=t,this._lbx.itemsSource=this._getRanges(t),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alwaysShowCalendar",{get:function(){return this._showCal},set:function(t){this._showCal=(0,r.asBoolean)(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"min",{get:function(){return this._cal.min},set:function(t){this._cal.min=(0,r.asDate)(t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"max",{get:function(){return this._cal.max},set:function(t){this._cal.max=(0,r.asDate)(t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"repeatButtons",{get:function(){return this._cal.repeatButtons},set:function(t){this._cal.repeatButtons=(0,r.asBoolean)(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showYearPicker",{get:function(){return this._cal.showYearPicker},set:function(t){this._cal.showYearPicker=(0,r.asBoolean)(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showMonthPicker",{get:function(){return this._cal.showMonthPicker},set:function(t){this._cal.showMonthPicker=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showHeader",{get:function(){return this._cal.showHeader},set:function(t){this._cal.showHeader=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"weeksBefore",{get:function(){return this._cal.weeksBefore},set:function(t){this._cal.weeksBefore=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"weeksAfter",{get:function(){return this._cal.weeksAfter},set:function(t){this._cal.weeksAfter=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectionMode",{get:function(){return this._cal.selectionMode},set:function(t){t!=this.selectionMode&&(this._cal.selectionMode=t,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"monthCount",{get:function(){return this._cal.monthCount},set:function(t){this._cal.monthCount=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"calendar",{get:function(){return this._cal},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputElement",{get:function(){return this._tbx},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputType",{get:function(){return this._tbx.type},set:function(t){this._tbx.type=(0,r.asString)(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemValidator",{get:function(){return this._cal.itemValidator},set:function(t){t!=this.itemValidator&&(this._cal.itemValidator=(0,r.asFunction)(t),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemFormatter",{get:function(){return this._cal.itemFormatter},set:function(t){this._cal.itemFormatter=(0,r.asFunction)(t)},enumerable:!0,configurable:!0}),e.prototype.onValueChanged=function(t){this.valueChanged.raise(this,t)},e.prototype.onRangeEndChanged=function(t){this.rangeEndChanged.raise(this,t),this.rangeEnd&&(this.isDroppedDown?this._rangeChanged=!0:this.onRangeChanged(t))},e.prototype.onRangeChanged=function(t){this._rangeChanged=!1,this.rangeChanged.raise(this,t)},e.prototype.refresh=function(e){void 0===e&&(e=!0),t.prototype.refresh.call(this,e),this.hostElement&&(this._msk&&this._msk.refresh(),this._cal&&this._cal.refresh(),this._refreshText())},e.prototype.onIsDroppedDownChanging=function(e){if(this.isDroppedDown)(n=this._cal)._rngMode()&&n.value&&!n.rangeEnd&&(n.rangeEnd=n.value);else{var i=this._lbx,n=this._cal,o=i.collectionView,s=i.hostElement.style,a=n.hostElement.style;if(n._rngMode()&&(0,r.hasItems)(o)){var l=this._updateRangeSelection();s.display="",a.display=!this._showCal&&l&&l.from&&o.items.some((function(t){return!t.to}))?"none":""}else s.display="none",a.display="";n._mthMode()||(n.monthView=!0)}return t.prototype.onIsDroppedDownChanging.call(this,e)},e.prototype.onIsDroppedDownChanged=function(e){t.prototype.onIsDroppedDownChanged.call(this,e);var i=this.containsFocus();this.isDroppedDown?(i&&(this._tryFocus(this._cal)||this._tryFocus(this._lbx)||this.dropDown.focus()),this._lbx.showSelection(),this._cal.refresh()):(this._commitText(),this._rangeChanged&&this.onRangeChanged())},e.prototype._updateDropDown=function(){this._commitText();var e=getComputedStyle(this.hostElement);this._dropDown.style.minWidth=18*parseFloat(e.fontSize)+"px",this._cal.refresh(),t.prototype._updateDropDown.call(this)},e.prototype._keydown=function(e){if(!(e.defaultPrevented||e.altKey||e.ctrlKey||e.metaKey)){if(this._isHiddenEditor())return;switch(e.keyCode){case r.Key.Enter:this._commitText();break;case r.Key.Escape:this.text=this._getText(),this.selectAll();break;case r.Key.Tab:if(this._cal._rngMode()){var i=this._tbx,n=this._sep,o=i.value,s=o.indexOf(n);if(s>-1){var a=o.length,l=i.selectionStart,h=i.selectionEnd,c=null;i.selectionEnd<=s&&!e.shiftKey?c=0==l&&0==h:e.shiftKey&&i.selectionStart>=s+n.length&&(c=l<a||h<a),null!=c&&(c?(0,r.setSelectionRange)(i,0,s):(0,r.setSelectionRange)(i,s+n.length,a),e.preventDefault())}}break;case r.Key.Up:case r.Key.Down:if(!this.isDroppedDown&&this.value&&this._canChangeValue()){var u=e.keyCode==r.Key.Up?1:-1,d=this.selectionMode==p.Month?r.DateTime.addMonths(this.value,u):r.DateTime.addDays(this.value,u);this.value=this._fromDateTime(d),this.selectAll(),e.preventDefault()}}}t.prototype._keydown.call(this,e)},e.prototype._expandSelection=function(){if(this._cal._rngMode()){var e=this._tbx,i=e.value,n=e.selectionStart,o=e.selectionEnd,s=this._sep,a=i.indexOf(s);a>-1&&n==o&&(o<=a?(0,r.setSelectionRange)(e,0,a):n>=a+s.length&&(0,r.setSelectionRange)(e,a+s.length,e.value.length))}else t.prototype._expandSelection.call(this)},e.prototype._refreshText=function(){var t=this._getText();t!=this.text&&(this._tbx.value=this._oldText=t,this.onTextChanged())},e.prototype._selectAll=function(){this.isDroppedDown||!this.containsFocus()||this.isTouching||this.selectAll()},e.prototype._closeOnChange=function(){var t=this;if(this._clsOnSel&&this._clicked){var e=this._cal;(!e._rngMode()||e.value&&e.rangeEnd)&&setTimeout((function(){t.isDroppedDown=!1}))}},e.prototype._tryFocus=function(t){var e=t.hostElement;return!(!e||!e.offsetHeight||(e.focus(),0))},e.prototype._clamp=function(t){return this._cal._clamp(t)},e.prototype._getText=function(){var t=r.Globalize.format,e=this._fmt,i=t(this.value,e);return this._cal._rngMode()&&i&&(i+=this._sep+t(this.rangeEnd,e)),i},e.prototype._commitText=function(t){var e=this._tbx.value;if(e!=this._getText()){var i=!1,n=this._fmt,o=this._cal,s=r.Globalize.parseDate;if(e||this.isRequired)if(o._rngMode()){var a=e.split(this._sep);if(2==a.length&&a[0]&&(h=s(a[0],n,this.value))){var l=s(a[1],n,this.value);o.value=this._fromDateTime(h),o.rangeEnd=l&&l>=h?this._fromDateTime(l):h,i=!0}}else{var h;(h=s(e,n,this.value))&&(this.value=this._fromDateTime(h),i=!0)}else this.value=this.rangeEnd=null,i=!0;(i||!this._containsFocus()&&this.onInvalidInput(new r.CancelEventArgs))&&(this.text=this._getText())}t||this._selectAll()},e.prototype._fromDateTime=function(t){return r.DateTime.fromDateTime(t,this.value)},e.prototype._canChangeValue=function(){return!this.isReadOnly&&!this.isDisabled&&this.selectionMode!=p.None},e.prototype._isValidDate=function(t){if(t){if(this._clamp(t)!=t)return!1;if(this.itemValidator&&!this.itemValidator(t))return!1}return!0},e.prototype._getRanges=function(t){var e=[];if((0,r.isObject)(t))for(var i in t){var n=t[i];e.push({name:i,from:n?n[0]:null,to:n?n[1]:null})}return new r.CollectionView(e,{currentItem:null})},e.prototype._updateRangeSelection=function(){var t=this._lbx,e=-1;if((0,r.hasItems)(t.collectionView))for(var i=this._lbx.collectionView.items,n=r.DateTime.sameDate,o=0;o<i.length;o++){var s=i[o];if(s.from){if(n(s.from,this.value)&&n(s.to,this.rangeEnd)){e=o;break}}else e=o}return t.selectedIndex=e,t.selectedItem},e}(w),E=function(t){function e(e,i){var n=t.call(this,e,{selectionMode:p.Range,showMonthPicker:"Outside",monthCount:2})||this;return(0,r.addClass)(n.hostElement,"wj-inputdaterange"),n.initialize(i),n}return s(e,t),Object.defineProperty(e.prototype,"selectionMode",{get:function(){return this.calendar.selectionMode},set:function(t){t=(0,r.asEnum)(t,p),(0,r.assert)(t==p.Range,'InputDateRange.selectionMode must be "Range"'),this.calendar.selectionMode=t},enumerable:!0,configurable:!0}),e}(S),P=function(t){function e(e,i){var n=t.call(this,e)||this;return n.valueChanged=new r.Event,(0,r.addClass)(n.hostElement,"wj-inputcolor"),n._ePreview=(0,r.createElement)('<div class="wj-inputcolorbox"></div>',n.hostElement.firstElementChild),"INPUT"==n._orgTag&&(n._tbx.type="",n._commitText()),n.value="#ffffff",n.isRequired=!0,n.initialize(i),n.addEventListener(n._colorPicker.hostElement,"click",(function(t){var e=t.target;e&&"DIV"==e.tagName&&((0,r.closest)(e,'[wj-part="div-pal"]')||(0,r.closest)(e,'[wj-part="div-pv"]'))&&e.style.backgroundColor&&(n.isDroppedDown=!1)})),n}return s(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(t){this.text=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._tbx.value},set:function(t){(t=(0,r.asString)(t))==this.text||!t&&this.isRequired||t&&!r.Color.fromString(t)||(this._setText(t,!0),this._commitText())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showAlphaChannel",{get:function(){return this._colorPicker.showAlphaChannel},set:function(t){this._colorPicker.showAlphaChannel=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showColorString",{get:function(){return this._colorPicker.showColorString},set:function(t){this._colorPicker.showColorString=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"palette",{get:function(){return this._colorPicker.palette},set:function(t){this._colorPicker.palette=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"colorPicker",{get:function(){return this._colorPicker},enumerable:!0,configurable:!0}),e.prototype.onValueChanged=function(t){this.valueChanged.raise(this,t)},e.prototype.onIsDroppedDownChanged=function(e){t.prototype.onIsDroppedDownChanged.call(this,e),this.isDroppedDown&&!this.isTouching&&this.selectAll()},e.prototype._createDropDown=function(){var t=this;this._colorPicker=new h(this._dropDown),(0,r.setCss)(this._dropDown,{minWidth:420,minHeight:200}),this._colorPicker.valueChanged.addHandler((function(){t.value=t._colorPicker.value}))},e.prototype._keydown=function(e){if(!e.defaultPrevented)switch(e.keyCode){case r.Key.Enter:this._commitText(),this.selectAll();break;case r.Key.Escape:this.text=this.value,this.selectAll()}t.prototype._keydown.call(this,e)},e.prototype._commitText=function(){if(this._value!=this.text){if(!this.isRequired&&!this.text)return this._value=this.text,this._ePreview.style.backgroundColor="",void this.onValueChanged();if(r.Color.fromString(this.text)){var t=this._colorPicker;t.value=this.text,this._value=t.value,this._ePreview.style.backgroundColor=this.value,this.onValueChanged()}else this.onInvalidInput(new r.CancelEventArgs)&&(this.text=this._value?this._value:"")}},e}(w),T=function(t){function e(e,i){var n=t.call(this,e)||this;n._editable=!1,n._trimText=!0,n._handleWheel=!0,n._delKey=0,n._pathHdr=new r.Binding(null),n._bsCollapse=!0,n._fmtItemHandlers=0,n.itemsSourceChanged=new r.Event,n.selectedIndexChanged=new r.Event;var o=n.hostElement;(0,r.addClass)(o,"wj-combobox"),n.dropDown.id=(0,r.getUniqueId)(o.id+"_dropdown"),n.autoExpandSelection=!1;var s=n._tbx;n.addEventListener(s,"compositionstart",(function(){n._composing=!0;var t=s.selectionStart,e=s.selectionEnd;if(e>t&&!(0,r.isIE)()){var i=s.value;s.value=i.substring(0,t)+i.substring(e,i.length),n._setSelRange(t,t)}})),n.addEventListener(s,"compositionend",(function(){n._composing=!1,n._setText(n.text,!0)})),n.addEventListener(o,"wheel",n._wheel.bind(n)),"SELECT"==n._orgTag&&n._lbx._initFromSelect(o);var a=n._lbx;return a.loadedItems.addHandler((function(t){n.selectedIndex>-1&&(n.selectedIndex=a.selectedIndex)})),n.isRequired=!0,n.initialize(i),n}return s(e,t),Object.defineProperty(e.prototype,"itemsSource",{get:function(){return this._lbx.itemsSource},set:function(t){this._lbx.itemsSource!=t&&(this._lbx.itemsSource=t,this.onItemsSourceChanged()),this._updateBtn()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"collectionView",{get:function(){return this._lbx.collectionView},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"virtualizationThreshold",{get:function(){return this._lbx.virtualizationThreshold},set:function(t){this._lbx.virtualizationThreshold=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showGroups",{get:function(){return this._lbx.showGroups},set:function(t){this._lbx.showGroups=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayMemberPath",{get:function(){return this._lbx.displayMemberPath},set:function(t){this._lbx.displayMemberPath=t;var e=this.getDisplayText();this.text!=e&&this._setText(e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"headerPath",{get:function(){return this._pathHdr.path},set:function(t){this._pathHdr.path=(0,r.asString)(t);var e=this.getDisplayText();this.text!=e&&this._setText(e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedValuePath",{get:function(){return this._lbx.selectedValuePath},set:function(t){this._lbx.selectedValuePath=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isContentHtml",{get:function(){return this._lbx.isContentHtml},set:function(t){if(t!=this.isContentHtml){this._lbx.isContentHtml=(0,r.asBoolean)(t);var e=this.getDisplayText();this.text!=e&&this._setText(e,!0)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"caseSensitiveSearch",{get:function(){return this._lbx.caseSensitiveSearch},set:function(t){this._lbx.caseSensitiveSearch=(0,r.asBoolean)(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"trimText",{get:function(){return this._trimText},set:function(t){t!=this._trimText&&(this._trimText=(0,r.asBoolean)(t),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemFormatter",{get:function(){return this._lbx.itemFormatter},set:function(t){this._lbx.itemFormatter=(0,r.asFunction)(t),this.selectedIndex=this._lbx.selectedIndex},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"formatItem",{get:function(){return this._lbx.formatItem},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedIndex",{get:function(){return this._lbx.selectedIndex},set:function(t){t!=this.selectedIndex&&(0,r.isNumber)(t)&&(this._lbx.selectedIndex=t),t=this.selectedIndex;var e=this.getDisplayText(t);this.text!=e&&this._setText(e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedItem",{get:function(){return this._lbx.selectedItem},set:function(t){this._lbx.selectedItem=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedValue",{get:function(){return this.collectionView?this._lbx.selectedValue:this.text},set:function(t){this.collectionView?this._lbx.selectedValue=t:null!=t&&(this.text=t.toString())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isEditable",{get:function(){return this._editable},set:function(t){this._editable=(0,r.asBoolean)(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"handleWheel",{get:function(){return this._handleWheel},set:function(t){this._handleWheel=(0,r.asBoolean)(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxDropDownHeight",{get:function(){return this._lbx.maxHeight},set:function(t){this._lbx.maxHeight=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxDropDownWidth",{get:function(){var t=this._dropDown,e=t?parseInt(t.style.maxWidth):null;return isNaN(e)?null:e},set:function(t){var e=this._dropDown.style;t=(0,r.asNumber)(t,!0),e.maxWidth=null==t?"":t+"px",e.minWidth=""},enumerable:!0,configurable:!0}),e.prototype.getDisplayText=function(t,e){void 0===t&&(t=this.selectedIndex),void 0===e&&(e=this._trimText);var i,n=this.collectionView;if(this.headerPath&&t>-1&&(0,r.hasItems)(n)){var o=n.items[t];i=null!=(i=o?this._pathHdr.getValue(o):null)?i.toString():"",this.isContentHtml&&(i=(0,r.toPlainText)(i))}else i=this._lbx.getDisplayText(t);return e?i.trim():i},e.prototype.indexOf=function(t,e){var i=this.collectionView,n=this.caseSensitiveSearch;if((0,r.hasItems)(i)&&null!=t){t=t.toString(),n||(t=t.toLowerCase());var o=this.selectedIndex,s=this.getDisplayText(o);if(e&&(n||(s=s.toLowerCase()),t==s))return o;for(var a=0;a<i.items.length;a++)if(this._lbx.isItemEnabled(a))if(s=this.getDisplayText(a),n||(s=s.toLowerCase()),e){if(s==t)return a}else if(t&&0==s.indexOf(t))return a}return-1},Object.defineProperty(e.prototype,"listBox",{get:function(){return this._lbx},enumerable:!0,configurable:!0}),e.prototype.onItemsSourceChanged=function(t){this.itemsSourceChanged.raise(this,t)},e.prototype.onSelectedIndexChanged=function(t){this._updateBtn(),this.selectedIndexChanged.raise(this,t)},e.prototype.refresh=function(e){void 0===e&&(e=!0),t.prototype.refresh.call(this,e),this.hostElement&&(0,r.hasItems)(this.collectionView)&&(this._lbx.refresh(),this.selectedIndex>-1&&(this.selectedIndex=this._lbx.selectedIndex))},e.prototype.onLostFocus=function(e){this._composing&&(this._composing=!1,this._setText(this.text,!0)),this.isEditable&&this.isRequired&&!this.text&&(0,r.hasItems)(this.collectionView)&&(this.selectedIndex=0),t.prototype.onLostFocus.call(this,e)},e.prototype.onIsDroppedDownChanging=function(e){return this.isDroppedDown||this._hasItems()?t.prototype.onIsDroppedDownChanging.call(this,e):(e.cancel=!0,!1)},e.prototype.onIsDroppedDownChanged=function(e){t.prototype.onIsDroppedDownChanged.call(this,e),this.isDroppedDown&&(this._fmtItemHandlers=this.formatItem.handlerCount,this._lbx.showSelection()),this._updateAria()},e.prototype._setIsDisabled=function(e){t.prototype._setIsDisabled.call(this,e),this._updateBtn()},e.prototype._updateBtn=function(){var e=this.collectionView,i=this._tbx,n=this._hasItems();t.prototype._updateBtn.call(this),this._btn.style.display=this._showBtn&&null!=e?"":"none",(0,r.enable)(this._btn,n&&!this.isDisabled),(0,r.setAttribute)(i,"role",n?"combobox":null),(0,r.setAttribute)(i,"aria-autocomplete",n?"both":null),this._updateAria()},e.prototype._hasItems=function(){return(0,r.hasItems)(this.collectionView)},e.prototype._updateAria=function(){var t=this._tbx,e=this.isDroppedDown,i=this.dropDown?this.dropDown.id:null,n=i&&(0,r.hasItems)(this.collectionView);(0,r.setAttribute)(t,"aria-owns",n&&e?i:null),(0,r.setAttribute)(t,"aria-expanded",n?e:null)},e.prototype._createDropDown=function(){var t=this;this._lbx||(this._lbx=new u(this._dropDown)),this._lbx.maxHeight=200,this._lbx.selectedIndexChanged.addHandler((function(){t._updateBtn();var e=t._lbx.selectedIndex,i=t._lbx.hostElement.children,n=e>-1&&e<i.length?i[e].id:null;(0,r.setAttribute)(t._tbx,"aria-activedescendant",n&&n.length?n:null),t.selectedIndex=e,t.onSelectedIndexChanged()})),this._lbx.itemsChanged.addHandler((function(){t._updateBtn()}))},e.prototype._wheel=function(t){if(this.handleWheel&&!t.defaultPrevented&&!this.isDroppedDown&&!this.isReadOnly&&this.containsFocus()&&this.selectedIndex>-1){var e=this._findNext("",t.deltaY>0?1:-1);e>-1&&(this.selectedIndex=e),t.preventDefault()}},e.prototype._dropDownClick=function(e){e.defaultPrevented||e.target!=this._dropDown&&(this.isDroppedDown=!1),t.prototype._dropDownClick.call(this,e)},e.prototype._setText=function(e,i){if(!this._composing&&!this._settingText){if(this._settingText=!0,this.containsFocus()){var n=this.formatItem.handlerCount;this._fmtItemHandlers!=n&&(this._fmtItemHandlers=n,this._lbx.loadList())}null==e&&(e=""),e=e.toString();var o=this.selectedIndex,s=this.collectionView,a=this._getSelStart(),l=-1,h=!0;if(this.isEditable&&(this._delKey||this._getSelEnd()<e.length||!this.containsFocus())&&(i=!0,h=!1),o=this.indexOf(e,i),h&&(o<0&&i&&(o=this.indexOf(e,!1)),o<0&&a>0&&(o=this.indexOf(e.substr(0,a),!1))),o<0&&!this.isEditable&&(0,r.hasItems)(s)&&(this.isRequired||e)){var c=this._oldText||"";o=Math.max(0,this.indexOf(c,!1)),a=0;for(var u=0;u<e.length&&u<c.length;u++)if(e[u]!=c[u]){a=u;break}}o>-1&&(l=a,e=this.getDisplayText(o));var d=this._tbx;e!=d.value&&(d.value=e),l>-1&&this.containsFocus()&&!this.isTouching&&this._updateInputSelection(l),s&&s.moveCurrentToPosition(o),this._delKey=0,this._settingText=!1,t.prototype._setText.call(this,e,i)}},e.prototype._findNext=function(t,e,i){void 0===i&&(i=this.selectedIndex);var n=this.collectionView,r=n?n.items.length:0,o=this._lbx,s=this.caseSensitiveSearch;if(n&&r&&e){s||(t=t.toLowerCase());for(var a=i+e;a>-1&&a<r;a+=e){var l=this.getDisplayText(a);if(s||(l=l.toLowerCase()),0==l.indexOf(t)&&(!this.dropDown.children[a]||o.isItemEnabled(a)))return a}}return i},e.prototype._keydown=function(e){if(t.prototype._keydown.call(this,e),!e.defaultPrevented&&!this.isReadOnly&&!e.altKey&&(0,r.hasItems)(this.collectionView)&&this._elRef==this._tbx&&!this._isHiddenEditor()){this._delKey=0;var i=this._getSelStart();switch(e.keyCode){case r.Key.Back:if(this._bsCollapse&&!this.isEditable){var n=this._getSelEnd();i>0&&n==this._tbx.value.length&&(0,r.hasItems)(this.collectionView)&&this._setSelRange(i-1,n)}this._delKey=e.keyCode;break;case r.Key.Delete:this._delKey=e.keyCode;break;case r.Key.Up:case r.Key.Down:i==this.text.length&&(i=0),this.selectedIndex=this._findNext(this.text.substr(0,i),e.keyCode==r.Key.Up?-1:1),this._setSelRange(i,this.text.length),e.preventDefault();break;case r.Key.PageUp:this._lbx._selectPrevPage(),this.selectAll(),e.preventDefault();break;case r.Key.PageDown:this._lbx._selectNextPage(),this.selectAll(),e.preventDefault()}}},e.prototype._updateInputSelection=function(t){var e=this._tbx;this._elRef==e&&this._setSelRange(t,e.value.length)},e.prototype._getSelStart=function(){var t=this._tbx;return t&&t.value?t.selectionStart:0},e.prototype._getSelEnd=function(){var t=this._tbx;return t&&t.value?t.selectionEnd:0},e.prototype._setSelRange=function(t,e){var i=this._tbx;this._elRef!=i||i.readOnly||(0,r.setSelectionRange)(i,t,e)},e}(w);(0,r._addCultureInfo)("MultiSelect",{itemsSelected:"{count:n0} items selected",selectAll:"Select All"});var M=function(t){function e(e,i){var n=t.call(this,e)||this;return n._maxHdrItems=2,n._readOnly=!1,n._hdrFmt=null,n.checkedItemsChanged=new r.Event,(0,r.addClass)(n.hostElement,"wj-multiselect"),n._tbx.readOnly=!0,n.checkedMemberPath=null,n.removeEventListener(n.dropDown,"click"),n._lbx.itemsChanged.addHandler((function(){n._updateHeader()})),n._lbx.checkedItemsChanged.addHandler((function(){n._updateHeader(),n.onCheckedItemsChanged()})),n.clickAction=m.Toggle,n.initialize(i),n}return s(e,t),Object.defineProperty(e.prototype,"showSelectAllCheckbox",{get:function(){return this._msLbx.showSelectAllCheckbox},set:function(t){this._msLbx.showSelectAllCheckbox=(0,r.asBoolean)(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showFilterInput",{get:function(){return this._msLbx.showFilterInput},set:function(t){this._msLbx.showFilterInput=(0,r.asBoolean)(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"delay",{get:function(){return this._msLbx.delay},set:function(t){this._msLbx.delay=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"caseSensitiveSearch",{get:function(){return this._msLbx.caseSensitiveSearch},set:function(t){this._msLbx.caseSensitiveSearch=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"filterInputPlaceholder",{get:function(){return this._msLbx.filterInputPlaceholder},set:function(t){this._msLbx.filterInputPlaceholder=(0,r.asString)(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"checkOnFilter",{get:function(){return this._msLbx.checkOnFilter},set:function(t){t!=this.checkOnFilter&&(this._msLbx.checkOnFilter=(0,r.asBoolean)(t),this.checkedItems=[])},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectAllLabel",{get:function(){return this._msLbx.selectAllLabel},set:function(t){this._msLbx.selectAllLabel=(0,r.asString)(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"checkedMemberPath",{get:function(){return this._msLbx.checkedMemberPath},set:function(t){this._msLbx.checkedMemberPath=(0,r.asString)(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxHeaderItems",{get:function(){return this._maxHdrItems},set:function(t){this._maxHdrItems!=t&&(this._maxHdrItems=(0,r.asNumber)(t),this._updateHeader())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"headerFormat",{get:function(){return this._hdrFmt},set:function(t){t!=this._hdrFmt&&(this._hdrFmt=(0,r.asString)(t),this._updateHeader())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"headerFormatter",{get:function(){return this._hdrFormatter},set:function(t){t!=this._hdrFormatter&&(this._hdrFormatter=(0,r.asFunction)(t),this._updateHeader())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"checkedItems",{get:function(){return this._msLbx.checkedItems},set:function(t){this._msLbx.checkedItems=null==t?[]:(0,r.asArray)(t),this._updateHeader()},enumerable:!0,configurable:!0}),e.prototype.onCheckedItemsChanged=function(t){this.checkedItemsChanged.raise(this,t)},e.prototype.dispose=function(){this._lbx.dispose(),t.prototype.dispose.call(this)},e.prototype.onIsDroppedDownChanged=function(e){var i=this;t.prototype.onIsDroppedDownChanged.call(this,e),setTimeout((function(){if(i.isDroppedDown&&i.containsFocus())if(i.showFilterInput&&!i.isTouching)i._msLbx._filter.focus();else{var t=i.listBox;if(t.selectedIndex<0){var e=0,n=t.checkedItems;n.length&&(e=t.collectionView.items.indexOf(n[0])),t.selectedIndex=Math.max(0,e)}t.showSelection(!0),t.focus()}}))},e.prototype._createDropDown=function(){var e=(0,r.createElement)("<div></div>",this._dropDown);this._msLbx=new g(e),this._lbx=this._msLbx.listBox,t.prototype._createDropDown.call(this)},Object.defineProperty(e.prototype,"isReadOnly",{get:function(){return this._readOnly},set:function(t){this._readOnly=(0,r.asBoolean)(t),(0,r.toggleClass)(this.hostElement,"wj-state-readonly",this.isReadOnly)},enumerable:!0,configurable:!0}),e.prototype.refresh=function(e){void 0===e&&(e=!0),t.prototype.refresh.call(this,e),this.hostElement&&this._updateHeader()},e.prototype._setText=function(t,e){},e.prototype._keydown=function(e){t.prototype._keydown.call(this,e),(0,r.hasClass)(this._tbx,"wj-grid-ime")||!e.defaultPrevented&&(0,r.hasItems)(this.collectionView)&&e.keyCode>32&&(this.isDroppedDown=!0)},e.prototype._hasItems=function(){var t=this.collectionView,e=t?t.sourceCollection:null;return(0,r.hasItems)(t)||e&&e.length&&this.showFilterInput},e.prototype._updateHeader=function(){var t="";if((0,r.isFunction)(this._hdrFormatter))t=this._hdrFormatter(this);else{var e=this.checkedItems;if(e.length>0)if(e.length<=this._maxHdrItems){if(this.headerPath){var i=new r.Binding(this.headerPath);e=e.map((function(t){return i.getValue(t)}))}else if(this.displayMemberPath){var n=new r.Binding(this.displayMemberPath);e=e.map((function(t){return n.getValue(t)}))}this.isContentHtml&&(e=e.map((function(t){return(0,r.toPlainText)(t)}))),this.trimText&&(e=e.map((function(t){return t?t.toString().trim():""}))),t=e.join(", ")}else t=(0,r.format)(this.headerFormat||r.culture.MultiSelect.itemsSelected,{count:e.length})}var o=this.inputElement;t!=o.value&&(o.value=t,this.onTextChanged()),this._updateState()},e._DEF_CHECKED_PATH="$checked",e}(T),I=function(t){function e(e,i){var n=t.call(this,e)||this;n._closing=!1,n._cmd=null,n._cmdPath=null,n._cmdParamPath=null,n._subPath=null,n._owner=null,n._isButton=!1,n._openOnHover=!1,n._closeOnLeave=!0,n._subMenu=null,n._hoverEnterBnd=n._hoverEnter.bind(n),n._hoverLeaveBnd=n._hoverLeave.bind(n),n._hoverOverBnd=n._hoverOver.bind(n),n.itemClicked=new r.Event;var o=n.hostElement,s=n._tbx,a=n._lbx,l=n.dropDown;return(0,r.addClass)(o,"wj-menu"),s.style.display="none",n._hdr=n._elRef=(0,r.createElement)('<div wj-part="header" class="wj-form-control"/>'),s.parentElement.insertBefore(n._hdr,n._tbx),o.tabIndex=n.isDisabled?-1:n._orgTabIndex,n.isRequired=!1,(0,r.setAttribute)(o,"role","menubar",!0),(0,r.setAttribute)(s,"role",null),(0,r.setAttribute)(s,"aria-autocomplete",null),(0,r.setAttribute)(s,"aria-owns",null),(0,r.setAttribute)(l,"role","menu"),a.itemRole="menuitem","SELECT"==n._orgTag&&(n.header=o.getAttribute("header"),n._lbx.itemsSource&&(n.commandParameterPath="cmdParam")),n.isContentHtml=!0,n.maxDropDownHeight=500,n.addEventListener(n._hdr,"click",(function(t){t.defaultPrevented||(n._clearHover(t),n._isButton?(n.isDroppedDown=!1,n._raiseCommand()):n.isDroppedDown=!n.isDroppedDown)})),a.lostFocus.addHandler((function(){n.containsFocus()||(n.isDroppedDown=!1)})),(0,r.addClass)(l,"wj-menu-items"),a.formatItem.addHandler(n._formatMenuItem.bind(n)),n.initialize(i),n}return s(e,t),Object.defineProperty(e.prototype,"header",{get:function(){return this._hdr.innerHTML},set:function(t){this._hdr.innerHTML=(0,r.asString)(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"command",{get:function(){return this._cmd},set:function(t){this._cmd=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"commandPath",{get:function(){return this._cmdPath},set:function(t){this._cmdPath=(0,r.asString)(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"commandParameterPath",{get:function(){return this._cmdParamPath},set:function(t){this._cmdParamPath=(0,r.asString)(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"subItemsPath",{get:function(){return this._subPath},set:function(t){t!=this._subPath&&(this._subPath=t,this.refresh(!0))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"openOnHover",{get:function(){return this._openOnHover},set:function(t){this._openOnHover=(0,r.asBoolean)(t),this._updateHoverEvents()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"closeOnLeave",{get:function(){return this._closeOnLeave},set:function(t){this._closeOnLeave=(0,r.asBoolean)(t),this._updateHoverEvents()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isButton",{get:function(){return this._isButton},set:function(t){this._isButton=(0,r.asBoolean)(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"owner",{get:function(){return this._owner},set:function(t){this._owner=(0,r.asType)(t,HTMLElement,!0),this._enableDisableItems()},enumerable:!0,configurable:!0}),e.prototype.show=function(t){if(!this.isDroppedDown&&(this.selectedIndex=-1,this.onIsDroppedDownChanging(new r.CancelEventArgs))){var e=this.dropDown,i=this.owner;!i&&t instanceof MouseEvent&&(i=t.target),i instanceof HTMLElement&&(e[r.Control._OWNR_KEY]=i),t instanceof MouseEvent&&this.openOnHover&&this.closeOnLeave&&(t=new r.Point(t.pageX-pageXOffset-2,t.pageY-pageYOffset-2)),(0,r.showPopup)(e,t,!1,this.isAnimated),this.onIsDroppedDownChanged(),e.focus()}},e.prototype.hide=function(){this.isDroppedDown&&this.onIsDroppedDownChanging(new r.CancelEventArgs)&&((0,r.hidePopup)(this.dropDown),this.onIsDroppedDownChanged())},e.prototype.onItemClicked=function(t){this.itemClicked.raise(this,t)},e.prototype.refresh=function(e){void 0===e&&(e=!0),t.prototype.refresh.call(this,e),this.hostElement&&this._enableDisableItems()},e.prototype.onIsDroppedDownChanged=function(e){if(t.prototype.onIsDroppedDownChanged.call(this,e),this.isDroppedDown)this._closing=!0,this._defaultItem=this.selectedItem,this.isRequired=!1,this.selectedIndex=-1,this._enableDisableItems(),this._closing=!1,this.dropDown.focus();else{this.selectedItem||(this.selectedItem=this._defaultItem);var i=this._subMenu;i&&(i.isDroppedDown=!1)}},e.prototype._updateHoverEvents=function(){var t=this.hostElement,e=this.dropDown,i=this.addEventListener.bind(this),n=this.removeEventListener.bind(this),r="mouseleave";n(t,"mouseenter",this._hoverEnterBnd),n(t,r,this._hoverLeaveBnd),n(e,"mouseover",this._hoverOverBnd),n(e,r,this._hoverLeaveBnd),this._openOnHover&&(i(t,"mouseenter",this._hoverEnterBnd),i(e,"mouseover",this._hoverOverBnd),this._closeOnLeave&&(i(t,r,this._hoverLeaveBnd),i(e,r,this._hoverLeaveBnd)))},e.prototype._getSubItems=function(t){var e=this.subItemsPath,i=t&&e?t[e]:null;return(0,r.isArray)(i)&&i.length?i:null},e.prototype._formatMenuItem=function(t,e){var i=e.item;this._getSubItems(e.data)?(0,r.addClass)(i,"wj-subitems"):"-"==i.innerHTML&&(i.innerHTML="",(0,r.addClass)(i,"wj-separator"))},e.prototype._keydown=function(i){if(!i.defaultPrevented){var n=this._getKeyCode(i);if(this.isDroppedDown)switch(n){case r.Key.Enter:case r.Key.Right:if(this._showSubMenu())return void i.preventDefault();break;case r.Key.Left:var o=r.Control.getControl(this.owner);if(o instanceof e){var s=o.dropDown,a=o.selectedIndex;return(a>-1?s.children[a]:s).focus(),void i.preventDefault()}}n==r.Key.Enter&&(this.isDroppedDown?this.selectedIndex>-1&&this._raiseCommand():(this.isDroppedDown=!0,i.preventDefault()))}t.prototype._keydown.call(this,i)},e.prototype._dropDownClick=function(e){if(!e.defaultPrevented&&e.target!=this.dropDown){if(this._clearHover(e),this._showSubMenu())return void e.preventDefault();this.selectedIndex>-1&&this._raiseCommand()}t.prototype._dropDownClick.call(this,e)},e.prototype._showSubMenu=function(){var t=this,i=this._getSubItems(this.selectedItem);if(!i)return null;var n=this.dropDown.children[this.selectedIndex].getBoundingClientRect(),o=new r.Point(n.right,n.top);if(0==n.height)return null;var s=this.rightToLeft||"rtl"==this.dropDown.getAttribute("dir");s&&(o.x=n.left);var a=this._subMenu;a&&(a.isDroppedDown=!1),a=new e(document.createElement("div"),{owner:this.hostElement,itemsSource:i,itemClicked:function(e,i){t.itemClicked.raise(e,i)},formatItem:function(e,i){t.formatItem.raise(e,i)}});var l=this.collectionView,h=a.collectionView;l&&l.filter&&h&&!h.filter&&(h.filter=l.filter),"displayMemberPath,selectedValuePath,isContentHtml,command,commandPath,commandParameterPath,maxDropDownWidth,maxDropDownHeight,dropDownCssClass,isAnimated,subItemsPath,openOnHover,closeOnLeave".split(",").forEach((function(e){a[e]=t[e]}));var c=a.dropDown;return(0,r.setAttribute)(c,"dir",s?"rtl":null),a.show(o),c[r.Control._OWNR_KEY]=this.dropDown,c.focus(),a},e.prototype._raiseCommand=function(t){var i=this.selectedItem,n=this._getSubItems(i),o=this._getCommand(i);if(o&&!n){var s=this._getCommandParm(i);if(!this._canExecuteCommand(o,s))return;this._executeCommand(o,s)}var a=this.headerPath;if(a){var l=new r.Binding(a).getValue(i);l=null==l?"":l.toString(),this.header=this.isContentHtml?l:(0,r.escapeHtml)(l)}if(this.onItemClicked(t),this.containsFocus()){for(var h=this;h&&h.owner;){var c=r.Control.getControl(h.owner);if(!(c instanceof e))break;h=c}var u=h.owner;if(!u&&h.dropDown&&(u=h.dropDown[r.Control._OWNR_KEY]),h.isDroppedDown=!1,h.focus(),!h.containsFocus()&&u instanceof HTMLElement&&u.offsetHeight)if(r.isIE){var d=document.documentElement,p=d.scrollLeft,f=d.scrollTop;u.focus(),d.scrollLeft=p,d.scrollTop=f}else u.focus()}},e.prototype._getCommand=function(t){return(t&&this._cmdPath?t[this._cmdPath]:null)||this._cmd},e.prototype._getCommandParm=function(t){var e=this._cmdParamPath;return t&&e?t[e]:t},e.prototype._executeCommand=function(t,e){t&&!(0,r.isFunction)(t)&&(t=t.executeCommand),(0,r.isFunction)(t)&&t(e)},e.prototype._canExecuteCommand=function(t,e){if(t){var i=t.canExecuteCommand;if((0,r.isFunction)(i))return i(e)}return!0},e.prototype._enableDisableItems=function(){if(this.collectionView&&(this._cmd||this._cmdPath))for(var t=this.collectionView.items,e=0;e<t.length;e++){var i=t[e],n=this._getCommand(i);if(n){var o=this._lbx.hostElement.children[e],s=this._getCommandParm(i);(0,r.toggleClass)(o,"wj-state-disabled",!this._canExecuteCommand(n,s))}}},e.prototype._clearHover=function(t){this._toHover&&clearTimeout(this._toHover),this._toHover=null,e._evtHover=t},e.prototype._isTargetDisabled=function(t){return(0,r.hasClass)(t.target,"wj-state-disabled")},e.prototype._hoverEnter=function(t){var e=this;this._clearHover(t),this._toHover=setTimeout((function(){e._toHover=null,e.isDroppedDown=!0}),r.Control._HOVER_DELAY)},e.prototype._hoverOver=function(t){var e=this;this._clearHover(t),this._toHover=setTimeout((function(){e._toHover=null;var i=e.listBox.indexOf(t.target);i>-1&&!(0,r.hasClass)(t.target,"wj-state-disabled")&&(e.selectedIndex=i,e._subMenu=e._showSubMenu())}),r.Control._HOVER_DELAY)},e.prototype._hoverLeave=function(t){var i=this;this._clearHover(t),this.isDroppedDown&&(this._toHover=setTimeout((function(){var n=(t=e._evtHover)?document.elementFromPoint(t.clientX,t.clientY):null,o=(0,r.closest)(n,".wj-listbox.wj-menu-items"),s=i._subMenu;o||(0,r.contains)(i.hostElement,n,!0)||(i.isDroppedDown=!1,s&&(s.isDroppedDown=!1))}),r.Control._LEAVE_DELAY))},e.prototype._setIsDisabled=function(e){t.prototype._setIsDisabled.call(this,e),this.hostElement.tabIndex=this.isDisabled?-1:this._orgTabIndex},e.prototype._setTabOrder=function(e){t.prototype._setTabOrder.call(this,e),this.hostElement.tabIndex=this.isDisabled?-1:this._orgTabIndex},e}(T),D=function(t){function e(e,i){var n=t.call(this,e)||this;if(n._format="t",n.valueChanged=new r.Event,(0,r.addClass)(n.hostElement,"wj-inputtime"),n.isEditable=!0,n._value=r.DateTime.newDate(),n._min=n._max=null,n._msk=new r._MaskProvider(n._tbx),(0,r.isIE9)()||(n._tbx.type="tel"),"INPUT"==n._orgTag){var o=n._tbx.getAttribute("value");o&&(n.value=r.Globalize.parseDate(o,"HH:mm:ss"))}return n.step=15,n.autoExpandSelection=!0,n.initialize(i),n}return s(e,t),Object.defineProperty(e.prototype,"inputElement",{get:function(){return this._tbx},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputType",{get:function(){return this._tbx.type},set:function(t){this._tbx.type=(0,r.asString)(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(t){(t=(0,r.asDate)(t,!this.isRequired))&&(t=this._clamp(t)),this._setText(t?r.Globalize.format(t,this.format):"",!0),this.selectedItem&&this.selectedItem.value&&(t=r.DateTime.fromDateTime(t,this.selectedItem.value)),t==this._value||r.DateTime.equals(t,this._value)||(this._value=t,this.onValueChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._tbx.value},set:function(t){t!=this.text&&(this._setText(t,!0),this._commitText())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"min",{get:function(){return this._min},set:function(t){this._min=(0,r.asDate)(t,!0),this.isDroppedDown=!1,this._updateItems()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"max",{get:function(){return this._max},set:function(t){this._max=(0,r.asDate)(t,!0),this.isDroppedDown=!1,this._updateItems()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"step",{get:function(){return this._step},set:function(t){t!=this.step&&(this._step=(0,r.asNumber)(t,!0),this.isDroppedDown=!1,this._updateItems())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"format",{get:function(){return this._format},set:function(t){t!=this.format&&(this._format=(0,r.asString)(t),this._tbx.value=r.Globalize.format(this.value,this.format),(0,r.hasItems)(this.collectionView)&&this._updateItems())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mask",{get:function(){return this._msk.mask},set:function(t){this._msk.mask=(0,r.asString)(t)},enumerable:!0,configurable:!0}),e.prototype.onValueChanged=function(t){this.valueChanged.raise(this,t)},e.prototype.onItemsSourceChanged=function(e){t.prototype.onItemsSourceChanged.call(this,e),this._hasCustomItems=null!=this.itemsSource},e.prototype.refresh=function(e){void 0===e&&(e=!0),t.prototype.refresh.call(this,e),this.hostElement&&(this._msk.refresh(),this._tbx.value=r.Globalize.format(this.value,this.format),this._updateItems())},e.prototype.onSelectedIndexChanged=function(e){if(this.selectedIndex>-1&&!this._settingText){var i=this.value?this.value:r.DateTime.newDate(),n=null!=this.selectedItem.value?this.selectedItem.value:r.Globalize.parseDate(this.text,this.format,this.value);this.value=r.DateTime.fromDateTime(i,n)}t.prototype.onSelectedIndexChanged.call(this,e)},e.prototype._clamp=function(t){return null!=this._min&&this._getTime(t)<this._getTime(this._min)&&(t=r.DateTime.fromDateTime(t,this._min)),null!=this._max&&this._getTime(t)>this._getTime(this._max)&&(t=r.DateTime.fromDateTime(t,this._max)),t},e.prototype._wheel=function(e){if(!e.defaultPrevented&&!this.isDroppedDown&&!this.isReadOnly&&this.containsFocus()&&this.selectedIndex<0&&this.value&&(0,r.isNumber)(this.step)&&this.step>0){var i=r.DateTime.addMinutes(this.value,this.step*(0,r.clamp)(e.deltaY,-1,1));this.value=this._clamp(i),this.selectAll(),e.preventDefault()}t.prototype._wheel.call(this,e)},e.prototype._updateInputSelection=function(e){if(this._delKey)t.prototype._updateInputSelection.call(this,e);else{for(var i=this._tbx.value;e<i.length&&!i[e].match(/[a-z0-9]/i);)e++;(0,r.setSelectionRange)(this._tbx,e,this._tbx.value.length)}},e.prototype._updateItems=function(){if(!this._hasCustomItems){var t=[],e=new Date(2020,0),i=new Date(2020,0,1,23,59,59),n=this.step;if(this.min&&e.setHours(this.min.getHours(),this.min.getMinutes(),this.min.getSeconds()),this.max&&i.setHours(this.max.getHours(),this.max.getMinutes(),this.max.getSeconds()),(0,r.isNumber)(n)&&n>=1)for(var o=e;o<=i;o=r.DateTime.addMinutes(o,n))t.push({value:o,text:r.Globalize.format(o,this.format)});var s=this.value;this._settingText=!0,this.displayMemberPath="text",this.selectedValuePath="text",this.itemsSource=t,this._hasCustomItems=!1,this._settingText=!1,!s&&this.isRequired||(this.value=s)}},e.prototype._getTime=function(t){return 3600*t.getHours()+60*t.getMinutes()+t.getSeconds()},e.prototype._keydown=function(e){if(t.prototype._keydown.call(this,e),!e.defaultPrevented)switch(e.keyCode){case r.Key.Enter:this.isDroppedDown||(this._commitText(),this.selectAll());break;case r.Key.Escape:this.text=r.Globalize.format(this.value,this.format),this.selectAll()}},e.prototype._commitText=function(){if(this.text||this.isRequired){var t=this.value?r.Globalize.format(this.value,this.format):"";if(this.text!=t){var e=this.selectedItem&&this.selectedItem.value?this.selectedItem.value:r.Globalize.parseDate(this.text,this.format,this.value);e?(r.DateTime.sameTime(e,this._clamp(e))||this.onInvalidInput(new r.CancelEventArgs))&&(this.value=r.DateTime.fromDateTime(this.value,e)):this.onInvalidInput(new r.CancelEventArgs)&&(this.text=t)}}else this.value=null},e}(T);(0,r._addCultureInfo)("InputDateTime",{ariaLabels:{tglDate:"Toggle Calendar",tglTime:"Toggle Time List"}});var R=function(t){function e(e,i){var n=t.call(this,e)||this;(0,r.addClass)(n.hostElement,"wj-inputdatetime");var o=r.culture.InputDateTime.ariaLabels;(0,r.setAriaLabel)(n._btn,o.tglDate),(0,r.setAriaLabel)(n._btnTm,o.tglTime),n.value=new Date,n.format="g",n._inputTime=new D(document.createElement("div"),{valueChanged:function(t){var e=n.rangeEnd;n.value=r.DateTime.fromDateTime(n.value,t.value),n.calendar._rngMode()&&e&&(n.rangeEnd=r.DateTime.fromDateTime(e,t.value))},isDroppedDownChanged:function(t){t.listBox.containsFocus()&&n.inputElement.focus(),n._selectAll()}});var s=n.addEventListener.bind(n);n._btnTm=n.hostElement.querySelector('[wj-part="btn-tm"]'),s(n._btnTm,"mousedown",(function(t){n._btnclick(t)})),n._ddDate=n._dropDown;var a=n._ddTime=n._inputTime.dropDown;return s(a,"keydown",n._keydown.bind(n),!0),s(a,"blur",(function(){n._updateFocusState()}),!0),s(a,"click",(function(t){t.defaultPrevented||t.target!=a&&n.hostElement.focus()}),!0),n.initialize(i),n.text=n._getText(),n}return s(e,t),Object.defineProperty(e.prototype,"timeMin",{get:function(){return this._inputTime.min},set:function(t){this._inputTime.min=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"timeMax",{get:function(){return this._inputTime.max},set:function(t){this._inputTime.max=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"timeFormat",{get:function(){return this._inputTime.format},set:function(t){this._inputTime.format=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"timeStep",{get:function(){return this._inputTime.step},set:function(t){this._inputTime.step=t,this._btnTm.style.display=(0,r.isNumber)(t)&&t>0?"":"none"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputTime",{get:function(){return this._inputTime},enumerable:!0,configurable:!0}),e.prototype._fromDateTime=function(t){return t},e.prototype._btnclick=function(e){var i=(0,r.closest)(e.target,"button")==this._btn?this._ddDate:this._ddTime;this._setDropdown(i),t.prototype._btnclick.call(this,e)},e.prototype.dispose=function(){this._setDropdown(this._ddDate),t.prototype.dispose.call(this),this._inputTime.dispose()},e.prototype.refresh=function(e){void 0===e&&(e=!0),this._inputTime.refresh(),t.prototype.refresh.call(this,e)},e.prototype._updateBtn=function(){t.prototype._updateBtn.call(this),this._btnTm&&(this._btnTm.tabIndex=this._btn.tabIndex,this._btnTm.parentElement.style.display=this._btn.style.display)},e.prototype._setDropdown=function(t){if(this._dropDown==t)return!1;this.isDroppedDown&&(this.isDroppedDown=!1);var e=this.dropDownCssClass;return this.dropDownCssClass="",this._dropDown=t,this.dropDownCssClass=e,!0},e.prototype._updateDropDown=function(){var e=this._inputTime;this._dropDown==e.dropDown?(this._commitText(),t.prototype._updateDropDown.call(this),e.isRequired=this.isRequired&&null!=this.value,e.value=this.value,this.isDroppedDown&&e.listBox.showSelection()):t.prototype._updateDropDown.call(this)},e.controlTemplate='<div class="wj-template"><div class="wj-input"><div class="wj-input-group wj-input-btn-visible"><input wj-part="input" type="text" class="wj-form-control"/><span class="wj-input-group-btn"><button wj-part="btn" class="wj-btn wj-btn-default" tabindex="-1"><span class="wj-glyph-calendar"></span></button><button wj-part="btn-tm" class="wj-btn wj-btn-default" tabindex="-1"><span class="wj-glyph-clock"></span></button></span></div></div><div wj-part="dropdown" class="wj-content wj-dropdown-panel"></div></div>',e}(S),A=function(t){function e(e,i){var n=t.call(this,e)||this;return n._cssMatch="wj-state-match",n._minLength=2,n._maxItems=6,n._itemCount=0,n._beginsWith=!1,n._delay=r.Control._SEARCH_DELAY,n._query="",n._inCallback=!1,n._srchProps=[],(0,r.addClass)(n.hostElement,"wj-autocomplete"),n._bsCollapse=!1,n.isEditable=!0,n.isRequired=!1,n.listBox.formatItem.addHandler(n._formatListItem,n),n._itemsSourceFnCallbackBnd=n._itemSourceFunctionCallback.bind(n),n.initialize(i),n}return s(e,t),Object.defineProperty(e.prototype,"minLength",{get:function(){return this._minLength},set:function(t){this._minLength=(0,r.asNumber)(t,!1,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"beginsWithSearch",{get:function(){return this._beginsWith},set:function(t){this._beginsWith=(0,r.asBoolean)(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxItems",{get:function(){return this._maxItems},set:function(t){this._maxItems=(0,r.asNumber)(t,!1,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"delay",{get:function(){return this._delay},set:function(t){this._delay=(0,r.asNumber)(t,!1,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"searchMemberPath",{get:function(){return this._srchProp},set:function(t){this._srchProp=(0,r.asString)(t),this._srchProps=t?t.trim().split(/\s*,\s*/):[]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemsSourceFunction",{get:function(){return this._itemsSourceFn},set:function(t){this._itemsSourceFn=(0,r.asFunction)(t),(0,r.isFunction)(this._itemsSourceFn)&&this.itemsSourceFunction(this.text,this.maxItems,this._itemsSourceFnCallbackBnd)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cssMatch",{get:function(){return this._cssMatch},set:function(t){this._cssMatch=(0,r.asString)(t)},enumerable:!0,configurable:!0}),e.prototype._keydown=function(e){if(!e.defaultPrevented&&this.isDroppedDown)switch(e.keyCode){case r.Key.Up:case r.Key.Down:this.selectAll()}t.prototype._keydown.call(this,e)},e.prototype._setText=function(t){var e=this;if(!(this._inCallback||this._composing||this._settingText)){if(this.selectedIndex>-1&&this.getDisplayText()!=t&&(this._settingText=!0,this.selectedIndex=-1,this._settingText=!1),t!=this._oldText){var i=this._tbx;i.value!=t&&(i.value=t),this._oldText=t,this.onTextChanged();var n=this.collectionView;if(!t&&n){(this._query||this.selectedIndex<0)&&(this.isDroppedDown=!1),this._query=this._rxHighlight=null,n.filter=null;var o=this.itemsSourceFunction;return void((0,r.isFunction)(o)&&(this.isDroppedDown=!1,o(this._query,this.maxItems,this._itemsSourceFnCallbackBnd)))}}this._toSearch&&clearTimeout(this._toSearch),t!=this.getDisplayText()&&(this._toSearch=setTimeout((function(){e._toSearch=null;var t=e.text.trim();if(t.length>=e._minLength&&t!=e._query){e._query=t,t=(0,r.escapeRegExp)(t);var i=(0,r.escapeHtml)(t),n=e.caseSensitiveSearch?"":"i";e._beginsWith||(n+="g"),e._rxSrch=e._beginsWith?new RegExp("^"+t+".*",n):new RegExp("(?=.*"+t.replace(/ /g,")(?=.*")+")",n),e._rxHighlight=new RegExp("("+i.replace(/\s+/g,"|")+")",n);var o=e.itemsSourceFunction;(0,r.isFunction)(o)?o(e._query,e.maxItems,e._itemsSourceFnCallbackBnd):e._updateItems()}}),this._delay))}},e.prototype._itemSourceFunctionCallback=function(t){this._inCallback=!0;var e=(0,r.asCollectionView)(t||[]);if(e.moveCurrentToPosition(-1),this.itemsSource=e,this._inCallback=!1,this.containsFocus()){var i=this._tbx,n=i.selectionStart,o=i.selectionEnd,s=this.collectionView;this.isDroppedDown=null!=s&&s.items.length>0,(0,r.setSelectionRange)(i,n,o),this.refresh()}},e.prototype.onIsDroppedDownChanged=function(e){if(t.prototype.onIsDroppedDownChanged.call(this,e),this.containsFocus()&&!this.isTouching){var i=this.collectionView;if(this.selectedIndex<0&&i){var n=i.items,o=this.text;1==n.length&&n[0]==o?this.selectedIndex=0:(0,r.setSelectionRange)(this._tbx,o.length)}}this._query=""},e.prototype._updateItems=function(){var t=this.collectionView;if(t){this._inCallback=!0,t.beginUpdate(),this._itemCount=0,t.filter=this._filter.bind(this),t.moveCurrentToPosition(-1),t.endUpdate(),this._inCallback=!1;var e=t.items.length,i=this._tbx,n=i.selectionStart,o=i.selectionEnd;if(this.isDroppedDown=e>0&&this.containsFocus(),e||this.isEditable||(this.selectedIndex=-1),1==e&&this.selectedIndex<0){var s=this._getItemText(t.items[0],!1),a=i.value;this.caseSensitiveSearch||(s=s.toLowerCase(),a=a.toLowerCase()),s==a&&(this.selectedIndex=0)}this.isDroppedDown&&(0,r.setSelectionRange)(i,n,o),this.refresh()}},e.prototype._filter=function(t){if(this._itemCount>=this._maxItems)return!1;var e=[this._getItemText(t,!1)];this._srchProps&&this._srchProps.forEach((function(i){var n=t[i];null!=n&&e.push(n)})),this.isContentHtml&&(e=e.map((function(t){return t.replace(/(<[^>]*>|&[^;]*;)/g,"")})));for(var i=0;i<e.length;i++)if(this._rxSrch.test(e[i]))return this._itemCount++,!0;return!1},e.prototype._getItemText=function(t,e){var i=t?t.toString():"",n=e&&this.headerPath?this._pathHdr:this._lbx._pathDisplay;return n&&(i=null!=(i=n.getValue(t))?i.toString():""),i},e.prototype._formatListItem=function(t,e){var i=this;this._cssMatch&&this._rxHighlight&&(e.item.innerHTML=e.item.innerHTML.replace(this._rxHighlight,(function(t,e,n,r){return i._enclosed(r,n,"<",">")||i._enclosed(r,n,"&",";")?t:'<span class="'+i._cssMatch+'">'+t+"</span>"})))},e.prototype._enclosed=function(t,e,i,n){for(var r=e;r>=0&&t[r]!=n;r--)if(t[r]==i)for(var o=e;o<t.length&&t[o]!=i;o++)if(t[o]==n)return!0;return!1},e}(T),k=function(t){function e(e,i){var n=t.call(this,e)||this;return n._selItems=[],n._maxSelItems=null,n._lastInputValue="",n._selPath=new r.Binding(null),n._notAddItm=!1,n.selectedItemsChanged=new r.Event,(0,r.addClass)(n.hostElement,"wj-multi-autocomplete"),n._wjTpl=n.hostElement.querySelector(".wj-template"),n._wjInput=n.hostElement.querySelector(".wj-input"),n.showDropDownButton=!1,n.initialize(i),n.addEventListener(n.hostElement,"keyup",n._keyup.bind(n),!0),n.addEventListener(window,"resize",n._adjustInputWidth.bind(n)),n.addEventListener(n._tbx,"focus",(function(){n._itemOff()})),n._addHelperInput(),n._initSeltems(),n.listBox.itemsChanged.addHandler((function(){return n.selectedIndex=-1})),n._refreshHeader(),n._updateTabIndex(),n}return s(e,t),Object.defineProperty(e.prototype,"showDropDownButton",{set:function(t){this._showBtn=!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxSelectedItems",{get:function(){return this._maxSelItems},set:function(t){this._maxSelItems!=t&&(this._maxSelItems=(0,r.asNumber)(t,!0),this._updateMaxItems(),this._refreshHeader(),this._clearSelIndex())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedMemberPath",{get:function(){return this._selPath.path},set:function(t){(t=(0,r.asString)(t))!==this.selectedMemberPath&&(this._selPath.path=t,this._initSeltems(),this._refreshHeader(),this.onSelectedItemsChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedItems",{get:function(){return this._selItems},set:function(t){if(this._selItems=(0,r.asArray)(t),this.selectedMemberPath&&""!==this.selectedMemberPath&&this._selItems)for(var e=0;e<this._selItems.length;e++){var i=this._selItems[e];this._setSelItem(i,!1)}this._updateMaxItems(),this.onSelectedItemsChanged(),this._refreshHeader(),this._clearSelIndex()},enumerable:!0,configurable:!0}),e.prototype.onSelectedItemsChanged=function(t){this.selectedItemsChanged.raise(this,t)},e.prototype.onIsDroppedDownChanged=function(e){!this.isDroppedDown&&this.selectedIndex>-1&&!this._notAddItm&&this._addItem(!0),this._notAddItm=!1,t.prototype.onIsDroppedDownChanged.call(this,e)},e.prototype.refresh=function(e){void 0===e&&(e=!0),t.prototype.refresh.call(this,e),this.hostElement&&(this._initSeltems(),this.isDroppedDown||this._refreshHeader())},e.prototype._keydown=function(e){if(!this.isReadOnly){if(!e.defaultPrevented)switch(e.keyCode){case r.Key.Back:this._lastInputValue=this._tbx.value;break;case r.Key.Enter:this._itemOff(),this._addItem(!0),(0,r.isIE)()&&(0,r.setSelectionRange)(this._tbx,this._tbx.textContent.length,this._tbx.textContent.length);break;case r.Key.Tab:this.isDroppedDown?(this._addItem(!1),this._tbx.value="",this._lbx.selectedIndex=-1,e.preventDefault()):this._updateFocus();break;case r.Key.Space:if(""!==this._tbx.value)return;this.isDroppedDown||this._tbx.disabled||(this.isDroppedDown=!0,this._clearSelIndex());break;case r.Key.Escape:this.isDroppedDown&&(this._notAddItm=!0);break;case r.Key.Left:this._itemOn(!this.rightToLeft);break;case r.Key.Right:this._itemOn(!!this.rightToLeft);break;case r.Key.Up:case r.Key.Down:var i=(0,r.getActiveElement)();if(e.altKey){if(this._tbx==i)return this.isDroppedDown=!this.isDroppedDown,this.isDroppedDown||this._tbx.focus(),void e.preventDefault()}else if(this._tbx!==i)return;default:if(e.keyCode===r.Key.Back||e.keyCode===r.Key.Delete)return;this._itemOff(),null!=this._maxSelItems&&this._selItems.length>=this._maxSelItems&&e.preventDefault()}this._tbx.disabled||t.prototype._keydown.call(this,e)}},e.prototype._updateState=function(){t.prototype._updateState.call(this),this._wjTpl&&((0,r.hasClass)(this.hostElement,"wj-state-focused")||this._itemOff())},e.prototype._keyup=function(t){if(!this.isReadOnly&&!t.defaultPrevented)switch(t.keyCode){case r.Key.Back:0===this._tbx.value.length&&0===this._lastInputValue.length&&this._delItem(!1);break;case r.Key.Delete:this._delItem(!0)}},e.prototype._addHelperInput=function(){var t=document.createElement("input");t.type="text",t.tabIndex=-1,t.className="wj-token-helper",t.readOnly=!0,this._wjTpl.insertBefore(t,this._wjInput),this._helperInput=t},e.prototype._refreshHeader=function(){for(var t=this.hostElement.querySelectorAll(".wj-token"),e=0;e<t.length;e++)this._wjTpl.removeChild(t[e]);var i=this.selectedItems;if(i&&0!==i.length){for(e=0;e<i.length;e++)this._insertToken(i[e]);this._wjInput.style.cssFloat=this.rightToLeft?"right":"left",this._adjustInputWidth()}else this._wjInput.style.cssFloat=this.rightToLeft?"right":"left",this._adjustInputWidth()},e.prototype._insertToken=function(t){var e=this._getItemText(t,!0);this.isContentHtml||(e=(0,r.escapeHtml)(e)),this._wjTpl.insertBefore(this._createItem(e),this._wjInput)},e.prototype._updateMaxItems=function(){null!=this._maxSelItems&&this._selItems&&this._selItems.length>this._maxSelItems&&(this._selItems=this._selItems.slice(0,this._maxSelItems))},e.prototype._updateFocus=function(){var t=this,i=this._wjTpl.querySelector("."+e._clsActive);i?((0,r.removeClass)(i,e._clsActive),setTimeout((function(){t._tbx.focus()}))):this._clearSelIndex()},e.prototype._addItem=function(t){this.selectedItems.indexOf(this.selectedItem)>-1?this._clearSelIndex():this.selectedIndex>-1&&(this._updateSelItems(this.selectedItem,!0),this._refreshHeader(),t&&this._clearSelIndex(),this._disableInput(!0))},e.prototype._delItem=function(t){var i,n,r=this._wjTpl.querySelector("."+e._clsActive),o=!1;t&&!r||(r?(n=this._getItemIndex(r))>-1&&(i=this._selItems[n],o=!0):this._selItems.length>0&&(i=this._selItems[this._selItems.length-1],o=!0),o&&(this._updateSelItems(i,!1),this._refreshHeader(),this._clearSelIndex(),this._disableInput(!1)),this._tbx.focus())},e.prototype._updateSelItems=function(t,e){if(e){if(this._selItems&&0!==this._selItems.length||(this._selItems=[]),null!=this._maxSelItems&&this._selItems.length>=this._maxSelItems)return;this._selItems.push(t)}else{var i=this._selItems.indexOf(t);this._selItems.splice(i,1)}this._hasSelectedMemeberPath()&&this._setSelItem(t,e),this.onSelectedItemsChanged()},e.prototype._createItem=function(t){var i=this,n=document.createElement("div"),o=document.createElement("span"),s=document.createElement("a");return n.appendChild(o),n.appendChild(s),n.className="wj-token",o.className="wj-token-label",o.innerHTML=t,s.className="wj-token-close",s.href="#",s.tabIndex=-1,s.text="",n.style.cssFloat=this.rightToLeft?"right":"left",this.addEventListener(n,"click",(function(t){i._helperInput.focus();var o=i._wjTpl.querySelector("."+e._clsActive);o&&(0,r.removeClass)(o,e._clsActive),(0,r.addClass)(n,e._clsActive),t.stopPropagation(),t.preventDefault()})),this.addEventListener(s,"click",(function(t){if(!i.isReadOnly){var e=i._getItemIndex(n);if(e>-1){var r=i._selItems[e];i._updateSelItems(r,!1)}i._wjTpl.removeChild(n),i._adjustInputWidth(),i._disableInput(!1),i._tbx.focus(),t.stopPropagation(),t.preventDefault()}})),n},e.prototype._itemOn=function(t){var i,n,o,s=(0,r.getActiveElement)();if((this._tbx!=s||0===this._tbx.value.length)&&0!==(i=this._wjTpl.querySelectorAll(".wj-token")).length)if(n=this._wjTpl.querySelector("."+e._clsActive),o=this._getItemIndex(n),t){if(0===o)return;-1===o?((0,r.addClass)(i[i.length-1],e._clsActive),this._helperInput.focus()):((0,r.removeClass)(n,e._clsActive),(0,r.addClass)(i[o-1],e._clsActive),this._helperInput.focus())}else if(!t){if(-1===o)return;o!==i.length-1?((0,r.removeClass)(n,e._clsActive),(0,r.addClass)(i[o+1],e._clsActive),this._helperInput.focus()):((0,r.removeClass)(n,e._clsActive),this._tbx.focus())}},e.prototype._itemOff=function(){var t=this._wjTpl.querySelector("."+e._clsActive);t&&(0,r.removeClass)(t,e._clsActive)},e.prototype._initSeltems=function(){if(this.selectedMemberPath){this._selItems.splice(0,this._selItems.length);var t=this.collectionView;if(t)for(var e=0;e<t.sourceCollection.length;e++)this._getSelItem(e)&&this._selItems.push(t.sourceCollection[e])}},e.prototype._getSelItem=function(t){var e=this.collectionView,i=e?e.sourceCollection[t]:null;return!(!(0,r.isObject)(i)||!this.selectedMemberPath)&&this._selPath.getValue(i)},e.prototype._setSelItem=function(t,e){this.itemsSource,(0,r.isObject)(t)&&this._selPath.getValue(t)!=e&&this._selPath.setValue(t,e)},e.prototype._clearSelIndex=function(){this.selectedIndex=-1},e.prototype._hasSelectedMemeberPath=function(){return this.selectedMemberPath&&""!==this.selectedMemberPath},e.prototype._disableInput=function(t){null!=this._maxSelItems&&(this._selItems.length<this._maxSelItems?(this._tbx.disabled=!1,this._tbx.focus()):(this._tbx.disabled=!0,this.hostElement.focus()))},e.prototype._adjustInputWidth=function(){this._tbx.style.width="60px";var t,e=(0,r.getElementRect)(this.hostElement),i=(0,r.getElementRect)(this._tbx),n=getComputedStyle(this._tbx),o=parseInt(n.paddingLeft,10),s=parseInt(n.paddingRight,10);t=this.rightToLeft?i.left+i.width-e.left-o-s-8:e.left+e.width-i.left-o-s-8,this._tbx.style.width=t+"px"},e.prototype._getItemIndex=function(t){for(var e=this.hostElement.querySelectorAll(".wj-token"),i=0;i<e.length;i++)if(t===e[i])return i;return-1},e.prototype._setIsDisabled=function(e){t.prototype._setIsDisabled.call(this,e),this._updateTabIndex()},e.prototype._setTabOrder=function(t){this._orgTabIndex=t,this._updateTabIndex()},e.prototype._updateTabIndex=function(){var t=this.hostElement;this._tbx.tabIndex=this.isDisabled?-1:this._orgTabIndex,t.tabIndex=-1},e._clsActive="wj-token-active",e}(A);(0,r._registerModule)("wijmo.input",o)},664:(t,e,i)=>{i.r(e),i.d(e,{Aggregate:()=>Re,ArrayBase:()=>Le,Binding:()=>F,CancelEventArgs:()=>G,Clipboard:()=>$e,CollectionView:()=>Be,CollectionViewGroup:()=>ze,Color:()=>Pe,Control:()=>We,ControlBase:()=>Ke,DataType:()=>U,DateTime:()=>be,Event:()=>z,EventArgs:()=>V,Globalize:()=>Me,GroupDescription:()=>Z,Key:()=>W,NotifyCollectionChangedAction:()=>N,NotifyCollectionChangedEventArgs:()=>X,ObservableArray:()=>Fe,PageChangingEventArgs:()=>J,Point:()=>ge,PopupPosition:()=>Je,PrintDocument:()=>Ze,PropertyChangedEventArgs:()=>Y,PropertyGroupDescription:()=>$,Rect:()=>ye,RequestErrorEventArgs:()=>K,Size:()=>me,SortDescription:()=>q,SortNulls:()=>He,Tooltip:()=>oi,TooltipEventArgs:()=>si,_ClickRepeater:()=>Qe,_Map:()=>Se,_MaskElement:()=>ke,_MaskProvider:()=>Ae,_addCultureInfo:()=>De,_deprecated:()=>Tt,_focusSrv:()=>L,_getActiveElement:()=>ie,_getCalculatedArray:()=>k,_getModule:()=>xe,_getTargetObject:()=>O,_registerModule:()=>Ce,_startDrag:()=>T,_updateCulture:()=>Ie,_updateWme:()=>ci,addClass:()=>Wt,animate:()=>_e,asArray:()=>Ot,asBoolean:()=>Rt,asCollectionView:()=>Nt,asDate:()=>At,asEnum:()=>jt,asFunction:()=>kt,asInt:()=>Dt,asNumber:()=>It,asString:()=>Mt,asType:()=>Lt,assert:()=>Pt,changeType:()=>yt,clamp:()=>St,closest:()=>ce,closestClass:()=>ue,contains:()=>he,controlBaseClass:()=>Ve,copy:()=>Et,createElement:()=>ae,culture:()=>Te,disableAutoComplete:()=>Qt,enable:()=>de,escapeHtml:()=>Bt,escapeRegExp:()=>Gt,evalTemplate:()=>Ct,format:()=>vt,getActiveElement:()=>ee,getAggregate:()=>Oe,getElement:()=>se,getElementRect:()=>pe,getEventOptions:()=>S,getType:()=>gt,getTypes:()=>mt,getUniqueId:()=>ft,getVersion:()=>Q,glbz:()=>wt,hasClass:()=>Kt,hasItems:()=>Ht,hidePopup:()=>ei,httpRequest:()=>ve,isArray:()=>ut,isBoolean:()=>at,isDate:()=>ct,isEdge:()=>g,isEmpty:()=>pt,isFirefox:()=>d,isFunction:()=>lt,isIE:()=>y,isIE10:()=>C,isIE9:()=>v,isInt:()=>st,isMobile:()=>l,isNullOrWhiteSpace:()=>rt,isNumber:()=>ot,isObject:()=>dt,isPrimitive:()=>it,isSafari:()=>f,isString:()=>nt,isUndefined:()=>ht,isiOS:()=>c,mouseToPage:()=>_t,moveFocus:()=>ne,removeChild:()=>te,removeClass:()=>Ut,saveFile:()=>oe,setAriaLabel:()=>Zt,setAttribute:()=>qt,setChecked:()=>Jt,setCss:()=>fe,setLicenseKey:()=>tt,setSelectionRange:()=>$t,setText:()=>le,showPopup:()=>ti,supportsFocusOptions:()=>P,toFixed:()=>bt,toHeaderCase:()=>Ft,toPlainText:()=>Yt,toggleClass:()=>Xt,tryCast:()=>et});var n,r=i(664),o=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s="undefined"!=typeof navigator?navigator.userAgent:"",a=null!=s.match(/iPad|iPhone|iPod|Android|webOS|BlackBerry|Windows Phone/i);function l(){return a}var h=null!=s.match(/iPad|iPhone|iPod/i);function c(){return h}var u=null!=s.match(/Firefox\//);function d(){return u}var p=null!=s.match(/^((?!Chrome|Android).)*safari/i);function f(){return p}var _=null!=s.match(/Edge\//);function g(){return _}var m=null!=s.match(/MSIE |Trident\/|Edge\//);function y(){return m}var b=!1;function v(){return b}var w=!1;function C(){return w}var x=!1;function S(t,e){return x?{capture:t,passive:e}:t}"undefined"!=typeof document&&document.addEventListener("test",(function(t){}),{get passive(){return x=!0,!0}});var E=!1;function P(){return E}function T(t,e){t.effectAllowed=e,d()&&t.setData("text","")}if("undefined"!=typeof document&&document.createElement("div").focus({get preventScroll(){return E=!0,!0}}),"undefined"!=typeof document&&document.doctype&&(navigator.appVersion.indexOf("MSIE 10")>-1&&(w=!0),navigator.appVersion.indexOf("MSIE 9")>-1&&(b=!0,document.addEventListener("mousemove",(function(t){if(1==t.which){var e=ce(t.target,".wj-control");if(e&&!e.style.cursor)for(var i=t.target;i;i=i.parentElement)if(i.attributes&&i.attributes.draggable)return i.dragDrop(),!1}})))),"undefined"!=typeof window){var M="requestAnimationFrame";if(!window[M]){var I=0;window[M]=function(t){var e=Date.now(),i=16-(e-I),n=i>0?i:0;return I=e+n,setTimeout((function(){t(I)}),n)},window.cancelAnimationFrame=clearTimeout}if(!window.atob){var D="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",R=new RegExp("[^"+D+"]");window.atob=function(t){var e,i,n,r,o=[],s=0,a=t.length;if(R.test(t)||/=/.test(t)&&(/=[^=]/.test(t)||/={3}/.test(t)))throw new Error("Invalid base64 data");for(a%4>0&&(a=(t+=Array(4-a%4+1).join("=")).length);s<a;){for(i=[],r=s;s<r+4;)i.push(D.indexOf(t.charAt(s++)));for(n=[((e=(i[0]<<18)+(i[1]<<12)+((63&i[2])<<6)+(63&i[3]))&255<<16)>>16,64===i[2]?-1:(65280&e)>>8,64===i[3]?-1:255&e],r=0;r<3;++r)(n[r]>=0||0===r)&&o.push(String.fromCharCode(n[r]))}return o.join("")},window.btoa=function(t){for(var e,i,n=[],r=0,o=t.length;r<o;)e=((i=[t.charCodeAt(r++),t.charCodeAt(r++),t.charCodeAt(r++)])[0]<<16)+((i[1]||0)<<8)+(i[2]||0),n.push(D.charAt((e&63<<18)>>18),D.charAt((258048&e)>>12),D.charAt(isNaN(i[1])?64:(4032&e)>>6),D.charAt(isNaN(i[2])?64:63&e));return n.join("")}}}var A="undefined"!=typeof window&&window.Symbol?Symbol("_getProxyTarget"):"\t_get\tProxy\tTarget\t";function k(t,e,i){var n=new WeakMap;if(!i){var r={};if(t.length){var o=t[0];for(var s in o){var a=typeof o[s];r[s]="string"==a?"":"number"==a?0:null}i=r}}return new Proxy(t,{get:function(t,r){if(r===A)return t;if("string"==typeof r||"number"==typeof r){if("indexOf"==r)return function(e,i){var n=t.indexOf(e,i);return n<0&&e&&(e=e[A])&&(n=t.indexOf(e,i)),n};var o=parseInt(r);if(!isNaN(o)){var s=t[o];if(s&&!s[A]){var a=n.get(s);a||(a=function(t,e,i){if(!t[A]){if(y())for(var n in e)t[n]=null;var r={get:function(t,n,r){if(n===A)return t;if("constructor"===n)return function(){return Object.assign({},i||{})};var o=e[n];if(o)switch(typeof o){case"function":return o(r);case"string":return function(t,e){var i=[e];return(new(Function.bind.apply(Function,[void 0].concat(["$"],["return "+t])))).apply(void 0,i)}(o,r)}return t[n]}};y()||(r.ownKeys=function(t){return Object.keys(t).concat(Object.keys(e))},r.getOwnPropertyDescriptor=function(t,i){return i in e?{enumerable:!0,configurable:!0,writable:!1}:Reflect.getOwnPropertyDescriptor(t,i)}),t=new Proxy(t,r)}return t}(s,e,i),n.set(s,a)),s=a}return s}}return Reflect.get(t,r)}})}function O(t){return(t?t[A]:null)||t}var L,j=function(){function t(){this._hasDoc="undefined"!=typeof Document,this._ae=this._nativeAe();var t=window,e=this._onBlur.bind(this),i=this._onFocus.bind(this);t.addEventListener("focusout",e,!0),t.addEventListener("focusin",i,!0),y()||(t.addEventListener("blur",e,!0),t.addEventListener("focus",i,!0))}return Object.defineProperty(t.prototype,"activeElement",{get:function(){var e=this._ae,i=this._nativeAe();return e===t._noAe?e=this._ae=i:e!=i&&(this._isSpecialRoot(e)||document.body.contains(e)||(e=this._ae=i)),e!==t._noAe?e:null},enumerable:!0,configurable:!0}),t.prototype._onBlur=function(t){if(t.isTrusted){var e=t.relatedTarget;this._ae=this._isSpecialRoot(e)?this._nativeAe():e}},t.prototype._onFocus=function(t){t.isTrusted&&(this._ae=this._nativeAe())},t.prototype._isSpecialRoot=function(t){return null==t||t===document.body||this._hasDoc&&t instanceof Document},t.prototype._nativeAe=function(){var e;try{e="unknown"!=typeof document.activeElement?document.activeElement:t._noAe}catch(i){e=t._noAe}return e},t._noAe={},t}();"undefined"!=typeof window&&(L=new j);var N,H,F=function(){function t(t){this.path=t}return Object.defineProperty(t.prototype,"path",{get:function(){return this._path},set:function(t){this._path=t,this._parts=t?t.split("."):[];for(var e=0;e<this._parts.length;e++){var i=this._parts[e],n=i.indexOf("[");n>-1&&(this._parts[e]=i.substr(0,n),this._parts.splice(++e,0,parseInt(i.substr(n+1))))}this._key=1==this._parts.length?this._parts[0]:null},enumerable:!0,configurable:!0}),t.prototype.getValue=function(t){if(t){if(this._key)return t[this._key];if(this._path&&this._path in t)return t[this._path];for(var e=0;e<this._parts.length&&t;e++)t=t[this._parts[e]]}return t},t.prototype.setValue=function(t,e){if(t)try{var i=this._path;if(i in t)return t[i]=e,t[i]==e;for(var n=0;n<this._parts.length-1;n++)if(null==(t=t[this._parts[n]]))return!1;return t[i=this._parts[this._parts.length-1]]=e,t[i]==e}catch(t){return!1}return!1},t}(),B=function(t,e){this.handler=t,this.self=e},z=function(){function t(t){this._handlers=[],this._handlersChanged=t}return t.prototype.addHandler=function(t,e){t=kt(t),this._handlers.push(new B(t,e)),lt(this._handlersChanged)&&this._handlersChanged()},t.prototype.removeHandler=function(t,e){var i=!1;t=kt(t);for(var n=0;n<this._handlers.length;n++){var r=this._handlers[n];if(!(r.handler!=t&&null!=t||r.self!=e&&null!=e)&&(this._handlers.splice(n--,1),i=!0,t&&e))break}i&&lt(this._handlersChanged)&&this._handlersChanged()},t.prototype.removeAllHandlers=function(){var t=this._handlers.length>0;this._handlers.length=0,t&&lt(this._handlersChanged)&&this._handlersChanged()},t.prototype.raise=function(t,e){void 0===e&&(e=V.empty);for(var i=this._handlers,n=0;n<i.length;n++){var r=i[n];r.handler.call(r.self,t,e),i[n]!==r&&n--}},Object.defineProperty(t.prototype,"hasHandlers",{get:function(){return this._handlers.length>0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"handlerCount",{get:function(){return this._handlers.length},enumerable:!0,configurable:!0}),t}(),V=function(){function t(){}return t.empty=new t,t}(),G=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.cancel=!1,e}return o(e,t),e}(V),Y=function(t){function e(e,i,n){var r=t.call(this)||this;return r._name=e,r._oldVal=i,r._newVal=n,r}return o(e,t),Object.defineProperty(e.prototype,"propertyName",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"oldValue",{get:function(){return this._oldVal},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"newValue",{get:function(){return this._newVal},enumerable:!0,configurable:!0}),e}(V),K=function(t){function e(e,i){var n=t.call(this)||this;return n._xhr=e,n._msg=i,n}return o(e,t),Object.defineProperty(e.prototype,"request",{get:function(){return this._xhr},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"message",{get:function(){return this._msg},set:function(t){this._msg=t},enumerable:!0,configurable:!0}),e}(G);(H=N||(N={}))[H.Add=0]="Add",H[H.Remove=1]="Remove",H[H.Change=2]="Change",H[H.Reset=3]="Reset";var W,U,X=function(t){function e(e,i,n){void 0===e&&(e=N.Reset),void 0===i&&(i=null),void 0===n&&(n=-1);var r=t.call(this)||this;return r.action=e,r.item=i,r.index=n,r}return o(e,t),e.reset=new e(N.Reset),e}(V),q=function(){function t(t,e){this._bnd=new F(t),this._asc=e}return Object.defineProperty(t.prototype,"property",{get:function(){return this._bnd.path},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ascending",{get:function(){return this._asc},enumerable:!0,configurable:!0}),t}(),J=function(t){function e(e){var i=t.call(this)||this;return i.newPageIndex=e,i}return o(e,t),e}(G),Z=function(){function t(){}return t.prototype.groupNameFromItem=function(t,e){return""},t.prototype.namesMatch=function(t,e){return t===e},t}(),$=function(t){function e(e,i){var n=t.call(this)||this;return n._bnd=new F(e),n._converter=i,n}return o(e,t),Object.defineProperty(e.prototype,"propertyName",{get:function(){return this._bnd.path},enumerable:!0,configurable:!0}),e.prototype.groupNameFromItem=function(t,e){return this._converter?this._converter(t,this.propertyName):this._bnd.getValue(t)},e.prototype.namesMatch=function(t,e){return t===e},e}(Z);function Q(){return"5.20221.842"}function tt(t){We._licKey=t}function et(t,e){return null==t?null:nt(e)?lt(t.implementsInterface)&&t.implementsInterface(e)?t:null:t instanceof e?t:null}function it(t){return nt(t)||ot(t)||at(t)||ct(t)}function nt(t){return"string"==typeof t}function rt(t){return!t||!/\S/.test(t)}function ot(t){return"number"==typeof t}function st(t){return ot(t)&&t==Math.round(t)}function at(t){return"boolean"==typeof t}function lt(t){return"function"==typeof t}function ht(t){return void 0===t}function ct(t){return(t instanceof Date||"[object Date]"===Object.prototype.toString.call(t))&&!isNaN(t.getTime())}function ut(t){return t instanceof Array||Array.isArray(t)||"[object Array]"===Object.prototype.toString.call(t)}function dt(t){return null!=t&&"object"==typeof t&&!ct(t)&&!ut(t)}function pt(t){for(var e in t)return!1;return!0}function ft(t){for(var e=t,i=0;null!=document.getElementById(e);i++)e=t+i;return e}function _t(t){if(t instanceof ge)return t;if(t&&t.touches&&t.touches.length>0&&(t=t.touches[0]),ot(t.clientX)&&ot(t.clientY))return new ge(t.clientX+pageXOffset,t.clientY+pageYOffset);throw"Mouse or touch event expected."}function gt(t){return ot(t)?U.Number:at(t)?U.Boolean:ct(t)?U.Date:nt(t)?U.String:ut(t)?U.Array:U.Object}function mt(t,e){if(void 0===e&&(e=1e3),!t)return[];var i=t.length;(e<=0||i<e)&&(e=i);var n=[];if(e){for(var r=Object.keys(t[0]),o={},s=r.slice(),a=0;a<e;a++){for(var l=t[a],h=s.length-1;h>=0;h--){var c=s[h],u=l[c];if(it(u)){var d=Object.getOwnPropertyDescriptor(t[a],c);o[c]={binding:c,dataType:gt(u),isReadOnly:d&&!d.writable&&!d.set},s.splice(h,1)}}if(!s.length)break}for(a=0;a<r.length;a++){var p=o[r[a]];p&&n.push(p)}}return n}function yt(t,e,i,n){if(null!=t){var r=U;if(nt(t))switch(e){case r.Number:var o=Me.parseFloat(t,i);return isNaN(o)?t:o;case r.Date:var s=Me.parseDate(t,i,ct(n)?n:null);return s||i||!t||(s=new Date(t)),s&&isFinite(s.getTime())?s:t;case r.Boolean:switch(t.toLowerCase()){case"true":return!0;case"false":return!1}return t;case r.Array:try{var a=t.split(",").map((function(t){return(t=t.trim()).match(/^(\+|\-)?\d+\.?\d*$/)?t:'"'+t+'"'}));return JSON.parse("["+a.join(",")+"]")}catch(t){}}if(e==U.String)return Me.format(t,i)}return t}function bt(t,e,i){if(i){var n=(a=t.toString()).indexOf("e"),r=a.indexOf(".");if(n>-1){if("-"===a[n+1]){var o=parseFloat(a.substr(n+2)),s=a.substr(0,n);r>-1&&(s=s.substr(0,r)+s.substr(r+1)),a="0."+(Array(o).join("0")+s).substr(0,e),t=parseFloat(a)}}else r>-1&&(a=a.substr(0,r+1+e),t=parseFloat(a))}else{var a=t.toFixed(e);t=parseFloat(a)}return t}function vt(t,e,i){if((t=Mt(t)).match(/\{.*"count".*:.*"when".*:.*\}/))try{var n=JSON.parse(t);if(nt(n.count)){var r=e[n.count],o=n.when;if(ot(r)&&dt(o)){var s=o[r]||o.other;nt(s)&&(t=s)}}}catch(t){}return t.replace(/\{(.*?)(:(.*?))?\}/g,(function(t,n,r,o){var s=t;return n&&"{"!=n[0]&&e&&(s=new F(n).getValue(e),o&&(s=Me.format(s,o)),i&&(s=i(e,n,o,s))),null==s?"":s}))}function wt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=[],n=-1;return t[0].forEach((function(e,r){if(r>0&&r!=n){var o=t[r],s=e.match(/^:([a-z][0-9]*\b)/i)||e.match(/^:'(.+?)'/)||e.match(/^:"(.+?)"/);s?(o=Me.format(o,s[1]),e=e.substr(s[0].length)):":"==e&&r<t.length-1&&(ot(o)||ct(o))&&(o=Me.format(o,t[r+1]),e="",n=r+1),i.push(o)}e&&i.push(e)})),i.join("")}function Ct(t,e){return y()?(t=t.replace(/:\${([^}]*)}/g,(function(t,i){return":"+xt(i,e)}))).replace(/\${([^}]*)}(:(([A-Za-z]\d*)|"([^"]+)"|'([^']+)'))?/g,(function(t,i,n,r,o,s,a){var l=xt(i,e);return r?Me.format(l,o||s||a):l})):xt(t,e)}function xt(t,e){(e=e||{}).glbz=wt;var i=Object.keys(e),n=i.map((function(t){return e[t]}));return(y()?new(Function.bind.apply(Function,[void 0].concat(i,["return "+t]))):new(Function.bind.apply(Function,[void 0].concat(i,["return glbz`"+t+"`"])))).apply(void 0,n)}function St(t,e,i){return null!=t&&(null!=i&&t>i&&(t=i),null!=e&&t<e&&(t=e)),t}function Et(t,e){if(e)for(var i in e)if("_"!=i[0]){Pt(i in t,'Unknown property "'+i+'".');var n=e[i];t._copy&&t._copy(i,n)||(t[i]instanceof z?lt(n)&&t[i].addHandler(n):!dt(n)||"undefined"!=typeof Element&&n instanceof Element||!t[i]||"itemsSource"==i?t[i]=n:Et(t[i],n))}return t}function Pt(t,e){if(!t){e="** Assertion failed in Wijmo: "+e;var i=new Error;throw nt(i.stack)&&(e+=" "+i.stack),e}}function Tt(t,e){console.error('** WARNING: "'+t+'" has been deprecated; please use "'+e+'" instead.')}function Mt(t,e){return void 0===e&&(e=!0),ht(t)&&(t=null),Pt(e&&null==t||nt(t),"String expected."),t}function It(t,e,i){if(void 0===e&&(e=!1),void 0===i&&(i=!1),Pt(e&&null==t||ot(t),"Number expected."),i&&t&&t<0)throw"Positive number expected.";return t}function Dt(t,e,i){if(void 0===e&&(e=!1),void 0===i&&(i=!1),Pt(e&&null==t||st(t),"Integer expected."),i&&t&&t<0)throw"Positive integer expected.";return t}function Rt(t,e){return void 0===e&&(e=!1),Pt(e&&null==t||at(t),"Boolean expected."),t}function At(t,e){if(void 0===e&&(e=!1),nt(t)){var i=yt(t,U.Date,"r");ct(i)&&(t=i)}return Pt(e&&null==t||ct(t),"Date expected."),t}function kt(t,e){return void 0===e&&(e=!0),Pt(e&&null==t||lt(t),"Function expected."),t}function Ot(t,e){return void 0===e&&(e=!0),Pt(e&&null==t||ut(t),"Array expected."),t}function Lt(t,e,i){return void 0===i&&(i=!1),t=et(t,e),Pt(i||null!=t,e+" expected."),t}function jt(t,e,i){if(void 0===i&&(i=!1),null==t&&i)return null;var n=nt(t)?e[t]:t;return Pt(null!=n,'Invalid enum value: "'+t+'"'),ot(n)?n:t}function Nt(t,e){if(void 0===e&&(e=!0),null==t&&e)return null;var i=et(t,"ICollectionView");return null!=i?i:(ut(t)||Pt(!1,"Array or ICollectionView expected."),new Be(t))}function Ht(t){return null!=t&&null!=t.items&&t.items.length>0}function Ft(t){return t&&t.length?t[0].toUpperCase()+t.substr(1).replace(/([a-z])([A-Z])/g,"$1 $2"):""}function Bt(t){return t&&nt(t)&&(t=t.replace(/[&<>"'\/]/g,(function(t){return Vt[t]}))),null!=t?t.toString():""}!function(t){t[t.Back=8]="Back",t[t.Tab=9]="Tab",t[t.Enter=13]="Enter",t[t.Escape=27]="Escape",t[t.Space=32]="Space",t[t.PageUp=33]="PageUp",t[t.PageDown=34]="PageDown",t[t.End=35]="End",t[t.Home=36]="Home",t[t.Left=37]="Left",t[t.Up=38]="Up",t[t.Right=39]="Right",t[t.Down=40]="Down",t[t.Delete=46]="Delete",t[t.F1=112]="F1",t[t.F2=113]="F2",t[t.F3=114]="F3",t[t.F4=115]="F4",t[t.F5=116]="F5",t[t.F6=117]="F6",t[t.F7=118]="F7",t[t.F8=119]="F8",t[t.F9=120]="F9",t[t.F10=121]="F10",t[t.F11=122]="F11",t[t.F12=123]="F12"}(W||(W={})),function(t){t[t.Object=0]="Object",t[t.String=1]="String",t[t.Number=2]="Number",t[t.Boolean=3]="Boolean",t[t.Date=4]="Date",t[t.Array=5]="Array"}(U||(U={}));var zt,Vt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function Gt(t){return t.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}function Yt(t){var e=Mt(t);return nt(e)&&e.indexOf("<")>-1&&(zt||(zt=document.createElement("div")),zt.innerHTML=e,e=zt.textContent),e}function Kt(t,e){if(t&&e){if(t instanceof HTMLElement&&t.classList&&!v())return t.classList.contains(e);if(t.getAttribute){var i=new RegExp("(\\s|^)"+e+"(\\s|$)");return t&&i.test(t.getAttribute("class"))}}return!1}function Wt(t,e){if(t&&e){if(t instanceof HTMLElement&&t.classList&&!v())return void(e.indexOf(" ")<0?t.classList.add(e):e.split(" ").forEach((function(e){t.classList.add(e)})));t.setAttribute&&e.split(" ").forEach((function(e){if(!Kt(t,e)){var i=t.getAttribute("class");t.setAttribute("class",i?i+" "+e:e)}}))}}function Ut(t,e){if(t&&e){if(t instanceof HTMLElement&&t.classList&&!v())return void(e.indexOf(" ")<0?t.classList.remove(e):e.split(" ").forEach((function(e){t.classList.remove(e)})));t.setAttribute&&e.split(" ").forEach((function(e){if(Kt(t,e)){var i=new RegExp("((\\s|^)"+e+"(\\s|$))","g"),n=t.getAttribute("class");(n=n.replace(i," ").replace(/ +/g," ").trim())?t.setAttribute("class",n):t.removeAttribute("class")}}))}}function Xt(t,e,i){null==i&&(i=!Kt(t,e)),i?Wt(t,e):Ut(t,e)}function qt(t,e,i,n){t&&(null!=i?n&&t.getAttribute(e)||t.setAttribute(e,i.toString()):t.removeAttribute(e))}function Jt(t,e){var i=null==e;t.checked=y()?e||i:e,t.indeterminate=i}function Zt(t,e){qt(t,"aria-label",e)}function $t(t,e,i){if(void 0===i&&(i=e),Pt(t instanceof HTMLInputElement||t instanceof HTMLTextAreaElement,"INPUT or TEXTAREA element expected"),he(document.body,t)&&!t.disabled&&t.offsetHeight){try{t.setSelectionRange(e,i,"backward")}catch(t){}try{return t.focus(),!0}catch(t){}}return!1}function Qt(t){var e="autocomplete",i=t.getAttribute(e);i&&"on"!=i||t.setAttribute(e,"off"),"autocorrect,autocapitalize,spellcheck".split(",").forEach((function(e){t.setAttribute(e,"spellcheck"==e?"false":"off")}))}function te(t){return t&&t.parentNode?t.parentNode.removeChild(t):null}function ee(){var t=document.activeElement;if(t){var e=t.shadowRoot;e&&e.activeElement&&(t=e.activeElement)}return t}function ie(){var t=L.activeElement;if(t){var e=t.shadowRoot;e&&e.activeElement&&(t=e.activeElement)}return t}function ne(t,e){var i=re(t,e<0),n=0;if(e){var r=i.indexOf(ee());r>-1&&(n=(r+e+i.length)%i.length)}if(n<i.length){var o=i[n];return o.focus(),o instanceof HTMLInputElement&&o.select(),!0}return!1}function re(t,e){void 0===e&&(e=!1);var i=[],n=Array.prototype.slice.call(t.querySelectorAll("input,select,textarea,button,a,div")),r={},o=function(t){return t instanceof HTMLInputElement&&"radio"===t.type};n.forEach((function(t){o(t)&&t.checked&&(r[t.name||""]=!0)})),(n=n.filter((function(t){return!o(t)||t.checked||!r[t.name||""]}))).sort((function(t,e){return t.tabIndex-e.tabIndex}));for(var s=0;s<n.length;s++){var a=n[s];if(a.offsetHeight>0&&a.tabIndex>-1&&!a.disabled&&"hidden"!==window.getComputedStyle(a).visibility&&!ce(a,"[disabled],.wj-state-disabled")){if(a instanceof HTMLAnchorElement&&!a.hasAttribute("href"))continue;if(y()&&!a.hasAttribute("tabindex")){if(a instanceof HTMLDivElement)continue;var l=We.getControl(ce(a,".wj-flexgrid"));if(l&&0==l.keyActionTab)continue}if("radio"===a.type&&!a.checked&&i.length>0){var h=i[i.length-1];if("radio"===h.type&&h.name===a.name){e&&(i[i.length-1]=a);continue}}!We.getControl(a)&&re(a).length||i.push(a)}}return i}function oe(t,e,i){void 0===i&&(i="text/plain");var n=t instanceof Blob;n||!i.match(/\bcsv\b/i)&&!e.match(/\.csv$/i)||(t="\ufeff"+t);var r=n?t:new Blob([t],{type:i});if(lt(navigator.msSaveOrOpenBlob))navigator.msSaveOrOpenBlob(r,e);else{var o=document.createElement("a"),s=function(t){var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),t.dispatchEvent(e)};if("download"in o){var a=window.URL||window.webkitURL,l=a.createObjectURL(r);o.href=l,o.target="_blank",o.download=e,s(o),o=null,window.setTimeout((function(){a.revokeObjectURL(l)}),3e4)}else{var h=new FileReader;h.onloadend=function(){o.href=h.result,o.download=e,s(o),o=null},h.readAsDataURL(r)}}}function se(t){if(t instanceof Element)return t;if(nt(t))try{return document.querySelector(t)}catch(t){}return t&&t.jquery?t[0]:null}function ae(t,e,i){t=t.replace(/\bstyle\s*=\s*"/g,'_wj-style="');var n=document.createElement("div");if(n.innerHTML=t,t.indexOf("_wj-style")>-1)for(var r=n.querySelectorAll("[_wj-style]"),o=function(t){var e=r[t];e.getAttribute("_wj-style").split(";").forEach((function(t){var i=t.split(":");2==i.length&&(e.style[i[0].trim()]=i[1].trim())})),e.removeAttribute("_wj-style")},s=0;s<r.length;s++)o(s);return 1==n.children.length&&(n=n.children[0]),i&&fe(n,i),e&&(e=se(e)).appendChild(n),n}function le(t,e){t.textContent=e||""}function he(t,e,i){for(var n=e;n&&t;){if(n===t)return!0;n=(i?n[We._OWNR_KEY]:null)||n.parentNode||n.host}return!1}function ce(t,e){if(t){if(lt(t.closest))return t.closest(e);var i=t.matches||t.webkitMatchesSelector||t.msMatchesSelector||t.mozMatchesSelector;if(i)for(;t&&1===t.nodeType;t=t.parentElement||t.parentNode)if(i.call(t,e))return t}return null}function ue(t,e){return ce(t,"."+e)}function de(t,e){var i=!e,n="disabled";Xt(t,"wj-state-disabled",i),qt(t,n,i?n:null);for(var r=t.querySelectorAll("input,button"),o=0;o<r.length;o++)qt(r[o],n,i?n:null)}function pe(t){var e=t.getBoundingClientRect();return new ye(e.left+pageXOffset,e.top+pageYOffset,e.width,e.height)}function fe(t,e){if(Pt(dt(e),"css parameter should be an object"),t instanceof Array)for(var i=0;i<t.length;i++)fe(t[i],e);else if(t&&t.style){var n=t.style;for(var r in e){var o=e[r];"number"==typeof o&&r.match(/width|height|left|top|right|bottom|size|padding|margin'/i)&&(o+="px"),n[r]!==o&&(n[r]=o)}}}function _e(t,e,i){null==e&&(e=We._ANIM_DEF_DURATION),null==i&&(i=We._ANIM_DEF_STEP),t=kt(t),e=It(e,!1,!0),i=It(i,!1,!0);var n,r=Date.now(),o=setInterval((function(){var i=Math.min(1,(Date.now()-r)/e);i=Math.sin(i*Math.PI/2),i*=i,n&&cancelAnimationFrame(n),n=requestAnimationFrame((function(){n=null,t(i)})),i>=1&&clearInterval(o)}),i);return o}var ge=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=It(t),this.y=It(e)}return t.prototype.equals=function(e){return e instanceof t&&this.x==e.x&&this.y==e.y},t.prototype.clone=function(){return new t(this.x,this.y)},t}(),me=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.width=It(t),this.height=It(e)}return t.prototype.equals=function(e){return e instanceof t&&this.width==e.width&&this.height==e.height},t.prototype.clone=function(){return new t(this.width,this.height)},t}(),ye=function(){function t(t,e,i,n){this.left=It(t),this.top=It(e),this.width=It(i),this.height=It(n)}return Object.defineProperty(t.prototype,"right",{get:function(){return this.left+this.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return this.top+this.height},enumerable:!0,configurable:!0}),t.prototype.equals=function(e){return e instanceof t&&this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height},t.prototype.clone=function(){return new t(this.left,this.top,this.width,this.height)},t.fromBoundingRect=function(e){return null!=e.left?new t(e.left,e.top,e.width,e.height):null!=e.x?new t(e.x,e.y,e.width,e.height):void Pt(!1,"Invalid source rectangle.")},t.union=function(e,i){var n=Math.min(e.left,i.left),r=Math.min(e.top,i.top);return new t(n,r,Math.max(e.right,i.right)-n,Math.max(e.bottom,i.bottom)-r)},t.intersection=function(e,i){var n=Math.max(e.left,i.left),r=Math.max(e.top,i.top);return new t(n,r,Math.min(e.right,i.right)-n,Math.min(e.bottom,i.bottom)-r)},t.prototype.contains=function(e){if(e instanceof ge)return e.x>=this.left&&e.x<=this.right&&e.y>=this.top&&e.y<=this.bottom;if(e instanceof t){var i=e;return i.left>=this.left&&i.right<=this.right&&i.top>=this.top&&i.bottom<=this.bottom}Pt(!1,"Point or Rect expected.")},t.prototype.inflate=function(e,i){return new t(this.left-e,this.top-i,this.width+2*e,this.height+2*i)},t}(),be=function(){function t(){}return t.addDays=function(t,e){return(t=new Date(t.getTime())).setDate(t.getDate()+e),t},t.addMonths=function(t,e){var i=(t=new Date(t.getTime())).getDate();return t.setMonth(t.getMonth()+e),t.getDate()!=i&&t.setDate(0),t},t.addYears=function(t,e){return(t=new Date(t.getTime())).setFullYear(t.getFullYear()+e),t},t.addHours=function(t,e){return(t=new Date(t.getTime())).setHours(t.getHours()+e),t},t.addMinutes=function(t,e){return(t=new Date(t.getTime())).setMinutes(t.getMinutes()+e),t},t.addSeconds=function(t,e){return(t=new Date(t.getTime())).setSeconds(t.getSeconds()+e),t},t.weekFirst=function(e,i){return void 0===i&&(i=Me.getFirstDayOfWeek()),t.addDays(e,-(e.getDay()-i))},t.weekLast=function(e,i){return void 0===i&&(i=Me.getFirstDayOfWeek()),e=t.weekFirst(e,i),t.addDays(e,6)},t.monthFirst=function(e){return t.addDays(e,1-e.getDate())},t.monthLast=function(e){return e=t.monthFirst(e),e=t.addMonths(e,1),t.addDays(e,-1)},t.yearFirst=function(t){return new Date(t.getFullYear(),0,1)},t.yearLast=function(t){return new Date(t.getFullYear(),11,31)},t.sameDate=function(t,e){return ct(t)&&ct(e)&&t.getFullYear()==e.getFullYear()&&t.getMonth()==e.getMonth()&&t.getDate()==e.getDate()},t.sameTime=function(t,e){return ct(t)&&ct(e)&&t.getHours()==e.getHours()&&t.getMinutes()==e.getMinutes()&&t.getSeconds()==e.getSeconds()&&t.getMilliseconds()==e.getMilliseconds()},t.equals=function(t,e){return null==t&&null==e||ct(t)&&ct(e)&&t.getTime()==e.getTime()},t.fromDateTime=function(e,i){return e||i?(e||(e=i),i||(i=e),t.newDate(e.getFullYear(),e.getMonth(),e.getDate(),i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds())):null},t.toFiscal=function(e,i){var n=Te.Globalize.calendar;return ut(n.fiscalYearOffsets)?t.addMonths(e,-n.fiscalYearOffsets[i?0:1]):e},t.fromFiscal=function(e,i){var n=Te.Globalize.calendar;return ut(n.fiscalYearOffsets)?t.addMonths(e,+n.fiscalYearOffsets[i?0:1]):e},t.newDate=function(t,e,i,n,r,o,s){if(null==t||null==e||null==i){var a=new Date;null==t&&(t=a.getFullYear()),null==e&&(e=a.getMonth()),null==i&&(i=a.getDate())}null==n&&(n=0),null==r&&(r=0),null==o&&(o=0),null==s&&(s=0);var l=new Date(t,e,i,n,r,o,s),h=l.getFullYear();return t<100&&h>=1900&&l.setFullYear(l.getFullYear()-1900),l},t.clone=function(e){return t.fromDateTime(e,e)},t}();function ve(t,e){var i=e||{},n=i.method?Mt(i.method).toUpperCase():"GET",r=null==i.async||Rt(i.async),o=i.data;if(null!=o&&"GET"==n){var s=[];for(var a in o){var l=o[a];ct(l)&&(l=l.toJSON()),s.push(a+"="+encodeURIComponent(l))}if(s.length){var h=t.indexOf("?")<0?"?":"&";t+=h+s.join("&")}o=null}var c=new XMLHttpRequest;c.URL_DEBUG=t;var u=!1;if(null==o||nt(o)||(u=dt(o),o=JSON.stringify(o)),c.onload=function(){4==c.readyState&&(c.status<300?i.success&&kt(i.success)(c):i.error&&kt(i.error)(c),i.complete&&kt(i.complete)(c))},c.onerror=function(){if(!lt(i.error))throw"HttpRequest Error: "+c.status+" "+c.statusText;i.error(c)},c.open(n,t,r,i.user,i.password),i.user&&i.password&&c.setRequestHeader("Authorization","Basic "+btoa(i.user+":"+i.password)),u&&function(){for(var t in i.requestHeaders)if("content-type"===t.toLowerCase())return!1;return!0}()&&c.setRequestHeader("Content-Type","application/json"),i.requestHeaders)for(var d in i.requestHeaders)c.setRequestHeader(d,i.requestHeaders[d]);return ot(i.timeout)&&(c.timeout=i.timeout),lt(i.beforeSend)&&i.beforeSend(c),c.send(o),c}var we={};function Ce(t,e){if(we[t]=e,"wijmo"===t){var i="undefined"!=typeof window?window:"undefined"!=typeof self?self:null;i&&(i.wijmo=e)}}function xe(t){return we[t]}var Se=function(){function t(t){if(void 0===t&&(t=!0),t)this._h={};else{var e=function(){var t=null;return"undefined"!=typeof window?t=window:void 0!==i.g?t=i.g:"undefined"!=typeof self&&(t=self),t}(),n=e&&e.Map;this._m=n&&new Map||new Ee}}return Object.defineProperty(t.prototype,"isPojoHash",{get:function(){return null!=this._h},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._h&&Object.keys(this._h).length||this._m.size},enumerable:!0,configurable:!0}),t.prototype.clear=function(){this._h?this._h={}:this._m.clear()},t.prototype.delete=function(t){this._h?delete this._h[t]:this._m.delete(t)},t.prototype.get=function(t){return this._h?this._h[t]:this._m.get(t)},t.prototype.has=function(t){return this._h?t in this._h:this._m.has(t)},t.prototype.set=function(t,e){return this._h?this._h[t]=e:this._m.set(t,e),this},t}(),Ee=function(){function t(){this._d=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this._d.length},enumerable:!0,configurable:!0}),t.prototype.clear=function(){this._d=[]},t.prototype.delete=function(t){var e=this._kIdx(t);return e>-1&&(this._d.splice(e,1),!0)},t.prototype.get=function(t){var e=this._kIdx(t);return e>-1?this._d[e].v:void 0},t.prototype.has=function(t){return this._kIdx(t)>-1},t.prototype.set=function(t,e){var i=this._kIdx(t);return i>-1?this._d[i].v=e:this._d.push({k:t,v:e}),this},t.prototype._kIdx=function(t){var e=this._d,i=e.length;if(t==t){for(var n=0;n<i;n++)if(e[n].k===t)return n}else for(n=0;n<i;n++){var r=e[n].k;if(r!=r)return n}return-1},t}(),Pe=function(){function t(t){this._r=0,this._g=0,this._b=0,this._a=1,t&&this._parse(t)}return Object.defineProperty(t.prototype,"r",{get:function(){return this._r},set:function(t){this._r=St(It(t),0,255)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"g",{get:function(){return this._g},set:function(t){this._g=St(It(t),0,255)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"b",{get:function(){return this._b},set:function(t){this._b=St(It(t),0,255)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"a",{get:function(){return this._a},set:function(t){this._a=St(It(t),0,1)},enumerable:!0,configurable:!0}),t.prototype.equals=function(e){return e instanceof t&&this.r==e.r&&this.g==e.g&&this.b==e.b&&this.a==e.a},t.prototype.toString=function(){var t=Math.round(100*this.a);return t>99?"#"+((1<<24)+(this.r<<16)+(this.g<<8)+this.b).toString(16).slice(1):"rgba("+this.r+","+this.g+","+this.b+","+t/100+")"},t.fromRgba=function(e,i,n,r){void 0===r&&(r=1);var o=new t(null);return o.r=Math.round(St(It(e),0,255)),o.g=Math.round(St(It(i),0,255)),o.b=Math.round(St(It(n),0,255)),o.a=St(It(r),0,1),o},t.fromHsb=function(e,i,n,r){void 0===r&&(r=1);var o=t._hsbToRgb(St(It(e),0,1),St(It(i),0,1),St(It(n),0,1));return t.fromRgba(o[0],o[1],o[2],r)},t.fromHsl=function(e,i,n,r){void 0===r&&(r=1);var o=t._hslToRgb(St(It(e),0,1),St(It(i),0,1),St(It(n),0,1));return t.fromRgba(o[0],o[1],o[2],r)},t.fromString=function(e){var i=new t(null);return i._parse(Mt(e))?i:null},t.prototype.getHsb=function(){return t._rgbToHsb(this.r,this.g,this.b)},t.prototype.getHsl=function(){return t._rgbToHsl(this.r,this.g,this.b)},t.interpolate=function(e,i,n){n=St(It(n),0,1);var r=t._rgbToHsl(e.r,e.g,e.b),o=t._rgbToHsl(i.r,i.g,i.b),s=1-n,a=e.a*s+i.a*n,l=[r[0]*s+o[0]*n,r[1]*s+o[1]*n,r[2]*s+o[2]*n],h=t._hslToRgb(l[0],l[1],l[2]);return t.fromRgba(h[0],h[1],h[2],a)},t.toOpaque=function(e,i){if(1==(e=nt(e)?t.fromString(e):Lt(e,t)).a)return e;i=null==i?t.fromRgba(255,255,255,1):nt(i)?t.fromString(i):Lt(i,t);var n=e.a,r=1-n;return t.fromRgba(e.r*n+i.r*r,e.g*n+i.g*r,e.b*n+i.b*r)},t.prototype._parse=function(e){if("transparent"==(e=e.toLowerCase()))return this._r=this._g=this._b=this._a=0,!0;if(e&&0!=e.indexOf("#")&&0!=e.indexOf("rgb")&&0!=e.indexOf("hsl")){var i=document.createElement("div");i.style.color=e;var n=i.style.color;n!=e||(n=window.getComputedStyle(i).color)||(document.body.appendChild(i),n=window.getComputedStyle(i).color,te(i)),e=n.toLowerCase()}if(0==e.indexOf("#"))return 4==e.length?(this.r=parseInt(e[1]+e[1],16),this.g=parseInt(e[2]+e[2],16),this.b=parseInt(e[3]+e[3],16),this.a=1,!0):7==e.length&&(this.r=parseInt(e.substr(1,2),16),this.g=parseInt(e.substr(3,2),16),this.b=parseInt(e.substr(5,2),16),this.a=1,!0);if(0==e.indexOf("rgb")){var r=e.indexOf("("),o=e.indexOf(")");if(r>-1&&o>-1&&(s=e.substr(r+1,o-(r+1)).split(",")).length>2)return this.r=parseInt(s[0]),this.g=parseInt(s[1]),this.b=parseInt(s[2]),this.a=s.length>3?parseFloat(s[3]):1,!0}var s;if(0==e.indexOf("hsl")&&(r=e.indexOf("("),o=e.indexOf(")"),r>-1&&o>-1&&(s=e.substr(r+1,o-(r+1)).split(",")).length>2)){var a=parseInt(s[0])/360,l=parseInt(s[1]),h=parseInt(s[2]);s[1].indexOf("%")>-1&&(l/=100),s[2].indexOf("%")>-1&&(h/=100);var c=t._hslToRgb(a,l,h);return this.r=c[0],this.g=c[1],this.b=c[2],this.a=s.length>3?parseFloat(s[3]):1,!0}return!1},t._hslToRgb=function(e,i,n){var r,o,s;if(Pt(e>=0&&e<=1&&i>=0&&i<=1&&n>=0&&n<=1,"bad HSL values"),0==i)r=o=s=n;else{var a=n<.5?n*(1+i):n+i-n*i,l=2*n-a;r=t._hue2rgb(l,a,e+1/3),o=t._hue2rgb(l,a,e),s=t._hue2rgb(l,a,e-1/3)}return[Math.round(255*r),Math.round(255*o),Math.round(255*s)]},t._hue2rgb=function(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t},t._rgbToHsl=function(t,e,i){Pt(t>=0&&t<=255&&e>=0&&e<=255&&i>=0&&i<=255,"bad RGB values"),t/=255,e/=255,i/=255;var n,r,o=Math.max(t,e,i),s=Math.min(t,e,i),a=(o+s)/2;if(o==s)n=r=0;else{var l=o-s;switch(r=a>.5?l/(2-o-s):l/(o+s),o){case t:n=(e-i)/l+(e<i?6:0);break;case e:n=(i-t)/l+2;break;case i:n=(t-e)/l+4}n/=6}return[n,r,a]},t._rgbToHsb=function(e,i,n){Pt(e>=0&&e<=255&&i>=0&&i<=255&&n>=0&&n<=255,"bad RGB values");var r=t._rgbToHsl(e,i,n);return t._hslToHsb(r[0],r[1],r[2])},t._hsbToRgb=function(e,i,n){var r=t._hsbToHsl(e,i,n);return t._hslToRgb(r[0],r[1],r[2])},t._hsbToHsl=function(t,e,i){Pt(t>=0&&t<=1&&e>=0&&e<=1&&i>=0&&i<=1,"bad HSB values");var n=St(i*(2-e)/2,0,1),r=1-Math.abs(2*n-1),o=St(r>0?i*e/r:e,0,1);return Pt(!isNaN(n)&&!isNaN(o),"bad conversion to HSL"),[t,o,n]},t._hslToHsb=function(t,e,i){Pt(t>=0&&t<=1&&e>=0&&e<=1&&i>=0&&i<=1,"bad HSL values");var n=St(1==i?1:(2*i+e*(1-Math.abs(2*i-1)))/2,0,1),r=St(n>0?2*(n-i)/n:e,0,1);return Pt(!isNaN(n)&&!isNaN(r),"bad conversion to HSB"),[t,r,n]},t}(),Te="undefined"!=typeof window&&window.wijmo&&window.wijmo.culture||{Globalize:{numberFormat:{".":".",",":",","-":"-","+":"+","%":"%",percent:{pattern:["-n%","n%"]},currency:{decimals:2,symbol:"$",pattern:["($n)","$n"]}},calendar:{"/":"/",":":":",firstDay:0,days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],am:["AM","A"],pm:["PM","P"],eras:["A.D.","B.C."],patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",t:"h:mm tt",T:"h:mm:ss tt",M:"MMMM d",m:"MMMM d",Y:"MMMM, yyyy",y:"MMMM, yyyy",g:"M/d/yyyy h:mm tt",G:"M/d/yyyy h:mm:ss tt",s:'yyyy"-"MM"-"dd"T"HH":"mm":"ss',o:'yyyy"-"MM"-"dd"T"HH":"mm":"ss"."fffffffK',O:'yyyy"-"MM"-"dd"T"HH":"mm":"ss"."fffffffK',U:"dddd, MMMM dd, yyyy h:mm:ss tt"},fiscalYearOffsets:[-3,-3]}}},Me=function(){function t(){}return t.format=function(e,i,n,r,o){return nt(e)?e:ot(e)?(i=i||(e==Math.round(e)?"n0":"n2"),t.formatNumber(e,i,n,r,o)):ct(e)?(i=i||"d",t.formatDate(e,i)):null!=e?e.toString():""},t.formatNumber=function(e,i,n,r,o){e=It(e),i=Mt(i);var s,a=Te.Globalize.numberFormat,l=t._parseNumericFormat(i),h=l.spec,c=l.prec,u=a["."]||".",d=a[","]||",",p=a["-"]||"-",f=Math;if(null==c&&(c=null!=o?o:"c"==h?a.currency.decimals:"e"==h?6:"r"==h?15:e==f.round(e)?0:2),l.scale&&(e/=f.pow(10,l.scale)),"d"==h||"x"==h){for(s=(r?f.floor:f.round)(f.abs(e)).toString("d"==h?10:16);s.length<c;)s="0"+s;return e<0&&(s=p+s),"X"==l.specRaw?s.toUpperCase():s}switch("p"==h&&(e=bt(e=t._shiftDecimal(e,2,14),c,r)),r&&"p"!=h&&"e"!=h&&(e=bt(e,c,!0)),h){case"e":s=e.toExponential(c),"E"==l.specRaw&&(s=s.replace("e","E"));break;case"c":case"p":s=t._toFixedStr(f.abs(e),c);break;default:"-"!=(s=t._toFixedStr(e,c))[0]||s.match(/[1-9]/)||(s=s.substr(1))}if((n||"g"==h||"r"==h)&&s.indexOf(".")>-1&&(s=s.replace(/(\.\d*?)0+$/g,"$1").replace(/\.$/,"")),"."!=u&&(s=s.replace(".",u)),"-"!=p&&(s=s.replace("-",p)),d&&("n"==h||"c"==h||"p"==l.specRaw||"F"==l.specRaw||"G"==l.specRaw)){var _=s.indexOf(u),g=/\B(?=(\d\d\d)+(?!\d))/g;s=_>-1?s.substr(0,_).replace(g,d)+s.substr(_):s.replace(g,d)}if("c"==h){var m=e<0&&s.match(/[1-9]/)?0:1,y=a.currency.pattern[m],b=l.curr||a.currency.symbol;""==b&&(b=""),s=y.replace("n",s).replace("$",b)}if("p"==h){m=e<0&&s.match(/[1-9]/)?0:1,y=a.percent.pattern[m];var v=a["%"]||"%";s=y.replace("n",s),"%"!=v&&(s=s.replace("%",v)),"-"!=p&&0==m&&(s=s.replace("-",p))}return l.prefix||l.suffix?l.prefix+s+l.suffix:s},t.formatDate=function(e,i){switch(e=At(e),i){case"r":case"R":return e.toUTCString();case"u":return e.toISOString().replace(/\.\d{3}/,"")}return i=t._expandFormat(i),t._parseDateFormat(i).map((function(n){return t._formatDatePart(e,i,n)})).join("")},t.parseInt=function(e,i){return Math.round(t.parseFloat(e,i))},t.parseFloat=function(e,i){var n=t._parseNumericFormat(i),r=n.prefix;r&&0==e.indexOf(r)&&(e=e.substring(r.length));var o=n.suffix;if(o){var s=e.lastIndexOf(o);s>-1&&s==e.length-o.length&&(e=e.substring(0,e.length-o.length))}var a=Te.Globalize.numberFormat,l=a["."]||".",h=a[","]||",",c=a["-"]||"-",u=a["%"]||"%",d=n.curr||a.currency.symbol||"$",p=e.indexOf(u)>-1,f=e.indexOf("(")>-1&&e.indexOf(")")>-1,_=0;if("x"==n.spec)_=parseInt(e,16);else{[d,u,"(",")"].forEach((function(t){e=e.replace(t,"")})),/\s/.test(h)&&(e=e.replace(/\s+/g,""));var g=(e=e.replace(new RegExp("\\"+h,"g"),"").replace(new RegExp("\\"+c,"g"),"-").replace(/(\+|\-)\s+/g,"$1").replace(l,".").trim()).length;!f&&g&&"-"==e[g-1]&&(f=!0,e=e.substring(0,g-1)),_=/^\s*(\+|\-)?\d*(\.\d*)?(\s*E(\+|\-)?\d+)?\s*$/i.test(e)?parseFloat(e):Number.NaN}return isNaN(_)||(f=f||_<0,_=Math.abs(_),p&&(_=t._shiftDecimal(_,-2)),f&&(_=-_),n.scale&&(_*=Math.pow(10,n.scale))),_},t.parseDate=function(e,i,n){if(!(e=Mt(e)))return null;if("u"==i)return new Date(e);var r;if("R"==i||"r"==i){var o=e.match(/((\d+)\-(\d+)\-(\d+))?\s?((\d+):(\d+)(:(\d+))?)?/);return o[1]||o[5]?(r=o[1]?new Date(parseInt(o[2]),parseInt(o[3])-1,parseInt(o[4])):new Date,o[5]&&(r.setHours(parseInt(o[6])),r.setMinutes(parseInt(o[7])),r.setSeconds(o[8]?parseInt(o[9]):0))):r=new Date(e),isNaN(r.getTime())?null:r}i=t._expandFormat(i||"d");var s=Te.Globalize.calendar,a=t._CJK,l=new RegExp("(\\"+s["/"]+")|(\\"+s[":"]+")|(\\d+)|(["+a+"\\.]{2,})|(["+a+"]+)","gi"),h=e.match(l),c=t._parseDateFormat(i),u=0;if(!(h&&h.length&&c&&c.length))return null;var d,p,f,_,g,m=-1,y=0,b=1,v=0,w=0,C=0,x=0,S=-1,E=null;(n=At(n,!0))&&(y=n.getMonth(),b=n.getDate(),v=n.getHours(),w=n.getMinutes(),C=n.getSeconds(),x=n.getMilliseconds());for(var P=0;P<c.length&&h;P++){var T=P-u,M=T>-1&&T<h.length?h[T]:"",I=c[P].length;switch(c[P]){case"EEEE":case"EEE":case"EE":case"E":case"eeee":case"eee":case"ee":case"e":g=c[P];case"yyyy":case"yyy":case"yy":case"y":I>1&&M.length>I&&(h[T]=M.substr(I),M=M.substr(0,I),u++),m=parseInt(M),_=4==M.length;break;case"MMMM":case"MMM":f=!0,y=-1;for(var D=M.toLowerCase(),R="MMMM"==c[P]?s.months:s.monthsAbbr,A=0;A<12;A++)if(0==R[A].toLowerCase().indexOf(D)){y=A;break}if(y>-1)break;case"MM":case"M":f=!0,I>1&&M.length>I&&(h[T]=M.substr(I),M=M.substr(0,I),u++),y=parseInt(M)-1;break;case"dddd":case"ddd":d=!0;break;case"dd":case"d":I>1&&M.length>I&&(h[T]=M.substr(I),M=M.substr(0,I),u++),b=parseInt(M),p=!0;break;case"hh":case"h":I>1&&M.length>I&&(h[T]=M.substr(I),M=M.substr(0,I),u++),v=12==(v=parseInt(M))?0:v;break;case"HH":I>1&&M.length>I&&(h[T]=M.substr(I),M=M.substr(0,I),u++),v=parseInt(M);break;case"H":v=parseInt(M);break;case"mm":case"m":I>1&&M.length>I&&(h[T]=M.substr(I),M=M.substr(0,I),u++),w=parseInt(M);break;case"ss":case"s":I>1&&M.length>I&&(h[T]=M.substr(I),M=M.substr(0,I),u++),C=parseInt(M);break;case"fffffff":case"FFFFFFF":case"ffffff":case"FFFFFF":case"fffff":case"FFFFF":case"ffff":case"FFFF":case"fff":case"FFF":case"ff":case"FF":case"f":case"F":x=parseInt(M)/Math.pow(10,I-3);break;case"tt":case"t":M=M.toUpperCase(),v<12&&s.pm.indexOf(M)>-1&&(v+=12);break;case"q":case"Q":case"u":case"U":S=parseInt(M);break;case"ggg":case"gg":case"g":if(E=s.eras.length>1?t._getEra(M,s):null,s.eras.length>0&&!E)return null;break;case"/":case":":if(M&&M!=s[c[P]])return null;break;case s["/"]:case s[":"]:if(M&&M!=c[P])return null;break;case"K":break;default:t._unquote(c[P]).trim()!=M.trim()&&u++}}if(f&&p&&(isNaN(v)&&(v=0),isNaN(w)&&(w=0),isNaN(C)&&(C=0)),y<0||y>11||isNaN(y)||b<1||b>31||isNaN(b)||v<0||v>=24||isNaN(v)||w<0||w>=60||isNaN(w)||C<0||C>=60||isNaN(C))return null;if(h.length+u>c.length)return null;if(g){if(!f)return null;var k=Te.Globalize.calendar;if(ut(k.fiscalYearOffsets)){var O="E"==g[0],L=y-k.fiscalYearOffsets[O?0:1];m+=L>11?-1:L<0?1:0}}if(d&&!p)return null;if(!f&&S>=1&&S<=4&&(y=3*(S-1)),isNaN(m)||m<0)m=n?n.getFullYear():(new Date).getFullYear();else if(E&&E.start)m=m+E.start.getFullYear()-1;else if(m<100&&!_){var j=ot(s.twoDigitYearMax)?s.twoDigitYearMax:2029;j>99&&(m+=m+2e3<=j?2e3:1900)}return(r=be.newDate(m,y,b,v,w+0,C,x)).getMonth()!=y||r.getDate()!=b||isNaN(r.getTime())?null:r},t.getFirstDayOfWeek=function(){return Te.Globalize.calendar.firstDay||0},t.getNumberDecimalSeparator=function(){return Te.Globalize.numberFormat["."]||"."},t._toFixedStr=function(t,e){var i=t.toString(),n=i.indexOf("."),r=e-(i.length-n)+1,o=i.indexOf("e")>-1;return!o&&n>-1&&r>=0?i+Array(r+1).join("0"):(n>-1&&!o&&"5"==i[i.length-1]&&(t=+(Math.round(+(Math.abs(t)+"e"+e))+"e"+-e)*(t<0?-1:1)),t.toFixed(e))},t._unquote=function(t){return t.length>1&&t[0]==t[t.length-1]&&("'"==t[0]||'"'==t[0])?t.substr(1,t.length-2):t},t._parseNumericFormat=function(e){var i=t._numFormatInfo[e];if(!i){var n=e&&e.match(/(\"(.*?)\"\s*)?([a-z]+)\s*(\d*)\s*(,*)(\s*\"(.*?)\"\s*)?(.*)/i)||[],r=n[3]?n[3]:"n";r.length>1&&(n=[],r="n"),i={prefix:n[2]||"",spec:r.toLowerCase(),specRaw:r,prec:n[4]?parseInt(n[4]):null,scale:n[5]?3*n[5].length:0,suffix:n[7]||"",curr:n[8]||null},t._numFormatInfo[e]=i}return i},t._parseDateFormat=function(e){var i=t._dateFormatParts[e];if(!i){if(i=[],e){var n=void 0,r=void 0;for(n=0;n>-1&&n<e.length;n++){var o=e[n];if(("'"==o||'"'==o)&&(r=e.indexOf(o,n+1))>-1)i.push(e.substring(n,r+1)),n=r;else if("\\"==o&&n<e.length-1)n++,i.push('"'+e[n]+'"');else{for(r=n+1;r<e.length&&e[r]==o;r++);i.push(e.substring(n,r)),n=r-1}}}t._dateFormatParts[e]=i}return i},t._formatDatePart=function(e,i,n){var r,o=Te.Globalize.calendar,s=null,a=0,l=0,h=n.length;switch(n){case"yyyy":case"yyy":case"yy":case"y":case"EEEE":case"EEE":case"EE":case"E":case"eeee":case"eee":case"ee":case"e":a=(r="E"==n[0]?be.toFiscal(e,!0):"e"==n[0]?be.toFiscal(e,!1):e).getFullYear(),o.eras.length>1&&i.indexOf("g")>-1&&(s=t._getEra(e,o))&&(a=ct(s.start)?a-s.start.getFullYear()+1:Math.abs(a));var c=n.length<3?a%100:3==n.length?a%1e3:a;return t._zeroPad(c,n.length);case"MMMMM":return o.monthsAbbr[e.getMonth()][0];case"MMMM":return o.months[e.getMonth()];case"MMM":return o.monthsAbbr[e.getMonth()];case"MM":case"M":return t._zeroPad(e.getMonth()+1,h);case"dddd":return o.days[e.getDay()];case"ddd":return o.daysAbbr[e.getDay()];case"dd":return t._zeroPad(e.getDate(),2);case"d":return e.getDate().toString();case"hh":case"h":return t._zeroPad(t._h12(e),h);case"HH":case"H":return t._zeroPad(e.getHours(),h);case"mm":case"m":return t._zeroPad(e.getMinutes(),h);case"ss":case"s":return t._zeroPad(e.getSeconds(),h);case"fffffff":case"FFFFFFF":case"ffffff":case"FFFFFF":case"fffff":case"FFFFF":case"ffff":case"FFFF":case"fff":case"FFF":case"ff":case"FF":case"f":case"F":return l=e.getMilliseconds()*Math.pow(10,h-3),"f"==n[0]?t._zeroPad(l,h):l.toFixed(0);case"tt":return e.getHours()<12?o.am[0]:o.pm[0];case"t":return e.getHours()<12?o.am[1]:o.pm[1];case"q":case"Q":return(Math.floor(e.getMonth()/3)+1).toString();case"u":case"U":return r=be.toFiscal(e,"U"==n),(Math.floor(r.getMonth()/3)+1).toString();case"ggg":case"gg":case"g":if(o.eras.length>1&&(s=t._getEra(e,o))){if(nt(s))return s;switch(n){case"gg":return s.name[0];case"g":return s.symbol;default:return s.name}}return o.eras[0];case":":case"/":return o[n];case"K":var u=e.toString().match(/(\+|\-)(\d{2})(\d{2})/);return u?u[1]+u[2]+u[3]:"";case"zzz":case"zz":case"z":var d=-e.getTimezoneOffset(),p=Math.abs(d),f=t.formatNumber,_=void 0;switch(n){case"zzz":_=f(p/60,"d2",!1,!0)+o[":"]+f(p%60,"d2",!1,!0);break;case"zz":_=f(p/60,"d2",!1,!0);break;case"z":_=f(p/60,"d1",!1,!0)}return(d>=0?"+":"-")+_}return h>1&&n[0]==n[h-1]&&('"'==n[0]||"'"==n[0])?n.substr(1,h-2):n},t._getEra=function(t,e){if(e.eras){var i=e.eras,n=e.eras.length;if(ct(t)){if(nt(i[0]))return i[t.getFullYear()>=0?0:1];if(ct(i[0].start)){for(var r=0;r<n;r++)if(t>=i[r].start)return i[r];return i[n-1]}}else if(nt(t)&&t.length>0)for(t=t.toLowerCase(),r=0;r<n;r++){var o=i[r];if(nt(o)){if(0==o.toLowerCase().indexOf(t))return o}else if(o.name&&0==o.name.toLowerCase().indexOf(t)||o.symbol&&0==o.symbol.toLowerCase().indexOf(t))return o}}return null},t._expandFormat=function(t){return Te.Globalize.calendar.patterns[t]||t},t._zeroPad=function(t,e){var i=t.toFixed(0),n=e-i.length+1;return n>0?Array(n).join("0")+i:i},t._h12=function(t){var e=Te.Globalize.calendar,i=t.getHours();return e.am&&e.am[0]&&0==(i%=12)&&(i=12),i},t._shiftDecimal=function(t,e,i){if(0==e||isNaN(t))return t;var n=t.toString();if(n.indexOf("e")>-1){var r=t*Math.pow(10,e);return null!=i&&(r=parseFloat(r.toFixed(i))),r}var o=Array(Math.abs(e)+1).join("0");e<0&&(n=o+n);var s=n.indexOf(".");return s<0&&(s=(n+=".").indexOf(".")),e>0&&(n+=o),s+=e,n=(n=n.replace(".","")).substr(0,s)+"."+n.substr(s),parseFloat(n)},t._CJK="a-z"+"u00c0-u017fu3000-u30ffu4e00-u9faf".replace(/u/g,"\\u")+"u1100-u11ffu3130-u318fua960-ua97fuac00-ud7afud7b0-ud7ff".replace(/u/g,"\\u"),t._numFormatInfo={},t._dateFormatParts={},t}();function Ie(t){Te=t}function De(t,e){var i="undefined"!=typeof window?window.wijmo:null,n=i?i.culture:null,r=n?n[t]:null;Te[t]=r||e}var Re,Ae=function(){function t(t,e,i){void 0===e&&(e=""),void 0===i&&(i="_"),this._promptChar="_",this._mskArr=[],this._overWrite=!1,this._full=!0,this._inputBnd=this._input.bind(this),this._keydownBnd=this._keydown.bind(this),this._keypressBnd=this._keypress.bind(this),this._cmpstartBnd=this._cmpstart.bind(this),this._cmpendBnd=this._cmpend.bind(this),this.mask=Mt(e),this.input=t,this.promptChar=Mt(i,!1),this._connect(!0),(this._evtInput=document.createEvent("HTMLEvents")).initEvent("input",!0,!1)}return Object.defineProperty(t.prototype,"input",{get:function(){return this._tbx},set:function(t){this._connect(!1),this._tbx=t,this._connect(!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mask",{get:function(){return this._msk},set:function(t){t!=this._msk&&(this._msk=Mt(t,!0),this._parseMask(),this._valueChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"promptChar",{get:function(){return this._promptChar},set:function(t){if(t!=this._promptChar){Pt(1==(t=Mt(t,!1)).length,"promptChar must be a string with length 1.");for(var e=this._tbx,i=e.value,n="",r=this._mskArr,o=this._promptChar,s=0;s<i.length;s++){var a=r[s],l=i[s];a&&a.literal||l!==o||(l=t),n+=l}e.value=n,this._promptChar=t}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"overwriteMode",{get:function(){return this._overWrite},set:function(t){this._overWrite=Rt(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maskFull",{get:function(){return this._full},enumerable:!0,configurable:!0}),t.prototype.getMaskRange=function(){return this._mskArr.length?[this._firstPos,this._lastPos]:[0,this._tbx.value.length-1]},t.prototype.getRawValue=function(){var t=this._tbx?this._tbx.value:"";if(!this.mask)return t;for(var e="",i=0;i<this._mskArr.length&&i<t.length;i++)this._mskArr[i].literal||t[i]==this._promptChar||(e+=t[i]);return e},t.prototype.refresh=function(){this._parseMask(),this._valueChanged()},t.prototype._input=function(t){var e=this;this._msk&&!this._composing&&t!=this._evtInput&&(t.preventDefault(),t.stopImmediatePropagation(),setTimeout((function(){e._valueChanged(),e._tbx&&e._tbx.dispatchEvent(e._evtInput)})))},t.prototype._keydown=function(t){if(t.keyCode==W.Back){var e=this._tbx.selectionStart,i=this._tbx.selectionEnd;if(e<=this._firstPos&&i==e)return t.preventDefault(),void(this._backSpace=!1)}this._backSpace=t.keyCode==W.Back},t.prototype._keypress=function(t){t.ctrlKey||t.metaKey||t.altKey||this._composing||!this._preventKey(t.charCode)||t.preventDefault()},t.prototype._cmpstart=function(t){this._composing=!0},t.prototype._cmpend=function(t){var e=this;this._composing&&(this._composing=!1,setTimeout((function(){var t=e._tbx;t&&e._valueChanged()&&t.dispatchEvent(e._evtInput)})))},t.prototype._preventKey=function(t){if(t&&this._mskArr.length){var e=this._tbx,i=e.selectionStart,n=String.fromCharCode(t);if(i<this._firstPos&&$t(e,i=this._firstPos),i>=this._mskArr.length)return!0;var r=this._mskArr[i];if(r.literal)this._validatePosition(i);else if(r.wildCard!=n&&!this._isCharValid(r.wildCard,n))return!0}return!1},t.prototype._connect=function(t){var e=this._tbx;e&&(Pt(e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement,"INPUT or TEXTAREA element expected."),t?(this._autoComplete=e.autocomplete,this._spellCheck=e.spellcheck,e.autocomplete="off",e.spellcheck=!1,e.addEventListener("input",this._inputBnd,!0),e.addEventListener("keydown",this._keydownBnd,!0),e.addEventListener("keypress",this._keypressBnd,!0),e.addEventListener("compositionstart",this._cmpstartBnd,!0),e.addEventListener("compositionend",this._cmpendBnd,!0),e.addEventListener("blur",this._cmpendBnd,!0),this._valueChanged()):(e.autocomplete=this._autoComplete,e.spellcheck=this._spellCheck,e.removeEventListener("input",this._inputBnd,!0),e.removeEventListener("keydown",this._keydownBnd,!0),e.removeEventListener("keypress",this._keypressBnd,!0),e.removeEventListener("compositionstart",this._cmpstartBnd,!0),e.removeEventListener("compositionend",this._cmpendBnd,!0),e.removeEventListener("blur",this._cmpendBnd,!0)))},t.prototype._valueChanged=function(){if(!this._tbx||!this._msk)return!1;var t=this._tbx,e=t.selectionStart,i=e>0?t.value[e-1]:"",n=t.value;t.value=this._applyMask(),""==n&&(e=this._firstPos+1);var r=e>0?t.value[e-1]:"";return e>0&&r==this._promptChar&&i!=this.promptChar&&e--,e==n.length&&(e=this._matchEnd),this._validatePosition(e),n!=t.value},t.prototype._applyMask=function(){var t=this._tbx,e=t.value;if(this._full=!0,this._matchEnd=0,!this._msk)return e;if(!e&&!t.required)return e;if(this._overWrite&&e.length==this.mask.length+1){var i=t.selectionStart;t==document.activeElement&&t.selectionEnd==i&&(e=e.substr(0,i)+e.substr(i+1))}e=this._handleVagueLiterals(e);for(var n="",r=0,o=this._promptChar,s=0;s<this._mskArr.length;s++){var a=this._mskArr[s],l=a.literal;if(l&&l==e[r]&&r++,a.wildCard){if(l=o,e){for(var h=r;h<e.length;h++)if(this._isCharValid(a.wildCard,e[h])){switch(l=e[h],a.charCase){case">":l=l.toUpperCase();break;case"<":l=l.toLowerCase()}l!=o&&(this._matchEnd=n.length+1);break}r=h+1}l==o&&(this._full=!1)}n+=l}return n},t.prototype._handleVagueLiterals=function(t){if(t.length>this._mskArr.length+1)return t;var e=t.length-this._mskArr.length;if(0!=e&&t.length>1){for(var i=-1,n=this._tbx,r=n==ee()?n.selectionStart:n.value.length,o=Math.max(0,r-e);o<this._mskArr.length;o++)if(this._mskArr[o].vague){i=o;break}if(i>-1)if(e<0){var s=Array(1-e).join(this._promptChar),a=i+e;a>-1&&(t=t.substr(0,a)+s+t.substr(a))}else{for(;i>0&&this._mskArr[i-1].literal;)i--;t=t.substr(0,i)+t.substr(i+e)}}return t},t.prototype._isCharValid=function(e,i){if(i==this._promptChar)return!0;switch(e){case"0":return this._isDigit(i);case"9":return this._isDigit(i)||" "==i;case"#":return this._isDigit(i)||" "==i||"+"==i||"-"==i;case"L":return this._isLetter(i);case"l":return this._isLetter(i)||" "==i;case"A":return this._isDigit(i)||this._isLetter(i);case"a":return this._isDigit(i)||this._isLetter(i)||" "==i;case"":return i>=""&&i<="";case"":case"":return!(""==e&&t._X_DBCS_BIG_HIRA.indexOf(i)>-1)&&i>=""&&i<="";case"":case"":return!(""==e&&t._X_DBCS_BIG_KATA.indexOf(i)>-1)&&i>=""&&i<="";case"":return!(i>=""&&i<="")&&(i<="!"||i>="");case"H":return i>="!"&&i<=""||i>=""&&i<="";case"K":case"N":return!("N"==e&&t._X_SBCS_BIG_KATA.indexOf(i)>-1)&&i>=""&&i<=""}return!1},t.prototype._isDigit=function(t){return t>="0"&&t<="9"},t.prototype._isLetter=function(t){return t>="a"&&t<="z"||t>="A"&&t<="Z"},t.prototype._validatePosition=function(t){var e=this._mskArr;if(this._backSpace)for(;t>0&&t<e.length&&e[t-1].literal;)t--;if(0==t||!this._backSpace)for(;t<e.length&&e[t].literal;)t++;ee()==this._tbx&&$t(this._tbx,t),this._backSpace=!1},t.prototype._parseMask=function(){this._mskArr=[],this._firstPos=-1,this._lastPos=-1;for(var t,e=this._msk,i="|",n=0;e&&n<e.length;n++)switch(e[n]){case"0":case"9":case"#":case"A":case"a":case"L":case"l":case"":case"":case"":case"":case"":case"":case"K":case"N":case"H":this._firstPos<0&&(this._firstPos=this._mskArr.length),this._lastPos=this._mskArr.length,this._mskArr.push(new ke(e[n],i));break;case".":case",":case":":case"/":case"$":switch(e[n]){case".":case",":t=Te.Globalize.numberFormat[e[n]];break;case":":case"/":t=Te.Globalize.calendar[e[n]];break;case"$":t=Te.Globalize.numberFormat.currency.symbol}for(var r=0;r<t.length;r++)this._mskArr.push(new ke(t[r]));break;case"<":case">":case"|":i=e[n];break;case"\\":n<e.length-1&&n++,this._mskArr.push(new ke(e[n]));break;default:this._mskArr.push(new ke(e[n]))}for(n=0;n<this._mskArr.length;n++){var o=this._mskArr[n];if(o.literal)for(r=0;r<n;r++){var s=this._mskArr[r];if(s.wildCard&&this._isCharValid(s.wildCard,o.literal)){o.vague=!0;break}}}},t._X_DBCS_BIG_HIRA="",t._X_DBCS_BIG_KATA="",t._X_SBCS_BIG_KATA="",t}(),ke=function(t,e){e?(this.wildCard=t,this.charCase=e):this.literal=t};function Oe(t,e,i){var n=0,r=0,o=0,s=0,a=null,l=null,h=null,c=i?new F(i):null;if((t=jt(t,Re))==Re.CntAll)return e.length;for(var u=0;u<e.length;u++){var d=e[u];if(c&&(d=c.getValue(d)),null!=d){if(t==Re.First)return d;n++,(null==a||d<a)&&(a=d),(null==l||d>l)&&(l=d),h=d,ot(d)&&!isNaN(d)?(r++,o+=d,s+=d*d):at(d)&&(r++,1==d&&(o++,s++))}}var p=0==r?0:o/r;switch(t){case Re.Avg:return p;case Re.Cnt:return n;case Re.Max:return l;case Re.Min:return a;case Re.Rng:return l-a;case Re.Sum:return o;case Re.VarPop:return r<=1?0:s/r-p*p;case Re.StdPop:return r<=1?0:Math.sqrt(s/r-p*p);case Re.Var:return r<=1?0:(s/r-p*p)*r/(r-1);case Re.Std:return r<=1?0:Math.sqrt((s/r-p*p)*r/(r-1));case Re.Last:return h}throw"Invalid aggregate type."}!function(t){t[t.None=0]="None",t[t.Sum=1]="Sum",t[t.Cnt=2]="Cnt",t[t.Avg=3]="Avg",t[t.Max=4]="Max",t[t.Min=5]="Min",t[t.Rng=6]="Rng",t[t.Std=7]="Std",t[t.Var=8]="Var",t[t.StdPop=9]="StdPop",t[t.VarPop=10]="VarPop",t[t.CntAll=11]="CntAll",t[t.First=12]="First",t[t.Last=13]="Last"}(Re||(Re={}));var Le=function(t){function e(){var e=this;return je?e.length=0:e=t.call(this)||this,e}return o(e,t),e}(Array),je=!0;try{Le.prototype=Array.prototype,je=Le.prototype===Array.prototype}catch(H){je=!1}var Ne="undefined"!=typeof window?window.Symbol:null;!je&&Ne&&Ne.species&&Object.defineProperty(Le,Ne.species,{get:function(){return Array},enumerable:!1,configurable:!1});var He,Fe=function(t){function e(e){var i=t.call(this)||this;if(i._updating=0,i.collectionChanged=new z,e){e=Ot(e),i._updating++;for(var n=0;n<e.length;n++)i.push(e[n]);i._updating--}return i}return o(e,t),e.prototype.push=function(){for(var e=this,i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];return i.forEach((function(i){t.prototype.push.call(e,i),e._raiseCollectionChanged(N.Add,i,e.length-1)})),this.length},e.prototype.shift=function(){var e=t.prototype.shift.call(this);return this._raiseCollectionChanged(N.Remove,e,0),e},e.prototype.unshift=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var n=t.prototype.unshift.apply(this,e);return 1==e.length?this._raiseCollectionChanged(N.Add,e[0],0):this._raiseCollectionChanged(),n},e.prototype.pop=function(){var e=t.prototype.pop.call(this);return this._raiseCollectionChanged(N.Remove,e,this.length),e},e.prototype.splice=function(e,i){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var o,s=N,a=this._raiseCollectionChanged.bind(this);return i&&n.length?(o=t.prototype.splice.apply(this,[e,i].concat(n)),1==i&&1==n.length?a(s.Change,n[0],e):a()):n.length?(o=t.prototype.splice.apply(this,[e,0].concat(n)),1==n.length?a(s.Add,n[0],e):a()):(o=t.prototype.splice.call(this,e,i),1==i?a(s.Remove,o[0],e):a()),o},e.prototype.slice=function(e,i){return t.prototype.slice.call(this,e,i)},e.prototype.indexOf=function(e,i){return t.prototype.indexOf.call(this,e,i)},e.prototype.sort=function(e){var i=t.prototype.sort.call(this,e);return this._raiseCollectionChanged(),i},e.prototype.insert=function(t,e){this.splice(t,0,e)},e.prototype.remove=function(t){var e=this.indexOf(t);return e>-1&&this.removeAt(e),e>-1},e.prototype.removeAt=function(t){this.splice(t,1)},e.prototype.setAt=function(t,e){t>=this.length&&(this.length=t+1),this.splice(t,1,e)},e.prototype.clear=function(){this.length&&this.splice(0,this.length)},e.prototype.beginUpdate=function(){this._updating++},e.prototype.endUpdate=function(){this._updating--,this._updating<=0&&this._raiseCollectionChanged()},Object.defineProperty(e.prototype,"isUpdating",{get:function(){return this._updating>0},enumerable:!0,configurable:!0}),e.prototype.deferUpdate=function(t){try{this.beginUpdate(),t()}finally{this.endUpdate()}},e.prototype.implementsInterface=function(t){return"INotifyCollectionChanged"==t},e.prototype.onCollectionChanged=function(t){void 0===t&&(t=X.reset),this.isUpdating||this.collectionChanged.raise(this,t)},e.prototype._raiseCollectionChanged=function(t,e,i){if(void 0===t&&(t=N.Reset),!this.isUpdating){var n=new X(t,e,i);this.onCollectionChanged(n)}},e}(Le);!function(t){t[t.Natural=0]="Natural",t[t.First=1]="First",t[t.Last=2]="Last"}(He||(He={}));var Be=function(){function t(t,e){var i=this;this._srcRaw=null,this._src=null,this._ncc=null,this._view=null,this._pgView=null,this._groups=null,this._fullGroups=null,this._digest="",this._idx=-1,this._filter=null,this._filters=new Fe,this._srtDsc=new Fe,this._grpDesc=new Fe,this._newItem=null,this._edtItem=null,this._edtClone=null,this._committing=!1,this._canceling=!1,this._pendingRefresh=!1,this._pendingRemove=!1,this._pgSz=0,this._pgIdx=0,this._updating=0,this._stableSort=!1,this._srtNulls=He.Last,this._canFilter=!0,this._canGroup=!0,this._canSort=!0,this._canAddNew=!0,this._canCancelEdit=!0,this._canRemove=!0,this._canChangePage=!0,this._refreshOnEdit=!0,this._trackChanges=!1,this._chgAdded=new Fe,this._chgRemoved=new Fe,this._chgEdited=new Fe,this._orgVals=window.Map?new Map:null,this._srtCvt=null,this._srtCmp=null,this._getError=null,this._keepCurrentItem=null,this._initializing=!1,this.collectionChanged=new z,this.sourceCollectionChanging=new z,this.sourceCollectionChanged=new z,this.currentChanged=new z,this.currentChanging=new z,this.pageChanged=new z,this.pageChanging=new z,this._srtDsc.collectionChanged.addHandler((function(){i._srtDsc.forEach((function(t){Pt(t instanceof q,"sortDescriptions array must contain SortDescription objects.")})),i.canSort&&i._commitAndRefresh()})),this._grpDesc.collectionChanged.addHandler((function(){i._grpDesc.forEach((function(t){Pt(t instanceof Z,"groupDescriptions array must contain GroupDescription objects.")})),i.canGroup&&i._commitAndRefresh()})),this._filters.collectionChanged.addHandler((function(){i._filters.forEach((function(t){Pt(lt(t),"filters array must contain IPredicate functions.")})),i.canFilter&&i._commitAndRefresh()})),this.sourceCollection=t||new Fe,e&&(this._initializing=!0,this.deferUpdate((function(){Et(i,e)})),this._initializing=!1),null==this._keepCurrentItem&&(this._keepCurrentItem=!0)}return t.prototype._copy=function(t,e){switch(t){case"sortDescriptions":var i=this.sortDescriptions;return i.deferUpdate((function(){i.clear(),Ot(e).forEach((function(t){nt(t)?t=new q(t,!0):t instanceof q||!t.property||(t=new q(t.property,t.ascending)),i.push(t)}))})),!0;case"groupDescriptions":var n=this.groupDescriptions;return n.deferUpdate((function(){n.clear(),e.forEach((function(t){nt(t)&&(t=new $(t)),n.push(t)}))})),!0;case"currentItem":return this.currentItem=e,!0}return!1},Object.defineProperty(t.prototype,"calculatedFields",{get:function(){return this._calcFields},set:function(t){if(t&&!window.Proxy&&(console.warn("** Calculated fields require Proxy (see https://www.npmjs.com/package/proxy-polyfill)."),t=null),t!=this._calcFields){this._calcFields=t;var e=this._srcRaw;this._srcRaw=null,this.sourceCollection=e}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"newItemCreator",{get:function(){return this._itemCreator},set:function(t){this._itemCreator=kt(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sortConverter",{get:function(){return this._srtCvt},set:function(t){t!=this._srtCvt&&(this._srtCvt=kt(t,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sortComparer",{get:function(){return this._srtCmp},set:function(t){t!=this._srtCmp&&(this._srtCmp=kt(t,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"useStableSort",{get:function(){return this._stableSort},set:function(t){t!=this._stableSort&&(this._stableSort=Rt(t),this.refresh())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sortNulls",{get:function(){return this._srtNulls},set:function(t){(t=jt(t,He))!=this._srtNulls&&(this._srtNulls=t,this.refresh())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sortNullsFirst",{get:function(){return this.sortNulls!=He.Last},set:function(t){Tt("sortNullsFirst","sortNulls"),this.sortNulls=Rt(t)?He.First:He.Last},enumerable:!0,configurable:!0}),t.prototype.getAggregate=function(t,e,i){return Oe(t,i?this._pgView:this._view,e)},Object.defineProperty(t.prototype,"trackChanges",{get:function(){return this._trackChanges},set:function(t){this._trackChanges=Rt(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"refreshOnEdit",{get:function(){return this._refreshOnEdit},set:function(t){this._refreshOnEdit=Rt(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"itemsAdded",{get:function(){return this._chgAdded},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"itemsRemoved",{get:function(){return this._chgRemoved},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"itemsEdited",{get:function(){return this._chgEdited},enumerable:!0,configurable:!0}),t.prototype.clearChanges=function(){this._chgAdded.clear(),this._chgRemoved.clear(),this._chgEdited.clear(),this._orgVals&&this._orgVals.clear()},t.prototype.implementsInterface=function(t){switch(t){case"ICollectionView":case"IEditableCollectionView":case"IPagedCollectionView":case"INotifyCollectionChanged":return!0}return!1},Object.defineProperty(t.prototype,"getError",{get:function(){return this._getError},set:function(t){this._getError!=t&&(this._getError=kt(t),this._raiseCollectionChanged())},enumerable:!0,configurable:!0}),t.prototype.onCollectionChanged=function(t){void 0===t&&(t=X.reset),t.action!=N.Change||this._committing||this._canceling||t.item==this.currentEditItem||t.item==this.currentAddItem||this._trackItemChanged(t.item),this._updating||this.collectionChanged.raise(this,t)},t.prototype._raiseCollectionChanged=function(t,e,i){void 0===t&&(t=N.Reset);var n=new X(t,e,i);this.onCollectionChanged(n)},t.prototype.onSourceCollectionChanging=function(t){return this.sourceCollectionChanging.raise(this,t),!t.cancel},t.prototype.onSourceCollectionChanged=function(t){this.sourceCollectionChanged.raise(this,t)},Object.defineProperty(t.prototype,"canFilter",{get:function(){return this._canFilter},set:function(t){this._canFilter=Rt(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canGroup",{get:function(){return this._canGroup},set:function(t){this._canGroup=Rt(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canSort",{get:function(){return this._canSort},set:function(t){this._canSort=Rt(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentItem",{get:function(){return this._pgView&&this._idx>-1&&this._idx<this._pgView.length?this._pgView[this._idx]:null},set:function(t){this.moveCurrentTo(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentPosition",{get:function(){return this._idx},set:function(t){this.moveCurrentToPosition(It(t))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"filter",{get:function(){return this._filter},set:function(t){this._filter!=t&&(this._filter=kt(t),this.canFilter&&this.refresh())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"filters",{get:function(){return this._filters},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"groupDescriptions",{get:function(){return this._grpDesc},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"groups",{get:function(){return this._groups},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isEmpty",{get:function(){return!this._pgView||!this._pgView.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sortDescriptions",{get:function(){return this._srtDsc},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sourceCollection",{get:function(){return this._src},set:function(t){if(t!=this._srcRaw){if(!this.onSourceCollectionChanging(new G))return;var e=this.currentPosition;this.commitEdit(),null!=this._ncc&&this._ncc.collectionChanged.removeHandler(this._sourceChanged),this._srcRaw=t,this._src=Ot(t,!1),this._calcFields&&(this._src=k(this._src,this._calcFields)),this._ncc=et(this._src,"INotifyCollectionChanged"),this._ncc&&this._ncc.collectionChanged.addHandler(this._sourceChanged,this),this.clearChanges(),this.refresh(),this.moveCurrentToFirst(),this.onSourceCollectionChanged(),this.currentPosition<0&&e>-1&&this.onCurrentChanged()}},enumerable:!0,configurable:!0}),t.prototype._sourceChanged=function(t,e){this._updating<=0&&this.refresh()},t.prototype.contains=function(t){return this._pgView.indexOf(t)>-1},t.prototype.moveCurrentTo=function(t){return this.moveCurrentToPosition(this._pgView.indexOf(t))},t.prototype.moveCurrentToFirst=function(){return this.moveCurrentToPosition(0)},t.prototype.moveCurrentToLast=function(){return this.moveCurrentToPosition(this._pgView.length-1)},t.prototype.moveCurrentToPrevious=function(){return this._idx>0&&this.moveCurrentToPosition(this._idx-1)},t.prototype.moveCurrentToNext=function(){return this.moveCurrentToPosition(this._idx+1)},t.prototype.moveCurrentToPosition=function(t){if(t>=-1&&t<this._pgView.length&&t!=this._idx){var e=new G;if(this.onCurrentChanging(e)){var i=this._pgView[t],n=O(i),r=this._edtItem,o=this._newItem;r&&r!=i&&r!=n?this.commitEdit():o&&o!=i&&o!=n&&this.commitNew(),this._idx=t,this.onCurrentChanged()}}return this._idx==t},t.prototype.refresh=function(){if(this._newItem||this._edtItem||this._updating>0)this._pendingRefresh=!0;else{var t=this.currentItem;this._performRefresh(),this.onCollectionChanged(),t==this.currentItem||this._initializing||this.onCurrentChanged()}},t.prototype._commitAndRefresh=function(){this.currentEditItem||this.currentAddItem?(this._pendingRefresh=!0,this.commitEdit()):this.refresh()},t.prototype._performRefresh=function(){if(this._updating>0)this._pendingRefresh=!0;else{this._pendingRefresh=!1,this._pendingRemove=!1;var t=this.currentItem;this._view=this._src?this._performFilter(this._src):[],this.canSort&&this._srtDsc.length>0&&(this._view==this._src&&(this._view=this._src.slice()),this._performSort(this._view)),this._groups=this.canGroup?this._createGroups(this._view):null,this._fullGroups=this._groups,this._groups&&(this._view=this._mergeGroupItems(this._groups)),this._pgIdx=St(this._pgIdx,0,this.pageCount-1),this._pgView=this._getPageView(),this._groups&&this.pageCount>1&&(this._groups=this._createGroups(this._pgView),this._mergeGroupItems(this._groups));var e=this._keepCurrentItem&&null!=t?this._pgView.indexOf(t):-1;e<0&&(e=Math.min(this._idx,this._pgView.length-1)),this._idx=e,this._digest=this._getGroupsDigest(this.groups)}},t.prototype._performSort=function(t){if(this._stableSort){var e=t.map((function(t,e){return{item:t,index:e}})),i=this._compareItems();e.sort((function(t,e){var n=i(t.item,e.item);return 0==n?t.index-e.index:n}));for(var n=0;n<t.length;n++)t[n]=e[n].item}else t.sort(this._compareItems())},t.prototype._compareItems=function(){var e=this,i=this._srtDsc,n=this._srtCvt,r=this._srtCmp,o=t._collator,s=!0,a=0;return function(t,l){for(var h=0;h<i.length;h++){var c=i[h],u=c._bnd.getValue(t),d=c._bnd.getValue(l);if(n&&(u=n(c,t,u,s),d=n(c,l,d,!1),s=!1),r&&null!=(a=r(u,d))){if(0!=a)return c.ascending?+a:-a}else{if(u!=u&&(u=null),d!=d&&(d=null),u!==d&&(null==u||null==d))switch(e._srtNulls){case He.First:return null==u?-1:1;case He.Last:return null==u?1:-1;default:return a=null==u?-1:1,c.ascending?+a:-a}if("string"==typeof u&&"string"==typeof d){if(o){if(0!=(a=o.compare(u,d)))return c.ascending?+a:-a;continue}var p=u.toLowerCase(),f=d.toLowerCase();p!=f&&(u=p,d=f)}if(0!=(a=u<d?-1:u>d?1:0))return c.ascending?+a:-a}}return 0}},t.prototype._performFilter=function(t){return this.canFilter&&this._filter||this._filters.length?t.filter(this._filterItem,this):t},t.prototype._filterItem=function(t){for(var e=!this.canFilter||!this._filter||this._filter(t),i=0;i<this._filters.length&&e;i++)e=this._filters[i](t);return e},t.prototype.onCurrentChanged=function(t){this.currentChanged.raise(this,t)},t.prototype.onCurrentChanging=function(t){return this.currentChanging.raise(this,t),!t.cancel},Object.defineProperty(t.prototype,"items",{get:function(){return this._pgView},enumerable:!0,configurable:!0}),t.prototype.beginUpdate=function(){this._updating++},t.prototype.endUpdate=function(t){void 0===t&&(t=!0),this._updating--,t&&(this._pendingRefresh=!0),this._updating<=0&&(this._pendingRefresh&&this.refresh(),this._pendingRemove&&(this._pendingRemove=!1,this._raiseCollectionChanged()))},Object.defineProperty(t.prototype,"isUpdating",{get:function(){return this._updating>0},enumerable:!0,configurable:!0}),t.prototype.deferUpdate=function(t,e){void 0===e&&(e=!0);try{this.beginUpdate(),t()}finally{this.endUpdate(e)}},Object.defineProperty(t.prototype,"canAddNew",{get:function(){return this._canAddNew},set:function(t){t!=this._canAddNew&&(this._canAddNew=Rt(t),this._raiseCollectionChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canCancelEdit",{get:function(){return this._canCancelEdit},set:function(t){this._canCancelEdit=Rt(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canRemove",{get:function(){return this._canRemove},set:function(t){this._canRemove=Rt(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentAddItem",{get:function(){return this._newItem},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentEditItem",{get:function(){return this._edtItem},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isAddingNew",{get:function(){return null!=this._newItem},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isEditingItem",{get:function(){return null!=this._edtItem},enumerable:!0,configurable:!0}),t.prototype.editItem=function(t){t!=this._edtItem&&this.moveCurrentTo(t)&&(this.commitEdit(),this._edtItem=t,this._edtClone=this._extend({},this._edtItem))},t.prototype.commitEdit=function(){var t=this._edtItem,e=this._edtClone;if(null!=t){this._committing=!0;var i=this._getChangedFields(t,e),n=this._pendingRefresh;this._edtItem=null,this._edtClone=null;var r=this._pgView.indexOf(t),o=this._digest;if(this._needRefresh(i)&&this._refreshOnEdit&&this._performRefresh(),i&&this._trackItemChanged(t,e),this._pgView.indexOf(t)!=r||o!=this._digest||n?this._raiseCollectionChanged():this._raiseCollectionChanged(N.Change,t,r),this.commitNew(),this._committing=!1,this.sourceCollection instanceof Fe){this._updating++;var s=new X(N.Change,t);this.sourceCollection.onCollectionChanged(s),this._updating--}}},t.prototype.cancelEdit=function(){var t=this._edtItem;if(null!=t){if(this._edtItem=null,!this.canCancelEdit)return;var e=this._src.indexOf(t);e>=0&&this._edtClone&&(this._extend(this._src[e],this._edtClone),this._edtClone=null,this._canceling=!0,this._raiseCollectionChanged(N.Change,t,e),this._canceling=!1,this._pendingRefresh&&this._refreshOnEdit&&(this._performRefresh(),this._raiseCollectionChanged()))}},t.prototype.addNew=function(t,e){if(void 0===e&&(e=!1),this.commitEdit(),!this.canAddNew)return null;var i=this.sourceCollection;if(null==t&&(t=this.newItemCreator?this.newItemCreator():i&&i.length?new i[0].constructor:{}),null!=t){if(this._updating++,i.push(t),this._updating--,t=i[i.length-1],this._newItem=t,this._pgView!=this._src&&this._pgView.push(t),this.groups&&this.groups.length){var n=this.groups[this.groups.length-1];for(n.items.push(t);n.groups&&n.groups.length;)(n=n.groups[n.groups.length-1]).items.push(t)}this._raiseCollectionChanged(N.Add,t,this._pgView.length-1),this.moveCurrentTo(t),e&&this.commitNew()}return this._newItem},t.prototype.commitNew=function(){var t=this._newItem;if(null!=t){this._newItem=null;var e=this._pgView.indexOf(t),i=this._digest;if(this._refreshOnEdit&&this._performRefresh(),this._trackChanges){var n=this._chgEdited.indexOf(t);n>-1&&this._chgEdited.removeAt(n),this._chgAdded.indexOf(t)<0&&this._chgAdded.push(t)}this._pgView.indexOf(t)!=e||i!=this._digest||this.calculatedFields?this._raiseCollectionChanged():this._raiseCollectionChanged(N.Change,t,e)}},t.prototype.cancelNew=function(){var t=this._newItem;null!=t&&this.remove(t)},t.prototype.remove=function(t){var e=t==this._newItem;if(e&&(this._newItem=null),t==this._edtItem&&this.cancelEdit(),this.canRemove){var i=this._src.indexOf(t);if(i>-1){var n=this.currentItem;this._updating++,this._src.splice(i,1),this._updating--;var r=this._digest;if(this._refreshOnEdit)this._performRefresh();else{this._updating>0&&(this._pendingRemove=!0);var o=this._pgView.indexOf(t);o>=0&&this._pgView.splice(o,1)}if(this._trackChanges){var s=this._chgAdded.indexOf(t);s>-1&&this._chgAdded.removeAt(s);var a=this._chgEdited.indexOf(t);a>-1&&this._chgEdited.removeAt(a),this._chgRemoved.indexOf(t)<0&&!e&&s<0&&this._chgRemoved.push(t)}var l=this.sortDescriptions.length>0,h=this.pageSize>0&&this._pgIdx>-1;l||h||r!=this._getGroupsDigest(this.groups)?this._raiseCollectionChanged():this._raiseCollectionChanged(N.Remove,t,i),this.currentItem!==n&&this.onCurrentChanged()}}},t.prototype.removeAt=function(t){t=Dt(t),this.remove(this._pgView[t])},t.prototype._trackItemChanged=function(t,e){if(this._trackChanges){var i=this.sourceCollection;if(i&&i.indexOf(t)>-1){var n=this._orgVals,r=n?n.get(t):null;e&&!r&&n&&(n.set(t,e),r=e);var o=this._chgEdited.indexOf(t),s=N.Change;if(r&&this._sameContent(t,r)&&o>-1)return this._chgEdited.removeAt(o),void n.delete(t);if(o<0&&this._chgAdded.indexOf(t)<0)this._chgEdited.push(t);else if(o>-1){var a=new X(s,t,o);this._chgEdited.onCollectionChanged(a)}else(o=this._chgAdded.indexOf(t))>-1&&(a=new X(s,t,o),this._chgAdded.onCollectionChanged(a))}}},t.prototype._extend=function(t,e,i){for(var n in void 0===i&&(i=2),e)try{var r=e[n];i>0&&dt(r)?(t[n]={},this._extend(t[n],r,i-1)):t[n]=r}catch(t){}return t},t.prototype._getChangedFields=function(t,e,i){void 0===i&&(i=2),Pt(null!=e&&null!=t,"Two objects expected.");var n={};for(var r in e)try{this._sameValue(t[r],e[r],i)||(n[r]=!0)}catch(t){}for(var r in t)try{n[r]||this._sameValue(t[r],e[r],i)||(n[r]=!0)}catch(t){}var o=Object.keys(n);return o.length?o:null},t.prototype._sameValue=function(t,e,i){return void 0===i&&(i=2),!(t!==e&&!be.equals(t,e)&&(!dt(t)||!dt(e)||i>0&&null!=this._getChangedFields(t,e,i-1)))},t.prototype._sameContent=function(t,e){return null==this._getChangedFields(t,e)},t.prototype._needRefresh=function(t){if(this._pendingRefresh)return!0;if(!t)return!1;if(this._filter)return!0;for(var e=0;e<this._srtDsc.length;e++){var i=this._getBindingRoot(this._srtDsc[e].property);if(t.indexOf(i)>-1)return!0}for(e=0;e<this._grpDesc.length;e++){var n=this._grpDesc[e];if(!(n instanceof $))return!0;if(i=this._getBindingRoot(n.propertyName),t.indexOf(i)>-1)return!0}return!1},t.prototype._getBindingRoot=function(t){var e=t.indexOf(".");return e>-1?t.substr(0,e):t},Object.defineProperty(t.prototype,"canChangePage",{get:function(){return this._canChangePage},set:function(t){this._canChangePage=Rt(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isPageChanging",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"itemCount",{get:function(){return this._pgView.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pageIndex",{get:function(){return this._pgIdx},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pageSize",{get:function(){return this._pgSz},set:function(t){t!=this._pgSz&&(this._pgSz=Dt(t),this.refresh())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"totalItemCount",{get:function(){return this._view.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pageCount",{get:function(){return this.pageSize?Math.ceil(this.totalItemCount/this.pageSize):1},enumerable:!0,configurable:!0}),t.prototype.moveToFirstPage=function(){return this.moveToPage(0)},t.prototype.moveToLastPage=function(){return this.moveToPage(this.pageCount-1)},t.prototype.moveToPreviousPage=function(){return this.moveToPage(this.pageIndex-1)},t.prototype.moveToNextPage=function(){return this.moveToPage(this.pageIndex+1)},t.prototype.moveToPage=function(t){var e=St(t,0,this.pageCount-1);if(e!=this._pgIdx){if(!this.canChangePage)return!1;var i=new J(e);if(this.onPageChanging(i)&&this.onCurrentChanging(i)){this.commitEdit(),this.commitNew();var n=this.currentItem;this._pgIdx=e,this._pgView=this._getPageView(),this._idx=0,this.groupDescriptions&&0!=this.groupDescriptions.length?this.refresh():(this.onCollectionChanged(),n!=this.currentItem&&this.onCurrentChanged()),this.onPageChanged()}}return this._pgIdx==t},t.prototype.onPageChanged=function(t){this.pageChanged.raise(this,t)},t.prototype.onPageChanging=function(t){return this.pageChanging.raise(this,t),!t.cancel},t.prototype._getFullGroup=function(t){var e=this._getGroupByPath(this._fullGroups,t.level,t._path);return null!=e&&(t=e),t},t.prototype._getGroupByPath=function(t,e,i){if(t)for(var n=0;n<t.length;n++){var r=t[n];if(r.level==e&&r._path==i)return r;if(r.level<e&&0==i.indexOf(r._path)&&null!=(r=this._getGroupByPath(r.groups,e,i)))return r}return null},t.prototype._getPageView=function(){if(this.pageSize<=0||this._pgIdx<0)return this._view;var t=this._pgSz*this._pgIdx,e=Math.min(t+this._pgSz,this._view.length);return this._view.slice(t,e)},t.prototype._createGroups=function(t){var e=this;if(!this._grpDesc||!this._grpDesc.length)return null;var i=[],n={},r=null;return t.forEach((function(t){for(var o=i,s=e._grpDesc.length,a="",l=0;l<s;l++){var h=e._grpDesc[l],c=h.groupNameFromItem(t,l),u=l==s-1;!(r=n[a])&&it(c)&&(r={},n[a]=r);var d=e._getGroup(h,o,r,c,l,u);a+="/"+c,d._path=a,u&&d.items.push(t),o=d.groups}})),i},t.prototype._getGroupsDigest=function(t){for(var e="",i=0;null!=t&&i<t.length;i++){var n=t[i];e+="{"+n.name+":"+(n.items?n.items.length:"*"),n.groups.length>0&&(e+=",",e+=this._getGroupsDigest(n.groups)),e+="}"}return e},t.prototype._mergeGroupItems=function(t){for(var e=[],i=0;i<t.length;i++){var n=t[i];if(!n._isBottomLevel)for(var r=this._mergeGroupItems(n.groups),o=0,s=r.length;o<s;o++)n._items.push(r[o]);for(o=0,s=n._items.length;o<s;o++)e.push(n._items[o])}return e},t.prototype._getGroup=function(t,e,i,n,r,o){var s;if(i&&it(n)){if(s=i[n])return s}else for(var a=0;a<e.length;a++)if(t.namesMatch(e[a].name,n))return e[a];var l=new ze(t,n,r,o);return e.push(l),i&&(i[n]=l),l},t._collator="undefined"!=typeof window&&window.Intl&&Intl.Collator?new Intl.Collator:null,t}(),ze=function(){function t(t,e,i,n){this._gd=t,this._name=e,this._level=i,this._isBottomLevel=n,this._groups=[],this._items=[]}return Object.defineProperty(t.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"level",{get:function(){return this._level},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isBottomLevel",{get:function(){return this._isBottomLevel},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){return this._items},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"groups",{get:function(){return this._groups},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"groupDescription",{get:function(){return this._gd},enumerable:!0,configurable:!0}),t.prototype.getAggregate=function(t,e,i){var n=et(i,Be);return Oe(t,(n?n._getFullGroup(this):this).items,e)},t}(),Ve="undefined"!=typeof window&&window["wj-control-is-element"]?HTMLElement:Object,Ge=!1;try{Ge=(function(){}.prototype=Array.prototype)!==Array.prototype}catch(H){Ge=!0}var Ye=Ge||Ve!==Object,Ke=function(t){function e(){var e=this;return Ye&&(e=t.call(this)||this),e}return o(e,t),e}(Ve),We=function(t){function e(i,n,r){void 0===n&&(n=null),void 0===r&&(r=!1);var o=t.call(this)||this;o._listeners=[],o._pristine=!0,o._focus=!1,o._updating=0,o._fullUpdate=!1,o.gotFocus=new z,o.lostFocus=new z,o.invalidInput=new z,o.refreshing=new z,o.refreshed=new z,o._updateWme(),Pt(null==e.getControl(i),"Element is already hosting a control.");var s=se(i);Pt(null!=s,"Cannot find the host element."),o._orgTabIndex=s.hasAttribute("tabindex")?s.tabIndex:0,o._orgOuter=s.outerHTML,o._orgTag=s.tagName,o._orgAtts=s.attributes,"INPUT"!=s.tagName&&"SELECT"!=s.tagName||(s=o._replaceWithDiv(s)),o._e=s,s[e._CTRL_KEY]=o;var a=o.addEventListener.bind(o);if(1==r){o._szCtl=new me(s.offsetWidth,s.offsetHeight);var l=window.ResizeObserver,h=null;l&&(h=o._szObserver=new l((function(t){return o._resizeObserverCallback(t)}))),h?h.observe(s):a(window,"resize",o._handleResize.bind(o))}var c=o._handleFocusBlur.bind(o);a(s,"focus",c,!0),a(s,"blur",c,!0);var u=o._handleDisabled.bind(o);return a(s,"mousedown",u,!0),a(s,"mouseup",u,!0),a(s,"click",u,!0),a(s,"dblclick",u,!0),a(s,"wheel",u,S(!0,!0)),a(s,"keydown",(function(t){o.isDisabled&&t.keyCode!=W.Tab&&t.preventDefault()})),0==e._ctlCnt&&Ue(!0),e._ctlCnt++,o}return o(e,t),e.prototype.getTemplate=function(){for(var t=Object.getPrototypeOf(this);t;t=Object.getPrototypeOf(t)){var e=t.constructor.controlTemplate;if(e)return e}return null},e.prototype.applyTemplate=function(t,i,n,r){var o=this,s=this._e;t&&Wt(s,t);var a=null;i&&(a=ae(i,s));for(var l=s.querySelectorAll("a.wj-btn"),h=0;h<l.length;h++){var c=l[h];qt(c,"role","button",!0),qt(c,"href","",!0),qt(c,"draggable",!1,!0)}var u=s.querySelectorAll("button");for(h=0;h<u.length;h++)qt(u[h],"type","button",!0);var d=s.querySelectorAll("input"),p=1==d.length?d[0]:null;if(p){var f=e._rxInputAtts;this._copyAttributes(p,s.attributes,f),this._copyAttributes(p,this._orgAtts,f)}if(p&&s.id){for(var _=s;_.parentElement;)_=_.parentElement;var g=_.querySelector('label[for="'+s.id+'"]');if(g instanceof HTMLLabelElement){var m=ft(s.id+"_input");p.id=m,g.htmlFor=m}}if(p){var y=p.value,b=!0,v=!1,w=document.createEvent("HTMLEvents");w.initEvent("change",!0,!1),this.gotFocus.addHandler((function(){b=!1,v=!0,y=p.value})),this.addEventListener(s,"focusin",(function(t){b&&(v=!0,b=!1,y=p.value)})),this.addEventListener(p,"input",(function(){o._pristine=!1,setTimeout((function(){y=p.value}))})),this.addEventListener(p,"change",(function(t){t.isTrusted&&(y=p.value)}));var C=function(){o._containsFocus()||(b=!0,o._pristine&&(o._pristine=!1,o._updateState()),v&&y!=p.value&&(y=p.value,p.dispatchEvent(w)),v=!1)};this.addEventListener(s,"blur",(function(){C()})),this.lostFocus.addHandler((function(){C()}))}if(p?s.tabIndex=-1:s.getAttribute("tabindex")||(s.tabIndex=0),this._updateState(),n)for(var x in n){var S=n[x];if(this[x]=a.querySelector('[wj-part="'+S+'"]'),null==this[x]&&a.getAttribute("wj-part")==S&&(this[x]=a),null==this[x])throw'Missing template part: "'+S+'"';if(S==r){var E="name",P=s.attributes[E];P&&P.value&&this[x].setAttribute(E,P.value),E="accesskey",(P=s.attributes[E])&&P.value&&(this[x].setAttribute(E,P.value),s.removeAttribute(E))}}return a},e.prototype.dispose=function(){if(this._e){for(var t=this._e.querySelectorAll(".wj-control"),i=0;i<t.length;i++){var n=e.getControl(t[i]);n&&n.dispose()}this._toInv&&(clearTimeout(this._toInv),this._toInv=null),this._toFocus&&(clearTimeout(this._toFocus),this._toFocus=null);var r=this._szObserver;for(var o in r&&r.disconnect(),this.removeEventListener(),this)o.length>2&&0==o.indexOf("on")&&(a=this[o[2].toLowerCase()+o.substr(3)])instanceof z&&a.removeAllHandlers();var s=this.collectionView;if(s instanceof Be)for(var o in s){var a;(a=s[o])instanceof z&&a.removeHandler(null,this)}this._e.parentNode&&null!=this._orgOuter&&(this._e.outerHTML=this._orgOuter),this._e[e._CTRL_KEY]=null,this._e=this._orgOuter=this._orgTag=this._szObserver=null,e._ctlCnt--,0==e._ctlCnt&&Ue(!1)}},e.getControl=function(t){var i=se(t);return i?Lt(i[e._CTRL_KEY],e,!0):null},Object.defineProperty(e.prototype,"hostElement",{get:function(){return this._e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rightToLeft",{get:function(){return null==this._rtlDir&&(this._rtlDir=!!this._e&&"rtl"==getComputedStyle(this._e).direction),this._rtlDir},enumerable:!0,configurable:!0}),e.prototype.focus=function(){var t=this._e;t&&t.offsetHeight&&(this.isDisabled||!(t.tabIndex>=0)&&ne(t,0)||t.focus())},e.prototype.containsFocus=function(){return this._containsFocusImpl(ee())},e.prototype._containsFocus=function(){return this._containsFocusImpl(ie())},e.prototype._containsFocusImpl=function(t){return he(this._e,t,!0)},e.prototype.invalidate=function(t){var i=this;void 0===t&&(t=!0),this._rtlDir=null,this._fullUpdate=this._fullUpdate||t,this._toInv&&(clearTimeout(this._toInv),this._toInv=null),this.isUpdating||(this._toInv=setTimeout((function(){i.refresh(i._fullUpdate),i._toInv=null}),e._REFRESH_INTERVAL))},e.prototype.refresh=function(t){var e=this;void 0===t&&(t=!0),this.isUpdating||(this.onRefreshing(),this.refreshed.hasHandlers&&setTimeout((function(){e.onRefreshed()}))),!this.isUpdating&&this._toInv&&(clearTimeout(this._toInv),this._toInv=null,this._fullUpdate=!1),this._updateState(),this._updateWme()},e.invalidateAll=function(t){t||(t=document.body);var i=t.children;if(i)for(var n=0;n<i.length;n++)e.invalidateAll(i[n]);var r=e.getControl(t);r&&r.invalidate()},e.refreshAll=function(t){if(t||(t=document.body),t.children)for(var i=0;i<t.children.length;i++)e.refreshAll(t.children[i]);var n=e.getControl(t);n&&n.refresh()},e.disposeAll=function(t){var i=e.getControl(t);if(i)i.dispose();else if(t.children)for(var n=0;n<t.children.length;n++)e.disposeAll(t.children[n])},e.prototype.beginUpdate=function(){this._updating++},e.prototype.endUpdate=function(){this._updating--,this._updating<=0&&this.invalidate()},Object.defineProperty(e.prototype,"isUpdating",{get:function(){return this._updating>0},enumerable:!0,configurable:!0}),e.prototype.deferUpdate=function(t){try{this.beginUpdate(),t()}finally{this.endUpdate()}},Object.defineProperty(e.prototype,"isTouching",{get:function(){return e._touching},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tabOrder",{get:function(){return this._orgTabIndex},set:function(t){this._setTabOrder(t)},enumerable:!0,configurable:!0}),e.prototype._setTabOrder=function(t){var e=this._e;this._orgTabIndex=t;var i=e.querySelectorAll("input"),n=1===i.length?i[0]:null;e.tabIndex=this.isDisabled||n?-1:this._orgTabIndex,n&&(n.tabIndex=this._orgTabIndex)},Object.defineProperty(e.prototype,"isDisabled",{get:function(){return this._e&&null!=this._e.getAttribute("disabled")},set:function(t){this._setIsDisabled(t)},enumerable:!0,configurable:!0}),e.prototype._setIsDisabled=function(t){if((t=!!Rt(t,!0))!=this.isDisabled){var i=this._e;if(i){Xt(i,"wj-state-disabled",t),qt(i,"disabled",t?"disabled":null),i.tabIndex=this.isDisabled||1===i.querySelectorAll("input").length?-1:this._orgTabIndex;for(var n=i.querySelectorAll("input,textarea,button,command,fieldset,keygen,optgroup,option,select"),r=e._DSBL_KEY,o=0;o<n.length;o++){var s=n[o];if(t)s[r]=s.disabled,s.disabled=!0;else if(ce(s,".wj-control.wj-state-disabled"))s[r]=s.disabled,s.disabled=!0;else{var a=s[r];at(a)||(a=!1),s.disabled=a,delete s[r]}}}}},e.prototype.initialize=function(t){Et(this,t)},e.prototype.addEventListener=function(t,e,i,n,r){if(t){null==n&&(n=!1),at(n)&&null==r&&(e.indexOf("touch")>-1||e.indexOf("wheel")>-1)&&(r=!1);var o=at(n)&&at(r)?S(n,r):n;t.addEventListener(e,i,o),this._listeners.push({target:t,type:e,fn:i,capture:n})}},e.prototype.removeEventListener=function(t,e,i,n){for(var r=0,o=0;o<this._listeners.length;o++){var s=this._listeners[o];null!=t&&t!=s.target||null!=e&&e!=s.type||null!=i&&i!=s.fn||null!=n&&n!=s.capture||(s.target.removeEventListener(s.type,s.fn,s.capture),this._listeners.splice(o,1),o--,r++)}return r},e.prototype.onGotFocus=function(t){this.gotFocus.raise(this,t)},e.prototype.onLostFocus=function(t){this.lostFocus.raise(this,t)},e.prototype.onInvalidInput=function(t){var i=this;if(this.invalidInput.raise(this,t),t.cancel){var n=e._FOCUS_INTERVAL+50;Date.now()-e._tsInvalidInput>n+50&&(e._toInvalidInput&&clearTimeout(e._toInvalidInput),e._toInvalidInput=setTimeout((function(){e._toInvalidInput=null,e._tsInvalidInput=Date.now(),i.focus()}),n))}return this._updateState(),!t.cancel},e.prototype.onRefreshing=function(t){this.refreshing.raise(this,t)},e.prototype.onRefreshed=function(t){this.refreshed.raise(this,t)},e.prototype._getProductInfo=function(){return"B0C3,Control"},e.prototype._updateWme=function(){var t=this._getProductInfo(),i=e._toWme,n=ci;lt(n)&&!i[t]&&(i[t]=!0,n(this,e._licKey))},e.prototype._hasPendingUpdates=function(){return null!=this._toInv},e.prototype._handleResize=function(){if(this._e.parentElement){var t=new me(this._e.offsetWidth,this._e.offsetHeight);t.equals(this._szCtl)||(this._szCtl=t,(t.width||t.height)&&this.invalidate())}},e.prototype._resizeObserverCallback=function(t){t.forEach((function(t){var i=e.getControl(t.target);i&&i._handleResize()}))},e.prototype._handleFocusBlur=function(){var t=this;this._toFocus||(this._toFocus=setTimeout((function(){t._toFocus=null,t._updateFocusState()}),e._FOCUS_INTERVAL))},e.prototype._updateFocusState=function(){setTimeout((function(){for(var t=V.empty,i=document.body.querySelectorAll(".wj-state-focused"),n=0;n<i.length;n++)(a=e.getControl(i[n]))&&a._focus&&!a.containsFocus()&&(Ut(a._e,"wj-state-focus"),a._focus=!1,a._updateState(),a.onLostFocus(t));var r=ee();if(r)for(var o=!0,s=r;s;){var a;(a=e.getControl(s))&&!a._focus&&a.containsFocus()&&(o&&(Wt(s,"wj-state-focus"),o=!1),a._focus=!0,a._updateState(),a.onGotFocus(t)),s=s[e._OWNR_KEY]||s.parentNode}}))},e.prototype._updateState=function(){var t=this.hostElement;if(t){Xt(t,"wj-state-focused",this._focus),this._rtlDir="rtl"==getComputedStyle(t).direction,Xt(t,"wj-rtl",this._rtlDir);var e=t.querySelector("input");if(e instanceof HTMLInputElement){Xt(t,"wj-state-empty",0==e.value.length),Xt(t,"wj-state-readonly",e.readOnly);var i=e.validationMessage;Xt(t,"wj-state-invalid",!this._pristine&&null!=i&&i.length>0)}}},e.prototype._handleDisabled=function(t){(this.isDisabled||ce(t.target,".wj-state-disabled"))&&(t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation())},e.prototype._replaceWithDiv=function(t){var e=document.createElement("div");return t.parentElement.replaceChild(e,t),e.innerHTML=t.innerHTML,this._copyAttributes(e,t.attributes,/id|style|class/i),e},e.prototype._copyAttributes=function(t,e,i){if(t)for(var n=0;n<e.length;n++){var r=e[n].name;r.match(i)&&t.setAttribute(r,e[n].value)}},e.prototype._getKeyCode=function(t){var e=t.keyCode;if(this.rightToLeft)switch(e){case W.Right:e=W.Left;break;case W.Left:e=W.Right}return e},e._toWme={},e._ctlCnt=0,e._touching=!1,e._tsInvalidInput=0,e._REFRESH_INTERVAL=10,e._FOCUS_INTERVAL=5,e._ANIM_DEF_DURATION=400,e._ANIM_DEF_STEP=35,e._CLICK_DELAY=800,e._CLICK_REPEAT=75,e._CLIPBOARD_DELAY=100,e._POPUP_ZINDEX=1500,e._SEARCH_DELAY=500,e._HOVER_DELAY=400,e._LEAVE_DELAY=600,e._DRAG_SCROLL_EDGE=15,e._DRAG_SCROLL_STEP=20,e._CTRL_KEY="$WJ-CTRL",e._OWNR_KEY="$WJ-OWNR",e._SCRL_KEY="$WJ-SCRL",e._TTIP_KEY="$WJ-TTIP",e._DSBL_KEY="$WJ-DSBL",e._rxInputAtts=/name|tabindex|placeholder|autofocus|autocomplete|autocorrect|autocapitalize|spellcheck|readonly|minlength|maxlength|pattern|type|aria-.+/i,e}(Ke);function Ue(t){if("ontouchstart"in window||"onpointerdown"in window){var e=document,i=S(!0,!0),n=Xe,r=qe,o=t?e.addEventListener.bind(e):e.removeEventListener.bind(e);"ontouchstart"in window?(o("touchstart",n,i),o("touchend",r,i),o("touchcancel",r,i)):"onpointerdown"in window&&(o("pointerdown",n,i),o("pointerup",r,i),o("pointercancel",r,i))}}function Xe(t){null!=t.pointerType&&"touch"!=t.pointerType||(We._toTouch&&(clearTimeout(We._toTouch),We._toTouch=null),We._touching=!0)}function qe(t){if((null==t.pointerType||"touch"==t.pointerType)&&(We._toTouch=setTimeout((function(){We._toTouch=null,We._touching=!1}),900),document.querySelector("ion-app"))){var e=t.target;ce(e,".wj-dropdown-panel,.wj-dropdown")&&(e.focus(),t.stopPropagation(),t.stopImmediatePropagation())}}var Je,Ze=function(){function t(t){this._title=null,this._copyCss=!0,null!=t&&Et(this,t)}return Object.defineProperty(t.prototype,"title",{get:function(){return this._title},set:function(t){this._title=Mt(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"copyCss",{get:function(){return this._copyCss},set:function(t){this._copyCss=Rt(t)},enumerable:!0,configurable:!0}),t.prototype.addCSS=function(t){this._css||(this._css=[]),this._css.push(t)},t.prototype.append=function(t){var e=this._getDocument();if(nt(t))e.write(t);else if(t instanceof Element){t instanceof HTMLElement&&We.refreshAll(t);for(var i=t.cloneNode(!0),n=i.querySelectorAll("input"),r=0;r<n.length;r++){var o=n[r];switch(o.type){case"checkbox":qt(o,"checked",!!o.checked||null),qt(o,"indeterminate",!!o.indeterminate||null);break;case"radio":qt(o,"checked",!!o.checked||null);break;default:qt(o,"value",o.value||null)}}e.write(i.outerHTML)}else Pt(!1,"content should be an HTML string or an Element.")},t.prototype.print=function(t){var e=this;this._iframe&&(this._close(),setTimeout((function(){var i=e._iframe.contentWindow,n="onafterprint"in i&&!d();n&&(i.onafterprint=function(){e._afterPrint(t)}),y()&&null==i.document.body||!document.queryCommandSupported("print")?(i.focus(),i.print()):i.document.execCommand("print",!0,null),n||e._afterPrint(t)}),100))},t.prototype._afterPrint=function(t){document.body.removeChild(this._iframe),this._iframe=null,lt(t)&&t()},t.prototype._getDocument=function(){if(!this._iframe){var t=this._iframe=document.createElement("iframe");Wt(t,"wj-printdocument"),fe(t,{position:"fixed",left:32e3,top:32e3}),document.body.appendChild(t)}return this._iframe.contentDocument},t.prototype._close=function(){var t=this,e=this._getDocument();if(e.close(),e.title=null!=this.title?this.title:document.title,e.title&&e.title.trim()||(e.title=""),this._copyCss&&[document.head,document.body].forEach((function(e){for(var i=e.querySelectorAll("LINK"),n=0;n<i.length;n++){var r=i[n];if(r.rel.match(/stylesheet/i)&&(!r.type||r.type.match(/text\/css/i))){var o=ve(r.href,{async:!1});t._addStyle(o.responseText)}}var s=e.querySelectorAll("STYLE");for(n=0;n<s.length;n++)t._addStyle(s[n].textContent)})),this._css)for(var i=0;i<this._css.length;i++){var n=e.createElement("style"),r=ve(this._css[i],{async:!1});n.textContent=r.responseText,e.head.appendChild(n)}},t.prototype._addStyle=function(t){var e=this._getDocument(),i=e.createElement("style");i.textContent=t,e.head.appendChild(i)},t}(),$e=function(){function t(){}return t.copy=function(e){t._copyPaste(Mt(e),null)},t.paste=function(e){e=kt(e),t._copyPaste(null,e)},t._copyPaste=function(t,e){for(var i=ee(),n=ce(i,".wj-control");n&&We.getControl(n);)n=n.parentElement;if(n=n||document.body){var r=!1,o=ae('<textarea class="wj-clipboard">',n,{position:"fixed",opacity:"0"});o.onkeydown=function(t){return t.preventDefault()},o.onchange=function(t){return t.stopImmediatePropagation()},nt(t)?(o.value=t,o.select(),document.execCommand("copy")&&(r=!0)):(o.select(),lt(e)&&document.execCommand("paste")&&(e(o.value),r=!0)),setTimeout((function(){i.focus({preventScroll:!0}),(y()?setTimeout:function(t,e){return t()})((function(){return te(o)}),500),!r&&lt(e)&&e(o.value)}),We._CLIPBOARD_DELAY)}},t}(),Qe=function(){function t(t){this._isDown=!1,this._mousedownBnd=this._mousedown.bind(this),this._mouseupBnd=this._mouseup.bind(this),this._clickBnd=this._click.bind(this),this.element=t,this._connect(!0)}return Object.defineProperty(t.prototype,"element",{get:function(){return this._e},set:function(t){this._connect(!1),this._e=Lt(t,HTMLElement,!0),this._connect(!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"disabled",{get:function(){return this._disabled},set:function(t){this._disabled=Rt(t)},enumerable:!0,configurable:!0}),t.prototype._connect=function(e){var i=this;this._e&&t._startEvents.forEach((function(t){e?i._e.addEventListener(t,i._mousedownBnd):i._e.removeEventListener(t,i._mousedownBnd)}))},t.prototype._clearTimeouts=function(){this._toRepeat&&(clearTimeout(this._toRepeat),this._toRepeat=null),this._toDelay&&(clearTimeout(this._toDelay),this._toDelay=null)},t.prototype._mousedown=function(e){var i=this;this._isDown&&this._mouseup(null),this._disabled||(this._isDown=!0,t._stopEvents.forEach((function(t){document.addEventListener(t,i._mouseupBnd)})),this._clearTimeouts(),this._toDelay=setTimeout((function(){i._isDown&&(i._click(),i._toRepeat=setTimeout(i._clickBnd,We._CLICK_REPEAT))}),We._CLICK_DELAY))},t.prototype._mouseup=function(e){var i=this;this._isDown&&e&&"keydown"!=e.type&&this._clicked&&e.preventDefault(),t._stopEvents.forEach((function(t){document.removeEventListener(t,i._mouseupBnd)})),this._clearTimeouts(),this._isDown=!1,this._clicked=!1},t.prototype._click=function(){this._clicked=!0,this._clearTimeouts(),this._e&&(this._e.click(),this._isDown&&(this._toRepeat=setTimeout(this._clickBnd,We._CLICK_REPEAT)))},t._startEvents=["mousedown","touchstart"],t._stopEvents=["mouseup","mouseout","keydown","touchend","touchcancel"],t}();function ti(t,e,i,n,r,o){void 0===r&&(r=!0);var s=t.offsetHeight||t.offsetWidth,a=i;(at(i)||null==i)&&(a=i?Je.AboveLeft:Je.BelowLeft);var l=function(t){var e=document.body;if(t instanceof HTMLElement){if(!he(document.body,t))return e;for(var i=t;i;i=i.parentElement){if("DIALOG"==i.tagName||"ION-CONTENT"==i.tagName||"fixed"==getComputedStyle(i).position){e=i;break}if(ri(i)){e=i.querySelector(".ui-dialog-content")||i;break}}}return e}(e);if(function(t,e){t.offsetHeight&&t.offsetWidth&&t.parentElement==e||(fe(t,{opacity:"0",position:"fixed",left:0,top:0,transform:"",display:""}),e.appendChild(t))}(t,l),function(t,e,i){if(e instanceof HTMLElement&&i){var n=i instanceof HTMLElement?i:e,r=getComputedStyle(n);1==new Pe(r.backgroundColor).a&&fe(t,{color:r.color,backgroundColor:r.backgroundColor,fontFamily:r.fontFamily,fontSize:r.fontSize,fontWeight:r.fontWeight,fontStyle:r.fontStyle})}}(t,e,r),We.refreshAll(t),d()?requestAnimationFrame((function(){ii(t,e,a)})):ii(t,e,a),e instanceof HTMLElement&&(t[We._OWNR_KEY]=e),!s){if(function(t,e,i){var n=e instanceof MouseEvent?e.target:e;if(n instanceof HTMLElement&&n.parentElement!=document.body){var r=Date.now(),o=n.getBoundingClientRect(),s=new We(document.createElement("div"));t[We._SCRL_KEY]=s,s.addEventListener(document,"scroll",(function(a){if(a.target!=t.parentElement&&Date.now()-r>100&&he(document,n)&&!he(t,a.target)&&(a.target!=document||null!=e&&"fixed"==t.style.position)){var l=n.getBoundingClientRect(),h=Math.abs(l.left-o.left),c=Math.abs(l.top-o.top);(h>1||c>1)&&(lt(i)&&i(),ni(t,!0),s.dispose())}}),!0)}}(t,e,o),n)return _e((function(e){return t.style.opacity=e<1?e.toString():""}));t.style.opacity=""}return null}function ei(t,e,i){void 0===e&&(e=!0),void 0===i&&(i=!1);var n=null;return i?n=_e((function(i){t.style.opacity=(1-i).toString(),1==i&&(ni(t,e),t.style.opacity="")})):ni(t,e),n}function ii(t,e,i){var n=function(t,e){return e instanceof MouseEvent?e.clientX<=0&&e.clientY<=0&&e.target instanceof HTMLElement?ye.fromBoundingRect(e.target.getBoundingClientRect()):new ye(e.pageX-pageXOffset,e.pageY-pageYOffset,0,0):e instanceof ge?new ye(e.x,e.y,0,0):e instanceof HTMLElement?ye.fromBoundingRect(e.getBoundingClientRect()):e&&null!=e.top&&null!=e.left?e:null}(0,e),r=function(t){var e=document.body,i=document.documentElement,n=t.parentElement,r=new ge(e.scrollLeft||pageXOffset,e.scrollTop||pageYOffset);if(n!=e){var o=n==e?i:t.offsetParent||n;if(o==e&&(o=n),o){var s=o.getBoundingClientRect();r=new ge(o.scrollLeft-s.left,o.scrollTop-s.top)}}if(n instanceof HTMLElement){var a=getComputedStyle(n);r.x-=parseFloat(a.borderLeftWidth),r.y-=parseFloat(a.borderTopWidth)}return r}(t),o=function(t,e,i,n){var r=document.documentElement,o=r.clientWidth,s=r.clientHeight,a=Je;switch(i){case a.AboveLeft:case a.AboveRight:case a.BelowLeft:case a.BelowRight:if(e){var l=e.width;l&&(y()&&(l-=t.offsetWidth-t.clientWidth),t.style.minWidth=l+"px")}}var h=getComputedStyle(t),c=parseFloat(h.marginTop)+parseFloat(h.marginBottom),u=parseFloat(h.marginLeft)+parseFloat(h.marginRight),d=new me(t.offsetWidth+u,t.offsetHeight+c),p=new ge((o-d.width)/2,Math.round((s-d.height)/2*.7));if(e){"rtl"==h.direction&&(i=function(t){var e=Je;switch(t){case e.AboveLeft:return e.AboveRight;case e.AboveRight:return e.AboveLeft;case e.BelowLeft:return e.BelowRight;case e.BelowRight:return e.BelowLeft;case e.Left:return e.Right;case e.LeftTop:return e.RightTop;case e.LeftBottom:return e.RightBottom;case e.Right:return e.Left;case e.RightTop:return e.LeftTop;case e.RightBottom:return e.LeftBottom}return t}(i));var f=e.left,_=o-e.right;switch(p.x=e.left,i){case a.Above:case a.Below:p.x=e.left+(e.width-d.width)/2;break;case a.AboveLeft:case a.BelowLeft:p.x=e.left;break;case a.AboveRight:case a.BelowRight:p.x=e.right-d.width;break;case a.Left:case a.LeftTop:case a.LeftBottom:p.x=f>=d.width||f>=_?e.left-d.width:e.right;break;case a.RightTop:case a.RightBottom:case a.Right:p.x=_>=d.width||_>=f?e.right:e.left-d.width}var g=e.top,m=s-e.bottom;switch(i){case a.Above:case a.AboveLeft:case a.AboveRight:p.y=g>d.height||g>m?e.top-d.height:e.bottom;break;case a.Below:case a.BelowLeft:case a.BelowRight:p.y=m>d.height||m>g?e.bottom:e.top-d.height;break;case a.LeftTop:case a.RightTop:p.y=e.top;break;case a.LeftBottom:case a.RightBottom:p.y=e.bottom-d.height;break;case a.Left:case a.Right:p.y=e.bottom-d.height+(d.height-e.height)/2}}return p.x=Math.min(p.x,o-d.width),p.y=Math.min(p.y,s-d.height),p.x=Math.max(0,p.x)+n.x,p.y=Math.max(0,p.y)+n.y,p}(t,n,i,r),s={position:"absolute",zIndex:We._POPUP_ZINDEX},a=0==r.x;a?(s.left=o.x,s.top=o.y):s.transform="translate("+o.x+"px, "+o.y+"px)";var l=t.getBoundingClientRect().width;if(fe(t,s),a){var h=l-t.getBoundingClientRect().width;h>0&&(t.style.left=o.x-Math.ceil(h)+"px")}}function ni(t,e){t.style.display="none",e&&t.parentElement&&setTimeout((function(){"none"==t.style.display&&(te(t),lt(e)&&e())}),We._FOCUS_INTERVAL+50);var i=t[We._SCRL_KEY];i instanceof We&&i.dispose(),delete t[We._SCRL_KEY],delete t[We._OWNR_KEY]}function ri(t){var e=window.jQuery,i=lt(e)?e(t):null;return i&&lt(i.dialog)&&Kt(t,"ui-dialog")}!function(t){t[t.Above=0]="Above",t[t.AboveRight=1]="AboveRight",t[t.RightTop=2]="RightTop",t[t.Right=3]="Right",t[t.RightBottom=4]="RightBottom",t[t.BelowRight=5]="BelowRight",t[t.Below=6]="Below",t[t.BelowLeft=7]="BelowLeft",t[t.LeftBottom=8]="LeftBottom",t[t.Left=9]="Left",t[t.LeftTop=10]="LeftTop",t[t.AboveLeft=11]="AboveLeft"}(Je||(Je={}));var oi=function(){function t(t){this._showAutoTipBnd=this._showAutoTip.bind(this),this._hideAutoTipBnd=this._hideAutoTip.bind(this),this._mousemoveBnd=this._mousemove.bind(this),this._html=!0,this._cssClass="",this._gap=6,this._isAnimated=!1,this._position=Je.Above,this._showAtMouse=!1,this._showDelay=500,this._hideDelay=0,this._tips=[],this.popup=new z,Et(this,t)}return Object.defineProperty(t.prototype,"position",{get:function(){return this._position},set:function(t){this._position=jt(t,Je)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isAnimated",{get:function(){return this._isAnimated},set:function(t){this._isAnimated=Rt(t)},enumerable:!0,configurable:!0}),t.prototype.setTooltip=function(e,i,n){e=se(e),i=this._getContent(i);var r=this._indexOf(e);r>-1&&(this._detach(e),this._tips.splice(r,1)),i&&(this._attach(e),this._tips.push({element:e,content:i,position:n}));var o=t._eTip;o&&o[We._TTIP_KEY]==e&&(i?this._setContent(i):this._hideAutoTip())},t.prototype.getTooltip=function(t){t=se(t);for(var e=this._tips,i=0;i<e.length;i++)if(e[i].element==t)return e[i].content;return null},t.prototype.show=function(e,i,n,r){if(e=se(e),i=this._getContent(i),e){null==r&&(r=this.position);var o=t._eTip;o||(Wt(o=t._eTip=document.createElement("div"),"wj-tooltip"),o.style.visibility="none"),Wt(o,this.cssClass),this._setContent(i),o[We._TTIP_KEY]=e;var s=new si(i,e);if(this.onPopup(s),s.content&&!s.cancel){this._setContent(s.content),n||(n=ye.fromBoundingRect(e.getBoundingClientRect()));var a=this.gap,l=Je;if(a)switch(r){case l.Above:case l.AboveLeft:case l.AboveRight:case l.Below:case l.BelowLeft:case l.BelowRight:n=n.inflate(0,a);break;default:n=n.inflate(a,0)}ti(o,n,r,this.isAnimated),document.addEventListener("mousedown",this._hideAutoTipBnd)}}},t.prototype.hide=function(){var e=t._eTip;e&&(te(e),Ut(e,this.cssClass),e.innerHTML=""),document.removeEventListener("mousedown",this._hideAutoTipBnd)},t.prototype.dispose=function(){var t=this;this.isVisible&&this.hide();var e=this._tips;e.length&&(e.forEach((function(e){t._detach(e.element)})),e.splice(0,e.length)),this._clearTimeouts()},Object.defineProperty(t.prototype,"isVisible",{get:function(){var e=t._eTip;return null!=e&&null!=e.parentElement&&e.offsetWidth>0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isContentHtml",{get:function(){return this._html},set:function(t){this._html=Rt(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cssClass",{get:function(){return this._cssClass},set:function(t){this._cssClass=Mt(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"gap",{get:function(){return this._gap},set:function(t){this._gap=It(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showAtMouse",{get:function(){return this._showAtMouse},set:function(t){this._showAtMouse=Rt(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showDelay",{get:function(){return this._showDelay},set:function(t){this._showDelay=Dt(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hideDelay",{get:function(){return this._hideDelay},set:function(t){this._hideDelay=Dt(t)},enumerable:!0,configurable:!0}),t.prototype.onPopup=function(t){return this.popup&&this.popup.raise(this,t),!t.cancel},t.prototype._indexOf=function(t){for(var e=0;e<this._tips.length;e++)if(this._tips[e].element==t)return e;return-1},t.prototype._attach=function(t){t.addEventListener("mouseenter",this._showAutoTipBnd),t.addEventListener("mouseleave",this._hideAutoTipBnd),t.addEventListener("click",this._showAutoTipBnd),this.showAtMouse&&t.addEventListener("mousemove",this._mousemoveBnd)},t.prototype._detach=function(t){t.removeEventListener("mouseenter",this._showAutoTipBnd),t.removeEventListener("mouseleave",this._hideAutoTipBnd),t.removeEventListener("click",this._showAutoTipBnd),t.removeEventListener("mousemove",this._mousemoveBnd)},t.prototype._showAutoTip=function(t){var e=this;if(!t.defaultPrevented)if("click"!=t.type||We._touching){var i="mouseenter"==t.type?this._showDelay:0,n=this._hideDelay;this._clearTimeouts(),this._eMouse=t,this._toShow=setTimeout((function(){var i=e._indexOf(t.target);if(i>-1){var r=e._tips[i],o=e._eMouse,s=e._showAtMouse?new ye(o.clientX,o.clientY,0,0):null,a=r&&r.element;if(a&&(a.offsetHeight||a.offsetWidth)){var l=We.getControl(r.element);null!=l&&0==l.isVisible||(e.show(r.element,r.content,s,r.position),n>0&&(e._toHide=setTimeout((function(){e.hide()}),n)))}}}),i)}else this._hideAutoTip()},t.prototype._mousemove=function(t){this._eMouse=t},t.prototype._hideAutoTip=function(){this._clearTimeouts(),this.hide()},t.prototype._clearTimeouts=function(){this._toShow&&(clearTimeout(this._toShow),this._toShow=null),this._toHide&&(clearTimeout(this._toHide),this._toHide=null)},t.prototype._getContent=function(t){if((t=Mt(t))&&"#"==t[0]){var e=se(t);e&&(t=e.innerHTML)}return t},t.prototype._setContent=function(e){var i=t._eTip;i&&(this._html?i.innerHTML=e:i.textContent=e)},t}(),si=function(t){function e(e,i){var n=t.call(this)||this;return n._content=Mt(e),n._e=i,n}return o(e,t),Object.defineProperty(e.prototype,"tip",{get:function(){return oi._eTip},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"element",{get:function(){return this._e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"content",{get:function(){return this._content},set:function(t){this._content=Mt(t)},enumerable:!0,configurable:!0}),e}(G);Ce("wijmo",r);var ai="The Wijmo license in this application ",li={evl:"Wijmo Evaluation Version ({version})",prd:ai+"is not valid for the <b>{control}</b> control.",ver:ai+"is not valid for the version in use. The license version is <b>{licVer}</b>; the product version is <b>{version}</b>.",dmn:ai+"is not valid for the current domain. The license domain is <b>{licDomain}</b>; the current domain is <b>{domain}</b>.",exp:ai+"has expired. The license expiration date is <b>{expDate:d}</b>.",lic:ai+"is invalid.",mss:ai+"is not set.",ctc:'If you are a customer, you can <a target="_blank" rel="noopener" href="https://www.grapecity.com/licensing/wijmo?utm_source=Wijmo-In-App&utm_medium=Click-to-Site&utm_campaign=Wijmo-User-Analysis">create a license</a> online. Otherwise, you can <a target="_blank" rel="noopener" href="https://www.grapecity.com/wijmo/request-trial-key?utm_source=Wijmo-In-App&utm_medium=Click-to-Site&utm_campaign=Wijmo-User-Analysis">generate a 30-day license</a> for free. For further assistance, contact GrapeCity: <a href="mailto:us.sales@grapecity.com">us.sales@grapecity.com</a>.',hdr:"Wijmo License",cls:"CLOSE"},hi={};function ci(t,e){var i=We._wme;if(!(i&&he(document.body,i)&&i.offsetWidth&&i.offsetHeight))if(e){var n=ui(t);hi[n]||(hi[n]=!0,function(t,e,i,n){var r=function(t,e){try{e="#"+e;var i=t.indexOf(e);if(i>-1)return{prefix:t.substring(0,i),lic:JSON.parse(bi(t.substr(i+e.length)))}}catch(t){}return null}(t,e.algorithmCode);if(!r)return n();var o=r.lic,s=r.prefix+"#"+e.algorithmCode;if(function(t){for(var e=0,i=5381,n=0,r=t.length-1;r>=0;r--){var o=t.charCodeAt(r);e=o+(e<<6)+(e<<16)-e,i=o+((i<<5)+i),n=o+((n<<5)-n)}var s=e^i^n;return s<0&&(s=~s),s.toString(16).toUpperCase()}(s+JSON.stringify(o.D))!=o.H)return n();var a=window.msCrypto||window.crypto,l=a?a.subtle:null;if(!l||!location.protocol.match(/^https/i))return i(o.D);var h={name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},c={alg:"RS256",e:"AQAB",kty:"RSA",n:xi(e.publicKey)};c=window.msCrypto?Si(JSON.stringify(c)):c;try{Ei(l.importKey("jwk",c,h,!1,["verify"])).then((function(t){var e=function(t){return String.fromCharCode.apply(null,new yi(t))}(Ci(function(t){return btoa(encodeURIComponent(t).replace(/%([0-9A-F]{2})/g,(function(t,e){return String.fromCharCode(parseInt(e,16))})))}(s+JSON.stringify(o.D))));Ei(l.verify(h,t,Ci(o.S),Si(e))).then((function(t){return t?i(o.D):n()}))}),(function(){return i(o.D)}))}catch(t){return i(o.D)}}(e,{algorithmCode:"B0",publicKey:"l6/zrbWoSbcLFwEetFh38rH3ErBZE9H+Cqix3R+wTlfA1wD5B+lUcCQn+EJ60I4RGrm0x1sFjkiLWwB0jAn6BWZv0W4WbqAKriOdeoivxDp1Wmjs3qkEDhvbsjPtfvwx2BHil6o+/tDrdMJQSGs18WZm2PoQLQuL+9VhZ4FNRHUQU3Jtioke/OZEGHJOdYVwvCGalzBad6QFOiVbDBQPePpS3++GJzOxN8SN/7lyS5/IdKiy3WJRaVGkB370+HbN6hKraDfUgReLX26yxRaKC/5aWnGAJ2NnWLoGyAGRcwT9dVjo4bcAZNrrA0U9JVKQxaSskhdv2p49XzJkltXx5w=="},(function(i){pi(t,e,i),delete hi[n]}),(function(){pi(t,e,null),delete hi[n]})))}else pi(t,null,null)}function ui(t){return t._getProductInfo().split(",")[0]}function di(t){return t._getProductInfo().split(",")[1]}function pi(t,e,i){var n=Te.Licensing||li,r=null;i?function(t,e){if(e.Exp){var i=e.Exp,n=new Date(parseInt(i.substr(0,4))||0,parseInt(i.substr(4,2))-1||0,parseInt(i.substr(6,2))||0);if(Math.ceil((n.valueOf()-Date.now())/864e5)<=0)return!1}return!0}(0,i)?function(t,e){var i=e.Anl?e.Anl.ver:null,n="5.20221.842";return!i||parseInt(i.replace("v",""))+10>=parseInt(n.split(".")[1])}(0,i)?function(t,e){if(gi()||!e.Dms)return!0;for(var i=location.hostname,n=e.Dms.split(","),r=0;r<n.length;r++)if(fi(i,n[r]))return!0;return!1}(0,i)?function(t,e){var i=ui(t);if(i&&i.length>=4)for(var n=0;n<e.Prd.length;n++)if(e.Prd[n].C.indexOf(i)>-1)return!0;return!1}(t,i)?_i(0,i)&&(r=n.evl):r=n.prd:r=n.dmn:r=n.ver:r=n.exp:r=e?n.lic:n.mss,r&&function(t,e,i){if(e=mi(t,e,i),!hi[" "]&&!gi()&&!_i(0,i)){hi[" "]=!0;var n=Te.Licensing||li,r=ae('<div style="position:fixed;background:rgba(0,0,0,0.3);left:0;top:0;width:100%;height:100%;font-family: sans-serif;z-index:10000;"><div style="position:relative;overflow:auto;background:white;width:450px;padding:36pt;left:50%;top:50%;transform:translate(-50%,-50%)"><div><p style="font-size:150%;font-weight:bold">'+n.hdr+"</p><p>"+e+'</p></div><div style="text-align:right;margin-top:24pt"><button style="border:none;background:rgba(158,158,158,.2);padding:8px 16px">'+n.cls+"</button></div></div></div>",document.body);r.addEventListener("click",(function(t){t.target instanceof HTMLButtonElement&&te(r)}))}if(!We._wme){var o=ae('<div><a href="'+function(){switch(Te.Globalize.name){case"ja":return"https://www.grapecity.co.jp/developer/support/wijmo-license";case"ko":return"https://www.grapecity.co.kr/wijmojs#price";default:return"https://www.grapecity.com/licensing/wijmo?utm_source=Wijmo-In-App&utm_medium=Click-to-Site&utm_campaign=Wijmo-User-Analysis"}}()+'" target="_blank" rel="noopener">'+mi(t)+"</a></div>"),s={position:"fixed",display:"block",visibility:"visible",background:"rgba(240,240,240,.9)",padding:"8px 12px",margin:"6px",fontFamily:"sans-serif",fontSize:"14pt",fontWeight:"bold",zIndex:1e4,opacity:.8,height:"auto",width:"auto",transform:"none"};switch(Math.round(100*Math.random())%3){case 0:s.right=s.bottom=0;break;case 1:s.left=s.bottom=0;break;case 2:s.right=s.top=0}fe(o,s),document.body.appendChild(o),We._wme=o,function(t,e){var i,n=ae(e);n.className="wj-tooltip",fe(n,{pointerEvents:"auto",padding:"10px",margin:"6px"}),[t,n].forEach((function(t){t.addEventListener("mouseenter",(function(){return o(!0)})),t.addEventListener("mouseleave",(function(){return o(!1)}))}));var r=0;function o(e){r+=e?1:-1,i&&clearTimeout(i),i=setTimeout((function(){i=null,1==r?ti(n,t.getBoundingClientRect()):r<1&&ei(n)}),500)}}(o,e)}}(t,r+="<br/><br/>"+n.ctc,i)}function fi(t,e){var i="^"+e.replace(/\./g,"\\.").replace(/\*/g,"(.*)")+"$",n=new RegExp(i,"i").test(t);return n||"*."!=e.substr(0,2)?n:fi(t,e.substr(2))}function _i(t,e){return!!e&&e.Evl}function gi(){var t=location,e=atob("Xih8bG9jYWxob3N0fGZpZGRsZS5qc2hlbGwubmV0fHJ1bi5wbG5rci5jb3xzLmNvZGVwZW4uaW98bnVsbC5qc2Jpbi5jb218Lio/LnN0YWNrYmxpdHouaW98MTI3LjAuMC4xfFt3LV0rLmxvY2FsfFt3LV0rfDo6MSkk");return"file:"==t.protocol||new RegExp(e,"i").test(t.hostname)}function mi(t,e,i){(!e||e.trim().length<15)&&(e=(Te.Licensing||li).evl),(!e||e.trim().length<15)&&(e=atob("V2lqbW8gRXZhbHVhdGlvbiBWZXJzaW9uICh7dmVyc2lvbn0p"));var n=null;if(i&&i.Exp){var r=i.Exp;n=new Date(parseInt(r.substr(0,4))||0,parseInt(r.substr(4,2))-1||0,parseInt(r.substr(6,2))||0)}return vt(e,{version:"5.20221.842",domain:location.hostname,control:di(t),licVer:i&&i.Anl?"5."+i.Anl.ver.replace("v","")+".*":null,licDomain:i?i.Dms:null,expDate:n})}var yi="undefined"==typeof window?null:window.Uint8Array||window.TypedArray;function bi(t){if(!t)return"";var e=function(t){for(var e=t.split(""),i=e.length-5;i>=0;i--)vi(e,i+1,i+3,wi),vi(e,i,i+2,wi);return e.join("")}(t);e=function(t){return t.split("").reverse().join("")}(e);var i=Math.ceil(e.length/2);return function(t){for(var e=atob(t),i="",n=0;n<e.length;n++)i+="%"+("00"+e.charCodeAt(n).toString(16)).slice(-2);return decodeURIComponent(i)}(e=(e=(e=e.substr(i)+e.substr(0,i)).replace("#","=")).replace("&","=="))}function vi(t,e,i,n){t.length>1&&t.splice(i,1,n(t.splice(e,1,n(t[i]))[0]))}function wi(t){return function(t,e){var i=t.charCodeAt(0);return i>=65&&i<=90?t.toLowerCase():i>=97&&i<=122?t.toUpperCase():i>=48&&i<=57?String.fromCharCode(48+(i-48+10-1)%10):t}(t)}function Ci(t){for(var e=atob(t),i=e.length,n=new yi(i),r=0;r<i;r++)n[r]=e.charCodeAt(r);return n.buffer}function xi(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/\=+$/,"")}function Si(t){for(var e=new ArrayBuffer(t.length),i=new yi(e),n=0,r=t.length;n<r;n++)i[n]=t.charCodeAt(n);return e}function Ei(t){return"oncomplete"in t&&(t.then=function(e,i){t.resolve=e,t.reject=i},t.oncomplete=function(e){t.resolve(t.result)},t.onerror=function(e){t.reject()}),t}}}]);